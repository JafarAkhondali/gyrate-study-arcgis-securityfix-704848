{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/support/kmlUtils.js","webpack:///./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js","webpack:///./node_modules/@arcgis/core/layers/support/KMLSublayer.js","webpack:///./node_modules/@arcgis/core/layers/KMLLayer.js"],"names":["c","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","o","t","folders","r","slice","s","Map","n","i","a","f","l","featureCollection","layers","forEach","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","e","id","networkLinkIds","P","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","map","type","fullExtent","j","u","sublayers","extent","g","findCredential","token","kmlServiceUrl","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","read","length","indexOf","visible","parentFolderId","unshift","attributes","h","some","networkLink","async","b","fromJSON","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","geometry","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","WGS84","H","m","Math","min","max","M","x","isFinite","I","y","N","sqrt","p","F","z","E","R","V","Y","_","q","w","A","B","D","O","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","k","v","J","C","EventedMixin","super","arguments","this","_sublayersHandles","description","title","sourceJSON","then","load","viewFormat","_fetchService","_get","href","ofType","addMany","layer","emit","notifyChange","addResolvingPromise","Promise","resolve","parent","remove","on","item","_set","visibility","outSpatialReference","refreshInterval","data","prototype","readOnly","value","json","write","allowNull","source","reader","L","_visibleFolders","allSublayers","root","rootCollectionNames","getChildrenFunction","path","legendEnabled","operationalLayerType","watch","visibleFolders","toArray","shift","originOf","_recomputeFullExtent","loadFromPortal","supportedTypes","destroy","resourceInfo","ssl","origin","clone","items","union","String","origins","ignoreOrigin"],"mappings":"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","file":"js/chunk-70b2ed33.55498a2d.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../core/lang.js\";import o from\"../../config.js\";import{addQueryParameters as t}from\"../../core/urlUtils.js\";import r from\"../../geometry/SpatialReference.js\";import{getBoundsXYZ as s}from\"../../geometry/support/boundsUtils.js\";import n from\"../../PopupTemplate.js\";import{id as i}from\"../../kernel.js\";import a from\"../../request.js\";import{fromJSON as f}from\"../../renderers/support/jsonUtils.js\";import l from\"../../tasks/support/FeatureSet.js\";import{equals as u,NEGATIVE_INFINITY as p,create as m,expandWithAABB as y}from\"../../geometry/support/aaBoundingBox.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(o){const t=o.folders||[],r=t.slice(),s=new Map,n=new Map,i=new Map,a=new Map,f=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:a};(o.featureCollection&&o.featureCollection.layers||[]).forEach((o=>{const t=e(o);t.featureSet.features=[];const r=o.featureSet.geometryType;s.set(r,t);const f=o.layerDefinition.objectIdField;\"esriGeometryPoint\"===r?G(n,f,o.featureSet.features):\"esriGeometryPolyline\"===r?G(i,f,o.featureSet.features):\"esriGeometryPolygon\"===r&&G(a,f,o.featureSet.features)})),o.groundOverlays&&o.groundOverlays.forEach((e=>{f.set(e.id,e)})),t.forEach((e=>{e.networkLinkIds.forEach((t=>{const s=P(t,e.id,o.networkLinks);s&&r.push(s)}))})),r.forEach((o=>{o.featureInfos&&(o.points=e(s.get(\"esriGeometryPoint\")),o.polylines=e(s.get(\"esriGeometryPolyline\")),o.polygons=e(s.get(\"esriGeometryPolygon\")),o.mapImages=[],o.featureInfos.map((e=>{switch(e.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[e.type].get(e.id);t&&o[c[e.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=f.get(e.id);t&&o.mapImages.push(t);break}}})),o.fullExtent=j([o]))}));const u=j(r);return{folders:t,sublayers:r,extent:u}}function g(e,r,s,n){const f=i&&i.findCredential(e);e=t(e,{token:f&&f.token});const l=o.kmlServiceUrl;return a(l,{query:{url:e,model:\"simple\",folders:\"\",refresh:0!==s||void 0,outSR:JSON.stringify(r)},responseType:\"json\",signal:n})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,a=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&a.indexOf(i.id)>-1&&(i.visible=-1!==r.indexOf(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=l.fromJSON(e.featureSet).features,t=e.layerDefinition,r=f(t.drawingInfo.renderer),s=n.fromJSON(e.popupInfo),i=[];for(const n of o){const e=await r.getSymbolAsync(n);n.symbol=e,n.popupTemplate=s,n.visible=!0,i.push(n)}return i}function j(e){const o=m(),t=m(p);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)s(o,e.geometry),y(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)s(o,e.geometry),y(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)s(o,e.geometry),y(t,o);if(r.mapImages)for(const e of r.mapImages)s(o,e.extent),y(t,o)}return u(t,p)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:r.WGS84}}export{j as computeExtent,g as fetchService,b as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../core/maybe.js\";import t from\"../Extent.js\";import{create as r}from\"./aaBoundingRect.js\";function i(n){return n}function a(n=H){return i([n[0],n[1],n[2],n[3],n[4],n[5]])}function u(n,t,r,i,u,e,m=a()){return m[0]=n,m[1]=t,m[2]=r,m[3]=i,m[4]=u,m[5]=e,m}function e(n,t=a()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.zmin,t[3]=n.xmax,t[4]=n.ymax,t[5]=n.zmax,t}function m(n,r){const i=isFinite(n[2])||isFinite(n[5]);return new t(i?{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],zmin:n[2],zmax:n[5],spatialReference:r}:{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],spatialReference:r})}function o(n,t,r=a()){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r}function f(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[3]),n[4]=Math.max(n[4],t[4]),n[5]=Math.max(n[5],t[5])}function c(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[3]=Math.max(n[3],t[2]),n[4]=Math.max(n[4],t[3])}function h(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[0]),n[4]=Math.max(n[4],t[1]),n[5]=Math.max(n[5],t[2])}function M(n,t,r=0,i=t.length/3){let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];for(let c=0;c<i;c++)a=Math.min(a,t[r+3*c]),u=Math.min(u,t[r+3*c+1]),e=Math.min(e,t[r+3*c+2]),m=Math.max(m,t[r+3*c]),o=Math.max(o,t[r+3*c+1]),f=Math.max(f,t[r+3*c+2]);n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function x(n,t,r,i){n[0]=Math.min(n[0],n[0]+t),n[3]=Math.max(n[3],n[3]+t),n[1]=Math.min(n[1],n[1]+r),n[4]=Math.max(n[4],n[4]+r),n[2]=Math.min(n[2],n[2]+i),n[5]=Math.max(n[5],n[5]+i)}function s(n,t,r){const i=t.length;let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];if(r)for(let c=0;c<i;c++){const n=t[c];a=Math.min(a,n[0]),u=Math.min(u,n[1]),e=Math.min(e,n[2]),m=Math.max(m,n[0]),o=Math.max(o,n[1]),f=Math.max(f,n[2])}else for(let c=0;c<i;c++){const n=t[c];a=Math.min(a,n[0]),u=Math.min(u,n[1]),m=Math.max(m,n[0]),o=Math.max(o,n[1])}n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function l(n){for(let t=0;t<6;t++)if(!isFinite(n[t]))return!1;return!0}function I(n){return n[0]>=n[3]?0:n[3]-n[0]}function y(n){return n[1]>=n[4]?0:n[4]-n[1]}function N(n){return n[2]>=n[5]?0:n[5]-n[2]}function g(n){const t=I(n),r=N(n),i=y(n);return Math.sqrt(t*t+r*r+i*i)}function p(n,t=[0,0,0]){return t[0]=n[0]+I(n)/2,t[1]=n[1]+y(n)/2,t[2]=n[2]+N(n)/2,t}function F(n,t=[0,0,0]){return t[0]=I(n),t[1]=y(n),t[2]=N(n),t}function z(n){return Math.max(I(n),N(n),y(n))}function E(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[0]<=n[3]&&t[1]<=n[4]&&t[2]<=n[5]}function T(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[2]>=n[2]-r&&t[0]<=n[3]+r&&t[1]<=n[4]+r&&t[2]<=n[5]+r}function b(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[3]<=n[3]&&t[4]<=n[4]&&t[5]<=n[5]}function j(n,t){return Math.max(t[0],n[0])<=Math.min(t[3],n[3])&&Math.max(t[1],n[1])<=Math.min(t[4],n[4])&&Math.max(t[2],n[2])<=Math.min(t[5],n[5])}function R(t,r){return!!n(r)||j(t,r)}function V(n,t,r,i,a=n){return a[0]=n[0]+t,a[1]=n[1]+r,a[2]=n[2]+i,a[3]=n[3]+t,a[4]=n[4]+r,a[5]=n[5]+i,a}function Y(n,t,r=n){const i=n[0]+I(n)/2,a=n[1]+y(n)/2,u=n[2]+N(n)/2;return r[0]=i+(n[0]-i)*t,r[1]=a+(n[1]-a)*t,r[2]=u+(n[2]-u)*t,r[3]=i+(n[3]-i)*t,r[4]=a+(n[4]-a)*t,r[5]=u+(n[5]-u)*t,r}function _(n,t){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function d(n,t){return t[0]=n[3],t[1]=n[4],t[2]=n[5],t}function q(n,t,r=n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==n&&(r[3]=n[3],r[4]=n[4],r[5]=n[5]),r}function w(n,t,r=n){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),n}function A(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function B(n){return n?A(n,D):a(D)}function G(n,t){return t||(t=r()),t[0]=n[0],t[1]=n[1],t[2]=n[3],t[3]=n[4],t}function O(n,t){return n[0]=t[0],n[1]=t[1],n[2]=Number.NEGATIVE_INFINITY,n[3]=t[2],n[4]=t[3],n[5]=Number.POSITIVE_INFINITY,n}function P(n){return 6===n.length}function S(n){return 0===I(n)&&0===y(n)&&0===N(n)}function k(t,r,i){if(n(t)||n(r))return t===r;if(!P(t)||!P(r))return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],r[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function v(n,t,r,i,a,e){return u(n,t,r,i,a,e,J)}const C=i([-1/0,-1/0,-1/0,1/0,1/0,1/0]),D=i([1/0,1/0,1/0,-1/0,-1/0,-1/0]),H=i([0,0,0,0,0,0]),J=a();export{D as NEGATIVE_INFINITY,C as POSITIVE_INFINITY,H as ZERO,l as allFinite,p as center,b as contains,E as containsPoint,T as containsPointWithMargin,a as create,y as depth,g as diameter,B as empty,k as equals,f as expandWithAABB,M as expandWithBuffer,s as expandWithNestedArray,x as expandWithOffset,c as expandWithRect,h as expandWithVec3,e as fromExtent,o as fromMinMax,O as fromRect,u as fromValues,d as getMax,_ as getMin,N as height,j as intersects,R as intersectsClippingArea,P as is,S as isPoint,z as maximumDimension,V as offset,Y as scale,A as set,w as setMax,q as setMin,F as size,m as toExtent,G as toRect,I as width,v as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import{stripHTML as t}from\"../../core/string.js\";import\"../../core/Logger.js\";import{ensureType as s}from\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{cast as i}from\"../../core/accessorSupport/decorators/cast.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupportMixin as n}from\"../../core/JSONSupport.js\";import u from\"../../geometry/Extent.js\";import\"../../geometry.js\";import p from\"../../core/Evented.js\";import y from\"../../core/Collection.js\";import c from\"../../core/Loadable.js\";import{whenOnce as h,whenTrueOnce as m}from\"../../core/watchUtils.js\";import{computeExtent as d,sublayersFromJSON as b,fetchService as f,parseKML as v}from\"./kmlUtils.js\";var j;let S=j=class extends(p.EventedMixin(n(c))){constructor(){super(...arguments),this._sublayersHandles=null,this.description=null,this.id=null,this.networkLink=null,this.title=null,this.sourceJSON=null,this.fullExtent=null}initialize(){h(this,\"networkLink\").then((()=>m(this,\"visible\"))).then((()=>this.load()))}load(e){if(!this.networkLink)return;if(this.networkLink.viewFormat)return;const t=r(e)?e.signal:null,o=this._fetchService(this._get(\"networkLink\").href,t).then((e=>{const r=d(e.sublayers);this.fullExtent=u.fromJSON(r),this.sourceJSON=e;const t=s(y.ofType(j),b(j,e));this.sublayers?this.sublayers.addMany(t):this.sublayers=t,this.layer.emit(\"sublayer-update\"),this.layer&&this.layer.notifyChange(\"visibleSublayers\")}));return this.addResolvingPromise(o),Promise.resolve(this)}set sublayers(e){const r=this._get(\"sublayers\");r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this._sublayersHandles.forEach((e=>e.remove())),this._sublayersHandles=null),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this._sublayersHandles=[e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))]),this._set(\"sublayers\",e)}castSublayers(e){return s(y.ofType(j),e)}get visible(){return this._get(\"visible\")}set visible(e){this._get(\"visible\")!==e&&(this._set(\"visible\",e),this.layer&&this.layer.notifyChange(\"visibleSublayers\"))}readVisible(e,r){return!!r.visibility}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}_fetchService(e,r){return f(e,this.layer.outSpatialReference,this.layer.refreshInterval,r).then((e=>v(e.data)))}};e([o()],S.prototype,\"description\",void 0),e([o()],S.prototype,\"id\",void 0),e([o({readOnly:!0,value:null})],S.prototype,\"networkLink\",void 0),e([o({json:{write:{allowNull:!0}}})],S.prototype,\"parent\",void 0),e([o({value:null,json:{write:{allowNull:!0}}})],S.prototype,\"sublayers\",null),e([i(\"sublayers\")],S.prototype,\"castSublayers\",null),e([o({value:null,json:{read:{source:\"name\",reader:e=>t(e)}}})],S.prototype,\"title\",void 0),e([o({value:!0})],S.prototype,\"visible\",null),e([l(\"visible\",[\"visibility\"])],S.prototype,\"readVisible\",null),e([o()],S.prototype,\"sourceJSON\",void 0),e([o({value:null})],S.prototype,\"layer\",null),e([o({type:u})],S.prototype,\"fullExtent\",void 0),S=j=e([a(\"esri.layers.support.KMLSublayer\")],S);var g=S;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as i}from\"../core/accessorSupport/decorators/writer.js\";import{getFilename as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import a from\"../geometry/SpatialReference.js\";import p from\"../geometry/Extent.js\";import\"../geometry.js\";import n from\"../core/Collection.js\";import u from\"../core/CollectionFlattener.js\";import y from\"./Layer.js\";import{MultiOriginJSONMixin as m}from\"../core/MultiOriginJSONSupport.js\";import{url as c}from\"./support/commonProperties.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as d}from\"./mixins/BlendLayer.js\";import{PortalLayer as f}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as b}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as j}from\"./mixins/ScaleRangeLayer.js\";import{sublayersFromJSON as v,fetchService as g,parseKML as S}from\"./support/kmlUtils.js\";import x from\"./support/KMLSublayer.js\";const L=[\"kml\",\"xml\"];let E=class extends(d(b(j(h(f(m(y))))))){constructor(...e){super(...e),this._visibleFolders=[],this.allSublayers=new u({root:this,rootCollectionNames:[\"sublayers\"],getChildrenFunction:e=>e.sublayers}),this.outSpatialReference=a.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType=\"KML\",this.sublayers=null,this.type=\"kml\",this.url=null}initialize(){this.watch(\"sublayers\",((e,r)=>{r&&r.forEach((e=>{e.parent=null,e.layer=null})),e&&e.forEach((e=>{e.parent=this,e.layer=this}))}),!0),this.on(\"sublayer-update\",(()=>this.notifyChange(\"fullExtent\")))}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}readSublayersFromItemOrWebMap(e,r){this._visibleFolders=r.visibleFolders}readSublayers(e,r,t){return v(x,r,t,this._visibleFolders)}writeSublayers(e,r){const t=[],o=e.toArray();for(;o.length;){const e=o[0];e.networkLink||(e.visible&&t.push(e.id),e.sublayers&&o.push(...e.sublayers.toArray())),o.shift()}r.visibleFolders=t}get title(){const e=this._get(\"title\");return e&&\"defaults\"!==this.originOf(\"title\")?e:this.url?l(this.url,L)||\"KML\":e||\"\"}set title(e){this._set(\"title\",e)}get visibleSublayers(){const e=this.sublayers,r=[],t=e=>{e.visible&&(r.push(e),e.sublayers&&e.sublayers.forEach(t))};return e&&e.forEach(t),r}get fullExtent(){return this._recomputeFullExtent()}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"KML\"]},e).then((()=>this._fetchService(t)))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}async _fetchService(e){const r=await Promise.resolve().then((()=>this.resourceInfo?{ssl:!1,data:this.resourceInfo}:g(this.url,this.outSpatialReference,this.refreshInterval,e))),t=S(r.data);t&&this.read(t,{origin:\"service\"})}_recomputeFullExtent(){let e=null;this.extent&&(e=this.extent.clone());const r=t=>{if(t.sublayers)for(const o of t.sublayers.items)r(o),o.visible&&o.fullExtent&&(e?e.union(o.fullExtent):e=o.fullExtent.clone())};return r(this),e}};e([t({readOnly:!0})],E.prototype,\"allSublayers\",void 0),e([t({type:a})],E.prototype,\"outSpatialReference\",void 0),e([t({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],E.prototype,\"path\",void 0),e([t({readOnly:!0,json:{read:!1,write:!1}})],E.prototype,\"legendEnabled\",void 0),e([t({type:[\"show\",\"hide\",\"hide-children\"]})],E.prototype,\"listMode\",void 0),e([t({type:[\"KML\"]})],E.prototype,\"operationalLayerType\",void 0),e([t({})],E.prototype,\"resourceInfo\",void 0),e([t({type:n.ofType(x),json:{write:{ignoreOrigin:!0}}})],E.prototype,\"sublayers\",void 0),e([o([\"web-map\",\"portal-item\"],\"sublayers\",[\"visibleFolders\"])],E.prototype,\"readSublayersFromItemOrWebMap\",null),e([o(\"service\",\"sublayers\",[\"sublayers\"])],E.prototype,\"readSublayers\",null),e([i(\"sublayers\")],E.prototype,\"writeSublayers\",null),e([t({readOnly:!0,json:{read:!1}})],E.prototype,\"type\",void 0),e([t({json:{origins:{\"web-map\":{read:{source:\"title\"}}},write:{ignoreOrigin:!0}}})],E.prototype,\"title\",null),e([t(c)],E.prototype,\"url\",void 0),e([t({readOnly:!0})],E.prototype,\"visibleSublayers\",null),e([t({type:p})],E.prototype,\"extent\",void 0),e([t()],E.prototype,\"fullExtent\",null),E=e([s(\"esri.layers.KMLLayer\")],E);var w=E;export default w;\n"],"sourceRoot":""}