{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/chunks/quickselect.js","webpack:///./node_modules/@arcgis/core/layers/graphics/centroid.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/IntegratedMeshLayerView3D.js"],"names":["r","o","t","a","f","i","length","n","c","e","h","Math","log","u","exp","s","sqrt","max","floor","min","M","m","v","exports","I","l","lengths","N","originPosition","coords","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","g","push","sort","b","E","super","arguments","this","lodFactor","_elevationContext","_isIntegratedMesh","_supportsLabeling","drapeTargetType","_overlayTexOffset","_overlayTexScale","_overlayTextures","_overlayHighlights","_overlayNormals","_forAllNodes","_collection","updateMaterial","objectHandle","_updateMaterialOverlay","overlayColorInner","overlayColorOuter","overlayHighlightInner","overlayHighlightOuter","overlayNormalInner","overlayNormalOuter","overlayTexOffset","overlayTexScale","updatingHandles","add","layer","_loadModifications","sourceLayer","canResume","_controller","rootNodeVisible","handles","remove","modifications","_modifications","addOnCollectionChange","toArray","prototype","aliasOf","readOnly","_"],"mappings":"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","file":"js/chunk-553f6a54.c7a21a0c.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as o}from\"./_commonjsHelpers.js\";var r=o((function(o){var r;void 0!==(r=function(){function o(o,t,a,f,i){r(o,t,a||0,f||o.length-1,i||n)}function r(o,n,a,f,i){for(;f>a;){if(f-a>600){var c=f-a+1,e=n-a+1,h=Math.log(c),u=.5*Math.exp(2*h/3),s=.5*Math.sqrt(h*u*(c-u)/c)*(e-c/2<0?-1:1);r(o,n,Math.max(a,Math.floor(n-e*u/c+s)),Math.min(f,Math.floor(n+(c-e)*u/c+s)),i)}var M=o[n],m=a,v=f;for(t(o,a,n),i(o[f],M)>0&&t(o,a,f);m<v;){for(t(o,m,v),m++,v--;i(o[m],M)<0;)m++;for(;i(o[v],M)>0;)v--}0===i(o[a],M)?t(o,a,v):t(o,++v,f),v<=n&&(a=v+1),n<=v&&(f=v-1)}}function t(o,r,t){var n=o[r];o[r]=o[t],o[t]=n}function n(o,r){return o<r?-1:o>r?1:0}return o}())&&(o.exports=r)}));export{r as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(t,I,o,u,l){if(!I||!I.lengths.length)return null;const N=\"upperLeft\"===(null==l?void 0:l.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:i,coords:T}=I,h=n(o,u);let g=0;for(const n of i){const t=e(f,T,g,n,o,u,N);t&&c.push(t),g+=n*h}if(c.sort(((n,t)=>{let e=N*n[2]-N*t[2];return 0===e&&o&&(e=n[4]-t[4]),e})),c.length){let n=6*c[0][2];s[0]=c[0][0]/n,s[1]=c[0][1]/n,o&&(n=6*c[0][4],s[2]=0!==n?c[0][3]/n:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const n=I.lengths[0]?r(T,0,i[0],o,u):null;if(!n)return null;s[0]=n[0],s[1]=n[1],o&&n.length>2&&(s[2]=n[2])}return t}function e(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,b=I-1;n<b;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function r(t,e,r,N,s){const c=n(N,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,b=r-1;n<b;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],b=t[i+2],m=N?o(n,e,r,s,c,b):I(n,e,s,c);if(m)if(T+=m,N){const t=l(n,e,r,s,c,b);h+=m*t[0],g+=m*t[1],E+=m*t[2]}else{const t=u(n,e,s,c);h+=m*t[0],g+=m*t[1]}}return T>0?N?[h/T,g/T,E/T]:[h/T,g/T]:r>0?N?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function I(n,t,e,r){const I=e-n,o=r-t;return Math.sqrt(I*I+o*o)}function o(n,t,e,r,I,o){const u=r-n,l=I-t,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function u(n,t,e,r){return[n+.5*(e-n),t+.5*(r-t)]}function l(n,t,e,r,I,o){return[n+.5*(r-n),t+.5*(I-t),e+.5*(o-e)]}export{t as getCentroidOptimizedGeometry,r as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as r,isNone as o}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../Graphic.js\";import{area as a,width as l,height as n}from\"../../../geometry/support/aaBoundingRect.js\";import{b as h,a as y}from\"../../../chunks/vec4f64.js\";import{LayerView3D as p}from\"./LayerView3D.js\";import{updatingProgress as c}from\"./support/layerViewUpdatingProperties.js\";import d from\"../../layers/LayerView.js\";import{I3SMeshView3D as u}from\"./I3SMeshView3D.js\";const v=.2;let m=class extends(u(p(d))){constructor(){super(...arguments),this.lodFactor=1,this._elevationContext=\"im\",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=1,this._overlayTexOffset=h(-1,-1,-1,-1),this._overlayTexScale=y(),this._overlayTextures=[null,null],this._overlayHighlights=[null,null],this._overlayNormals=[null,null]}get progressiveLoadFactor(){return this.lodFactor>=1?v:1}setDrapingTextures(e,o,t,s,i){r(t)&&a(o)>0?(this._overlayTextures[e]=t,this._overlayHighlights[e]=s,this._overlayNormals[e]=i,this._overlayTexOffset[2*e]=-o[0]/l(o),this._overlayTexOffset[2*e+1]=-o[1]/n(o),this._overlayTexScale[2*e]=1/l(o),this._overlayTexScale[2*e+1]=1/n(o)):(this._overlayTextures[e]=null,this._overlayHighlights[e]=null,this._overlayNormals[e]=null,this._overlayTexOffset[2*e]=-1,this._overlayTexOffset[2*e+1]=-1,this._overlayTexScale[2*e]=0,this._overlayTexScale[2*e+1]=0),this._forAllNodes((e=>r(e)&&this._collection.updateMaterial(e.objectHandle,(e=>this._updateMaterialOverlay(e)))))}_updateMaterialOverlay(e){e.overlayColorInner=this._overlayTextures[0],e.overlayColorOuter=this._overlayTextures[1],e.overlayHighlightInner=this._overlayHighlights[0],e.overlayHighlightOuter=this._overlayHighlights[1],e.overlayNormalInner=this._overlayNormals[0],e.overlayNormalOuter=this._overlayNormals[1],e.overlayTexOffset=this._overlayTexOffset,e.overlayTexScale=this._overlayTexScale}initialize(){this.updatingHandles.add(this.layer,\"modifications\",(()=>this._loadModifications()),2)}destroy(){}_createLayerGraphic(){const e=new i;return e.layer=this.layer,e.sourceLayer=this.layer,e}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove(\"modifications\"),o(this.layer.modifications))return void(this._modifications=[]);const e=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange(e,(()=>this._modifications=e.toArray()),2),\"modifications\")}};e([t()],m.prototype,\"layer\",void 0),e([t({aliasOf:\"layer\"})],m.prototype,\"i3slayer\",void 0),e([t()],m.prototype,\"suspended\",void 0),e([t(c)],m.prototype,\"updatingProgress\",void 0),e([t({readOnly:!0,aliasOf:\"_controller.updatingProgress\"})],m.prototype,\"updatingProgressValue\",void 0),e([t({readOnly:!0,aliasOf:\"view.qualitySettings.sceneService.integratedMesh.lodFactor\"})],m.prototype,\"lodFactor\",void 0),e([t({readOnly:!0})],m.prototype,\"progressiveLoadFactor\",null),m=e([s(\"esri.views.3d.layers.SceneLayerView3D\")],m);var _=m;export default _;\n"],"sourceRoot":""}