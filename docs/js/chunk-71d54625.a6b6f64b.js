(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71d54625"],{"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var r=n("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"107c":function(t,e,n){var r=n("d039");t.exports=r((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),a=n("825a"),o=n("1d80"),s=n("4840"),c=n("8aa5"),u=n("50c4"),l=n("14c3"),f=n("9263"),d=n("9f7f"),h=n("d039"),p=d.UNSUPPORTED_Y,m=[].push,v=Math.min,y=4294967295,b=!h((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(o(this)),a=void 0===n?y:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,a);var s,c,u,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=new RegExp(t.source,d+"g");while(s=f.call(p,r)){if(c=p.lastIndex,c>h&&(l.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&m.apply(l,s.slice(1)),u=s[0].length,h=c,l.length>=a))break;p.lastIndex===s.index&&p.lastIndex++}return h===r.length?!u&&p.test("")||l.push(""):l.push(r.slice(h)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=o(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,this,t,i,r!==e);if(o.done)return o.value;var f=a(this),d=String(t),h=s(f,RegExp),m=f.unicode,b=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(p?"g":"y"),g=new h(p?"^(?:"+f.source+")":f,b),x=void 0===i?y:i>>>0;if(0===x)return[];if(0===d.length)return null===l(g,d)?[d]:[];var w=0,E=0,O=[];while(E<d.length){g.lastIndex=p?0:E;var I,S=l(g,p?d.slice(E):d);if(null===S||(I=v(u(g.lastIndex+(p?E:0)),d.length))===w)E=c(d,E,m);else{if(O.push(d.slice(w,E)),O.length===x)return O;for(var j=1;j<=S.length-1;j++)if(O.push(S[j]),O.length===x)return O;E=w=I}}return O.push(d.slice(w)),O}]}),!b,p)},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"296f":function(t,e,n){},"2a3a":function(t,e,n){},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),e&&a.length===e)break}catch(c){s=!0,i=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(s)throw i}}return a}}var a=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return r(t)||i(t,e)||Object(a["a"])(t,e)||o()}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),a=n("b622"),o=a("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),a=n("9bdd"),o=n("e95a"),s=n("50c4"),c=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,f,d,h,p=i(t),m="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,b=void 0!==y,g=u(p),x=0;if(b&&(y=r(y,v>2?arguments[2]:void 0,2)),void 0==g||m==Array&&o(g))for(e=s(p.length),n=new m(e);e>x;x++)h=b?y(p[x],x):p[x],c(n,x,h);else for(f=g.call(p),d=f.next,n=new m;!(l=d.call(f)).done;x++)h=b?a(f,y,[l.value,x],!0):l.value,c(n,x,h);return n.length=x,n}},"4fa0":function(t,e,n){"use strict";n("296f")},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),a=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:a.f(t)})}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),a=n("5692"),o=n("7c73"),s=n("69f3").get,c=n("fce3"),u=n("107c"),l=RegExp.prototype.exec,f=a("native-string-replace",String.prototype.replace),d=l,h=function(){var t=/a/,e=/b*/g;return l.call(t,"a"),l.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),p=i.UNSUPPORTED_Y||i.BROKEN_CARET,m=void 0!==/()??/.exec("")[1],v=h||m||p||c||u;v&&(d=function(t){var e,n,i,a,c,u,v,y=this,b=s(y),g=b.raw;if(g)return g.lastIndex=y.lastIndex,e=d.call(g,t),y.lastIndex=g.lastIndex,e;var x=b.groups,w=p&&y.sticky,E=r.call(y),O=y.source,I=0,S=t;if(w&&(E=E.replace("y",""),-1===E.indexOf("g")&&(E+="g"),S=String(t).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==t[y.lastIndex-1])&&(O="(?: "+O+")",S=" "+S,I++),n=new RegExp("^(?:"+O+")",E)),m&&(n=new RegExp("^"+O+"$(?!\\s)",E)),h&&(i=y.lastIndex),a=l.call(w?n:y,S),w?a?(a.input=a.input.slice(I),a[0]=a[0].slice(I),a.index=y.lastIndex,y.lastIndex+=a[0].length):y.lastIndex=0:h&&a&&(y.lastIndex=y.global?a.index+a[0].length:i),m&&a&&a.length>1&&f.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&x)for(a.groups=u=o(null),c=0;c<x.length;c++)v=x[c],u[v[0]]=a[v[1]];return a}),t.exports=d},"9bdd":function(t,e,n){var r=n("825a"),i=n("2a62");t.exports=function(t,e,n,a){try{return a?e(r(n)[0],n[1]):e(n)}catch(o){throw i(t),o}}},"9f7f":function(t,e,n){var r=n("d039"),i=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("d066"),o=n("c430"),s=n("83ab"),c=n("4930"),u=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),h=n("861d"),p=n("825a"),m=n("7b0b"),v=n("fc6a"),y=n("c04e"),b=n("5c6c"),g=n("7c73"),x=n("df75"),w=n("241c"),E=n("057f"),O=n("7418"),I=n("06cf"),S=n("9bf2"),j=n("d1e7"),k=n("9112"),C=n("6eeb"),P=n("5692"),R=n("f772"),A=n("d012"),L=n("90e3"),T=n("b622"),D=n("e538"),N=n("746f"),_=n("d44e"),z=n("69f3"),F=n("b727").forEach,M=R("hidden"),W="Symbol",$="prototype",U=T("toPrimitive"),q=z.set,G=z.getterFor(W),J=Object[$],V=i.Symbol,B=a("JSON","stringify"),Y=I.f,K=S.f,X=E.f,Q=j.f,H=P("symbols"),Z=P("op-symbols"),tt=P("string-to-symbol-registry"),et=P("symbol-to-string-registry"),nt=P("wks"),rt=i.QObject,it=!rt||!rt[$]||!rt[$].findChild,at=s&&l((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(J,e);r&&delete J[e],K(t,e,n),r&&t!==J&&K(J,e,r)}:K,ot=function(t,e){var n=H[t]=g(V[$]);return q(n,{type:W,tag:t,description:e}),s||(n.description=e),n},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof V},ct=function(t,e,n){t===J&&ct(Z,e,n),p(t);var r=y(e,!0);return p(n),f(H,r)?(n.enumerable?(f(t,M)&&t[M][r]&&(t[M][r]=!1),n=g(n,{enumerable:b(0,!1)})):(f(t,M)||K(t,M,b(1,{})),t[M][r]=!0),at(t,r,n)):K(t,r,n)},ut=function(t,e){p(t);var n=v(e),r=x(n).concat(pt(n));return F(r,(function(e){s&&!ft.call(n,e)||ct(t,e,n[e])})),t},lt=function(t,e){return void 0===e?g(t):ut(g(t),e)},ft=function(t){var e=y(t,!0),n=Q.call(this,e);return!(this===J&&f(H,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(H,e)||f(this,M)&&this[M][e])||n)},dt=function(t,e){var n=v(t),r=y(e,!0);if(n!==J||!f(H,r)||f(Z,r)){var i=Y(n,r);return!i||!f(H,r)||f(n,M)&&n[M][r]||(i.enumerable=!0),i}},ht=function(t){var e=X(v(t)),n=[];return F(e,(function(t){f(H,t)||f(A,t)||n.push(t)})),n},pt=function(t){var e=t===J,n=X(e?Z:v(t)),r=[];return F(n,(function(t){!f(H,t)||e&&!f(J,t)||r.push(H[t])})),r};if(c||(V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=L(t),n=function(t){this===J&&n.call(Z,t),f(this,M)&&f(this[M],e)&&(this[M][e]=!1),at(this,e,b(1,t))};return s&&it&&at(J,e,{configurable:!0,set:n}),ot(e,t)},C(V[$],"toString",(function(){return G(this).tag})),C(V,"withoutSetter",(function(t){return ot(L(t),t)})),j.f=ft,S.f=ct,I.f=dt,w.f=E.f=ht,O.f=pt,D.f=function(t){return ot(T(t),t)},s&&(K(V[$],"description",{configurable:!0,get:function(){return G(this).description}}),o||C(J,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),F(x(nt),(function(t){N(t)})),r({target:W,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=V(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:lt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(t){return O.f(m(t))}}),B){var mt=!c||l((function(){var t=V();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))}));r({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,n){var r,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(r=e,(h(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,B.apply(null,i)}})}V[$][U]||k(V[$],U,V[$].valueOf),_(V,W),A[M]=!0},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),o=!a((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:i})},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c025:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"container",attrs:{id:"viewDiv"}})])}],a=n("6b75");function o(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var c=n("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return o(t)||s(t)||Object(c["a"])(t)||u()}var f=n("3835"),d=n("1da1"),h=(n("d81d"),n("159b"),n("96cf"),n("bc3a")),p=n.n(h),m=n("6d1b"),v=n("8d60"),y=n("f6ad"),b=n("a611"),g=n("5bd5"),x=n("c246"),w=n("ce0b");n("955e");function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}n("ac1f"),n("1276");var j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{xmin:0,ymin:0,xmax:100,ymax:100};O(this,t),this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax}return S(t,[{key:"within",value:function(t){var e=t.x,n=t.y,r=this.xmin,i=this.ymin,a=this.ymax,o=this.xmax;return r<=e&&o>=e&&i<=n&&a>=n}},{key:"intersects",value:function(t){var e=t.xmin,n=t.ymin,r=t.xmax,i=t.ymax,a=Math.abs(this.xmax+this.xmin-e-r),o=Math.abs(this.xmax-this.xmin+r-e),s=Math.abs(this.ymax+this.ymin-n-i),c=Math.abs(this.ymax-this.ymin+i-n);return a<=o&&s<=c}}]),t}(),k=function(){function t(e,n){O(this,t),E(this,"MAX_DEEP",50),this.extent=new j(n.extent),this.bucketLimit=n.bucketLimit||10,this.deep=n.deep||0,this.points=e,this.init()}return S(t,[{key:"init",value:function(){this.split()}},{key:"split",value:function(){this.points.length>this.bucketLimit&&this.createChildren()}},{key:"createChildren",value:function(){var e=this,n=this.extent,r=n.xmin,i=n.ymin,a=n.xmax,o=n.ymax,s=o-i,c=a-r;this.northWest=new t([],{extent:{xmin:r,ymin:i+s/2,xmax:r+c/2,ymax:o},deep:this.deep+1}),this.northEast=new t([],{extent:{xmin:r+c/2,ymin:i+s/2,xmax:a,ymax:o},deep:this.deep+1}),this.southWest=new t([],{extent:{xmin:r,ymin:i,xmax:r+c/2,ymax:i+s/2},deep:this.deep+1}),this.southEast=new t([],{extent:{xmin:r+c/2,ymin:i,xmax:a,ymax:i+s/2},deep:this.deep+1}),this.points.forEach((function(t){e.northWest.isContain(t)?e.northWest.addPoint(t):e.northEast.isContain(t)?e.northEast.addPoint(t):e.southWest.isContain(t)?e.southWest.addPoint(t):e.southEast.isContain(t)&&e.southEast.addPoint(t)})),this.points=[],this.deep>this.MAX_DEEP||(this.northWest.split(),this.northEast.split(),this.southWest.split(),this.southEast.split())}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"isContain",value:function(t){return this.extent.within(t)}},{key:"isIntersects",value:function(t){return this.extent.intersects(t)}},{key:"isLeafNode",value:function(){return!(this.northWest||this.northEast||this.southWest||this.southEast)}},{key:"findPoints",value:function(t){t instanceof j||(t=new j(t));var e=[];function n(r){if(r.isIntersects(t))if(r.points.length>0)r.points.forEach((function(n){t.within(n)&&e.push(n)}));else{var i=r.northWest,a=r.northEast,o=r.southWest,s=r.southEast;i&&i.isIntersects(t)&&n(i),a&&a.isIntersects(t)&&n(a),o&&o.isIntersects(t)&&n(o),s&&s.isIntersects(t)&&n(s)}}return n(this),e}}]),t}(),C=k,P=n("9786"),R={name:"DiyCluster",components:{},data:function(){return{totalNum:0,map:null,view:null,quadTree:null,filterList:[{id:0,count:0,label:"在线",value:"ONLINE",active:!0},{id:1,count:0,label:"离线",value:"OFFLINE",active:!0},{id:2,count:0,label:"未激活",value:"UNACTIVATED",active:!0}]}},mounted:function(){this.initMap()},methods:{initMap:function(){var t=this,e=new m["a"]({basemap:"hybrid"}),n=new b["a"]({container:"viewDiv",map:e,zoom:11,center:[113.54735115356235,22.78385103258788]}),r=new y["a"]({view:n});n.ui.add(r,{position:"bottom-right"}),n.when(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initBind(),e.next=3,t.getData();case 3:return t.initClusterLayer(),console.time("initClusterClass"),e.next=7,t.initClusterClass();case 7:console.timeEnd("initClusterClass"),t.resetCluster();case 9:case"end":return e.stop()}}),e)})))),n.watch("zoom",(function(e){t.view.zoom%1==0&&(console.log("zoom ".concat(t.view.zoom)),t.resetCluster())})),n.on("drag",(function(e){var n=e.action;"end"==n&&t.resetCluster()})),n.on("resize",(function(t){console.log("resize")})),this.map=e,window._view=this.view=n},getData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/study-arcgis/","/static/massiveData.json"));case 2:n=e.sent,r=n.data.data,console.log("数据量 ".concat(r.length)),t.data=r.map((function(t){var e=t.id,n=t.location;return{id:e,x:parseFloat(n["longitude"]),y:parseFloat(n["latitude"])}}));case 6:case"end":return e.stop()}}),e)})))()},initBind:function(){var t=this;this.view.on("click",(function(e){t.view.hitTest(e).then((function(t){if(t.results&&t.results.length){var e=t.results[0].graphic.attributes;console.log("attribute：".concat(JSON.stringify(e)))}}))}))},initClusterClass:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,r,i,a,o,s,c,u,d,h,p,m,v,y,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.view.extent,r=n.xmin,i=n.ymin,a=n.xmax,o=n.ymax,s=P["g"](r,i),c=Object(f["a"])(s,2),u=c[0],d=c[1],h=P["g"](a,o),p=Object(f["a"])(h,2),m=p[0],v=p[1],y=l(t.data),b=new C(y,{extent:{xmin:u,ymin:d,xmax:m,ymax:v},bucketLimit:100}),t.quadTree=b;case 6:case"end":return e.stop()}}),e)})))()},drawGrid:function(t){if(console.log("drawGrid"),!this.asssetLayer){var e=new w["a"]({title:"网格图层",id:"gridLayer",graphics:[]});this.map.add(e),this.asssetLayer=e}this.asssetLayer.removeAll();var n=[];t.forEach((function(t){var e=t.xmin,r=t.ymin,i=t.xmax,a=t.ymax,o=new v["a"]({geometry:{type:"polyline",paths:[[e,r],[i,r],[i,a],[e,a],[e,r]]},symbol:{type:"simple-line",color:"#fff",width:1},attributes:{}});n.push(o)})),this.asssetLayer.addMany(n)},resetCluster:function(){for(var t=this,e=this.view.extent,n=P["g"](e.xmin,e.ymin),r=Object(f["a"])(n,2),i=r[0],a=r[1],o=P["g"](e.xmax,e.ymax),s=Object(f["a"])(o,2),c=s[0],u=s[1],l=10,d=Math.min(u-a,c-i)/l,h=[],p=0;a+d*(p+1)<=u;p++)for(var m=0;i+d*(m+1)<=c;m++)h.push({xmin:i+d*m,xmax:i+d*(m+1),ymin:a+d*p,ymax:a+d*(p+1)});this.drawGrid(h),console.time("findPoints");var v=[];h.forEach((function(e,n){var r=t.quadTree.findPoints(e);if(r.length>0){var i=t.fusePoints(r,n);v.push(i)}})),console.timeEnd("findPoints"),this.updateClusterLayer(v)},fusePoints:function(t,e){var n=0,r=0,i=t.length;return t.forEach((function(t){var e=t.x,i=t.y;n+=e,r+=i})),{x:n/i,y:r/i,count:i,isCluster:i>1,id:e}},initPointLayer:function(){var t=this,e=this.data.map((function(e){return t.createGraphic(e,"point")})),n=new g["default"]({id:"cluster1",title:"聚合图层",outFields:["*"],fields:[{name:"ObjectID",type:"string"},{name:"count",type:"string"},{name:"type",type:"string"}],source:e,visible:!0,objectIdField:"ObjectID",geometryType:"point",renderer:{type:"simple",symbol:{type:"simple-marker",size:"10",color:"#c3ff74",outline:{width:0,color:"#fff"}}}});this.map.add(n),this.clusterLayer=n},initClusterLayer:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=new g["default"]({id:"cluster",title:"聚合图层",outFields:["*"],fields:[{name:"ObjectID",type:"string"},{name:"count",type:"integer"},{name:"id",type:"string"},{name:"isCluster",type:"string"}],source:[],visible:!0,objectIdField:"ObjectID",geometryType:"point",renderer:{type:"unique-value",field:"isCluster",uniqueValueInfos:[{value:"true",symbol:{type:"simple-marker",color:"#f9170b",outline:{width:2,color:"#fff"}}},{value:"false",symbol:{type:"picture-marker",url:"./static/images/svg/camera_m_2.svg"}}],visualVariables:[{type:"size",field:"count",minDataValue:1,maxDataValue:100,minSize:14,maxSize:40}]},labelingInfo:[new x["a"]({labelPlacement:"center-center",labelExpressionInfo:{expression:"IIF($feature.count > 1, $feature.count, '' )"},symbol:{type:"text",color:"#fff",haloSize:1,font:{size:12,weight:"bold"}}})]}),t.map.add(n),t.clusterLayer=n;case 3:case"end":return e.stop()}}),e)})))()},updateClusterLayer:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.clusterLayer,n.next=3,r.queryObjectIds();case 3:return i=n.sent,a=i.map((function(t){return{objectId:t}})),o=t.map((function(t){return e.createGraphic(t,"point")})),n.next=8,r.applyEdits({deleteFeatures:a,addFeatures:o});case 8:n.sent;case 9:case"end":return n.stop()}}),n)})))()},createGraphic:function(t,e){var n;switch(e){case"point":n={longitude:t.x,latitude:t.y};break;case"polygon":n={rings:t.coordinates};break;case"polyline":n={paths:[t.coordinates]};break;default:break}return new v["a"]({attributes:t,geometry:Object.assign({type:e},n)})}}},A=R,L=(n("f380"),n("4fa0"),n("2877")),T=Object(L["a"])(A,r,i,!1,null,"93a34590",null);e["default"]=T.exports},d28b:function(t,e,n){var r=n("746f");r("iterator")},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("9263"),a=n("d039"),o=n("b622"),s=n("9112"),c=o("species"),u=RegExp.prototype;t.exports=function(t,e,n,l){var f=o(t),d=!a((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=d&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!d||!h||n){var p=/./[f],m=e(f,""[t],(function(t,e,n,r,a){var o=e.exec;return o===i||o===u.exec?d&&!a?{done:!0,value:p.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));r(String.prototype,t,m[0]),r(u,f,m[1])}l&&s(u[f],"sham",!0)}},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),a=n("da84"),o=n("5135"),s=n("861d"),c=n("9bf2").f,u=n("e893"),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};u(d,l);var h=d.prototype=l.prototype;h.constructor=d;var p=h.toString,m="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(o(f,t))return"";var n=m?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},e538:function(t,e,n){var r=n("b622");e.f=r},f380:function(t,e,n){"use strict";n("2a3a")},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),a=n("e8b5"),o=n("23cb"),s=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),d=f("slice"),h=l("species"),p=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,l,f=c(this),d=s(f.length),v=o(t,d),y=o(void 0===e?d:e,d);if(a(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(f,v,y);for(r=new(void 0===n?Array:n)(m(y-v,0)),l=0;v<y;v++,l++)v in f&&u(r,l,f[v]);return r.length=l,r}})},fce3:function(t,e,n){var r=n("d039");t.exports=r((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);