{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/symbols/support/defaults3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js","webpack:///./node_modules/@arcgis/core/renderers/support/rendererConversion.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["h","super","arguments","this","_scaleRangeActive","layerScaleRangeVisibilityQuery","handles","layerView","layer","queryGraphicUIDsInExtent","extent","graphicsCore","basemapTerrain","layerScaleEnabled","suspended","updating","e","i","t","s","a","updateScaleRangeActive","r","view","resourceController","scheduler","add","registerTask","SCALE_VISIBILITY","update","needsUpdate","destroy","_set","_setDirty","p","minScale","maxScale","labelingInfo","some","has","o","on","scaleUpdateHandler","remove","ready","queryVisibleScaleRange","finishUpdate","centroid","graphic","geometry","type","getScale","graphicScale","visibleAtLayerScale","graphicVisible","setVisibilityFlag","labelGraphics","length","updateLabelScaleVisibility","deconflictor","setDirty","labeler","_labelClass","visibleAtLabelScale","scale","l","spatialReference","n","getGraphics3DGraphicById","c","x","y","modifyGraphics3DGraphicVisibilities","clearVisibilityFlag","updateAllGraphicsVisibility","constructOnly","prototype","readOnly","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","hasZ","hasM","fromSimpleMarkerSymbol","f","fromSimpleLineSymbol","fromSimpleFillSymbol","u","symbolLayers","material","color","edges","size","S","events","objectIdField","featureAdapter","getAsOptimizedGeometry","Array","z","m","forAllGraphics","getSpatialIndex","forEachInBounds","getBounds","sharedResources","streamDataRequester","elevationProvider","renderer","stage","clippingExtent","renderCoordsHelper","overlaySR","localOriginFactory","featureExpressionInfoContext","screenSizePerspectiveEnabled","slicePlaneEnabled","physicalBasedRenderingEnabled","isAsync","calloutSymbolLayer","symbol","hasVisibleCallout","load","doLoad","abortLoad","createGraphics3DGraphic","createCalloutGraphic","addAuxiliaryGraphic","globalPropertyChanged","_getCalloutGraphicLayer","updateGeometry","renderingInfo","translation","centerOffset","screenOffset","centerOffsetUnits","elevationOffset","materialCollection","_auxiliaryGraphics","graphics3DSymbolLayer","idToState","Map","states","Set","owner","getGraphicId","getGraphics3DGraphicByObjectId","uid","clear","forEach","ensureStateList","push","displaying","isVisible","isDraped","tracking","get","delete","forEachState","emit","set","_index","minX","minY","maxX","maxY","_missing","_boundsByFeature","_addMany","from","values","equals","search","_get","computeExtent","getLogger","j","g","EventedMixin","_layerHandes","intersectLayers","stageLayer","intersector","state","mode","options","store","computeLayerExtent","zmin","zmax","objectChanged","object","elevationInfo","unit","offset","E","toRenderCoords","error","C","R","setAltitude","metadata","isElevationSource","reset","intersect","results","min","getIntersectionPoint","getAltitude","b","lastValidElevationBB","isEmpty","expandExtent","bbMin","bbMax","getBBMin","getBBMax","Math","max","B","getObjects","forAll","fromRenderCoords","aliasOf","context","Re","De","Ue","Ie","Ee","propertiesPool","computedExtent","currentRenderer","rendererHasGeometryOperations","graphicStateTracking","symbolCreationContext","graphics3DGraphics","graphicsDrapedUids","graphicsBySymbol","symbolConversionCache","symbols","graphicsWithoutSymbol","graphicsWaitingForSymbol","_handles","_frameTask","suspendSymbolCleanup","_spatialReference","arcadeOnDemand","rendererChangeAbortController","elevationInfoChangeAbortController","setupAbortController","elevationAlignment","scaleVisibility","filterVisibility","_spatialIndex","extentPadding","_updatingPendingLoadedGraphicsChange","featureStore","objectStates","viewElevationProvider","stageLayerElevationProvider","sharedSymbolResourcesOwnerHandle","whenGraphics3DGraphicRequests","pendingUpdates","numberOfGraphics","numberOfGraphicsProvidingElevation","pendingAdds","pendingRemoves","pendingUpdatesPool","allocator","Oe","deallocator","symbolWarningLogged","geometryWarningLogged","objectIdInvisibleSet","_whenSymbolRemoved","preferredUpdatePolicy","forcedUpdatePolicy","_asyncUpdates","elevationFeatureExpressionEnabled","graphicSymbolSupported","getRenderingInfoWithoutRenderer","_usedMemory","_visible","_startCreateGraphics","maxPendingUpdates","setup","suspendInfo","outsideOfView","updatingRemaining","qualitySettings","graphics3D","minTotalNumberOfFeatures","maxTotalNumberOfFeatures","maxTotalNumberOfPrimitives","averageSymbolComplexity","primitivesPerFeature","drawCallsPerFeature","ceil","d","minimumTotalNumberOfFeatures","maximumTotalNumberOfFeatures","maximumTotalNumberOfPrimitives","maximumNumberOfFeatures","symbolComplexities","numComplexities","estimated","primitivesPerCoordinate","labelsEnabled","memory","bytesPerFeatureLabel","abs","bytesPerFeature","usedMemoryPerGraphic","getSymbolComplexitiesUsedOrRenderer","getSymbolComplexitiesUsed","clone","id","hasLabelingContext","message","getSymbols","backgroundFillSymbol","getSymbolComplexityUsedOrRenderer","complexity","getConvertedSymbol","spatialIndex","signal","initializeStage","sharedSymbolResources","addGraphicsOwner","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","physicallyBasedRenderingEnabled","watch","reschedule","updateLayerVisibility","recreateAllGraphics","updateUpdatePolicy","slicePlaneEnabledChange","pixelRatioChange","physicalBasedRenderingChange","graphicsCollectionChanged","_signalUpdatingDuringAsyncLoadedGraphicsChange","GRAPHICS_CORE","_update","featureReductionChange","notifyChange","rendererChange","abort","abortSetup","abortRendererChange","abortElevationInfoChange","removeGraphicsOwner","reject","allGraphicsDeleted","_stage","isPickable","suspendedOrOutsideOfView","graphicUid","updateGraphicGeometry","updateGraphicVisibility","displayFeatureLimit","je","hideAllGraphics","updateStageLayerVisibility","opacity","_findGraphics3DGraphicByObjectId","_getGraphicObjectID","layerLabelsEnabled","labelingInfoChange","visibilityInfoChange","getFastUpdateStatus","loading","fast","slow","processQueue","_applyPendingUpdates","_updateUserVisibility","visible","Promise","resolve","promise","renderSpatialReference","service","useViewElevation","minDemResolution","minDemResolutionForPoints","resolution","getProjectedBoundingBox","boundingBox","requiresDrapedElevation","getElevation","screenSpaceObjects","then","loadedGraphics","find","whenGraphics3DGraphic","boundsForGraphics3DGraphic","computeAttachmentOrigin","render","num","draped","Le","origin","Ve","indexOf","getSymbolLayerSize","added","removed","property","graphicUpdateVisibleHandler","graphicUpdateGeometryHandler","graphicUpdateSymbolHandler","commit","recreateGraphic","loadStatus","graphics3DSymbol","newValue","expandComputedExtent","oldValue","updateSymbolMapping","diff","graphics3DGraphicPatches","symbolStatePatches","prepareSymbolPatch","_getRenderingInfo","recomputeExtentPadding","asyncUpdates","_cleanupSymbols","recreateGraphics","tmpVec","xmin","ymin","xmax","ymax","elevationInfoChange","forEachGraphics3DSymbol","updateGraphicElevationContext","_recreateSymbol","updateStageLayerElevationProvider","unregister","dispose","register","invalidateSpatialQueryAccelerator","clearSymbolsAndGraphics","tilingScheme","toArray","usedMemory","_conditionalRemove","removeGraphics3DGraphic","removeGraphic","_addDelayed","_addImmediate","_addGraphic","abortController","pushNew","_removeDelayed","_removeImmediate","_removeGraphic","_finishPendingUpdates","warn","done","_startAddRenderingInfo","madeProgress","_getRenderingInfoAsync","getOrCreateGraphics3DSymbol","_beginGraphicUpdate","destroyed","removeUnordered","_endGraphicUpdate","referenced","onRemoveGraphic","getRenderingInfo","getRenderingInfoAsync","hasValidSymbolCreationContext","createGraphics3DSymbol","addGraphics3DGraphic","updateVisibility","addGraphic","setInitialIconVisibilityFlag","initialize","validateRenderer","currentRendererChange","arcadeRequired","arcadeUtils","ensureArcade","hasGeometryOperations","enableGeometryOperations","schedule","arcade","updateUnchangedSymbolMappings","applyRendererDiff","volatileGraphicsUpdated","defaultSymbol","getSymbol","uniqueValueInfos","map","changed","applySymbolSetDiff","unchanged","oldId","newId","calculateUnchangedSymbolMapping","diffHasSymbolChange","applyUniqueValueRendererDiff","Object","keys","isSliceable","Ae","dirty","title","shaderTransformationChanged","graphics","sort","symbolId","numPending","forceUpdatePolicy","missing","pending","dependsOn","declaredClass","isArray","details","filter","join","symbolErrors","unshift","classBreakInfos","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","_initFormat","M","prune","X","Y","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","Function","_","w"],"mappings":"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","file":"js/chunk-66a552f7.752d3ad6.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as i,isNone as t}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import r from\"../../../../core/Accessor.js\";import l from\"../../../../core/Handles.js\";import{Task as n}from\"../../../support/Scheduler.js\";import{scaleBoundsPredicate as c}from\"../../../support/layerViewUtils.js\";let h=class extends r{constructor(){super(...arguments),this._scaleRangeActive=!1,this.layerScaleRangeVisibilityQuery=!1,this.handles=new l,this.layerView=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.extent=null,this.graphicsCore=null,this.basemapTerrain=null,this.layerScaleEnabled=!0,this.suspended=!1,this.updating=!0}setup(e,i,t,s,a){this.layerView=e,this.layer=i,this.queryGraphicUIDsInExtent=t,this.graphicsCore=s,this.basemapTerrain=a,this.updateScaleRangeActive();const r=this.layerView.view.resourceController.scheduler;this.handles.add(r.registerTask(n.SCALE_VISIBILITY,(()=>this.update()),(()=>this.needsUpdate())))}destroy(){this.handles.destroy(),this.handles=null,this.layerView=null,this.extent=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null}needsUpdate(){return!(!this.layerView.view.basemapTerrain||!this.updating)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this._setDirty()}scaleRangeActive(){return this._scaleRangeActive}updateScaleRangeActive(){const e=this.layer;let i=this.layerScaleEnabled&&p(e.minScale,e.maxScale);e.labelingInfo&&!i&&(i=e.labelingInfo.some((e=>e&&p(e.minScale,e.maxScale))));const t=this._scaleRangeActive!==i;return this._scaleRangeActive=i,i&&!this.handles.has(o)&&this.basemapTerrain?(this.handles.add(this.basemapTerrain.on(\"scale-change\",(e=>this.scaleUpdateHandler(e))),o),this.layerScaleEnabled&&this.handles.add(this.basemapTerrain.on(\"tiles-visibility-changed\",(()=>this._setDirty())),o)):!i&&this.handles.has(o)&&this.handles.remove(o),t}update(){const e=this.layerView.view.basemapTerrain;this.extent&&e&&e.ready&&this._scaleRangeActive&&this.layerScaleEnabled?this.layerScaleRangeVisibilityQuery||(this.layerScaleRangeVisibilityQuery=!0,e.queryVisibleScaleRange(this.extent,this.layer.minScale,this.layer.maxScale,(e=>this.finishUpdate(e)))):this.finishUpdate(!0)}finishUpdate(e){this.layerScaleRangeVisibilityQuery=!1,this._set(\"suspended\",!e),this._set(\"updating\",!1)}visibleAtLayerScale(e){return!this.layerScaleEnabled||c(e,this.layer.minScale||0,this.layer.maxScale||0)}visibleAtLabelScale(e,i){return c(e,i.minScale||0,i.maxScale||0)}graphicScale(e){let t;if(i(e.centroid)?t=e.centroid:i(e.graphic.geometry)&&\"point\"===e.graphic.geometry.type&&(t=e.graphic.geometry),t){return this.layerView.view.basemapTerrain?this.layerView.view.basemapTerrain.getScale(t):1}return null}graphicVisible(e){if(!this.layerScaleEnabled)return!0;const i=this.graphicScale(e);return this.visibleAtLayerScale(i)}updateVisibility(e){if(this._scaleRangeActive){const i=this.graphicVisible(e);return e.setVisibilityFlag(1,i,0)}return!1}updateGraphicLabelScaleVisibility(e){if(!this._scaleRangeActive)return!1;if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const i=this.graphicScale(e),t=this.updateLabelScaleVisibility(e,i);return t&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty()),t}updateLabelScaleVisibility(e,i){if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const t=e.labelGraphics[0]._labelClass;if(t&&null!=t.minScale&&null!=t.maxScale){const s=this.visibleAtLabelScale(i,t);if(e.setVisibilityFlag(1,s,1))return!0}return!1}scaleUpdateHandler(e){if(this._setDirty(),this.layerView.suspended)return;const s=e.extent,a=e.scale,r=this.visibleAtLayerScale(a);let l=!1;this.queryGraphicUIDsInExtent(s,e.spatialReference,(e=>{const n=this.graphicsCore.getGraphics3DGraphicById(e);if(t(n))return;const c=n.centroid;i(c)&&(s[0]>c.x||s[1]>c.y||s[2]<c.x||s[3]<c.y)||(n.setVisibilityFlag(1,r,0)&&(l=!0),this.updateLabelScaleVisibility(n,a)&&(l=!0))})),l&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty())}layerMinMaxScaleChangeHandler(){this.updateScaleRangeActive()&&!this._scaleRangeActive?this.graphicsCore.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(1))):this._scaleRangeActive&&this.graphicsCore.updateAllGraphicsVisibility(),this._setDirty()}};function p(e,i){return e>0||i>0}e([s({constructOnly:!0})],h.prototype,\"layerScaleEnabled\",void 0),e([s({readOnly:!0})],h.prototype,\"suspended\",void 0),e([s({readOnly:!0})],h.prototype,\"updating\",void 0),h=e([a(\"esri.views.3d.layers.graphics.Graphics3DScaleVisibility\")],h);const o=\"terrain-events\";var y=h;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as o}from\"../../core/maybe.js\";import r from\"../FillSymbol3DLayer.js\";import e from\"../LineSymbol3D.js\";import m from\"../MeshSymbol3D.js\";import l from\"../PointSymbol3D.js\";import t from\"../PolygonSymbol3D.js\";import{defaultColor as i,defaultOutlineColor as s}from\"./defaultsJSON.js\";import{defaultPointSymbol2D as n,defaultPolylineSymbol2D as p,defaultPolygonSymbol2D as y}from\"./defaults.js\";const a=l.fromSimpleMarkerSymbol(n),f=e.fromSimpleLineSymbol(p),c=t.fromSimpleFillSymbol(y),u=new m({symbolLayers:[new r({material:{color:i},edges:{type:\"solid\",size:\"1px\",color:s}})]});function S(r){if(o(r))return null;switch(r.type){case\"mesh\":return u;case\"point\":case\"multipoint\":return a;case\"polyline\":return f;case\"polygon\":case\"extent\":return c}return null}export{S as getDefaultSymbol3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/Accessor.js\";import a from\"../../../../core/Evented.js\";import{projectPoint as p}from\"../../../../geometry/projection.js\";import c from\"../../../../layers/graphics/OptimizedFeature.js\";import n from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getObjectId as h}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{optimizedFeatureQueryEngineAdapter as l}from\"../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\";let u=class extends i{constructor(t){super(t),this.events=new a,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.spatialReference=null,this.featureAdapter={getAttribute:(t,e)=>\"graphic\"in t?t.graphic.attributes[e]:l.getAttribute(t,e),getAttributes:t=>\"graphic\"in t?t.graphic.attributes:l.getAttributes(t),getObjectId:t=>\"graphic\"in t?h(t.graphic,this.objectIdField):l.getObjectId(t),getGeometry:t=>\"graphic\"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):l.getGeometry(t),getCentroid:(t,o)=>{if(\"graphic\"in t){let s=null;e(t.centroid)?s=t.centroid:\"point\"===t.graphic.geometry.type&&p(t.graphic.geometry,d,this.spatialReference)&&(s=d);const i=new Array(2+(o.hasZ?1:0)+(o.hasM?1:0));return r(s)?(i[0]=0,i[1]=0,i[2]=0,i[3]=0):(i[0]=s.x,i[1]=s.y,o.hasZ&&(i[2]=s.hasZ?s.z:0),o.hasM&&(i[o.hasZ?3:2]=s.hasM?s.m:0)),new n([],i)}return l.getCentroid(t,o)},cloneWithGeometry:(t,e)=>\"graphic\"in t?new c(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):l.cloneWithGeometry(t,e)}}forEach(t){this.forAllGraphics((e=>{t(e)}))}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,r,o){const s=this.getSpatialIndex();for(const i of t){const t=this.featureAdapter.getObjectId(i);e(s.getBounds(t,o))&&r(o)}}};t([o({constructOnly:!0})],u.prototype,\"getSpatialIndex\",void 0),t([o({constructOnly:!0})],u.prototype,\"forAllGraphics\",void 0),t([o({constructOnly:!0})],u.prototype,\"hasZ\",void 0),t([o({constructOnly:!0})],u.prototype,\"hasM\",void 0),t([o({constructOnly:!0})],u.prototype,\"objectIdField\",void 0),t([o({constructOnly:!0})],u.prototype,\"spatialReference\",void 0),u=t([s(\"esri.views.3d.layers.graphics.Graphics3DFeatureStore\")],u);const d={type:\"point\",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};var m=u;export default m;export{u as Graphics3DFeatureStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.sharedResources=null,this.streamDataRequester=null,this.elevationProvider=null,this.renderer=null,this.stage=null,this.clippingExtent=null,this.renderCoordsHelper=null,this.overlaySR=null,this.layer=null,this.layerView=null,this.localOriginFactory=null,this.featureExpressionInfoContext=null,this.screenSizePerspectiveEnabled=!0,this.slicePlaneEnabled=!1,this.physicalBasedRenderingEnabled=!1,this.isAsync=!1}}class l{}export{e as Graphics3DSymbolCreationContext,l as Graphics3DSymbolLayerCreationContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isAborted as r,createAbortError as t}from\"../../../../core/promiseUtils.js\";import{result as a}from\"../../../../core/asyncUtils.js\";import{make as o}from\"./Graphics3DCalloutSymbolLayerFactory.js\";import l from\"./Graphics3DSymbol.js\";class e extends l{constructor(r,t,a){super(r,t,a),this.calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this.calloutSymbolLayer=o(this.symbol,t))}async doLoad(o){const l=this.calloutSymbolLayer?a(this.calloutSymbolLayer.load()):null;try{await super.doLoad(o)}catch(i){var e;throw null==(e=this.calloutSymbolLayer)||e.abortLoad(),i}var s;if(r(o))throw null==(s=this.calloutSymbolLayer)||s.abortLoad(),t();l&&await l}destroy(){super.destroy(),this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()}createGraphics3DGraphic(r,t){const a=super.createGraphics3DGraphic(r,t);if(this.calloutSymbolLayer){const t=this.createCalloutGraphic(r);t&&a.addAuxiliaryGraphic(t)}return a}globalPropertyChanged(r,t){return!!super.globalPropertyChanged(r,t)&&(!this.calloutSymbolLayer||this.calloutSymbolLayer.globalPropertyChanged(r,t,(r=>this._getCalloutGraphicLayer(r))))}updateGeometry(r,t){const a=super.updateGeometry(r,t);if(a&&this.calloutSymbolLayer){const a=this._getCalloutGraphicLayer(r);if(a)return this.calloutSymbolLayer.updateGeometry(a,t)}return a}createCalloutGraphic(r){const t=r.renderingInfo,a={renderer:t.renderer,symbol:t.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:\"world\",elevationOffset:0,materialCollection:null};return r.renderingInfo=a,this.calloutSymbolLayer.createGraphics3DGraphic(r)}_getCalloutGraphicLayer(r){for(const t of r._auxiliaryGraphics)if(t.graphics3DSymbolLayer===this.calloutSymbolLayer)return t}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"./Graphics3DSymbol.js\";import o from\"./Graphics3DPointSymbol.js\";function r(r,e,i){let p;switch(r.type){case\"point-3d\":p=o;break;default:p=t}return new p(r,e,i)}export{r as make};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{remove as i}from\"../../../../core/arrayUtils.js\";import{getObjectId as e}from\"../../../../layers/graphics/dehydratedFeatures.js\";class s{constructor(t){this.graphicsCore=t,this.idToState=new Map,this.states=new Set;const i=t.owner.layer&&t.owner.layer.objectIdField;i?(this.getGraphicId=t=>e(t,i),this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicByObjectId(t)):(this.getGraphicId=t=>t.uid,this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicById(t))}destroy(){this.idToState.clear(),this.states.forEach(((t,i)=>this.remove(i)))}add(i){const e={remove:()=>this.remove(i)};if(this.states.has(i))return e;const s=this.getGraphicId(i.graphic),a=this.getGraphics3DGraphicById(s);this.states.has(i)||this.states.add(i);return this.ensureStateList(s).push(i),i.displaying=!!t(a)&&a.isVisible(),i.isDraped=!!t(a)&&a.isDraped,i.tracking=!0,e}remove(t){if(this.states.has(t)){if(this.idToState.size){const e=this.getGraphicId(t.graphic),s=this.idToState.get(e);s&&(i(s,t),0===s.length&&this.idToState.delete(e))}this.states.delete(t),t.tracking=!1,t.displaying=!1}}addGraphic(t){this.forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit(\"changed\",{})}))}removeGraphic(t){this.forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this.forEachState(t,(t=>{t.emit(\"changed\",{})}))}updateGraphicVisibility(t){this.forEachState(t,(i=>{i.displaying=t.isVisible()}))}allGraphicsDeleted(){this.states.forEach((t=>{t.displaying=!1}))}ensureStateList(t){const i=this.idToState.get(t);if(i)return i;const e=new Array;return this.idToState.set(t,e),e}forEachState(t,i){if(0===this.states.size||0===this.idToState.size)return;const e=this.getGraphicId(t.graphic),s=this.idToState.get(e);null!=s&&s.forEach(i)}}export{s as GraphicStateTracking};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import r from\"../../../../core/Accessor.js\";import{fromRect as o}from\"../../../../geometry/support/aaBoundingBox.js\";import{getObjectId as n}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{PooledRBush as a}from\"../../../../core/libs/rbush/PooledRBush.js\";let d=class extends r{constructor(t){super(t),this._index=new a(9,e(\"csp-restrictions\")?t=>({minX:t.extent[0],minY:t.extent[1],maxX:t.extent[2],maxY:t.extent[3]}):[\".extent[0]\",\".extent[1]\",\".extent[2]\",\".extent[3]\"]),this._missing=new Set,this._boundsByFeature=new Map,this.spatialReference=null,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.updating=!1}setup(t){this._addMany(t)}destroy(){this._missing.clear(),this._index.destroy(),this._index=null,this._boundsByFeature.clear(),this._boundsByFeature=null}update(){this._missing.size>0&&(this._addMany(Array.from(this._missing.values())),this.updating=!1,this._missing.clear())}get updatingRemaining(){return this._missing.size}queryGraphicUIDsInExtent(t,e,s){e.equals(this.spatialReference)&&(u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>s(t.graphic.uid))))}add(t){this._missing.add(t),this.updating=!0}remove(t){if(this._missing.delete(t))return void(this.updating=this._missing.size>0);this._index.remove(t);const e=n(t.graphic,this._get(\"objectIdField\"));null!=e&&this._boundsByFeature.delete(e)}_addMany(t){if(0===t.length)return;const e=this._get(\"objectIdField\");for(const s of t){s.computeExtent(this.spatialReference);const t=n(s.graphic,e);null!=t&&this._boundsByFeature.set(t,s.extent)}this._index.load(t)}clear(){this._index.clear(),this._missing.clear(),this._boundsByFeature.clear(),this.updating=!1}forEachInBounds(t,e){u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>{e(t)}))}getBounds(t,e){this.update();const s=this._boundsByFeature.get(t);return s?o(e,s):null}};t([s({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),t([s({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([s({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([s({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([s()],d.prototype,\"updating\",void 0),d=t([i(\"esri.views.3d.layers.graphics.SpatialIndex2D\")],d);const u={minX:0,minY:0,maxX:0,maxY:0};export{d as SpatialIndex2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{unwrapOr as t}from\"../../../../core/maybe.js\";import o from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/Accessor.js\";import n from\"../../../../core/Evented.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{g as l}from\"../../../../chunks/vec3.js\";import c from\"../../../../core/Handles.js\";import{getMetersPerVerticalUnitForSR as d}from\"../../../../core/unitUtils.js\";import{empty as p}from\"../../../../geometry/support/aaBoundingRect.js\";import{getMetersPerUnit as m}from\"../../../../symbols/support/unitConversionUtils.js\";import{empty as h,toRect as u,expandWithVec3 as f}from\"../../../../geometry/support/aaBoundingBox.js\";import{Intersector as v}from\"../../webgl-engine/lib/Intersector.js\";const y=o.getLogger(\"esri.views.3d.layers.support.StageLayerElevationProvider\"),j=1;let g=class extends(n.EventedMixin(i)){constructor(e){super(e),this.elevationOffset=0,this._layerHandes=new c}initialize(){this.renderCoordsHelper=this.view.renderCoordsHelper,this.intersectLayers=[this.stageLayer],this.intersector=new v(this.view.state.mode),this.intersector.options.store=0;const e=this.computeLayerExtent(this.stageLayer);this.zmin=e[2],this.zmax=e[5];const t=this.stageLayer.events;this._layerHandes.add([t.on(\"layerObjectAdded\",(e=>this.objectChanged(e.object))),t.on(\"layerObjectRemoved\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryAdded\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryRemoved\",(e=>this.objectChanged(e.object))),t.on(\"vertexAttrsUpdated\",(e=>this.objectChanged(e.object))),t.on(\"objectTransformation\",(e=>this.objectChanged(e)))])}dispose(){this._layerHandes.destroy()}elevationInfoChanged(){const e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&\"on-the-ground\"!==e.mode){const o=d(this.layer.spatialReference),r=m(e.unit);this.elevationOffset=t(e.offset,0)*r/o}else this.elevationOffset=0}getElevation(e,t,o,r){if(E[0]=e,E[1]=t,E[2]=o,!this.renderCoordsHelper.toRenderCoords(E,r,E))return y.error(\"could not project point for elevation alignment\"),null;const s=this.elevationOffset,i=this.zmin+s,n=this.zmax+s;l(C,E),l(R,E),this.renderCoordsHelper.setAltitude(n,C),this.renderCoordsHelper.setAltitude(i,R);const a=e=>e.metadata&&e.metadata.isElevationSource;return this.intersector.reset(C,R),this.intersector.intersect(this.intersectLayers,null,null,j,null,a),this.intersector.results.min.getIntersectionPoint(E)?this.renderCoordsHelper.getAltitude(E):null}objectChanged(e){var t;if(null==(t=e.metadata)||!t.isElevationSource||!this.spatialReference)return;h(b),e.metadata.lastValidElevationBB.isEmpty()||this.expandExtent(e.metadata.lastValidElevationBB.bbMin,e.metadata.lastValidElevationBB.bbMax,b);const o=e.getBBMin(!1),r=e.getBBMax(!1);this.expandExtent(o,r,b),u(b,x),this.zmin=Math.min(this.zmin,b[2]),this.zmax=Math.max(this.zmax,b[5]),B.extent=x,B.spatialReference=this.spatialReference,this.emit(\"elevation-change\",B),l(e.metadata.lastValidElevationBB.bbMin,o),l(e.metadata.lastValidElevationBB.bbMax,r)}computeLayerExtent(e){return h(b),e.getObjects().forAll((e=>this.expandExtent(e.getBBMin(!1),e.getBBMax(!1),b))),b}expandExtent(e,t,o){for(let r=0;r<8;++r)E[0]=1&r?e[0]:t[0],E[1]=2&r?e[1]:t[1],E[2]=4&r?e[2]:t[2],this.renderCoordsHelper.fromRenderCoords(E,E,this.spatialReference),f(o,E);return o}};e([r({constructOnly:!0})],g.prototype,\"layer\",void 0),e([r({constructOnly:!0})],g.prototype,\"stageLayer\",void 0),e([r({constructOnly:!0})],g.prototype,\"view\",void 0),e([r({readOnly:!0,aliasOf:\"view.spatialReference\"})],g.prototype,\"spatialReference\",void 0),g=e([s(\"esri.views.3d.layers.support.StageLayerElevationProvider\")],g);const b=h(),x=p(),B={spatialReference:null,extent:x,context:\"scene\"},E=a(),C=a(),R=a();export{g as StageLayerElevationProvider};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t,isNone as i,destroyMaybe as s,removeMaybe as r,get as a,unwrapOr as n,unwrap as o}from\"../../../../core/maybe.js\";import l from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../../core/Error.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import c from\"../../../../core/PooledArray.js\";import{createAbortController as y,throwIfAborted as m,eachAlways as g,createDeferred as u,isAbortError as b}from\"../../../../core/promiseUtils.js\";import{schedule as f}from\"../../../../core/scheduling.js\";import v from\"../../../../core/Accessor.js\";import C from\"../../../../geometry/Point.js\";import S from\"../../../../geometry/Extent.js\";import\"../../../../geometry.js\";import{loadArcade as w}from\"../../../../support/arcadeOnDemand.js\";import{isFinite as G}from\"../../../../core/mathUtils.js\";import x from\"../../../../symbols/LabelSymbol3D.js\";import _ from\"../../../../symbols/TextSymbol.js\";import P from\"../../../../symbols/WebStyleSymbol.js\";import\"../../../../symbols.js\";import{c as R}from\"../../../../chunks/vec3f64.js\";import{s as D,b as U,a as I}from\"../../../../chunks/vec3.js\";import E from\"../../../../core/Handles.js\";import O from\"../../../../layers/Layer.js\";import{init as j,when as L,whenOnce as V,on as A}from\"../../../../core/watchUtils.js\";import{create as F}from\"../../../../geometry/support/aaBoundingRect.js\";import{projectVectorToVector as T,projectXYZToVector as k,canProjectWithoutEngine as M,projectBuffer as W}from\"../../../../geometry/projection.js\";import{ImmediateTask as z,Task as B,noBudget as q}from\"../../../support/Scheduler.js\";import\"../../../../renderers/Renderer.js\";import{to3D as H}from\"../../../../symbols/support/symbolConversion.js\";import\"../../../../renderers/ClassBreaksRenderer.js\";import{diff as N,isEmpty as $}from\"../../../../core/accessorSupport/diffUtils.js\";import Z from\"../../../../renderers/UniqueValueRenderer.js\";import\"../../../../renderers/DictionaryRenderer.js\";import\"../../../../renderers/DotDensityRenderer.js\";import\"../../../../renderers/HeatmapRenderer.js\";import\"../../../../renderers/SimpleRenderer.js\";import\"../../../../renderers/support/jsonUtils.js\";import{someMap as Q,findInMap as J}from\"../../../../core/MapUtils.js\";import{create as K,center as X,fromRect as Y,equals as ee}from\"../../../../geometry/support/aaBoundingBox.js\";import{getObjectId as te,computeAABB as ie,hasGeometry as se}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as re}from\"../../../../layers/graphics/hydratedFeatures.js\";import{computeCentroid as ae}from\"./graphicUtils.js\";import{extractExpressionInfo as ne,createContext as oe}from\"./featureExpressionInfoUtils.js\";import{averageSymbolComplexities as le,defaultSymbolComplexity as he}from\"./symbolComplexity.js\";import de from\"./Graphics3DGraphicCreationContext.js\";import pe from\"./Graphics3DGraphic.js\";import{WebGLLayer as ce}from\"../../webgl-engine/lib/WebGLLayer.js\";import ye from\"../../webgl-engine/lib/GridLocalOriginFactory.js\";import me from\"./Graphics3DWebStyleSymbol.js\";import{toBoundingRect as ge}from\"../../support/extentUtils.js\";import{PropertiesPool as ue}from\"../../support/PropertiesPool.js\";import{ViewElevationProvider as be}from\"./ElevationQuery.js\";import{isSupportedRenderer3D as fe,validateTo3D as ve}from\"../../../../renderers/support/rendererConversion.js\";import{getDefaultSymbol3D as Ce}from\"../../../../symbols/support/defaults3D.js\";import Se from\"./Graphics3DFeatureStore.js\";import{Graphics3DSymbolCreationContext as we}from\"./Graphics3DSymbolCreationContext.js\";import{make as Ge}from\"./Graphics3DSymbolFactory.js\";import{GraphicStateTracking as xe}from\"./GraphicStateTracking.js\";import{SpatialIndex2D as _e}from\"./SpatialIndex2D.js\";import{StageLayerElevationProvider as Pe}from\"../support/StageLayerElevationProvider.js\";var Re;const De=R(),Ue=K(),Ie=l.getLogger(\"esri.views.3d.layers.graphics.Graphics3DCore\");let Ee=Re=class extends v{constructor(e){super(e),this.propertiesPool=new ue({computedExtent:S},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this.graphicStateTracking=null,this.symbolCreationContext=new we,this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this.graphicsDrapedUids=new Set,this.graphicsBySymbol=new Map,this.symbolConversionCache=new Map,this.symbols=new Map,this.graphicsWithoutSymbol=new Map,this.graphicsWaitingForSymbol=new Set,this._handles=new E,this._frameTask=z,this.suspendSymbolCleanup=!1,this._spatialReference=null,this.arcadeOnDemand=null,this.rendererChangeAbortController=null,this.elevationInfoChangeAbortController=null,this.setupAbortController=null,this.elevationAlignment=null,this.scaleVisibility=null,this.filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this.featureStore=null,this.deconflictor=null,this.labeler=null,this.objectStates=null,this.viewElevationProvider=null,this.stageLayerElevationProvider=null,this.sharedSymbolResourcesOwnerHandle=null,this.whenGraphics3DGraphicRequests={},this.pendingUpdates=new Map,this.numberOfGraphics=0,this.numberOfGraphicsProvidingElevation=0,this.pendingAdds=0,this.pendingRemoves=0,this.pendingUpdatesPool=new c({allocator:e=>e||new Oe,deallocator:e=>(e.clear(),e)}),this.symbolWarningLogged=!1,this.geometryWarningLogged=!1,this.objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new c,this.preferredUpdatePolicy=0,this.forcedUpdatePolicy=null,this._asyncUpdates=!1,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=void 0,this._startCreateGraphics=!1,this.maxPendingUpdates=0}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new _e({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,spatialReference:this._spatialReference,hasZ:this.hasZ,hasM:this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get asyncUpdates(){return this._asyncUpdates}get updating(){var e,i;return!!(this.graphicsWaitingForSymbol.size>0||this.needsUpdate||null!=(e=this.elevationAlignment)&&e.updating||t(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(i=this.filterVisibility)&&i.updating||this.rendererChangeAbortController||this.elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating)}get needsUpdate(){var e;return this.pendingUpdates.size>0||!(null==(e=this._spatialIndex)||!e.updating)}get suspendedOrOutsideOfView(){var e;return this.owner.suspended||(null==(e=this.owner.suspendInfo)?void 0:e.outsideOfView)}get updatingRemaining(){var e;return this.updating?this.pendingUpdates.size+.1*((null==(e=this._spatialIndex)?void 0:e.updatingRemaining)||0):0}get updatingTotal(){return this.updating?this.maxPendingUpdates:0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,i=e?e.graphics3D.minTotalNumberOfFeatures:0,s=e?e.graphics3D.maxTotalNumberOfFeatures:0,r=e?e.graphics3D.maxTotalNumberOfPrimitives:0,a=this.averageSymbolComplexity,n=Math.max(1,t(a)?a.primitivesPerFeature:1),o=t(a)&&a.drawCallsPerFeature>0?s/a.drawCallsPerFeature*.3:s,l=Math.ceil(r/n),h=Math.max(i,Math.min(s,l,o)),d=this._get(\"displayFeatureLimit\");return d&&d.minimumTotalNumberOfFeatures===i&&d.maximumTotalNumberOfFeatures===s&&d.maximumTotalNumberOfPrimitives===r&&d.averageSymbolComplexity===a&&d.maximumNumberOfFeatures===h?d:{minimumTotalNumberOfFeatures:i,maximumTotalNumberOfFeatures:s,maximumTotalNumberOfPrimitives:r,averageSymbolComplexity:a,maximumNumberOfFeatures:h}}get averageSymbolComplexity(){const e=le(this.symbolComplexities),i=this._get(\"averageSymbolComplexity\");return 0===e.numComplexities||t(i)&&(e.estimated&&(i.primitivesPerFeature>=e.primitivesPerFeature||i.primitivesPerCoordinate>=e.primitivesPerCoordinate||i.drawCallsPerFeature>=e.drawCallsPerFeature)||i.primitivesPerFeature===e.primitivesPerFeature&&i.primitivesPerCoordinate===e.primitivesPerCoordinate&&i.drawCallsPerFeature===e.drawCallsPerFeature)?i:e}get spatialReference(){return this._spatialReference}get usedMemory(){const e=t(this.averageSymbolComplexity)&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this.numberOfGraphics:0;return this._usedMemory+e}get usedMemoryPerGraphic(){if(this._usedMemory&&this.numberOfGraphics)return Math.abs(this.pendingAdds-this.pendingRemoves)/this.numberOfGraphics>30?0:this._usedMemory/this.numberOfGraphics;if(t(this.averageSymbolComplexity)){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return Math.max(0,(this.pendingAdds-this.pendingRemoves)*this.usedMemoryPerGraphic)}get symbolComplexities(){return this.currentRenderer?this.getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this.getSymbolComplexitiesUsed()}getConvertedSymbol(e){if(\"web-style\"===e.type)return e.clone();const t=this.symbolConversionCache.get(e.id);if(void 0!==t)return t;const i=H(e,!0,!1,this.hasLabelingContext(e)),s=i.symbol||null;return s||i.error&&Ie.error(i.error.message),this.symbolConversionCache.set(e.id,s),s}getSymbolComplexitiesUsedOrRenderer(e){if(i(e))return[];const s=e.getSymbols(),r=\"backgroundFillSymbol\"in e&&e.backgroundFillSymbol;if(!(r||s&&s.length))return[];const a=[],n=this.getSymbolComplexityUsedOrRenderer(r);t(n)&&a.push(n);for(const i of s){const e=this.getSymbolComplexityUsedOrRenderer(i);t(e)&&a.push(e)}return a}getSymbolComplexityUsedOrRenderer(e){if(i(e))return null;const s=this.symbols.get(e.id);if(t(s))return s.complexity;const r=this.getConvertedSymbol(e);return r?he(r):null}getSymbolComplexitiesUsed(){const e=[];return this.symbols.forEach((i=>{t(i)&&e.push(i.complexity)})),e}initialize(){this._spatialReference=this.owner.view.spatialReference,this._set(\"featureStore\",new Se({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,hasZ:this.hasZ,hasM:this.hasM,spatialReference:this._spatialReference,getSpatialIndex:()=>this.spatialIndex,forAllGraphics:e=>this.graphics3DGraphics.forEach(e)}))}async setup(e){this.setupAbortController=y();const i=this.setupAbortController.signal;this._set(\"elevationAlignment\",e.elevationAlignment),this._set(\"scaleVisibility\",e.scaleVisibility),this._set(\"filterVisibility\",e.filterVisibility),this._set(\"deconflictor\",e.deconflictor),this._set(\"labeler\",e.labeler),this._set(\"objectStates\",e.objectStates);const s=this.owner.view;this.viewElevationProvider=new be(this._spatialReference,s),this.initializeStage(s,this.layer.uid),this.symbolCreationContext.sharedResources=s.sharedSymbolResources,this.sharedSymbolResourcesOwnerHandle=s.sharedSymbolResources.addGraphicsOwner(this.owner),t(this.currentRenderer)&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=s.sharedSymbolResources.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=s.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.layerView=this.owner,this.symbolCreationContext.localOriginFactory=new ye,this.symbolCreationContext.elevationProvider=s.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=ne(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await oe(r,this._spatialReference,Ie),m(i),this.symbolCreationContext.screenSizePerspectiveEnabled=s.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings.physicallyBasedRenderingEnabled;const a=\"layer\"in this.owner?[\"layer.screenSizePerspectiveEnabled,view.screenSizePerspectiveEnabled\"]:\"view.screenSizePerspectiveEnabled\";this._handles.add([this.watch(\"suspendedOrOutsideOfView\",(()=>this._frameTask.reschedule((()=>this.updateLayerVisibility())))),this.owner.watch(a,(()=>{const e=s.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,this.recreateAllGraphics())})),j(this,\"preferredUpdatePolicy\",(()=>this.updateUpdatePolicy()),!0),this.owner.watch(\"slicePlaneEnabled\",(e=>this.slicePlaneEnabledChange(!!e))),this.owner.view.watch(\"pixelRatio\",(()=>this.pixelRatioChange())),this.owner.view.watch(\"qualitySettings.physicallyBasedRenderingEnabled\",(e=>this.physicalBasedRenderingChange(e))),L(s.basemapTerrain,\"tilingScheme\",(e=>{e.spatialReference.equals(this.symbolCreationContext.overlaySR)||(this.symbolCreationContext.overlaySR=s.basemapTerrain.spatialReference),this._handles.has(\"loaded-graphics\")?this.recreateAllGraphics():this._handles.add([A(this.owner,\"loadedGraphics\",\"change\",(e=>this.graphicsCollectionChanged(e)),(()=>this.recreateAllGraphics())),A(this.owner,\"loadedGraphics\",\"after-changes\",(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()),(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()))],\"loaded-graphics\")}))]),this._frameTask=s.resourceController.scheduler.registerTask(B.GRAPHICS_CORE,(e=>this._update(e)),(()=>this.needsUpdate)),this.owner.layer&&\"featureReduction\"in this.owner.layer&&this._handles.add(this.owner.watch(\"layer.featureReduction\",(()=>this.deconflictor.featureReductionChange()))),this.notifyChange(\"averageSymbolComplexity\");try{await this.rendererChange(this.layer.renderer)}catch{}m(i),this.setupAbortController=null}abortSetup(){this.setupAbortController&&(this.setupAbortController.abort(),this.setupAbortController=null)}destroy(){this.abortSetup(),this.abortRendererChange(),this.abortElevationInfoChange(),this.owner.view.deconflictor.removeGraphicsOwner(this),this.owner.view.labeler.removeGraphicsOwner(this),this._updatingPendingLoadedGraphicsChange&&(this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=null),this.clear(),t(this.graphicStateTracking)&&(this.graphicStateTracking.destroy(),this.graphicStateTracking=null),this.stage&&(this.stage.remove(this.stageLayer),this.stageLayer=null,this.stage=null),this._handles=s(this._handles),this._frameTask.remove(),this._frameTask=z,this._spatialReference=null,this._set(\"owner\",null);for(const e in this.whenGraphics3DGraphicRequests)this.whenGraphics3DGraphicRequests[e].reject(new p(\"graphic:layer-destroyed\",\"Layer has been destroyed\"));this.whenGraphics3DGraphicRequests=null,this.sharedSymbolResourcesOwnerHandle=r(this.sharedSymbolResourcesOwnerHandle),this.propertiesPool=s(this.propertiesPool),this.pendingUpdatesPool=null,this.symbolConversionCache.clear(),this.objectIdInvisibleSet.clear(),this._spatialIndex=s(this._spatialIndex),this.featureStore&&(this.featureStore.destroy(),this._set(\"featureStore\",null))}clear(){var e;this.objectStates&&this.objectStates.allGraphicsDeleted(),t(this.graphicStateTracking)&&this.graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),null==(e=this._spatialIndex)||e.clear(),this.graphics3DGraphics.clear(),this.numberOfGraphics=0,this._usedMemory=0,this.updateLayerVisibility(),this.symbols.forEach((e=>{t(e)&&e.destroy()})),this.symbols.clear(),this.graphicsBySymbol.clear(),this.graphicsWithoutSymbol.clear(),this.graphicsWaitingForSymbol.clear(),this.pendingUpdates.clear(),this.pendingUpdatesPool.clear(),this.maxPendingUpdates=0,this.pendingAdds=0,this.pendingRemoves=0,this.notifyChange(\"updating\"),this.notifyChange(\"needsUpdate\"),this.notifyChange(\"updatingTotal\"),this.notifyChange(\"updatingRemaining\"),this.featureStore.events.emit(\"changed\")}initializeStage(e,t){this.stage=e._stage;const i={isPickable:!this.suspendedOrOutsideOfView};this.stageLayer=new ce(i,t),this.stage.add(this.stageLayer);const s=this.stageLayer.events;s.on(\"objectTransformation\",(e=>this.notifyGraphicGeometryChanged(e.metadata.graphicUid))),s.on(\"visibilityChanged\",(e=>this.notifyGraphicVisibilityChanged(e.metadata.graphicUid))),s.on(\"objectGeometryAdded\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),s.on(\"objectGeometryRemoved\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),s.on(\"vertexAttrsUpdated\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)))}notifyGraphicGeometryChanged(e){if(i(this.graphicStateTracking))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(i(this.graphicStateTracking))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicVisibility(t)}updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this.numberOfGraphics>e*je,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,i?(this.stageLayer.isPickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.isPickable=!1,this.hideAllGraphics()),this.updateStageLayerVisibility())}updateStageLayerVisibility(){this.stageLayer.isVisible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return this.graphics3DGraphics.get(e)}getGraphics3DGraphicByObjectId(e){var t;return null!=(t=this.owner.layer)&&t.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer&&this.owner.layer.objectIdField){return te(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer&&this.owner.layer.objectIdField;if(!e)return null;const i=new Map;return this.graphics3DGraphics.forEach((s=>{if(!s)return;const r=s.graphic,a=this._getGraphicObjectID(r,e);t(a)&&i.set(a,s)})),i}get labelsEnabled(){return!(!this.labeler||!this.labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const t=this.deconflictor&&this.deconflictor.labelingInfoChange(e),i=this.labeler&&this.labeler.labelingInfoChange(e);await g([t,i])}updateVisibilityInfo(){this.deconflictor&&this.deconflictor.labelingInfoChange(),this.labeler&&this.labeler.visibilityInfoChange()}get symbolUpdateType(){if(this.pendingUpdates.size>0)return\"unknown\";let e=0,i=0;return Q(this.symbols,((s,r)=>{if(t(s)){const t=s.getFastUpdateStatus();if(t.loading>0)return!0;this.graphicsBySymbol.has(r)&&(i+=t.fast,e+=t.slow)}return!1}))?\"unknown\":i>=0&&0===e?\"fast\":e>=0&&0===i?\"slow\":\"mixed\"}_update(e){this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange(\"needsUpdate\"),this.needsUpdate||this.notifyChange(\"updating\"),this.notifyChange(\"updatingTotal\"),this.notifyChange(\"updatingRemaining\")}setObjectIdVisibility(e,i){i?this.objectIdInvisibleSet.delete(e):this.objectIdInvisibleSet.add(e);const s=this._findGraphics3DGraphicByObjectId(e);t(s)&&this._updateUserVisibility(s)}_findGraphics3DGraphicByObjectId(e){return J(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(i(e))return!1;const t=e.graphic,s=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&(i(s)||!this.objectIdInvisibleSet.has(s));return e.setVisibilityFlag(0,r,0)}whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this.whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const s=u();return this.whenGraphics3DGraphicRequests[e.uid]=s,s.promise}async boundsForGraphics3DGraphic(e,i){const s=this._spatialReference,r=this.owner.view.renderSpatialReference,o=this.owner.view.basemapTerrain.spatialReference,l=(e,t,i)=>W(e,r,t,e,s,t,i),h=(e,t,i)=>W(e,o,t,e,s,t,i),d=this.viewElevationProvider?{service:this.viewElevationProvider,useViewElevation:t(i)&&i.useViewElevation,minDemResolution:t(i)&&i.minDemResolution,minDemResolutionForPoints:this.owner.view.resolution}:null,p=await e.getProjectedBoundingBox(l,h,d,a(i,\"signal\"));if(!p)return null;const c=p.boundingBox;if(p.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){X(c,De);const t=n(e.getElevation(De[0],De[1],0,s,\"ground\"),0);c[2]=Math.min(c[2],t),c[5]=Math.max(c[5],t)}}return{boundingBox:c,screenSpaceObjects:p.screenSpaceObjects}}whenGraphicBounds(e,t){return V(this.owner,\"loadedGraphics\").then((()=>{const t=this.owner.layer&&this.owner.layer.objectIdField,i=this.owner.loadedGraphics.find((i=>i===e||t&&i.attributes&&e.attributes&&i.attributes[t]===e.attributes[t]));if(i)return this.whenGraphics3DGraphic(i);throw new p(\"internal:graphic-not-part-of-view\",\"Graphic is not part of this view\")})).then((e=>this.boundsForGraphics3DGraphic(e,t)))}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const s=i.computeAttachmentOrigin();if(0===s.render.num&&0===s.draped.num)return null;D(Le,0,0,0);let r=0;if(s.render.num>0){if(!T(s.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,Ve,t))return null;U(Le,Le,Ve),r++}if(s.draped.num>0){const[e,i]=s.draped.origin,a=n(this.viewElevationProvider.getElevation(e,i,\"ground\"),0);if(D(Ve,e,i,a),!T(Ve,this.viewElevationProvider.spatialReference,Ve,t))return null;U(Le,Le,Ve),r++}return r>1&&I(Le,Le,1/r),new C({x:Le[0],y:Le[1],z:Le[2],spatialReference:t})}getSymbolLayerSize(e,t){const s=this.symbols.get(e.id);if(i(s))throw new p(\"internal:symbol-not-part-of-view\",\"Symbol is not part of this view\");const r=e.symbolLayers.indexOf(t);if(-1===r)throw new p(\"internal:missing-symbol-layer\",\"Symbol layer is not in symbol\");const a=s.getSymbolLayerSize(r);if(null==a)throw new p(\"internal:missing-size\",\"Symbol layer has no valid size\");return a}graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t),s=this.graphicsWithoutSymbol.get(t);if(i||s){switch(e.property){case\"visible\":this.graphicUpdateVisibleHandler(i);break;case\"geometry\":this.graphicUpdateGeometryHandler(i,e);break;case\"symbol\":this.graphicUpdateSymbolHandler(i,e)}0===this.preferredUpdatePolicy&&this.stageLayer.commit()}}graphicUpdateGeometryHandler(e,s){const r=s.graphic.geometry;if(i(r))return void this.recreateGraphic(s.graphic);if(i(e)){const e=s.graphic.symbol&&s.graphic.symbol.id;if(e){const i=this.symbols.get(e);if(t(i)&&0===i.loadStatus)return}return void this.recreateGraphic(s.graphic)}const a=e.graphics3DSymbol;!i(s.newValue)&&a.updateGeometry(e,s.newValue)||this.recreateGraphic(e.graphic),this.expandComputedExtent(r)}graphicUpdateSymbolHandler(e,s){const r=s.graphic,a=t(e)?e.graphics3DSymbol:t(s.oldValue)&&this.symbols.get(s.oldValue.id);if(i(a)||i(s.newValue))return void this.recreateGraphic(r);const n=a.symbol,o=this.getConvertedSymbol(s.newValue);if(o.type!==n.type||\"web-style\"===o.type||\"web-style\"===n.type)return void this.recreateGraphic(r);const l=this.graphicsBySymbol.get(n.id);if(l&&1!==l.size)return void this.recreateGraphic(r);const h=N(n,o);if(i(h))return void this.updateSymbolMapping(n.id,o);const d={diff:h,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(a.prepareSymbolPatch(d),!$(d.diff))return void this.recreateGraphic(r);const p=this._getRenderingInfo(r);if(i(p))return void this.recreateGraphic(r);const c=a.extentPadding;for(const t of d.symbolStatePatches)t();if(c!==a.extentPadding&&this.recomputeExtentPadding(),t(e))for(const t of d.graphics3DGraphicPatches)t(e,p);this.updateSymbolMapping(n.id,o)}graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}recreateGraphics(e){this.suspendSymbolCleanup=!0,this.remove(e),this.add(e),this.suspendSymbolCleanup=!1,this.asyncUpdates||this._cleanupSymbols()}recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){this.graphicsWaitingForSymbol.add(e.uid),1===this.graphicsWaitingForSymbol.size&&this.notifyChange(\"updating\")}_endGraphicUpdate(e){e&&(this.graphicsWaitingForSymbol.delete(e.uid),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\")))}recomputeExtentPadding(){let e=0;this.symbols.forEach((i=>{t(i)&&(e=Math.max(e,i.extentPadding))})),this._set(\"extentPadding\",e)}expandComputedExtent(e){const t=Ue,i=e.spatialReference;ie(e,t);const s=this._spatialReference,r=Re.tmpVec;if(i.equals(s)||k(t[0],t[1],0,i,r,s)&&(t[0]=r[0],t[1]=r[1],k(t[3],t[4],0,i,r,s),t[3]=r[0],t[4]=r[1]),!(G(t[0])&&G(t[3])&&G(t[1])&&G(t[4])))return;const a=this.computedExtent;let n=null;const o=G(t[2])&&G(t[5]),l=o&&(!a||null==a.zmin||t[2]<a.zmin),h=o&&(!a||null==a.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||l||h)&&(n=this.propertiesPool.get(\"computedExtent\"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=s)}else n=this.propertiesPool.get(\"computedExtent\"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=s;n&&(l&&(n.zmin=t[2]),h&&(n.zmax=t[5]),this._set(\"computedExtent\",n))}abortElevationInfoChange(){this.elevationInfoChangeAbortController&&(this.elevationInfoChangeAbortController.abort(),this.elevationInfoChangeAbortController=null)}async elevationInfoChange(){this.abortElevationInfoChange();const e=y();this.elevationInfoChangeAbortController=e;const t=ne(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await oe(t,this._spatialReference,Ie),m(e),this.elevationInfoChangeAbortController=null,this.labeler&&this.labeler.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"elevationInfo\",t)?t.forEach((e=>{const t=e.graphic,i=e.labelGraphics;for(const s of i){s.graphics3DSymbolLayer.updateGraphicElevationContext(t,s)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),this.elevationAlignment&&this.elevationAlignment.elevationInfoChange()}updateStageLayerElevationProvider(){this.stageLayerElevationProvider?(this.layer.elevationInfo&&\"relative-to-scene\"===this.layer.elevationInfo.mode||0===this.numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null):(!this.layer.elevationInfo||this.layer.elevationInfo&&\"relative-to-scene\"!==this.layer.elevationInfo.mode)&&this.numberOfGraphicsProvidingElevation>0&&(this.stageLayerElevationProvider=new Pe({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register(\"scene\",this.stageLayerElevationProvider))}clearSymbolsAndGraphics(){this.clear(),this.filterVisibility&&this.filterVisibility.clear(),this.labeler&&this.labeler.reset(),this.deconflictor&&this.deconflictor.clear(),this.elevationAlignment&&this.elevationAlignment.clear(),this.stageLayer&&this.stageLayer.invalidateSpatialQueryAccelerator(),this.stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null)}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._startCreateGraphics&&(this.clearSymbolsAndGraphics(),this._set(\"computedExtent\",null),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.owner.loadedGraphics&&this.owner.loadedGraphics.length&&this.owner.view.basemapTerrain.tilingScheme&&this.add(this.owner.loadedGraphics.toArray()))}_recreateSymbol(e){const i=this.graphicsBySymbol.get(e),s=[];i&&(i.forEach(((e,t)=>{var i;const r=e.usedMemory;this._conditionalRemove(e,t),null==(i=this._spatialIndex)||i.remove(e),s.push(e.graphic),e.destroy(),this.removeGraphics3DGraphic(t,r),this.updateLayerVisibility(),this.featureStore.events.emit(\"changed\")})),this.graphicsBySymbol.set(e,new Map));const r=this.symbols.get(e);t(r)&&r.destroy(),this.symbols.delete(e),this.add(s)}_conditionalRemove(e,i){e.isDraped&&this.graphicsDrapedUids.delete(i),this.objectStates&&this.objectStates.removeGraphic(e),this.labeler&&this.labeler.removeGraphic(e),this.deconflictor&&this.deconflictor.removeGraphic(e),t(this.graphicStateTracking)&&this.graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain&&this.owner.view.basemapTerrain.tilingScheme?(this.asyncUpdates?this._addDelayed(e):this._addImmediate(e),this.notifyChange(\"updating\")):Ie.error(\"#add()\",\"Cannot add graphics before terrain surface has been initialized\"))}_addImmediate(e){this.geometryWarningLogged=!1,this.symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,Ie));this._cleanupSymbols(),this.labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this.pendingUpdates.get(e);i?i.add?0!==i.state&&i.abortController.abort():this.pendingAdds++:(i=this.pendingUpdatesPool.pushNew(),this.pendingAdds++,this.pendingUpdates.set(e,i)),i.add=t}this.maxPendingUpdates=Math.max(this.maxPendingUpdates,this.pendingUpdates.size),this.notifyChange(\"needsUpdate\"),this.notifyChange(\"updatingTotal\"),this.notifyChange(\"updatingRemaining\")}remove(e){this.asyncUpdates?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange(\"updating\")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this.pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this.pendingUpdates.delete(e),1===i.state&&i.abortController.abort(),this.pendingAdds--);else{const i=this.pendingUpdatesPool.pushNew();i.remove=t,this.pendingUpdates.set(e,i),this.pendingRemoves++}}0===this.pendingUpdates.size&&this._finishPendingUpdates(),this.maxPendingUpdates=Math.max(this.maxPendingUpdates,this.pendingUpdates.size),this.notifyChange(\"needsUpdate\"),this.notifyChange(\"updatingTotal\"),this.notifyChange(\"updatingRemaining\")}_finishPendingUpdates(){this.pendingUpdatesPool.clear(),this.maxPendingUpdates=0,this._cleanupSymbols(),(this.pendingAdds||this.pendingRemoves)&&Ie.warn(\"pendingAdds/Removes in inconsistent state!\"),this.pendingAdds=0,this.pendingRemoves=0}_applyPendingUpdates(e){var t;if(this.geometryWarningLogged=!1,this.symbolWarningLogged=!1,0===this.pendingUpdates.size&&null!=(t=this._spatialIndex)&&t.updating)this._spatialIndex.update();else{for(const[t,i]of this.pendingUpdates){if(e.done)break;if(i.add&&0===i.state&&this._startAddRenderingInfo(i),!i.remove||i.add&&2!==i.state||(this.pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null),i.add)switch(i.state){case 2:this._addGraphic(i.add,i.renderingInfo),i.add=null,this.pendingAdds--,e.madeProgress();break;case 3:i.add=null,this.pendingAdds--}null==i.remove&&null==i.add&&this.pendingUpdates.delete(t)}0===this.pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange(\"needsUpdate\"))}}_startAddRenderingInfo(e){t(this.layer.renderer)&&\"dictionary\"===this.layer.renderer.type?(e.state=1,e.abortController=y(),this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal}).then((t=>{i(t)||i(t.symbol)?(Ie&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,Ie.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=2}),(t=>{e.abortController=null,b(t)?e.state=0:e.state=3}))):(e.renderingInfo=this._getRenderingInfo(e.add,Ie),e.state=2)}_addGraphic(e,s){if(this.graphicsWithoutSymbol.set(e.uid,e),i(s)||i(s.symbol)||!se(e))return;const r=s.symbol,a=this.getOrCreateGraphics3DSymbol(r,s.renderer);if(i(a))return;this.expandComputedExtent(e.geometry),this._beginGraphicUpdate(e);const n=new de(e,s,this.layer);let o=!1;const l=e=>{e===a.symbol.id&&(o=!0)};this._whenSymbolRemoved.push(l);const h=()=>{if(!this.destroyed){if(this._whenSymbolRemoved.removeUnordered(l),!(o||a.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==a.symbol.id)){if(this.graphicsWaitingForSymbol.has(e.uid)){const e=this.createGraphics3DGraphic(a,n);this._spatialIndex&&t(e)&&this._spatialIndex.add(e)}this._endGraphicUpdate(e)}--a.referenced,this.featureStore.events.emit(\"changed\"),this.labeler&&this.owner.view.labeler.setDirty()}},d=t=>{this.destroyed||(this._whenSymbolRemoved.removeUnordered(l),o||(b(t)?this.add([e]):a.destroyed||this._endGraphicUpdate(e)))};a.load(h,d)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){var s;i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,r=i.isElevationSource;this._conditionalRemove(i,t),null==(s=this._spatialIndex)||s.remove(i);const a=i.graphics3DSymbol.symbol.id;this.graphicsBySymbol.get(a).delete(t),this.graphicsWithoutSymbol.delete(t),this.removeGraphics3DGraphic(t,e,r),i.destroy(),this.featureStore.events.emit(\"changed\")}else this.graphicsWithoutSymbol.delete(t),this.graphicsWaitingForSymbol.delete(t),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\"))}hasLabelingContext(e){if(e instanceof x||e instanceof _){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}hasValidSymbolCreationContext(e){return!(e instanceof x&&!this.hasLabelingContext(e))||(Ie.error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"),!1)}_getRenderingInfo(e,s){const r=e.geometry;if(i(r))return s&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,s.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!M(r.spatialReference,this._spatialReference))return s&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,s.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&t(e.symbol))return s&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,s.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const a=this.rendererHasGeometryOperations?re(e,this.layer):e;let n;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||t(this.currentRenderer)))n=this.owner.getRenderingInfo(a,this.currentRenderer,o(this.arcadeOnDemand));else{n={symbol:a.symbol||Ce(a.geometry)}}return i(n)||i(n.symbol)?(s&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,s.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):n}_getRenderingInfoAsync(e,s){const r=e.geometry;if(i(r))return Ie&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,Ie.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&t(e.symbol))return Ie&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,Ie.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const a=this.rendererHasGeometryOperations?re(e,this.layer):e;return this.owner.getRenderingInfoAsync(a,o(this.currentRenderer),o(this.arcadeOnDemand),s)}createGraphics3DSymbol(e,i){if(!this.hasValidSymbolCreationContext(e))return null;const s=this.getConvertedSymbol(e);if(!s)return null;let r;if(t(i)&&\"backgroundFillSymbol\"in i&&i.backgroundFillSymbol){const e=H(i.backgroundFillSymbol,!1,!0);e.symbol&&\"web-style\"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const a=Ge(s,this.symbolCreationContext,r);return a.load((()=>{const e=a.extentPadding;e>this.extentPadding&&this._set(\"extentPadding\",e),this.notifyChange(\"averageSymbolComplexity\")}),(()=>{})),a}getOrCreateGraphics3DSymbol(e,i){let s=this.symbols.get(e.id);return void 0===s&&(s=e instanceof P?new me(e,(e=>this.createGraphics3DSymbol(e,i))):this.createGraphics3DSymbol(e,i),this.symbols.set(e.id,s)),t(s)&&++s.referenced,s}trackGraphicState(e){return i(this.graphicStateTracking)&&(this.graphicStateTracking=new xe(this)),this.graphicStateTracking.add(e)}addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this.numberOfGraphics++,e.isElevationSource&&(this.numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this.numberOfGraphics--,i&&(this.numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}createGraphics3DGraphic(e,s){const r=s.graphic;if(this.graphicsWithoutSymbol.delete(r.uid),!this.symbols.has(e.symbol.id))return this.add([r]),null;if(this.graphics3DGraphics.has(r.uid))return null;const a=e.createGraphics3DGraphic(s);if(i(a))return null;this.addGraphics3DGraphic(a);const n=e.symbol.id;this.graphicsBySymbol.has(n)||this.graphicsBySymbol.set(n,new Map),this.graphicsBySymbol.get(n).set(r.uid,a);a.isDraped&&this.graphicsDrapedUids.add(r.uid),a.centroid=null,t(r.geometry)&&\"point\"!==r.geometry.type&&a instanceof pe&&(a.centroid=ae(r.geometry,this._spatialReference)),this._updateUserVisibility(a),t(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(a),this.filterVisibility&&this.filterVisibility.updateVisibility(a),this.deconflictor&&this.deconflictor.addGraphic(a),this.labeler&&this.labeler.addGraphic(a),this.objectStates&&this.objectStates.addGraphic(a),this.deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,a),a.initialize(this.stage,this.stageLayer,this.owner),t(this.graphicStateTracking)&&this.graphicStateTracking.addGraphic(a);const o=this.whenGraphics3DGraphicRequests[r.uid];return o&&(delete this.whenGraphics3DGraphicRequests[r.uid],o.resolve(a)),a}abortRendererChange(){this.rendererChangeAbortController&&(this.rendererChangeAbortController.abort(),this.rendererChangeAbortController=null)}async rendererChange(e){if(this.abortRendererChange(),e!==this.currentRenderer)if(this.validateRenderer(e),i(e)&&this.currentRendererChange(null,!1),fe(e))if(t(e)&&e.arcadeRequired){const t=y();this.rendererChangeAbortController=t;const{arcadeUtils:i}=await this.ensureArcade();m(t),i.hasGeometryOperations(e)&&(await i.enableGeometryOperations(),m(t)),this.asyncUpdates?await this._frameTask.schedule((()=>this.currentRendererChange(e,!0)),t.signal):this.currentRendererChange(e,!0),this.rendererChangeAbortController=null}else if(this.asyncUpdates){const t=y();this.rendererChangeAbortController=t,await this._frameTask.schedule((()=>this.currentRendererChange(e,!1)),t.signal),this.rendererChangeAbortController=null}else this.currentRendererChange(e,!1);else this.currentRendererChange(e,!1)}async ensureArcade(){return i(this.arcadeOnDemand)?(this.arcadeOnDemand=await w(),this.arcadeOnDemand):this.arcadeOnDemand}currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=o(this.arcadeOnDemand);const s=this.symbolCreationContext.renderer;if(e===s)return;if(this.updateUpdatePolicy(),this.symbolConversionCache.clear(),i(e))return this.symbolCreationContext.renderer=null,void this.recreateAllGraphics();const r=N(s,e);this.updateUnchangedSymbolMappings(r,e,s),this.symbolCreationContext.renderer=e,i(r)||(\"complete\"===r.type?this.recreateAllGraphics():\"partial\"===r.type&&(this.applyRendererDiff(r,e,s)?this.volatileGraphicsUpdated():this.recreateAllGraphics()),this.notifyChange(\"averageSymbolComplexity\"))}diffHasSymbolChange(e){for(const t in e.diff)switch(t){case\"visualVariables\":case\"defaultSymbol\":case\"uniqueValueInfos\":break;case\"authoringInfo\":case\"fieldDelimiter\":delete e.diff[t];break;default:return!0}return!1}applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const s=[];for(const r of t){const t=this.graphicsBySymbol.get(r.id);t&&t.forEach(((a,n)=>{const l=a.graphic,h=this.layer instanceof O?this.layer:null,d=o(this.arcadeOnDemand);if(r===i.defaultSymbol&&i.getSymbol(re(l,h),{arcade:d})===i.defaultSymbol)return;const p=a.usedMemory;e.length||i.defaultSymbol?s.push(l):this.graphicsWithoutSymbol.set(n,l);const c=this.graphics3DGraphics.get(n);this._conditionalRemove(c,n),a.destroy(),t.delete(n),this.removeGraphics3DGraphic(n,p),this.updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(r.id)))}(e.length||s.length)&&(this.graphicsWithoutSymbol.forEach((e=>s.push(e))),this.graphicsWithoutSymbol.clear(),this.add(s)),this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}applyUniqueValueRendererDiff(e,t,i){const s=e.diff.defaultSymbol,r=e.diff.uniqueValueInfos;if(s||r){const a=r?r.added.map((e=>e.symbol)):[],n=r?r.removed.map((e=>e.symbol)):[];if(r)for(let e=0;e<r.changed.length;e++)a.push(r.changed[e].newValue.symbol),n.push(r.changed[e].oldValue.symbol);return s?(i.defaultSymbol&&n.push(i.defaultSymbol),t.defaultSymbol&&a.push(t.defaultSymbol)):i.defaultSymbol&&a.length&&n.push(t.defaultSymbol),this.applySymbolSetDiff(a,n,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}calculateUnchangedSymbolMapping(e,s,r){const a=e=>t(e)?e.id:null;if(s instanceof Z&&r instanceof Z&&(i(e)||\"partial\"===e.type)){const t=e&&e.diff,i=t&&t.defaultSymbol,n=t&&t.uniqueValueInfos;let o;return o=n?n.unchanged.map((e=>({oldId:a(e.oldValue.symbol),newId:a(e.newValue.symbol)}))):r.uniqueValueInfos.map(((e,t)=>({oldId:a(e.symbol),newId:a(s.uniqueValueInfos[t].symbol)}))),!i&&r.defaultSymbol&&o.push({oldId:a(r.defaultSymbol),newId:a(s.defaultSymbol)}),o}return[]}updateSymbolMapping(e,i){const s=i?\"string\"==typeof i?i:i.id:null,r=\"string\"==typeof i?null:i;if(!e||e===s)return;const a=this.graphicsBySymbol.get(e);this.graphicsBySymbol.delete(e),void 0!==a&&this.graphicsBySymbol.set(s,a);const n=this.symbols.get(e);void 0!==n&&(this.symbols.delete(e),this.symbols.set(s,n),t(n)&&(t(r)?n.symbol=r:n.symbol.id=s))}updateUnchangedSymbolMappings(e,t,i){const s=this.calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:r,newId:a}of s)this.updateSymbolMapping(r,a)}applyRendererDiff(e,i,s){if(this.diffHasSymbolChange(e))return!1;if(i instanceof Z&&s instanceof Z&&this.applyUniqueValueRendererDiff(e,i,s)&&0===Object.keys(e.diff).length)return!0;for(const[r]of this.graphicsBySymbol){const s=this.symbols.get(r);if(t(s)&&!s.applyRendererDiff(e,i))return!1}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"opacity\",t))),this.updateStageLayerVisibility()}updateUpdatePolicy(){const e=t(this.currentRenderer)&&\"dictionary\"===this.currentRenderer.type;t(this.forcedUpdatePolicy)?this._asyncUpdates=1===this.forcedUpdatePolicy:this._asyncUpdates=1===this.preferredUpdatePolicy||e,this.symbolCreationContext.isAsync=this._asyncUpdates,this._asyncUpdates||this._update(q)}slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.isSliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"slicePlaneEnabled\",t))),this.deconflictor&&this.deconflictor.slicePlaneEnabledChange(),this.labeler&&this.labeler.slicePlaneEnabledChange())}physicalBasedRenderingChange(e){e!==this.symbolCreationContext.physicalBasedRenderingEnabled&&(this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"physicalBasedRenderingEnabled\",t)||this._recreateSymbol(i)})))}pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"pixelRatio\",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=f((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,s=F();return ge(e,s,t)?this.symbolCreationContext.clippingExtent=Y(K(),s):this.symbolCreationContext.clippingExtent=null,!ee(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}forEachGraphics3DSymbol(e){for(const[t,s]of this.symbols){if(i(s))return;e(s,this.graphicsBySymbol.get(t)||Ae,t)}}updateAllGraphicsVisibility(){this.filterVisibility&&(this.filterVisibility.dirty=!0),this.modifyGraphics3DGraphicVisibilities((e=>{const i=this._updateUserVisibility(e),s=t(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(e);return i||s}))}hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(0,!1,0)))}validateRenderer(e){const t=ve(e);if(t){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:\"\"}, id:${this.layer.id}' is not supported in a SceneView`;Ie.warn(e,t.message)}}volatileGraphicsUpdated(){this.labeler&&this.labeler.reset(),this.stageLayer.shaderTransformationChanged(),this.notifyChange(\"updating\")}_cleanupSymbols(){if(this.graphicsWaitingForSymbol.size>0||this.suspendSymbolCleanup)return;let e=!1;this.symbols.forEach(((t,s)=>{if(i(t)||t.referenced>0)return;const r=this.graphicsBySymbol.get(s);r&&0!==r.size||(this.graphicsBySymbol.delete(s),this.symbols.delete(s),t&&t.destroy(),e=!0)})),e&&(this.recomputeExtentPadding(),this.notifyChange(\"averageSymbolComplexity\"))}snapshotInternals(){return{graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this.symbols.keys()].sort(),graphicsBySymbol:[...this.graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this.graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this.graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this.graphicsDrapedUids].sort(),pendingUpdates:this.pendingUpdates}}get test(){return{symbols:this.symbols,filterVisibility:this.filterVisibility,numPending:this.pendingUpdates.size,forceUpdatePolicy:e=>{this.forcedUpdatePolicy=e,this.updateUpdatePolicy()}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this.graphicsWithoutSymbol.size,pending:this.pendingUpdates.size}}};Ee.tmpVec=R(),e([h({readOnly:!0})],Ee.prototype,\"computedExtent\",void 0),e([h()],Ee.prototype,\"currentRenderer\",void 0),e([h()],Ee.prototype,\"rendererHasGeometryOperations\",void 0),e([h()],Ee.prototype,\"_frameTask\",void 0),e([h()],Ee.prototype,\"rendererChangeAbortController\",void 0),e([h()],Ee.prototype,\"elevationInfoChangeAbortController\",void 0),e([h()],Ee.prototype,\"setupAbortController\",void 0),e([h({readOnly:!0})],Ee.prototype,\"elevationAlignment\",void 0),e([h({readOnly:!0})],Ee.prototype,\"scaleVisibility\",void 0),e([h({readOnly:!0})],Ee.prototype,\"filterVisibility\",void 0),e([h()],Ee.prototype,\"_spatialIndex\",void 0),e([h({readOnly:!0})],Ee.prototype,\"extentPadding\",void 0),e([h()],Ee.prototype,\"_updatingPendingLoadedGraphicsChange\",void 0),e([h({readOnly:!0})],Ee.prototype,\"featureStore\",void 0),e([h({readOnly:!0})],Ee.prototype,\"deconflictor\",void 0),e([h({readOnly:!0})],Ee.prototype,\"labeler\",void 0),e([h({readOnly:!0})],Ee.prototype,\"objectStates\",void 0),e([h()],Ee.prototype,\"preferredUpdatePolicy\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"owner\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"layer\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"graphicSymbolSupported\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"getRenderingInfoWithoutRenderer\",void 0),e([h({readOnly:!0})],Ee.prototype,\"updating\",null),e([h({readOnly:!0})],Ee.prototype,\"needsUpdate\",null),e([h({readOnly:!0})],Ee.prototype,\"suspendedOrOutsideOfView\",null),e([h({readOnly:!0,dependsOn:[]})],Ee.prototype,\"updatingRemaining\",null),e([h({readOnly:!0,dependsOn:[]})],Ee.prototype,\"updatingTotal\",null),e([h({readOnly:!0,dependsOn:[\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives\",\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures\",\"averageSymbolComplexity\"]})],Ee.prototype,\"displayFeatureLimit\",null),e([h({readOnly:!0,dependsOn:[]})],Ee.prototype,\"averageSymbolComplexity\",null),e([h({constructOnly:!0})],Ee.prototype,\"hasZ\",void 0),e([h({constructOnly:!0})],Ee.prototype,\"hasM\",void 0),Ee=Re=e([d(\"esri.views.3d.layers.graphics.Graphics3DCore\")],Ee);class Oe{constructor(){this.add=null,this.renderingInfo=null,this.state=0,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=0,this.abortController=null,this.remove=null}}const je=10,Le=R(),Ve=R(),Ae=new Map;export{Ee as Graphics3DCore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as r}from\"../../core/maybe.js\";import e from\"../../core/Error.js\";import{to3D as n}from\"../../symbols/support/symbolConversion.js\";function o(e){return r(e)||\"simple\"===e.type||\"unique-value\"===e.type||\"class-breaks\"===e.type||\"dictionary\"===e.type}function s(n){if(r(n))return null;if(!o(n))return new e(\"renderer-conversion-3d:unsupported-renderer\",`Unsupported renderer of type '${n.type||n.declaredClass}'`,{renderer:n});switch(n.type){case\"simple\":return u(n);case\"unique-value\":return l(n);case\"class-breaks\":return i(n);case\"dictionary\":return null}return null}function t(r,n){if(!n)return null;let o;if(o=Array.isArray(n)?n:[n],o.length>0){const n=o.map((r=>r.details.symbol.type||r.details.symbol.declaredClass)).filter((r=>!!r));n.sort();const s=[];return n.forEach(((r,e)=>{0!==e&&r===n[e-1]||s.push(r)})),new e(\"renderer-conversion-3d:unsupported-symbols\",`Renderer contains symbols (${s.join(\", \")}) which are not supported in 3D`,{renderer:r,symbolErrors:o})}return null}function u(r){return t(r,n(r.symbol).error)}function l(r){const e=r.uniqueValueInfos.map((r=>n(r.symbol).error)).filter((r=>!!r)),o=n(r.defaultSymbol);return o.error&&e.unshift(o.error),t(r,e)}function i(r){const e=r.classBreakInfos.map((r=>n(r.symbol).error)).filter((r=>!!r)),o=n(r.defaultSymbol);return o.error&&e.unshift(o.error),t(r,e)}export{o as isSupportedRenderer3D,s as validateTo3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n"],"sourceRoot":""}