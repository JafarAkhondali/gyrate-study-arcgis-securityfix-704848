(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42f05965"],{"1b4a":function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("3349"),r=n("a29a"),s=n("2c63"),a=n("738e"),o=n("32dd"),l=n("d114"),c=n("a9c0"),u=n("38a4");class f{constructor(t,e,n,i){this.center=Object(a["b"])(t,e),this.centerT=Object(a["a"])(),this.halfWidth=n/2,this.halfHeight=i/2,this.width=n,this.height=i}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new f(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,e=4){const n=Math.abs(t.centerT[0]-this.centerT[0]),i=Math.abs(t.centerT[1]-this.centerT[1]),r=(t.halfWidth+this.halfWidth+e)/n,s=(t.halfHeight+this.halfHeight+e)/i,a=Math.min(r,s);return Object(u["m"])(a)}extend(t){const e=Math.min(this.xmin,t.xmin),n=Math.min(this.ymin,t.ymin),i=Math.max(this.xmax,t.xmax)-e,r=Math.max(this.ymax,t.ymax)-n,s=e+i/2,a=n+r/2;this.width=i,this.height=r,this.halfWidth=i/2,this.halfHeight=r/2,this.x=s,this.y=a}static deserialize(t){const e=t.readF32(),n=t.readF32(),i=t.readInt32(),r=t.readInt32();return new f(e,n,i,r)}}var h=f;const d=26,b=4,p=d+b,m=d-6,g=3,y=8,x=Math.PI/180;class O{constructor(t,e,n,i){this._rotationT=Object(s["a"])(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const r=n.rect,a=new Float32Array(8);t*=i,e*=i;const o=n.code?r.width*i:n.metrics.width,l=n.code?r.height*i:n.metrics.height;a[0]=t,a[1]=e,a[2]=t+o,a[3]=e,a[4]=t,a[5]=e+l,a[6]=t+o,a[7]=e+l,this._data=a,this._setTextureCoords(r),this._scale=i,this._mosaic=n,this.x=t,this.y=e,this.maxOffset=Math.max(t+o,e+l)}get width(){return this._mosaic.metrics.width*this._scale}get mosaic(){return this._mosaic}set angle(t){this._angle=t,Object(r["d"])(this._rotationT),Object(r["f"])(this._rotationT,this._rotationT,-t),this._setOffsets(this._data)}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(this._data),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:e}=this._mosaic.metrics,n=e*this._scale,i=Math.abs(t)*this._scale,a=new Float32Array(8);a[0]=this.x,a[1]=this.y,a[2]=this.x+n,a[3]=this.y,a[4]=this.x,a[5]=this.y+i,a[6]=this.x+n,a[7]=this.y+i;const o=Object(r["e"])(Object(s["a"])(),this._rotationT,this._T);Object(s["b"])(a,a,o);let l=1/0,c=1/0,u=0,f=0;for(let r=0;r<4;r++){const t=a[2*r],e=a[2*r+1];l=Math.min(l,t),c=Math.min(c,e),u=Math.max(u,t),f=Math.max(f,e)}const d=u-l,b=f-c,p=l+d/2,m=c+b/2;this._bounds=new h(p,m,d,b)}return this._bounds}setTransform(t){this._T=t,this._offsets=null}_setOffsets(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const e=this._offsets,n=new Float32Array(8),i=Object(r["e"])(Object(s["a"])(),this._rotationT,this._T);Object(s["b"])(n,t,i),e.upperLeft=Object(l["a"])(n[0]*y,n[1]*y),e.upperRight=Object(l["a"])(n[2]*y,n[3]*y),e.lowerLeft=Object(l["a"])(n[4]*y,n[5]*y),e.lowerRight=Object(l["a"])(n[6]*y,n[7]*y)}_setTextureCoords({x:t,y:e,width:n,height:i}){this._texcoords={upperLeft:Object(l["a"])(t,e),upperRight:Object(l["a"])(t+n,e),lowerLeft:Object(l["a"])(t,e+i),lowerRight:Object(l["a"])(t+n,e+i)}}}const j=(t,e)=>({code:0,page:0,sdf:!0,rect:new c["a"](0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});class v{constructor(t,e,n){this._rotation=0,this._decorate(t,e,n),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=e.length>1,this._hasRotation=0!==n.angle,this._T=this._createGlyphTransform(this.bounds,n);for(const i of t)i.setTransform(this._T)}setRotation(t){if(0===t&&0===this._rotation)return;this._rotation=t;const e=this._T,n=Object(r["b"])(Object(s["a"])(),t);Object(r["e"])(e,n,e);for(const i of this.glyphs)i.setTransform(this._T)}_decorate(t,e,n){if(!n.decoration||"none"===n.decoration||!t.length)return;const i=n.scale,r="underline"===n.decoration?p:m,s=t[0].textureBinding;for(const a of e){const e=a.startX*i,n=a.startY*i,o=(a.width+a.glyphWidthEnd)*i;t.push(new O(e,n+r*i,j(o,s),1))}}get boundsT(){const t=this.bounds,e=Object(i["s"])(Object(a["a"])(),t.x,t.y);if(Object(i["t"])(e,e,this._T),this._hasRotation){const n=Math.max(t.width,t.height);return new h(e[0],e[1],n,n)}return new h(e[0],e[1],t.width,t.height)}_createBounds(t){let e=1/0,n=1/0,i=0,r=0;for(const o of t)e=Math.min(e,o.xTopLeft),n=Math.min(n,o.yTopLeft),i=Math.max(i,o.xTopLeft+o.width),r=Math.max(r,o.yBottomRight);const s=i-e,a=r-n;return new h(e+s/2,n+a/2,s,a)}_createGlyphTransform(t,e){const n=x*e.angle,o=Object(s["a"])(),l=Object(a["a"])();return Object(r["h"])(o,o,Object(i["s"])(l,e.xOffset,-e.yOffset)),e.isCIM?Object(r["f"])(o,o,n):(Object(r["h"])(o,o,Object(i["s"])(l,t.x,t.y)),Object(r["f"])(o,o,n),Object(r["h"])(o,o,Object(i["s"])(l,-t.x,-t.y))),o}}class w{constructor(t,e,n,i,r,s){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(e,n)),this.end=Math.max(0,Math.max(e,n)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=i,this.yMin=r,this.yMax=s}}const T=t=>10===t,S=t=>32===t;function _(t,e,n){const i=new Array,r=1/n.scale,s=n.maxLineWidth*r,a=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1;let c=a,u=0,f=0,h=c,d=h,b=0,p=1/0,m=0;for(;c!==o;){const{code:e,metrics:n}=t[c],r=Math.abs(n.top);if(T(e)||S(e)||(p=Math.min(p,r),m=Math.max(m,r+n.height)),T(e))c!==a&&(i.push(new w(t,h,c-l,u,p,m)),p=1/0,m=0),u=0,h=c+l,d=c+l,f=0;else if(S(e))d=c+l,f=0,b=n.advance,u+=n.advance;else if(u>s){if(d!==h){const e=d-2*l;u-=b,i.push(new w(t,h,e,u-f,p,m)),p=1/0,m=0,h=d,u=f}else i.push(new w(t,h,c-l,u,p,m)),p=1/0,m=0,h=c,d=c,u=0;u+=n.advance,f+=n.advance}else u+=n.advance,f+=n.advance;c+=l}const g=new w(t,h,c-l,u,p,m);return g.start>=0&&g.end<t.length&&i.push(g),i}function L(t,e){let n=0;for(let s=0;s<t.length;s++){const{width:e}=t[s];n=Math.max(e,n)}const i="underline"===e.decoration?b:0,r=t[0].yMin;return{x:0,y:r,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+i-r,width:n}}function M(t,e,n){const i=n.scale,r=new Array,s=_(t,e,n),a=L(s,n),{vAlign:l,hAlign:c}=n,u=l===o["a"].Baseline?1:0,f=u?0:l-1,h=(1-u)*-a.y+f*(a.height/2)+(u?1:0)*-d;for(let o=0;o<s.length;o++){const{start:e,end:a,width:l}=s[o];let u=-1*(c+1)*(l/2)-g;const f=o*n.lineHeight+h-g;s[o].startX=u,s[o].startY=f;for(let n=e;n<=a;n++){const e=t[n];if(T(e.code))continue;const s=new O(u+e.metrics.left,f-e.metrics.top,e,i);u+=e.metrics.advance,r.push(s)}}return new v(r,s,n)}},"32dd":function(t,e,n){"use strict";var i,r;function s(t){switch(t){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}function a(t){switch(t){case"top":return r.Top;case"middle":return r.Center;case"baseline":return r.Baseline;case"bottom":return r.Bottom}}function o(t){switch(t){case"above-left":return[i.Right,r.Bottom];case"above-center":case"above-along":return[i.Center,r.Bottom];case"above-right":return[i.Left,r.Bottom];case"center-left":return[i.Right,r.Center];case"center-center":case"center-along":return[i.Center,r.Center];case"center-right":return[i.Left,r.Center];case"below-left":return[i.Right,r.Top];case"below-center":case"below-along":return[i.Center,r.Top];case"below-right":return[i.Left,r.Top];case"always-horizontal":return[i.Center,r.Baseline];default:return console.debug("Found invalid placement type "+t),[i.Center,r.Center]}}function l(t){switch(t){case i.Right:return-1;case i.Center:return 0;case i.Left:return 1;default:return console.debug("Found invalid horizontal alignment "+t),0}}function c(t){switch(t){case r.Top:return 1;case r.Center:return 0;case r.Bottom:case r.Baseline:return-1;default:return console.debug("Found invalid vertical alignment "+t),0}}function u(t){switch(t){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return c})),function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(i||(i={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(r||(r={}))},"334f":function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return N})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return W})),n.d(e,"h",(function(){return F})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return I})),n.d(e,"l",(function(){return L}));n("c120");var i=n("b2b2"),r=n("7f83"),s=n("28b1"),a=n("a9ab"),o=n("a915"),l=n("9180"),c=n("f70f"),u=n("a8d5"),f=n("3349"),h=n("a29a"),d=n("2c63"),b=n("738e"),p=n("32dd"),m=n("1b4a"),g=n("b7b9"),y=n("793f");const x=Math.PI/180,O=.04,j=Object(d["a"])(),v=Object(b["a"])(),w=512,T=50;function S(t,e){if(!e.isWrappable)return null;const[n,i]=Object(c["c"])(e);return t[2]>i?[Object(l["l"])([t[0],t[1],i,t[3]]),Object(l["l"])([n,t[1],n+t[2]-i,t[3]])]:t[0]<n?[Object(l["l"])([n,t[1],t[2],t[3]]),Object(l["l"])([i-(n-t[0]),t[1],i,t[3]])]:null}function _(t,e,n,i,r,o,l){if(!i||!n.symbol)return t[0]=t[1]=t[2]=t[3]=0,e[0]=e[1]=e[2]=e[3]=0,t;const c=i;if(!Object(a["f"])(c)){Object(s["a"])(t,c);let i=e[0];0===i&&(i=P(n),e[0]=i);const a=r*i/2;return t[0]-=a,t[1]-=a,t[2]+=a,t[3]+=a,t}{const i=c.x,s=c.y;"esriTS"===n.symbol.type&&0===e[2]&&0===e[3]&&W(e,n.symbol,n.mosaicItem),D(t,i,s,n.symbol,e,r,o,l)}return t}function L(t){return"text"===t||"esriTS"===t}function M(t){return"simple-marker"===t||"picture-marker"===t||"esriSMS"===t||"esriPMS"===t}function F(t){switch(Object(i["t"])(t.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}const A=Object(b["a"])(),R=Object(b["a"])(),B=Object(b["a"])(),z=Object(b["a"])(),E=Object(b["a"])(),V=Object(b["a"])(),C=Object(b["a"])();function I(t,e,n,i){Object(f["s"])(B,e,n);const r=t.paths;let s,a,o,l,c,u,h,d,b,p=1/0;for(let m=0;m<r.length;m++){const t=r[m];if(!(t.length<2))for(let r=1;r<t.length;r++)s=t[r-1][0],o=t[r-1][1],a=t[r][0],l=t[r][1],c=Math.min(s,a)-i,u=Math.min(o,l)-i,h=Math.max(s,a)+i,d=Math.max(o,l)+i,e<c||e>h||n<u||n>d||(Object(f["s"])(A,s,o),Object(f["s"])(R,a,l),Object(f["d"])(z,R,A),Object(f["d"])(E,A,B),Object(f["a"])(V,z,Object(f["g"])(z,E)/Object(f["g"])(z,z)),Object(f["d"])(C,E,V),b=Object(f["g"])(C,C),p>b&&(p=b))}return Math.sqrt(p)<=i}function N(t,e,n,i,r,s){let a,l;const c=Object(o["h"])(n.xoffset),u=Object(o["h"])(n.yoffset),d=x*n.angle,b=x*s;switch(n.type){case"esriSMS":a=l=Object(o["h"])(n.size);break;case"esriPMS":a=Object(o["h"])(n.width),l=Object(o["h"])(n.height)}r<O&&(i=O*i/r);const p=Object(h["d"])(j);Object(h["h"])(p,p,Object(f["s"])(v,t,e)),Object(h["f"])(p,p,b-d),Object(h["g"])(p,p,Object(f["s"])(v,i,-i)),Object(h["h"])(p,p,Object(f["s"])(v,c,-u));const m=[0,0];Object(f["t"])(m,Object(f["s"])(v,-.5*a,-.5*l),p);const g=[0,0];Object(f["t"])(g,Object(f["s"])(v,-.5*a,.5*l),p);const y=[0,0];Object(f["t"])(y,Object(f["s"])(v,.5*a,-.5*l),p);const w=[0,0];return Object(f["t"])(w,Object(f["s"])(v,.5*a,.5*l),p),{rings:[[m,y,w,g,m]]}}function U(t,e,n,i,r,s){const a=y["a"].getEnvelope(n.data);if(!a)return null;r<O&&(i=O*i/r);const l=Object(o["h"])(a.width),c=Object(o["h"])(a.height),u=Object(o["h"])(a.x),d=Object(o["h"])(a.y),b=0*x,p=x*s,m=Object(h["d"])(j);Object(h["h"])(m,m,Object(f["s"])(v,t,e)),Object(h["f"])(m,m,p-b),Object(h["g"])(m,m,Object(f["s"])(v,i,i));const g=[0,0];Object(f["t"])(g,Object(f["s"])(v,u,d+c),m);const w=[0,0];Object(f["t"])(w,Object(f["s"])(v,u,d),m);const T=[0,0];Object(f["t"])(T,Object(f["s"])(v,u+l,d+c),m);const S=[0,0];return Object(f["t"])(S,Object(f["s"])(v,u+l,d),m),{rings:[[g,T,S,w,g]]}}function k(t,e,n,i,r,s){const a=Object(o["h"])(n.xoffset),l=Object(o["h"])(n.yoffset),c=x*n.angle,u=x*s,d=Object(h["d"])(j);Object(h["h"])(d,d,Object(f["s"])(v,t,e)),Object(h["f"])(d,d,u),Object(h["g"])(d,d,Object(f["s"])(v,r,-r));const b=i[0]+i[2]/2,p=i[1]+i[3]/2;Object(h["h"])(d,d,Object(f["s"])(v,a,-l)),Object(h["h"])(d,d,Object(f["s"])(v,b,p)),Object(h["f"])(d,d,c),Object(h["h"])(d,d,Object(f["s"])(v,-b,-p));const m=[0,0];Object(f["t"])(m,Object(f["s"])(v,i[0],i[1]),d);const g=[0,0];Object(f["t"])(g,Object(f["s"])(v,i[0],i[1]+i[3]),d);const y=[0,0];Object(f["t"])(y,Object(f["s"])(v,i[0]+i[2],i[1]),d);const O=[0,0];return Object(f["t"])(O,Object(f["s"])(v,i[0]+i[2],i[1]+i[3]),d),{rings:[[m,y,O,g,m]]}}function P(t){switch(t.symbol.type){case"esriSFS":case"esriPFS":{const e=t.symbol.outline;return e?e.width:0}case"esriSLS":return Object(o["h"])(t.symbol.width);case"esriSMS":return Object(o["h"])(t.symbol.size);case"esriPMS":return Object(o["h"])(Math.max(t.symbol.width,t.symbol.height));case"esriTS":{const e=[0,0,0,0];W(e,t.symbol,t.mosaicItem);const n=Math.max(Math.abs(e[0]),Math.abs(e[1]));return Math.max(e[2],e[3])+n}case"expanded-cim":{const e=y["a"].getEnvelope(t.symbol.data);return e.width!==-1/0&&e.height!==-1/0||(e.width=10,e.height=10,e.x=0,e.y=0),Object(o["h"])(Math.sqrt(e.width*e.width+e.height*e.height))}case"composite-symbol":{if(!t.symbol.layers.length)return 0;const e=t.symbol.layers.length-1;return P({symbol:t.symbol.layers[e],mosaicItem:null})}case"label":default:return 0}}function W(t,e,n){if(!n||0===n.glyphMosaicItems.length)return t;const i=Object(g["a"])(e.text)[1],r=n.glyphMosaicItems,s=Object(m["a"])(r,i,{scale:Object(o["h"])(e.font.size)/24,angle:e.angle,xOffset:e.xoffset,yOffset:e.yoffset,hAlign:Object(p["d"])(e.horizontalAlignment||"center"),vAlign:Object(p["f"])(e.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(e.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(e.lineHeight||1,4)),decoration:e.font.decoration||"none",isCIM:!1}).bounds;return t[0]=Object(o["h"])(s.x-s.halfWidth),t[1]=Object(o["h"])(s.y-s.halfHeight),t[2]=Object(o["h"])(s.width),t[3]=Object(o["h"])(s.height),t}function D(t,e,n,i,s,a,o,l){let c;switch(i.type){case"esriSMS":case"esriPMS":c=N(e,n,i,a,o,0);break;case"esriTS":c=k(e,n,i,s,a,0);break;case"cim":case"CIMSymbolReference":case"expanded-cim":c=U(e,n,i,a,o,0)}let f,h,d=0;for(let r=0;r<c.rings[0].length-1;r++)h=c.rings[0][r],f=(e-h[0])*(e-h[0])+(n-h[1])*(n-h[1]),d=Math.max(d,f);d=Math.sqrt(d);let b=Object(u["b"])(e-d,l),p=Object(u["b"])(e+d,l);if(b>p){const t=Object(r["d"])(l);if(t){const[e,n]=t.valid;b=e,p=n}}return t[0]=b,t[1]=n-d,t[2]=p,t[3]=n+d,t}},"45a5":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fa8a");const r=new i["a"]({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function s(t){return r.toJSON(t)}},"6f36":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return u}));var i=n("a915"),r=n("8c81"),s=n("0eee"),a=n("793f"),o=n("334f");const l={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},c=.707;function u(t){if(!("visualVariables"in t))return 0;if(!t.hasVisualVariables("size"))return 0;const e=t.getVisualVariablesForType("size");if(!e[0])return 0;const n=e[0];if("stops"===n.transformationType)return n.stops.map(t=>t.size).reduce(j,0);if("clamped-linear"===n.transformationType){let t=-1/0,e=-1/0;return t="number"==typeof n.maxSize?n.maxSize:n.maxSize.stops.map(t=>t.size).reduce(j,0),e="number"==typeof n.minSize?n.minSize:n.minSize.stops.map(t=>t.size).reduce(j,0),Math.max(t,e)}return"real-world-size"===n.transformationType?30:void 0}function f(t){return t.type in l}async function h(t,e,n){if(!t||n&&"cluster"===n.type)return 0;if("heatmap"===t.type)return Math.round(3*t.blurRadius);if("dot-density"===t.type)return 0;if("dictionary"===t.type)return"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?100:200;const r=t.getSymbols(),s=u(t),a=[];for(const i of r)a.push(x(i,s));const o=await Promise.all(a);return Object(i["h"])(o.reduce(j,0))}const d=[0,0,0,0];function b(t,e){return null==t?e:t}function p(t,e){return null==t.outline?e:b(t.outline.width,e)}const m={sdf:!0,code:99,metrics:r["c"].metrics,rect:new s["a"](0,0,24,24),page:0,textureBinding:2};function g(t){const e=t.text&&t.text.length;if(!e)return{glyphMosaicItems:[m]};const n=[];for(let i=0;i<e;i++)n.push({...m,code:t.text.charCodeAt(i)});return{glyphMosaicItems:n}}async function y(t,e){if("simple-marker"===t.type){const n=Math.max(b(t.size,12),e);return O(t)+n*c}if("picture-marker"===t.type){const n=Math.max(b(t.height,12),e),i=b(t.width,12)*(n/b(t.height,12))/2,r=n/2;return O(t)+Math.sqrt(i*i+r*r)}if("text"===t.type){const e=g(t);Object(o["g"])(d,t.toJSON(),e);const n=Math.abs(d[0]),i=Math.abs(d[1]),r=d[2],s=d[3];return Math.max(n,i)+Math.max(r,s)}if("simple-line"===t.type){const n=t,i=Math.max(b(n.width,.75),e)/2;return n.marker?Math.max(6*n.width,2*e):i}if("simple-fill"===t.type||"picture-fill"===t.type)return Math.max(p(t,0),e)/2;if("cim"===t.type){const e=a["a"].getEnvelope(t.data);return e?Math.sqrt(e.width*e.width+e.height*e.height):0}return"web-style"===t.type?y(await t.fetchCIMSymbol(),e):0}async function x(t,e){return f(t)?Math.min(await y(t,e),75):0}function O(t){const e=b(t.xoffset,0),n=b(t.yoffset,0);return Math.sqrt(e*e+n*n)}function j(t,e){return Math.max(t,e)}},"7efa":function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return i}));const i={Base64:0,Hex:1,String:2,Raw:3},r=8,s=(1<<r)-1;function a(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function o(t){const e=[];for(let n=0,i=t.length*r;n<i;n+=r)e[n>>5]|=(t.charCodeAt(n/r)&s)<<n%32;return e}function l(t){const e=[];for(let n=0,i=32*t.length;n<i;n+=r)e.push(String.fromCharCode(t[n>>5]>>>n%32&s));return e.join("")}function c(t){const e="0123456789abcdef",n=[];for(let i=0,r=4*t.length;i<r;i++)n.push(e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15));return n.join("")}function u(t){const e="=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let r=0,s=4*t.length;r<s;r+=3){const s=(t[r>>2]>>r%4*8&255)<<16|(t[r+1>>2]>>(r+1)%4*8&255)<<8|t[r+2>>2]>>(r+2)%4*8&255;for(let a=0;a<4;a++)8*r+6*a>32*t.length?i.push(e):i.push(n.charAt(s>>6*(3-a)&63))}return i.join("")}function f(t,e){return t<<e|t>>>32-e}function h(t,e,n,i,r,s){return a(f(a(a(e,t),a(i,s)),r),n)}function d(t,e,n,i,r,s,a){return h(e&n|~e&i,t,e,r,s,a)}function b(t,e,n,i,r,s,a){return h(e&i|n&~i,t,e,r,s,a)}function p(t,e,n,i,r,s,a){return h(e^n^i,t,e,r,s,a)}function m(t,e,n,i,r,s,a){return h(n^(e|~i),t,e,r,s,a)}function g(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,i=-271733879,r=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const e=n,l=i,c=r,u=s;n=d(n,i,r,s,t[o+0],7,-680876936),s=d(s,n,i,r,t[o+1],12,-389564586),r=d(r,s,n,i,t[o+2],17,606105819),i=d(i,r,s,n,t[o+3],22,-1044525330),n=d(n,i,r,s,t[o+4],7,-176418897),s=d(s,n,i,r,t[o+5],12,1200080426),r=d(r,s,n,i,t[o+6],17,-1473231341),i=d(i,r,s,n,t[o+7],22,-45705983),n=d(n,i,r,s,t[o+8],7,1770035416),s=d(s,n,i,r,t[o+9],12,-1958414417),r=d(r,s,n,i,t[o+10],17,-42063),i=d(i,r,s,n,t[o+11],22,-1990404162),n=d(n,i,r,s,t[o+12],7,1804603682),s=d(s,n,i,r,t[o+13],12,-40341101),r=d(r,s,n,i,t[o+14],17,-1502002290),i=d(i,r,s,n,t[o+15],22,1236535329),n=b(n,i,r,s,t[o+1],5,-165796510),s=b(s,n,i,r,t[o+6],9,-1069501632),r=b(r,s,n,i,t[o+11],14,643717713),i=b(i,r,s,n,t[o+0],20,-373897302),n=b(n,i,r,s,t[o+5],5,-701558691),s=b(s,n,i,r,t[o+10],9,38016083),r=b(r,s,n,i,t[o+15],14,-660478335),i=b(i,r,s,n,t[o+4],20,-405537848),n=b(n,i,r,s,t[o+9],5,568446438),s=b(s,n,i,r,t[o+14],9,-1019803690),r=b(r,s,n,i,t[o+3],14,-187363961),i=b(i,r,s,n,t[o+8],20,1163531501),n=b(n,i,r,s,t[o+13],5,-1444681467),s=b(s,n,i,r,t[o+2],9,-51403784),r=b(r,s,n,i,t[o+7],14,1735328473),i=b(i,r,s,n,t[o+12],20,-1926607734),n=p(n,i,r,s,t[o+5],4,-378558),s=p(s,n,i,r,t[o+8],11,-2022574463),r=p(r,s,n,i,t[o+11],16,1839030562),i=p(i,r,s,n,t[o+14],23,-35309556),n=p(n,i,r,s,t[o+1],4,-1530992060),s=p(s,n,i,r,t[o+4],11,1272893353),r=p(r,s,n,i,t[o+7],16,-155497632),i=p(i,r,s,n,t[o+10],23,-1094730640),n=p(n,i,r,s,t[o+13],4,681279174),s=p(s,n,i,r,t[o+0],11,-358537222),r=p(r,s,n,i,t[o+3],16,-722521979),i=p(i,r,s,n,t[o+6],23,76029189),n=p(n,i,r,s,t[o+9],4,-640364487),s=p(s,n,i,r,t[o+12],11,-421815835),r=p(r,s,n,i,t[o+15],16,530742520),i=p(i,r,s,n,t[o+2],23,-995338651),n=m(n,i,r,s,t[o+0],6,-198630844),s=m(s,n,i,r,t[o+7],10,1126891415),r=m(r,s,n,i,t[o+14],15,-1416354905),i=m(i,r,s,n,t[o+5],21,-57434055),n=m(n,i,r,s,t[o+12],6,1700485571),s=m(s,n,i,r,t[o+3],10,-1894986606),r=m(r,s,n,i,t[o+10],15,-1051523),i=m(i,r,s,n,t[o+1],21,-2054922799),n=m(n,i,r,s,t[o+8],6,1873313359),s=m(s,n,i,r,t[o+15],10,-30611744),r=m(r,s,n,i,t[o+6],15,-1560198380),i=m(i,r,s,n,t[o+13],21,1309151649),n=m(n,i,r,s,t[o+4],6,-145523070),s=m(s,n,i,r,t[o+11],10,-1120210379),r=m(r,s,n,i,t[o+2],15,718787259),i=m(i,r,s,n,t[o+9],21,-343485551),n=a(n,e),i=a(i,l),r=a(r,c),s=a(s,u)}return[n,i,r,s]}function y(t,e=i.Hex){const n=e||i.Base64,s=g(o(t),t.length*r);switch(n){case i.Raw:return s;case i.Hex:return c(s);case i.String:return l(s);case i.Base64:return u(s)}}},"9bae":function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return T}));var i,r=n("c120"),s=n("b2b2"),a=n("e92d"),o=n("ce50"),l=n("9a81"),c=n("c3fc"),u=n("7efa"),f=n("a4ee"),h=n("7ffa"),d=(n("cea0"),n("59b2")),b=n("d386"),p=n("09db"),m=(n("e041"),n("8eed"),n("f402"),n("86f2"));let g=i=class extends c["a"]{writeLevels(t,e,n){for(const i in t){const t=this.levels[i];return void(e.stops=t)}}clone(){return new i({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(m["c"])(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(m["c"])(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Object(h["a"])(this.levels)})}};Object(f["a"])([Object(d["b"])()],g.prototype,"levels",void 0),Object(f["a"])([Object(p["a"])("levels")],g.prototype,"writeLevels",null),g=i=Object(f["a"])([Object(b["a"])("esri.views.2d.engine.LevelDependentSizeVariable")],g);const y=a["a"].getLogger("esri.views.2d.layers.support.clusterUtils");r["a"].add("esri-cluster-arcade-enabled",1);const x=Object(r["a"])("esri-cluster-arcade-enabled"),O=(t,e,n,i)=>{const r=e.clone();if(!T(r))return r;if(n.fields)for(const s of n.fields)_(t,s);if("visualVariables"in r){const e=(r.visualVariables||[]).filter(t=>"$view.scale"!==t.valueExpression),a=j(e);e.forEach(e=>{"rotation"===e.type?e.field?e.field=M(t,e.field,"avg_angle"):e.valueExpression&&(e.field=L(t,e.valueExpression,"avg_angle"),e.valueExpression=null):e.normalizationField?(e.field=M(t,e.field,"norm",e.normalizationField),e.normalizationField=null):e.field?e.field=M(t,e.field,"avg"):(e.field=L(t,e.valueExpression,"avg"),e.valueExpression=null)}),Object(s["j"])(a)&&!v(e)&&(e.push(w(n,i)),r.dynamicClusterSize=!0),r.visualVariables=e}switch(r.type){case"simple":break;case"unique-value":r.field?r.field=M(t,r.field,"mode"):r.valueExpression&&(r.field=L(t,r.valueExpression,"mode"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=M(t,r.field,"norm",r.normalizationField),r.normalizationField=null):r.field?r.field=M(t,r.field,"avg"):(r.field=L(t,r.valueExpression,"avg"),r.valueExpression=null)}return r},j=t=>{for(const e of t)if("size"===e.type)return e;return null},v=t=>{for(const e of t)if("cluster_count"===e.field)return!0;return!1},w=(t,e)=>{const n=[new l["a"]({value:0,size:0}),new l["a"]({value:1})];if(Object(s["j"])(e))return new c["a"]({field:"cluster_count",stops:[...n,new l["a"]({value:2,size:0})]});const i=Object.keys(e).reduce((i,r)=>({...i,[r]:[...n,new l["a"]({value:Math.max(2,e[r].minValue),size:t.clusterMinSize}),new l["a"]({value:Math.max(3,e[r].maxValue),size:t.clusterMaxSize})]}),{});return new g({field:"cluster_count",levels:i})},T=t=>{const e=e=>y.error(new o["a"]("Unsupported-renderer",e,{renderer:t}));if("unique-value"===t.type){if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===t.type){if(t.normalizationField){const n=t.normalizationType;if("field"!==n)return e("FeatureReductionCluster does not support a normalizationType of "+n),!1}}else if("simple"!==t.type)return e("FeatureReductionCluster does not support renderers of type "+t.type),!1;if(!x){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(t=>!(!("valueExpression"in t)||!t.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function S(t,e,n){switch(t){case"avg":case"avg_angle":return"cluster_avg_"+e;case"mode":return"cluster_type_"+e;case"norm":{const t=n,i="field",r=e.toLowerCase()+",norm:"+i+","+t.toLowerCase();return"cluster_avg_"+Object(u["a"])(r)}}}function _(t,e){const{name:n,outStatistic:i}=e,{onStatisticField:r,onStatisticValueExpression:s,statisticType:a}=i;if(s){const e=Object(u["a"])(s.toLowerCase());t.push({name:n,outStatistic:{onStatisticField:e,onStatisticValueExpression:s,statisticType:a}})}else r?t.push({name:n,outStatistic:{onStatisticField:r,statisticType:a}}):y.error(new o["a"]("mapview-unsupported-field","Unable to handle field",{field:e}))}function L(t,e,n){const i=Object(u["a"])(e),r="mode"===n?"cluster_type_"+i:"cluster_avg_"+i;return t.some(t=>t.name===r)||t.push({name:r,outStatistic:{onStatisticField:i,onStatisticValueExpression:e,statisticType:n}}),r}function M(t,e,n,i){if("cluster_count"===e||t.some(t=>t.name===e))return e;const r=S(n,e,i);return t.some(t=>t.name===r)||("norm"===n?t.push({name:r,outStatistic:{onStatisticField:e,onStatisticNormalizationField:i,statisticType:n}}):t.push({name:r,outStatistic:{onStatisticField:e,statisticType:n}})),r}},a305:function(t,e,n){"use strict";n.d(e,"a",(function(){return $})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return _}));var i=n("c120"),r=n("7ffa"),s=n("b2b2"),a=n("e92d"),o=n("ce50"),l=n("a915"),c=(n("667b"),n("6174")),u=(n("b423"),n("da00"),n("261a"),n("b48d"),n("478c"),n("ff57")),f=(n("f976"),n("9bae")),h=n("c84e"),d=n("18c6"),b=n("c8dd"),p=n("3484");function m(t){if(!t)return h["e"].NONE;let e=0;for(const n of t)if("size"===n.type){const t=Object(p["a"])(n);e|=t,"outline"===n.target&&(e|=t<<4)}else"color"===n.type?e|=h["e"].COLOR:"opacity"===n.type?e|=h["e"].OPACITY:"rotation"===n.type&&(e|=h["e"].ROTATION);return e}var g=n("6f36"),y=n("b433"),x=n("45a5");const O=a["a"].getLogger("esri.views.2d.layers.features.schemaUtils"),j="ValidationError",v={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function w(t){return Object(d["h"])(t)}function T(t){return t}function S(t){switch(t.type){case"line-marker":var e;return{type:"line-marker",color:null==(e=t.color)?void 0:e.toJSON(),placement:t.placement,style:t.style};default:return Object(c["a"])(t.toJSON()).toJSON()}}function _(t,e,n){if(!t)return null;let i=0,r=!1,a=0;switch(Object(s["k"])(e)&&(a=Object(g["b"])(e),"visualVariables"in e&&(i=m(e.visualVariables||[]),r="dot-density"===e.type)),t.type){case"simple-fill":case"picture-fill":return L(t,i,r,n);case"simple-marker":case"picture-marker":return F(t,i,a,n);case"simple-line":return M(t,i,n);case"text":return A(t,i,a,n);case"label":return z(t,i,n);case"cim":return{type:"cim",rendererKey:i,data:t.data,maxVVSize:a};case"web-style":return{...S(t),type:"web-style",hash:t.hash(),rendererKey:i,maxVVSize:a};default:throw new Error("symbol not supported "+t.type)}}function L(t,e,n,i){const r=Object(d["g"])(h["d"].FILL,e,!1,n),s=i?w(r):r,a=t.clone(),o=a.outline;a.outline=null;const l=[],c={materialKey:s,hash:a.hash(),...S(a)};if(l.push(c),o){const t=Object(d["g"])(h["d"].LINE,e,!0,!1),n={materialKey:i?w(t):t,hash:o.hash(),...S(o)};l.push(n)}return{type:"composite-symbol",layers:l,hash:l.reduce((t,e)=>e.hash+t,"")}}function M(t,e,n){const i=Object(d["g"])(h["d"].LINE,e,!1,!1),r=n?w(i):i,s=t.clone(),a=s.marker;s.marker=null;const o=[];if(o.push({materialKey:r,hash:s.hash(),...S(s)}),a){var l;const t=Object(d["g"])(h["d"].MARKER,e,!1,!1),i=n?w(t):t;a.color=null!=(l=a.color)?l:s.color,o.push({materialKey:i,hash:a.hash(),lineWidth:s.width,...S(a)})}return{type:"composite-symbol",layers:o,hash:o.reduce((t,e)=>e.hash+t,"")}}function F(t,e,n,i){const r=Object(d["g"])(h["d"].MARKER,e,!1,!1),s=i?w(r):r,a=S(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:n}}function A(t,e,n,i){const r=Object(d["g"])(h["d"].TEXT,e,!1,!1),s=i?w(r):r,a=S(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:n}}function R(t,e){const n=t.labelPlacement,i=v[e];if(!t.symbol)return O.warn("No LabelClass symbol specified."),!0;if(!i)return O.error(new o["a"]("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${e} is not supported`)),!0;if(!i.some(t=>t===n)){const r=i[0];n&&O.warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${r}`),t.labelPlacement=r}return!1}function B(t,e){const n=Object(r["a"])(t);return n.some(t=>R(t,e))?[]:n}function z(t,e,n){const i=Object(d["g"])(h["d"].LABEL,e,!1,!1,t.labelPlacement);return{materialKey:n?w(i):i,hash:t.hash(),...t.toJSON(),labelPlacement:t.labelPlacement}}function E(t){return Object(i["a"])("esri-2d-update-debug")&&console.debug("Created new schema",V(t,!0)),V(t)}function V(t,e=!1){try{var n,i;const r=D(t,e),s={};return r.map(e=>C(s,t,e)),{source:{definitionExpression:t.definitionExpression,fields:t.fields.map(t=>t.toJSON()),gdbVersion:t.gdbVersion,historicMoment:null==(n=t.historicMoment)?void 0:n.getTime(),outFields:t.availableFields,pixelBuffer:t.pixelBuffer,spatialReference:t.spatialReference.toJSON(),timeExtent:null==(i=t.timeExtent)?void 0:i.toJSON()},attributes:{fields:{},indexCount:0},processors:r,targets:s}}catch(r){if(r.fieldName===j)return O.error(r),null;throw r}}function C(t,e,n){switch(n.target){case"feature":return void U(t,N(e),n);case"aggregate":{const i=e.featureReduction;if("selection"===i.type)throw new o["a"](j,"Mapview does not support `selection` reduction type",i);return U(t,N(e),n),void k(t,i,n)}}}function I(t,e){for(const n in e){const i=e[n];if(i.target!==t.name)continue;const r=t.attributes[n];r?(r.context.mesh=r.context.mesh||i.context.mesh,r.context.storage=r.context.storage||i.context.storage):t.attributes[n]=i}return t}function N(t){var e,n,i,r,s;return[null!=(e=null==(n=t.filter)?void 0:n.toJSON())?e:null,null!=(i=null==(r=t.effect)||null==(s=r.filter)?void 0:s.toJSON())?i:null]}function U(t,e,n){return t.feature||(t.feature={name:"feature",input:"source",filters:e,attributes:{}}),I(t.feature,n.attributes.fields),t}function k(t,e,n){return t.aggregate||(t.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:Object(l["h"])(e.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(Object(l["h"])(e.clusterMaxSize)/64),fields:n.aggregateFields}}),I(t.aggregate,n.attributes.fields),t}function P(t,e){return e.field?W(t,{...e,type:"field",field:e.field}):e.valueExpression?W(t,{...e,type:"expression",valueExpression:e.valueExpression}):{field:null,fieldIndex:null}}function W(t,e){switch(e.type){case"expression":{const n=T(e.valueExpression);if(!t.fields[n]){const i=t.indexCount++;t.fields[n]={...e,name:n,fieldIndex:i}}return{fieldIndex:t.fields[n].fieldIndex}}case"label-expression":{const n=T(JSON.stringify(e.label));if(!t.fields[n]){const i=t.indexCount++;t.fields[n]={...e,name:n,fieldIndex:i}}return{fieldIndex:t.fields[n].fieldIndex}}case"field":{const n=e.field;return"aggregate"===e.target&&t.fields[n]||(t.fields[n]={...e,name:n}),{field:n}}case"statistic":return t.fields[e.name]={...e},{field:e.name}}}function D(t,e=!1){const n=new Array;let i=0;return n.push(J(t,i++,e)),n}function H(t,e,n,i,r,s=!1){const a=W(e,{type:"label-expression",target:i,context:{mesh:!0},resultType:"string",label:{labelExpression:n.labelExpression,labelExpressionInfo:n.labelExpressionInfo?{expression:n.labelExpressionInfo.expression}:null,symbol:!!n.symbol,where:n.where}}),{fieldIndex:o}=a;return{..._(n,t,s),fieldIndex:o,target:i,index:r}}function J(t,e,n=!1){const i={indexCount:0,fields:{}},r="featureReduction"in t&&t.featureReduction,s=r?"aggregate":"feature";switch(t.renderer.type){case"heatmap":{const{blurRadius:e,fieldOffset:n,field:r}=t.renderer;return{type:"heatmap",aggregateFields:[],attributes:i,target:s,storage:null,mesh:{blurRadius:e,fieldOffset:n,field:P(i,{target:s,field:r,resultType:"numeric"}).field}}}default:{const e=[],a="aggregate"===s?Object(f["b"])(e,t.renderer,r,null):t.renderer;G(i,e);const l=$(i,s,a,n);let c=null;const h=q(i,s,a),d=Object(x["a"])(t.geometryType);let b=t.labelsVisible&&t.labelingInfo||[],p=[];if(r){if("selection"===r.type)throw new o["a"](j,"Mapview does not support `selection` reduction type",r);if(r.symbol){const t=new u["a"]({symbol:r.symbol,visualVariables:"visualVariables"in a?a.visualVariables:null});c=$(i,s,t,n)}p=r&&r.labelsVisible&&r.labelingInfo||[]}b=B(b,d),p=B(p,d);let m=0;const g=[...b.map(t=>H(a,i,t,"feature",m++,n)),...p.map(t=>H(a,i,t,"aggregate",m++,n))];return{type:"symbol",target:s,attributes:i,aggregateFields:e,storage:h,mesh:{matcher:l,labels:g,aggregateMatcher:c}}}}}function G(t,e){const n={mesh:!0,storage:!0};for(const i of e){const{name:e,outStatistic:r}=i,{statisticType:s,onStatisticField:a}=r;let o=null,l=null,c=null;const u="numeric",f="feature";"onStatisticValueExpression"in r?l=W(t,{type:"expression",target:f,valueExpression:r.onStatisticValueExpression,resultType:u}).fieldIndex:"onStatisticNormalizationField"in r?(o=W(t,{type:"field",target:f,field:a,resultType:u}).field,c=r.onStatisticNormalizationField):o=W(t,{type:"field",target:f,field:a,resultType:u}).field,W(t,{type:"statistic",target:"aggregate",name:e,context:n,inField:o,inNormalizationField:c,inFieldIndex:l,statisticType:s})}}function q(t,e,n){switch(n.type){case"dot-density":return K(t,e,n.attributes);case"simple":case"class-breaks":case"unique-value":return Y(t,e,n.visualVariables);case"heatmap":case"dictionary":return null}}function K(t,e,n){return n&&n.length?{type:"dot-density",mapping:n.map((n,i)=>{const{field:r,fieldIndex:s}=P(t,{valueExpression:n.valueExpression,field:n.field,resultType:"numeric",target:e});return{binding:i,field:r,fieldIndex:s}}),target:e}:{type:"dot-density",mapping:[],target:e}}function Y(t,e,n){if(!n||!n.length)return{type:"visual-variable",mapping:[],target:e};const i={storage:!0},r="numeric";return{type:"visual-variable",mapping:Object(y["b"])(n).map(n=>{var s;const a=Object(b["m"])(n.type),{field:o,fieldIndex:l}=P(t,{target:e,valueExpression:n.valueExpression,field:n.field,context:i,resultType:r});switch(n.type){case"size":return"$view.scale"===n.valueExpression?null:{type:"size",binding:a,field:o,fieldIndex:l,normalizationField:P(t,{target:e,field:n.normalizationField,context:i,resultType:r}).field,valueRepresentation:null!=(s=n.valueRepresentation)?s:null};case"color":return{type:"color",binding:a,field:o,fieldIndex:l,normalizationField:P(t,{target:e,field:n.normalizationField,context:i,resultType:r}).field};case"opacity":return{type:"opacity",binding:a,field:o,fieldIndex:l,normalizationField:P(t,{target:e,field:n.normalizationField,context:i,resultType:r}).field};case"rotation":return{type:"rotation",binding:a,field:o,fieldIndex:l}}}).filter(t=>t),target:e}}function $(t,e,n,i=!1){const r=Object(s["u"])(t,{indexCount:0,fields:{}});switch(n.type){case"simple":case"dot-density":return X(r,n,"dot-density"===n.type,i);case"class-breaks":return Z(r,e,n,i);case"unique-value":return Q(r,e,n,i);case"dictionary":return tt(r,n,i)}}function X(t,e,n,i=!1){const r=e.getSymbols();return{type:"simple",symbol:_(r.length?r[0]:null,e,i),isDotDensity:n}}function Z(t,e,n,i=!1){const r={mesh:!0,use:"renderer.field"},s=n.backgroundFillSymbol,{field:a,fieldIndex:o}=P(t,{target:e,field:n.field,valueExpression:n.valueExpression,resultType:"numeric",context:r}),l=n.normalizationType,c="log"===l?"esriNormalizeByLog":"percent-of-total"===l?"esriNormalizeByPercentOfTotal":"field"===l?"esriNormalizeByField":null,u=n.classBreakInfos.map(t=>({symbol:_(t.symbol,n,i),min:t.minValue,max:t.maxValue})).sort((t,e)=>t.min-e.min);return{type:"interval",attributes:t.fields,field:a,fieldIndex:o,backgroundFillSymbol:_(s,n,i),defaultSymbol:_(n.defaultSymbol,n,i),intervals:u,normalizationField:n.normalizationField,normalizationTotal:n.normalizationTotal,normalizationType:c,isMaxInclusive:n.isMaxInclusive}}function Q(t,e,n,i=!1){const r=[],s=n.backgroundFillSymbol,a={target:e,context:{mesh:!0},resultType:"string"};if(n.field&&"string"!=typeof n.field)throw new o["a"](j,"Expected renderer.field to be a string",n);const{field:l,fieldIndex:c}=P(t,{...a,field:n.field,valueExpression:n.valueExpression});for(const o of n.uniqueValueInfos)r.push({value:""+o.value,symbol:_(o.symbol,n,i)});return{type:"map",attributes:t.fields,field:l,fieldIndex:c,field2:P(t,{...a,field:n.field2}).field,field3:P(t,{...a,field:n.field3}).field,fieldDelimiter:n.fieldDelimiter,backgroundFillSymbol:_(s,n),defaultSymbol:_(n.defaultSymbol,n),map:r}}function tt(t,e,n=!1){return{type:"dictionary",renderer:e.toJSON()}}},a9c0:function(t,e,n){"use strict";class i{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.width=n,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}e["a"]=i},b433:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c}));var i=n("e92d"),r=n("a915");const s=8,a=s-2,o=i["a"].getLogger("esri.renderers.visualVariables.support.utils"),l=t=>{if(!("visualVariables"in t)||!t.visualVariables||!t.visualVariables.length)return t;const e=t.clone(),n=e.visualVariables.map(t=>u(t)?f(t):t);return e.visualVariables=n,e};function c(t){return t.map(t=>u(t)?f(t.clone()):t)}function u(t){return("size"===t.type||"color"===t.type||"opacity"===t.type)&&null!=t.stops}function f(t){return t.stops=p(t.type,t.stops),t}function h(t,e,n){return(1-n)*t+n*e}function d(t,e){const[n,...i]=e,s=i.pop(),o=i[0].value,l=i[i.length-1].value,c=(l-o)/a,u=[];for(let a=o;a<l;a+=c){let n=0;for(;a>=i[n].value;)n++;const s=i[n],o=e[n-1],l=a-o.value,c=s.value===o.value?1:l/(s.value-o.value);if("color"===t){const t=i[n],r=e[n-1],s=t.color.clone();s.r=h(r.color.r,s.r,c),s.g=h(r.color.g,s.g,c),s.b=h(r.color.b,s.b,c),s.a=h(r.color.a,s.a,c),u.push({value:a,color:s,label:t.label})}else if("size"===t){const t=i[n],s=e[n-1],o=Object(r["k"])(t.size),l=h(Object(r["k"])(s.size),o,c);u.push({value:a,size:l,label:t.label})}else{const t=i[n],r=h(e[n-1].opacity,t.opacity,c);u.push({value:a,opacity:r,label:t.label})}}return[n,...u,s]}function b(t){const[e,...n]=t,i=n.pop();for(;n.length>a;){let t=0,e=0;for(let i=1;i<n.length;i++){const r=n[i-1],s=n[i],a=Math.abs(s.value-r.value);a>e&&(e=a,t=i)}n.splice(t,1)}return[e,...n,i]}function p(t,e){return e.length<=s?e:(o.warn(`Found ${e.length} Visual Variable stops, but MapView only supports ${s}. Displayed stops will be simplified.`),e.length>2*s?d(t,e):b(e))}},b7b9:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("d7bf");const r=new i["a"];function s(t){if(!r.hasBidiChar(t))return[t,!1];let e;return e="rtl"===r.checkContextual(t)?"IDNNN":"ICNNN",[r.bidiTransform(t,e,"VLYSN"),!0]}},d7bf:function(t,e,n){"use strict";const i=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],r=["آ","أ","إ","ا"],s=["ﻵ","ﻷ","ﻹ","ﻻ"],a=["ﻶ","ﻸ","ﻺ","ﻼ"],o=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],l=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],c=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],u=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],f=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],h=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],d=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],b=["ء","ف"],p=["غ","ي"],m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y=0,x=1,O=2,j=3,v=4,w=5,T=6,S=7,_=8,L=9,M=10,F=11,A=12,R=13,B=14,z=15,E=16,V=17,C=18,I=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],N=100,U=[N+0,y,y,y,y,N+1,N+2,N+3,x,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,N+4,v,v,v,y,v,y,v,y,v,v,v,y,y,v,v,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,v,v,y,y,v,v,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,y,N+5,S,S,N+6,N+7],k=[[C,C,C,C,C,C,C,C,C,T,w,T,_,w,C,C,C,C,C,C,C,C,C,C,C,C,C,C,w,w,w,T,_,v,v,F,F,F,v,v,v,v,v,M,L,M,L,L,O,O,O,O,O,O,O,O,O,O,L,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,C,C,C,C,C,C,w,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,L,v,F,F,F,F,v,v,v,v,y,v,v,C,v,v,F,F,O,O,v,y,v,v,v,O,y,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,y,y,y,y,y,y,y,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,y,v,v,v,v,v,v,v,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,x,A,x,A,A,x,A,A,x,A,v,v,v,v,v,v,v,v,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,v,v,v,v,v,x,x,x,x,x,v,v,v,v,v,v,v,v,v,v,v],[j,j,j,j,v,v,v,v,S,F,F,S,L,S,v,v,A,A,A,A,A,A,A,A,A,A,A,S,v,v,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,j,j,j,j,j,j,j,j,j,j,F,j,j,S,S,S,A,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,A,A,A,A,A,A,A,j,v,A,A,A,A,A,A,S,S,A,A,v,A,A,A,A,S,S,O,O,O,O,O,O,O,O,O,O,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,v,S,S,A,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,v,v,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,A,A,A,A,A,A,A,A,A,A,A,S,v,v,v,v,v,v,v,v,v,v,v,v,v,v,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,A,A,A,A,A,A,A,A,A,x,x,v,v,v,v,x,v,v,v,v,v],[_,_,_,_,_,_,_,_,_,_,_,C,C,C,y,x,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,_,w,R,B,z,E,V,L,F,F,F,F,F,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,L,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,_,C,C,C,C,C,v,v,v,v,v,C,C,C,C,C,C,O,y,v,v,O,O,O,O,O,O,M,M,v,v,v,y,O,O,O,O,O,O,O,O,O,O,M,M,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[y,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,v,y,y,y,y,y,v,v,v,v,v,x,A,x,x,x,x,x,x,x,x,x,x,M,x,x,x,x,x,x,x,x,x,x,x,x,x,v,x,x,x,x,x,v,x,v,x,x,v,x,x,v,x,x,x,x,x,x,x,x,x,x,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,A,A,A,A,A,A,A,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,L,v,L,v,v,L,v,v,v,v,v,v,v,v,v,F,v,v,M,M,v,v,v,v,v,F,F,v,v,v,v,v,S,S,S,S,S,v,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,v,v,C],[v,v,v,F,F,F,v,v,v,v,v,M,L,M,L,L,O,O,O,O,O,O,O,O,O,O,L,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,v,v,v,y,y,y,y,y,y,v,v,y,y,y,y,y,y,v,v,y,y,y,y,y,y,v,v,y,y,y,v,v,v,F,F,v,v,v,F,F,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v]];class P{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,e,n){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(pt(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,n))return t;e=this.inputFormat,n=this.outputFormat;let i=t;const r=jt,s=ht(e.charAt(1)),a=ht(n.charAt(1)),o=("I"===e.charAt(0)?"L":e.charAt(0))+s,l=("I"===n.charAt(0)?"L":n.charAt(0))+a,c=e.charAt(2)+n.charAt(2);r.defInFormat=o,r.defOutFormat=l,r.defSwap=c;const u=W(t,o,l,c,r);let f=!1;return"R"===n.charAt(1)?f=!0:"C"!==n.charAt(1)&&"D"!==n.charAt(1)||(f="rtl"===this.checkContextual(u)),this.sourceToTarget=yt,this.targetToSource=mt(this.sourceToTarget),xt=this.targetToSource,i=e.charAt(3)===n.charAt(3)?u:"S"===n.charAt(3)?H(f,u,!0):K(u,f,!0),this.sourceToTarget=yt,this.targetToSource=xt,this.levels=Ot,i}_inputFormatSetter(t){if(!_t.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!_t.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}checkContextual(t){let e=G(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(n){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}hasBidiChar(t){return Lt.test(t)}}function W(t,e,n,i,r){const s=D(t,{inFormat:e,outFormat:n,swap:i},r);if(s.inFormat===s.outFormat)return t;e=s.inFormat,n=s.outFormat,i=s.swap;const a=e.substring(0,1),o=e.substring(1,4),l=n.substring(0,1),c=n.substring(1,4);if(r.inFormat=e,r.outFormat=n,r.swap=i,"L"===a&&"VLTR"===n){if("LTR"===o)return r.dir=Tt,Y(t,r);if("RTL"===o)return r.dir=St,Y(t,r)}if("V"===a&&"V"===l)return r.dir="RTL"===o?St:Tt,tt(t,r);if("L"===a&&"VRTL"===n)return"LTR"===o?(r.dir=Tt,t=Y(t,r)):(r.dir=St,t=Y(t,r)),tt(t);if("VLTR"===e&&"LLTR"===n)return r.dir=Tt,Y(t,r);if("V"===a&&"L"===l&&o!==c)return t=tt(t),"RTL"===o?W(t,"LLTR","VLTR",i,r):W(t,"LRTL","VRTL",i,r);if("VRTL"===e&&"LRTL"===n)return W(t,"LRTL","VRTL",i,r);if("L"===a&&"L"===l){const e=r.swap;return r.swap=e.substr(0,1)+"N","RTL"===o?(r.dir=St,t=Y(t,r),r.swap="N"+e.substr(1,2),r.dir=Tt,t=Y(t,r)):(r.dir=Tt,t=Y(t,r),r.swap="N"+e.substr(1,2),t=W(t,"VLTR","LRTL",r.swap,r)),t}return t}function D(t,e,n){if(void 0===e.inFormat&&(e.inFormat=n.defInFormat),void 0===e.outFormat&&(e.outFormat=n.defOutFormat),void 0===e.swap&&(e.swap=n.defSwap),e.inFormat===e.outFormat)return e;const i=e.inFormat.substring(0,1),r=e.outFormat.substring(0,1);let s,a=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===a.charAt(0)&&(s=G(t),a="ltr"===s||"rtl"===s?s.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=i+a),"C"===o.charAt(0)&&(s=G(t),"rtl"===s?o="RTL":"ltr"===s?(s=q(t),o=s.toUpperCase()):o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=r+o),e}function H(t,e,n){if(0===e.length)return"";void 0===t&&(t=!0),void 0===n&&(n=!0);const i=(e=String(e)).split("");let r=0,s=1,a=i.length;t||(r=i.length-1,s=-1,a=1);const o=J(i,r,s,a,n);let l="";for(let c=0;c<i.length;c++)n&&et(o,o.length,c)>-1?(gt(xt,c,!t,-1),yt.splice(c,1)):l+=i[c];return l}function J(t,e,n,i,r){let o=0;const u=[];let h=0;for(let d=e;d*n<i;d+=n)if(nt(t[d])||ft(t[d])){if("ل"===t[d]&&rt(t,d+n,n,i)){t[d]=bt(t[d+n],0===o?s:a),d+=n,dt(t,d,n,i),r&&(u[h]=d,h++),o=0;continue}const e=t[d];1===o?t[d]=it(t,d+n,n,i)?ct(t[d]):ut(t[d],c):!0===it(t,d+n,n,i)?t[d]=ut(t[d],f):t[d]=ut(t[d],l),ft(e)||(o=1),!0===lt(e)&&(o=0)}else o=0;return u}function G(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function q(t){const e=t.split("");return e.reverse(),G(e.join(""))}function K(t,e,n){if(0===t.length)return"";void 0===n&&(n=!0),void 0===e&&(e=!0);let i="";const s=(t=String(t)).split("");for(let a=0;a<t.length;a++){let o=!1;if(s[a]>="ﹰ"&&s[a]<"\ufeff"){const l=t.charCodeAt(a);s[a]>="ﻵ"&&s[a]<="ﻼ"?(e?(a>0&&n&&" "===s[a-1]?i=i.substring(0,i.length-1)+"ل":(i+="ل",o=!0),i+=r[(l-65269)/2]):(i+=r[(l-65269)/2],i+="ل",a+1<t.length&&n&&" "===s[a+1]?a++:o=!0),o&&(gt(xt,a,!0,1),yt.splice(a,0,yt[a]))):i+=d[l-65136]}else i+=s[a]}return i}function Y(t,e){const n=t.split(""),i=[];return $(n,i,e),Z(n,i,e),st(2,n,i,e),st(1,n,i,e),Ot=i,n.join("")}function $(t,e,n){const i=t.length,r=n.dir?g:m;let s=0,a=-1;const o=[],l=[];n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1;for(let c=0;c<i;c++)o[c]=Q(t[c]);for(let c=0;c<i;c++){const i=s,u=at(t,o,l,c,n);l[c]=u,s=r[i][u];const f=240&s;s&=15;const h=r[s][vt];if(e[c]=h,f>0)if(16===f){for(let t=a;t<c;t++)e[t]=1;a=-1}else a=-1;if(r[s][wt])-1===a&&(a=c);else if(a>-1){for(let t=a;t<c;t++)e[t]=h;a=-1}o[c]===w&&(e[c]=0),n.hiLevel|=h}n.hasUbatS&&X(o,e,i,n)}function X(t,e,n,i){for(let r=0;r<n;r++)if(t[r]===T){e[r]=i.dir;for(let n=r-1;n>=0&&t[n]===_;n--)e[n]=i.dir}}function Z(t,e,n){if(0!==n.hiLevel&&n.swap.substr(0,1)!==n.swap.substr(1,2))for(let i=0;i<t.length;i++)1===e[i]&&(t[i]=ot(t[i]))}function Q(t){const e=t.charCodeAt(0),n=U[e>>8];return n<N?n:k[n-N][255&e]}function tt(t,e){const n=t.split("");if(e){const t=[];$(n,t,e),Ot=t}return n.reverse(),yt.reverse(),n.join("")}function et(t,e,n){for(let i=0;i<e;i++)if(t[i]===n)return i;return-1}function nt(t){for(let e=0;e<b.length;e++)if(t>=b[e]&&t<=p[e])return!0;return!1}function it(t,e,n,i){for(;e*n<i&&ft(t[e]);)e+=n;return!!(e*n<i&&nt(t[e]))}function rt(t,e,n,i){for(;e*n<i&&ft(t[e]);)e+=n;let s=" ";if(!(e*n<i))return!1;s=t[e];for(let a=0;a<r.length;a++)if(r[a]===s)return!0;return!1}function st(t,e,n,i){if(i.hiLevel<t)return;if(1===t&&i.dir===St&&!i.hasUbatB)return e.reverse(),void yt.reverse();const r=e.length;let s,a,o,l,c,u=0;for(;u<r;){if(n[u]>=t){for(s=u+1;s<r&&n[s]>=t;)s++;for(a=u,o=s-1;a<o;a++,o--)l=e[a],e[a]=e[o],e[o]=l,c=yt[a],yt[a]=yt[o],yt[o]=c;u=s}u++}}function at(t,e,n,i,r){const s=e[i];return{UBAT_L:()=>(r.lastArabic=!1,y),UBAT_R:()=>(r.lastArabic=!1,x),UBAT_ON:()=>v,UBAT_AN:()=>j,UBAT_EN:()=>r.lastArabic?j:O,UBAT_AL:()=>(r.lastArabic=!0,r.hasUbatAl=!0,x),UBAT_WS:()=>v,UBAT_CS:()=>{let t,s;return i<1||i+1>=e.length||(t=n[i-1])!==O&&t!==j||(s=e[i+1])!==O&&s!==j?v:(r.lastArabic&&(s=j),s===t?s:v)},UBAT_ES:()=>(i>0?n[i-1]:w)===O&&i+1<e.length&&e[i+1]===O?O:v,UBAT_ET:()=>{if(i>0&&n[i-1]===O)return O;if(r.lastArabic)return v;let t=i+1;const s=e.length;for(;t<s&&e[t]===F;)t++;return t<s&&e[t]===O?O:v},UBAT_NSM:()=>{if("VLTR"===r.inFormat){const n=e.length;let r=i+1;for(;r<n&&e[r]===A;)r++;if(r<n){const n=t[i].charCodeAt[0],s=n>=1425&&n<=2303||64286===n,a=e[r];if(s&&(a===x||a===S))return x}}return i<1||e[i-1]===w?v:n[i-1]},UBAT_B:()=>(r.lastArabic=!0,r.hasUbatB=!0,r.dir),UBAT_S:()=>(r.hasUbatS=!0,v),UBAT_LRE:()=>(r.lastArabic=!1,v),UBAT_RLE:()=>(r.lastArabic=!1,v),UBAT_LRO:()=>(r.lastArabic=!1,v),UBAT_RLO:()=>(r.lastArabic=!1,v),UBAT_PDF:()=>(r.lastArabic=!1,v),UBAT_BN:()=>v}[I[s]]()}function ot(t){let e,n=0,r=i.length-1;for(;n<=r;)if(e=Math.floor((n+r)/2),t<i[e][0])r=e-1;else{if(!(t>i[e][0]))return i[e][1];n=e+1}return t}function lt(t){for(let e=0;e<h.length;e++)if(h[e]===t)return!0;return!1}function ct(t){for(let e=0;e<o.length;e++)if(t===o[e])return u[e];return t}function ut(t,e){for(let n=0;n<o.length;n++)if(t===o[n])return e[n];return t}function ft(t){return t>="ً"&&t<="ٕ"}function ht(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function dt(t,e,n,i){for(;e*n<i&&ft(t[e]);)e+=n;return e*n<i&&(t[e]=" ",!0)}function bt(t,e){for(let n=0;n<r.length;n++)if(t===r[n])return e[n];return t}function pt(t,e,n){yt=[],Ot=[];for(let i=0;i<n;i++)t[i]=i,e[i]=i,yt[i]=i}function mt(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[t[n]]=n;return e}function gt(t,e,n,i){for(let r=0;r<t.length;r++)(t[r]>e||!n&&t[r]===e)&&(t[r]+=i)}let yt=[],xt=[],Ot=[];const jt={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},vt=5,wt=6,Tt=0,St=1,_t=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Lt=/[\u0591-\u06ff\ufb1d-\ufefc]/;e["a"]=P}}]);
//# sourceMappingURL=chunk-42f05965.ef239790.js.map