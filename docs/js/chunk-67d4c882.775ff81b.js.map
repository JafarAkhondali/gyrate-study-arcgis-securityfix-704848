{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/AggregateGraphic.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","webpack:///./node_modules/@arcgis/core/views/2d/tiling/TileManager.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/LayerView.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Path.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/FeatureLayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["super","arguments","this","isAggregate","e","popupTemplate","r","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","type","Boolean","prototype","Number","json","read","async","a","Array","isArray","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","t","s","when","o","i","source","transferList","n","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","promise","addedFeatures","deletedFeatures","updatedFeatures","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","push","l","getTileCoverage","state","spans","lodInfo","level","d","h","Set","row","colFrom","c","colTo","f","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","add","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","removed","set","get","delete","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","$","Q","B","K","W","getLogger","X","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","filter","effectLists","included","excluded","doRefresh","isUpdating","_lockGPUUploads","_proxy","refresh","_unlockGPUUploads","_doUpdate","destroyed","_hasRequiredSupport","layer","effect","_updateRequiredFields","renderer","_getEffectiveRenderer","historicMoment","gdbVersion","spatialReference","timeExtent","definitionExpression","fields","geometryType","labelsVisible","labelingInfo","availableFields","pixelBuffer","u","_createConfiguration","max","schema","_createTileRendererHash","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","enable","onConfigUpdate","_tileStrategy","tileKeys","openPorts","startup","view","featuresTilingScheme","hasHighlight","setHighlight","from","keys","_onceTilesUpdated","update","mesh","targets","aggregate","applyUpdate","error","_forceAttributeTextureUpload","invalidateLabels","requestUpdate","_updateHighlight","destroy","_updateClusterSizeTask","remove","Promise","all","_initProxy","_initServiceOptions","handles","on","valueRanges","includedEffect","excludedEffect","isTable","_createClientOptions","_createServiceOptions","suspended","enabled","notifyChange","floors","getTime","JSON","stringify","geometryDefinition","clips","p","filterHash","effectHash","streamFilter","clipsHash","hasEffects","getObjectId","isCollection","map","getAttribute","objectIdField","toArray","length","_addHighlight","_removeHighlight","_hitTest","queryStatistics","queryFeaturesJSON","then","fromJSON","features","queryFeatures","_cleanUpQuery","queryObjectIds","queryFeatureCount","queryExtent","count","extent","_update","updateTiles","timeline","record","title","_acquireTile","globalIdField","some","includes","onEdits","container","removeAllChildren","uninstall","clientGraphics","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","createPopupQuery","event","geometry","createFetchPopupFeaturesQueryGeometry","attributes","_updatingRequiredFieldsPromise","updating","setUpdating","emitEvent","emit","path","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","clone","intersection","width","height","warn","timeInfo","customParameters","getFeatureDefinition","parsedUrl","dynamicDataSource","query","_detectQueryMode","maxRecordCount","tileMaxRecordCount","createQuery","outSpatialReference","watch","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","visualVariables","field","indexOf","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","layerView","clear","install","getAttributeHash","floorInfo","where","_addFloorFilterClause","hiddenIds","viewAllLevelIds","floorField","replace","join","RegExp","trim","_injectOverrides","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","catch","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","readOnly","Y","m","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","spatialRelationship","distance","objectIds","units","String","types","write","reader","target","writer","overridePolicy","j","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","EventedMixin","parent","declaredClass","canResume","getSuspendInfo","legendEnabled","updatingHandles","_override","_clearOverride","suspendInfo","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","left","right","top","bottom","_get","y","base","typeMap","polygon","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","attach","detach","minScale","maxScale","isFulfilled","isResolved","isVisibleAtScale","scale","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","q","R","requiredFields","_handleRequiredFieldsChange","outFields","Error","returnGeometry","displayField","collectRequiredFields","startField","endField","F","sort","_loadArcadeModules","arcadeUtils","hasGeometryOperations","concat","returnZ","returnM","isEmpty","excludedLabelsVisible","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","x","xmin","min","ymin","xmax","ymax","toMap","intersects"],"mappings":"8HAIwZ,E,oNAAE,IAAI,EAAE,EAAE,cAAc,OAAE,cAAcA,SAASC,WAAWC,KAAKC,aAAY,EAAG,0BAA0BC,GAAE,GAAI,GAAGF,KAAKG,cAAc,OAAOH,KAAKG,cAAc,MAAMC,EAAEJ,KAAKK,aAAaL,KAAKK,YAAYC,iBAAiB,OAAOF,GAAG,kBAAkBA,GAAGA,EAAEG,aAAaH,EAAED,cAAc,KAAK,cAAc,OAAOH,KAAKQ,SAAS,QAAQ,OAAO,IAAI,EAAE,CAACA,SAASR,KAAKQ,YAAYR,KAAKS,sBAAsB,eAAE,CAAC,eAAE,CAACC,KAAKC,WAAW,EAAEC,UAAU,mBAAc,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKG,OAAOC,KAAK,CAACC,MAAK,MAAO,EAAEH,UAAU,gBAAW,GAAQ,EAAE,EAAE,eAAE,CAAC,eAAE,0BAA0B,GAAG,IAAI,EAAE,EAAiB,I,oOCA79BI,eAAe,EAAEd,EAAEe,GAAG,IAAIf,EAAE,OAAO,KAAK,OAAOA,EAAEQ,MAAM,IAAI,eAAe,IAAI,SAAS,IAAI,eAAe,IAAI,cAAc,IAAI,aAAa,OAAO,WAAW,4GAAwD,SAAEO,GAAG,IAAI,UAAU,OAAO,WAAW,4GAAyD,SAAEA,I,4BCA8Z,SAAS,EAAEf,GAAG,OAAOgB,MAAMC,QAAQjB,GAAG,IAAI,EAAE,cAAc,OAAE,YAAYA,GAAGJ,MAAMI,GAAGF,KAAKoB,iBAAiB,iBAAIpB,KAAKqB,SAAQ,EAAG,aAAarB,KAAKsB,YAAY,iBAAItB,KAAKuB,oBAAoBvB,KAAKwB,aAAaxB,KAAKsB,YAAYG,SAAS,UAAUzB,KAAKsB,YAAYI,QAAQ1B,KAAK2B,aAAa3B,KAAK2B,YAAYC,QAAQ,iBAAiB1B,GAAGF,KAAK6B,OAAOC,aAAa5B,EAAE,aAAa,OAAOF,KAAK2B,YAAYI,OAAO,cAAc7B,EAAE8B,EAAE5B,EAAE6B,SAASjC,KAAKkC,OAAO,MAAMC,EAAEnC,KAAKsB,YAAYG,OAAOW,EAAE,EAAEhC,EAAEiC,QAAQ,CAACC,aAAalC,EAAEiC,OAAOZ,OAAOU,QAAG,EAAOI,EAAE,CAACC,QAAQpC,EAAEqC,OAAOT,EAAEU,SAASxC,EAAEwC,SAASC,SAASC,MAAMX,SAASjC,KAAK2B,YAAYkB,OAAO,UAAUN,EAAEH,GAAGpC,KAAKoB,iBAAiB0B,UAAU9C,KAAK+C,KAAK,WAAU,GAAI,kBAAkB7C,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQ,eAAEhD,KAAK2B,YAAYkB,OAAO,cAAc3C,IAAI,aAAaA,GAAG,MAAM8B,EAAE,CAACS,OAAOvC,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,SAASb,GAAG,kBAAkB9B,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,cAAc3C,GAAG,mBAAmBA,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQ,eAAEhD,KAAK2B,YAAYkB,OAAO,0BAA0B3C,IAAI,gBAAgB,aAAaF,KAAKoB,iBAAiB4B,QAAQ,eAAEhD,KAAK2B,YAAYkB,OAAO,uBAAuB,oBAAoB3C,EAAE8B,GAAG,aAAahC,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,2BAA2B3C,EAAEyC,SAASX,GAAG,qBAAqB9B,EAAE8B,GAAG,aAAahC,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,4BAA4B3C,EAAEyC,SAASX,GAAG,wBAAwB9B,EAAE8B,GAAG,aAAahC,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,+BAA+B3C,EAAEyC,SAASX,GAAG,kBAAkB9B,EAAE8B,GAAG,OAAOhC,KAAK2B,YAAYkB,OAAO,yBAAyB3C,EAAEyC,SAASX,GAAG,8BAA8B9B,EAAE8B,GAAG,aAAahC,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,qCAAqC3C,EAAEyC,SAASX,GAAG,sBAAsB9B,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,6BAA6B3C,GAAG,kBAAkBA,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,yBAAyB3C,GAAG,mBAAmBA,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,0BAA0B3C,GAAG,iBAAiBA,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,wBAAwB3C,GAAG,mBAAmBA,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,0BAA0B3C,GAAG,gCAAgC,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,sCAAsC,yBAAyB3C,GAAG,aAAaF,KAAKoB,iBAAiB4B,QAAQhD,KAAK2B,YAAYkB,OAAO,gCAAgC3C,GAAG,cAAcA,SAASF,KAAKoB,iBAAiB4B,QAAQ,MAAMC,cAAcjB,EAAEkB,gBAAgB9C,EAAE+C,gBAAgBlB,GAAG/B,EAAE,OAAO,eAAEF,KAAK2B,YAAYkB,OAAO,qBAAqB,CAACI,cAAcjB,EAAEkB,gBAAgB9C,EAAE+C,gBAAgBlB,KAAK,kBAAkB/B,EAAE8B,GAAG,aAAahC,KAAKoB,iBAAiB4B,QAAQ,eAAEhD,KAAK2B,YAAYkB,OAAO,yBAAyB,CAACO,KAAKlD,EAAEmD,MAAMrB,KAAK,mBAAmB9B,GAAG,IAAIF,KAAK2B,kBAAkB,eAAE,WAAW,CAACE,OAAO7B,KAAK6B,OAAOyB,SAAS,YAAY7B,OAAOvB,IAAI,MAAM8B,GAAG,eAAEA,MAAM,eAAE,CAAC,kBAAK,EAAEpB,UAAU,eAAU,GAAQ,eAAE,CAAC,kBAAK,EAAEA,UAAU,cAAS,GAAQ,eAAE,CAAC,kBAAK,EAAEA,UAAU,eAAe,MAAM,EAAE,eAAE,CAAC,eAAE,mDAAmD,GAAG,IAAI,EAAE,EAAiB,I,wBCA79H,MAAM,EAAE,KAAK,MAAM,EAAE,YAAYV,GAAGF,KAAKuD,OAAO,IAAIC,IAAIxD,KAAKyD,OAAO,EAAEzD,KAAK0D,YAAYxD,EAAEwD,YAAY1D,KAAK2D,YAAYzD,EAAEyD,YAAY3D,KAAK4D,aAAa1D,EAAE0D,aAAa5D,KAAKyD,OAAOvD,EAAEuD,OAAO,WAAW,QAAQzD,KAAKuD,OAAOM,QAAS3D,GAAGF,KAAK8D,aAAa5D,IAAK,WAAW,MAAMA,EAAE,GAAG,OAAOF,KAAKuD,OAAOM,QAAQ,CAAEzB,EAAEJ,IAAI9B,EAAE6D,KAAK/B,IAAK9B,EAAE,OAAOA,GAAG,MAAM8D,EAAEhE,KAAK4D,aAAaK,gBAAgB/D,EAAEgE,MAAMlE,KAAKyD,OAAO,YAAYU,MAAMlC,EAAEmC,QAAQhE,GAAG4D,GAAGK,MAAMpD,GAAGb,EAAE+B,EAAE,GAAGmC,EAAE,GAAGC,EAAE,IAAIC,IAAIjC,EAAE,IAAIiC,IAAI,IAAI,MAAMC,IAAIzC,EAAE0C,QAAQC,EAAEC,MAAMC,KAAK5C,EAAE,IAAI,IAAI/B,EAAEyE,EAAEzE,GAAG2E,EAAE3E,IAAI,CAAC,MAAM8D,EAAE,OAAEc,MAAM7D,EAAEe,EAAE5B,EAAE2E,aAAa7E,GAAGE,EAAE4E,kBAAkB9E,IAAI+B,EAAEjC,KAAKiF,kBAAkB9C,EAAE6B,GAAGO,EAAEW,IAAIlB,GAAG/B,EAAEZ,QAAQY,EAAEkD,SAAQ,EAAG5C,EAAE2C,IAAIjD,EAAEmD,KAAuJ,OAAlJ7C,EAAEsB,QAAS3D,GAAGF,KAAKqF,iBAAiBd,EAAErE,IAAKF,KAAKuD,OAAOM,QAAS3D,IAAIqE,EAAEe,IAAIpF,EAAEkF,IAAIG,MAAMjB,EAAEP,KAAK7D,EAAEkF,IAAIG,IAAIvF,KAAK8D,aAAa5D,MAAO,OAAEsF,KAAKC,QAAQzB,GAAS,CAAC0B,gBAAgBnD,EAAEoD,KAAK,EAAEC,MAAMzD,EAAE0D,QAAQvB,GAAG,kBAAkBpE,EAAE8B,GAAG,IAAIhC,KAAKuD,OAAO+B,IAAItD,GAAG,CAAC,MAAMgC,EAAEhE,KAAK0D,YAAY,IAAI,OAAE1B,IAAI9B,EAAE6D,KAAK/B,GAAGhC,KAAKuD,OAAOuC,IAAI9D,EAAEgC,GAAGA,EAAEmB,SAAQ,EAAG,OAAOnF,KAAKuD,OAAOwC,IAAI/D,GAAG,SAAS9B,GAAG,OAAOF,KAAKuD,OAAOwC,IAAI7F,GAAG,aAAaA,GAAGF,KAAKuD,OAAOyC,OAAO9F,EAAEkF,IAAIG,IAAIvF,KAAK2D,YAAYzD,GAAG,iBAAiBA,EAAEkC,GAAG,MAAMJ,EAAEhC,KAAKiG,wBAAwB/F,EAAEkC,GAAQ8D,KAAKC,IAAI,EAAEnE,GAAG,GAAQhC,KAAKoG,sBAAsBlG,EAAEkC,KAAIpC,KAAKqG,SAASjE,EAAEmD,IAAIJ,SAAQ,GAAK,wBAAwBjF,EAAEkC,GAAG,IAAIJ,EAAE,EAAE,OAAOhC,KAAKuD,OAAOM,QAASG,IAAIhC,GAAGhC,KAAKsG,qBAAqBpG,EAAE8D,EAAE5B,KAAMJ,EAAE,qBAAqB9B,EAAEkC,EAAEJ,GAAG,OAAGI,EAAEgD,IAAIf,OAAOrC,EAAEqC,QAAQjC,EAAEmE,UAAUvE,EAAEwE,SAASpE,EAAEgD,KAAY,GAAEhD,EAAE+C,SAAQ,EAAGjF,EAAEgF,IAAI9C,EAAEgD,IAAIG,IAAW,GAAG,GAAG,GAAGnD,EAAEgD,IAAIf,MAAMrC,EAAEqC,SAAQ,sBAAsBjC,EAAEJ,GAAG,IAAIgC,EAAEhC,EAAEyE,eAAexE,EAAE,EAAE7B,EAAE,KAAK,KAAK,eAAE4D,IAAI,CAAC,GAAG5B,EAAEkD,IAAItB,EAAEuB,IAAI,OAAM,EAAG,MAAMrF,EAAEF,KAAKqG,SAASrC,EAAEuB,IAAI,GAAG,MAAMrF,GAAGA,EAAEmB,QAAQ,OAAOnB,EAAEiF,SAAQ,EAAG/C,EAAE8C,IAAIhF,EAAEkF,IAAIG,KAAI,EAAG,MAAMrF,GAAGA,EAAEqG,SAASrG,EAAEwG,WAAWzE,IAAIA,EAAE/B,EAAEwG,WAAWtG,EAAEF,GAAG8D,EAAEA,EAAEyC,eAAe,QAAQrG,IAAIA,EAAE+E,SAAQ,EAAG/C,EAAE8C,IAAI9E,EAAEgF,IAAIG,KAAI,ICA4a,MAAMoB,EAAE,WAAWC,EAAE,EAAEC,EAAE3G,IAAIA,EAAEyG,KAAK,KAAKC,EAAE,SAASE,EAAE5G,GAAG,OAAOA,GAAG,cAAcA,EAAE,MAAM6G,GAAE,OAAEC,UAAU,2CAA2C,IAAIC,GAAE,cAAc,cAAD,CAAG,eAAE,eAAE,WAAM,cAAcnH,SAASC,WAAWC,KAAKkH,qBAAoB,EAAGlH,KAAKmH,yBAAwB,EAAGnH,KAAKoH,cAAc,EAAEpH,KAAKqH,eAAc,EAAGrH,KAAKsH,qBAAqB,IAAI9C,IAAIxE,KAAKuH,QAAQ,KAAKvH,KAAKwH,cAAc,IAAIhE,IAAIxD,KAAKyH,iBAAiB,EAAEzH,KAAK0H,OAAO,KAAK1H,KAAK2H,YAAY,CAACC,SAAS,IAAI,OAAEC,SAAS,IAAI,QAAG7H,KAAK8H,UAAU,eAAE,UAAW9H,KAAK+H,oBAAoB,eAAE/H,KAAK,YAAYA,KAAK+C,KAAK,iBAAgB,GAAI/C,KAAKgI,kBAAkB,UAAUhI,KAAKiI,OAAOC,UAAU,MAAMhI,GAAG,eAAEA,GAAKF,KAAKmI,oBAAoBnI,KAAK+C,KAAK,iBAAgB,KAAO/C,KAAKoI,UAAU,eAAE,UAAW,IAAI,GAAGpI,KAAKqI,YAAYrI,KAAKsI,oBAAoBtI,KAAKuI,OAAO,OAAOvI,KAAK+C,KAAK,2BAA0B,SAAU,eAAE/C,KAAK,iBAAiB,MAAMwI,OAAOxG,EAAE0F,OAAOtF,GAAGpC,WAAWA,KAAKyI,wBAAwB,MAAMC,SAAStI,GAAGJ,KAAK2I,wBAAwB3I,KAAK+C,KAAK,qBAAqB3C,GAAG,MAAM6B,EAAE,YAAYjC,KAAKuI,MAAM7H,KAAKV,KAAKuI,MAAMK,eAAe,KAAKrG,EAAE,YAAYvC,KAAKuI,MAAM7H,KAAKV,KAAKuI,MAAMM,WAAW,KAAK1G,EAAE,CAACuG,SAAS1I,KAAKuI,MAAMG,SAASI,iBAAiB9I,KAAKuI,MAAMO,iBAAiBC,WAAW/I,KAAKuI,MAAMQ,WAAWC,qBAAqBhJ,KAAKuI,MAAMS,qBAAqB1I,iBAAiBN,KAAKuI,MAAMjI,iBAAiB2I,OAAOjJ,KAAKuI,MAAMU,OAAOC,aAAalJ,KAAKuI,MAAMW,aAAaN,eAAe3G,EAAEkH,cAAcnJ,KAAKuI,MAAMY,cAAcC,aAAapJ,KAAKuI,MAAMa,aAAaC,gBAAgBrJ,KAAKqJ,gBAAgBb,OAAOxI,KAAKwI,OAAOd,OAAO1H,KAAK0H,OAAOmB,WAAWtG,EAAE+G,YAAY,GAAGtF,EAAE,eAAEhE,KAAKuI,MAAMW,cAAc3E,QAAQ,eAAEnE,EAAE4D,EAAEhE,KAAKuI,MAAMjI,kBAAkBiJ,EAAEvJ,KAAKwJ,qBAAqBrH,EAAEC,EAAEJ,GAAGhC,KAAKyH,iBAAiB,IAAIlD,EAAE,EAAE2B,KAAKuD,IAAIlF,EAAEvE,KAAKyH,kBAAkB8B,EAAEG,OAAOrH,OAAOiH,YAAYtJ,KAAKyH,iBAAiB,MAAMnD,EAAEtE,KAAK2J,wBAAwBvJ,GAAG,GAAGkE,IAAItE,KAAK4J,kBAAkB,OAAO5J,KAAK6J,kBAAkBzJ,GAAG,MAAMF,EAAEF,KAAK8J,gBAAgB9J,KAAK+J,QAAQlG,QAAS3D,GAAG,eAAEA,IAAI,eAAEA,EAAEwH,SAASxH,EAAEwH,OAAOsC,UAAWhK,KAAK8B,aAAamI,eAAe7J,GAAG,MAAM4B,EAAE,CAAC4D,MAAM5F,KAAKkK,cAAcC,WAAWtE,QAAQ,IAAIzD,EAAEpC,KAAKuI,MAAM,WAAWnG,EAAE1B,MAAMoG,EAAE1E,EAAEC,UAAUnC,EAAEmC,aAAaD,EAAEC,OAAO+H,mBAAmBpK,KAAKiI,OAAOoC,QAAQrK,KAAKsK,KAAKC,qBAAqBhB,EAAErJ,EAAE8B,GAAGhC,KAAKwK,sBAAsBxK,KAAKiI,OAAOwC,aAAavJ,MAAMwJ,KAAK1K,KAAKwH,cAAcmD,eAAe3K,KAAK4K,oBAAoB5K,KAAK8B,aAAamI,eAAe7J,OAAO,CAAC,MAAM4B,QAAQhC,KAAKiI,OAAO4C,OAAOtB,IAAIvH,EAAE8I,MAAM9I,EAAE+I,QAAQC,YAAYhL,KAAKgI,kBAAkB,UAAUhI,KAAKiI,OAAOgD,YAAYjJ,GAAG,MAAM9B,GAAG,eAAEA,IAAI6G,GAAEmE,MAAMhL,IAAI8B,EAAE8I,MAAM9I,EAAE+I,QAAQC,YAAYhL,KAAKmI,oBAAoBnI,KAAK+J,QAAQlG,QAAS3D,GAAG,eAAEA,IAAI,eAAEA,EAAEwH,SAASxH,EAAEwH,OAAOsC,UAAWhK,KAAK8B,aAAamI,eAAe7J,GAAGJ,KAAKmL,+BAA+BnL,KAAK4J,kBAAkBtF,EAAEtE,KAAK8B,aAAasJ,mBAAmBpL,KAAKqL,gBAAgB,MAAMnL,OAAQF,KAAKsL,iBAAiB,eAAE,SAAUtL,KAAKiI,OAAOwC,aAAavJ,MAAMwJ,KAAK1K,KAAKwH,cAAcmD,UAAW,UAAU,IAAIzK,EAAE8B,EAAE,OAAO9B,EAAEF,KAAKiI,SAAS/H,EAAEqL,UAAU,eAAEvL,KAAKwL,uBAAwBtL,GAAGA,EAAEuL,UAAW,OAAOzJ,EAAEhC,KAAK8B,eAAeE,EAAEuJ,UAAU,aAAavL,KAAKuB,oBAAoBmK,QAAQC,IAAI,CAAC3L,KAAK4L,aAAa5L,KAAK6L,yBAAyB7L,KAAK8L,QAAQ5G,IAAI,CAAClF,KAAK+L,GAAG,qBAAsB7L,IAAIF,KAAK+C,KAAK,wBAAwB7C,EAAE8L,eAAgB,eAAEhM,KAAK,SAAUE,IAAIF,KAAK2H,YAAYC,SAASY,OAAO,MAAMtI,OAAE,EAAOA,EAAE+L,iBAAkB,eAAEjM,KAAK,SAAUE,IAAIF,KAAK2H,YAAYE,SAASW,OAAO,MAAMtI,OAAE,EAAOA,EAAEgM,mBAAoB,mBAAmB,GAAG,WAAWlM,KAAKuI,MAAM7H,MAAM,gBAAgBV,KAAKuI,MAAM7H,MAAMV,KAAKuI,MAAM4D,QAAQ,MAAM,IAAI,OAAE,uCAAuC,yCAAyC,CAAC5D,MAAMvI,KAAKuI,QAAQvI,KAAKiI,QAAQjI,KAAKiI,OAAOsD,UAAU,MAAMrL,EAAEF,KAAKoM,uBAAuB,OAAOpM,KAAK+C,KAAK,SAAS,IAAI,EAAE,CAAClB,OAAO3B,KAAKF,KAAKiI,OAAO/F,OAAO,4BAA4BlC,KAAK+C,KAAK,wBAAwB/C,KAAKqM,yBAAyB,oBAAoB,OAAOrM,KAAKsM,WAAWtM,KAAKuI,MAAMa,cAAcpJ,KAAKuI,MAAMY,cAAc,aAAa,OAAO,eAAEnJ,KAAKuH,QAAQ,MAAM,WAAWrH,GAAG,MAAM8B,EAAEhC,KAAKuH,QAAQ,eAAEvF,IAAI,eAAEA,EAAE0F,SAAS1F,EAAE0F,OAAO6E,SAAS,eAAErM,IAAI,eAAEA,EAAEwH,SAASxH,EAAEwH,OAAOsC,SAAShK,KAAKuH,QAAQrH,EAAEF,KAAKwM,aAAa,UAAU,cAAc,OAAOxM,KAAKwI,QAAQ,CAACxI,KAAKwI,SAAS,GAAG,gBAAgB,OAAOxI,KAAK8J,gBAAgBpJ,KAAK,0BAA0B,IAAIV,KAAKuI,MAAM,OAAO,KAAK,MAAMrI,EAAEF,KAAKqJ,gBAAgBrH,EAAEhC,KAAKuI,MAAMnG,EAAEpC,KAAKsK,KAAKmC,QAAQzD,qBAAqB5I,EAAEsI,SAASzG,EAAEmH,aAAa7G,GAAGP,EAAEG,EAAE,YAAYH,EAAEtB,KAAKsB,EAAE6G,gBAAW,EAAO7E,EAAE,YAAYhC,EAAEtB,MAAMsB,EAAE4G,eAAe5G,EAAE4G,eAAe8D,eAAU,GAAQ3D,WAAWxE,GAAGvE,KAAKuJ,EAAE,WAAWvH,EAAEtB,KAAK,GAAGiM,KAAKC,UAAU5K,EAAE6K,sBAAsB7K,EAAEgH,uBAAuB,KAAK1E,EAAEqI,KAAKC,UAAU5M,KAAK8M,OAAOC,EAAE/K,EAAE1B,kBAAkB0B,EAAE1B,iBAAiBqC,SAAS,OAAOgK,KAAKC,UAAU,CAACI,WAAW,eAAEhN,KAAK0H,SAAS1H,KAAK0H,OAAO/E,SAASsK,WAAW,eAAEjN,KAAKwI,SAASxI,KAAKwI,OAAO7F,SAASuK,aAAa3D,EAAEV,WAAW1G,EAAE6G,qBAAqB5I,EAAEwI,eAAe5E,EAAEqF,gBAAgBnJ,EAAEwI,SAASzG,EAAEmH,aAAapH,EAAEmH,eAAe5G,EAAEwG,WAAWxE,EAAEkI,OAAOrK,EAAE+K,UAAU7I,EAAEhE,iBAAiByM,IAAI,iBAAiB,OAAO/M,KAAK2H,YAAYC,SAASwF,YAAYpN,KAAK2H,YAAYE,SAASuF,WAAW,UAAUlN,GAAG,IAAI8B,EAAE,OAAO9B,aAAa,OAAE8B,EAAE,CAAC9B,EAAEmN,eAAe,iBAAiBnN,GAAG,iBAAiBA,EAAE8B,EAAE,CAAC9B,GAAG,OAAEoN,aAAapN,GAAG8B,EAAE9B,EAAEqN,IAAKrN,GAAGA,GAAGA,EAAEsN,aAAaxN,KAAKuI,MAAMkF,gBAAiBC,UAAUxM,MAAMC,QAAQjB,IAAIA,EAAEyN,OAAO,IAAI3L,EAAE,iBAAiB9B,EAAE,IAAI,iBAAiBA,EAAE,GAAGA,EAAEA,EAAEqN,IAAKrN,GAAGA,GAAGA,EAAEsN,aAAaxN,KAAKuI,MAAMkF,iBAAkBzL,GAAGA,EAAE2L,QAAQ3L,EAAEA,EAAE0F,OAAQxH,GAAG,MAAMA,GAAIF,KAAK4N,cAAc5L,GAAG,CAACyJ,OAAO,IAAIzL,KAAK6N,iBAAiB7L,KAAK,CAACyJ,OAAO,QAAQ,eAAe,QAAQzL,KAAKwH,cAAc7B,KAAK,QAAQzF,EAAE8B,GAAG,OAAOhC,KAAK8N,SAAS5N,EAAE8B,GAAG,kBAAkB,OAAOhC,KAAKiI,OAAO8F,kBAAkB,cAAc7N,EAAE8B,GAAG,OAAOhC,KAAKgO,kBAAkB9N,EAAE8B,GAAGiM,KAAM/N,IAAI,MAAM8B,EAAE,aAAEkM,SAAShO,GAAG,OAAO8B,EAAEmM,SAAStK,QAAS3D,IAAIA,EAAEqI,MAAMvI,KAAKuI,MAAMrI,EAAEG,YAAYL,KAAKuI,QAASvG,IAAK,kBAAkB9B,EAAE8B,GAAG,OAAOhC,KAAKiI,OAAOmG,cAAcpO,KAAKqO,cAAcnO,GAAG8B,GAAG,eAAe9B,EAAE8B,GAAG,OAAOhC,KAAKiI,OAAOqG,eAAetO,KAAKqO,cAAcnO,GAAG8B,GAAG,kBAAkB9B,EAAE8B,GAAG,OAAOhC,KAAKiI,OAAOsG,kBAAkBvO,KAAKqO,cAAcnO,GAAG8B,GAAG,YAAY9B,EAAE8B,GAAG,OAAOhC,KAAKiI,OAAOuG,YAAYxO,KAAKqO,cAAcnO,GAAG8B,GAAGiM,KAAM/N,IAAG,CAAEuO,MAAMvO,EAAEuO,MAAMC,OAAO,OAAER,SAAShO,EAAEwO,WAAY,cAAcxO,EAAE8B,GAAGA,EAAEhC,KAAKsH,qBAAqBtB,OAAO9F,GAAGF,KAAKsH,qBAAqBpC,IAAIhF,GAAGF,KAAK2O,UAAU,OAAOzO,GAAG,IAAIF,KAAKkK,gBAAgBlK,KAAK8B,aAAa,OAAO,MAAM4D,gBAAgB1D,EAAE4D,MAAMxD,EAAEyD,QAAQzF,GAAGJ,KAAKkK,cAAcW,OAAO3K,IAAIkC,EAAEuL,QAAQvN,EAAEuN,SAAS3N,KAAKiI,OAAO2G,YAAY,CAAChJ,MAAMxD,EAAEyD,QAAQzF,IAAI4B,GAAGhC,KAAKqL,gBAAgBrL,KAAKwM,aAAa,YAAY,SAASxM,KAAKsK,KAAKuE,SAASC,OAAU9O,KAAKuI,MAAMwG,MAAd,0BAA6C/O,KAAKkK,cAAc,IAAI,EAAE,CAACxG,YAAYxD,GAAGF,KAAKgP,aAAa9O,GAAGyD,YAAYzD,GAAGF,KAAK8D,aAAa5D,GAAG0D,aAAa5D,KAAKsK,KAAKC,qBAAqB9G,OAAO,IAAIzD,KAAK8L,QAAQ5G,IAAI,eAAElF,KAAK,sBAAsB,IAAKA,KAAK2O,WAAY,UAAU,WAAW3O,KAAKuI,MAAM7H,MAAMV,KAAK8L,QAAQ5G,IAAIlF,KAAKuI,MAAMwD,GAAG,QAAQ,MAAC/K,IAAUhB,KAAK+C,KAAK,gBAAgB/C,KAAKoH,cAAc,GAAG,IAAI,MAAMpF,EAAE,kBAAkBhC,KAAKuI,OAAOvI,KAAKuI,MAAM0G,cAAc7M,EAAElC,EAAEgD,gBAAgBgM,KAAMhP,IAAI,IAAIA,EAAEM,WAAWN,EAAEM,UAAWJ,EAAE4B,GAAGhC,KAAKqJ,gBAAgB8F,SAASnN,GAAG,GAAGI,IAAIhC,EAAE,YAAY2G,GAAEmE,MAAM,IAAI,OAAE,sBAAsB,qEAAqElJ,wFAAwFhC,KAAKiI,OAAOmH,QAAQlP,GAAG,MAAM8B,GAAG,eAAEA,GAAKhC,KAAK+C,KAAK,gBAAgBmD,KAAKuD,IAAI,EAAEzJ,KAAKoH,cAAc,MAAO,UAAU,SAASpH,KAAKqP,UAAUC,oBAAoBtP,KAAK8L,QAAQL,OAAO,UAAUzL,KAAKmH,yBAAwB,EAAGnH,KAAK8B,eAAe9B,KAAK8B,aAAayN,UAAUvP,KAAKqP,WAAWrP,KAAK8B,aAAa,MAAM9B,KAAKkK,gBAAgBlK,KAAKkK,cAAcqB,UAAUvL,KAAKkK,cAAc,MAAMlK,KAAK4J,kBAAkB,KAAK,YAAY5J,KAAKqL,gBAAgB,aAAarL,KAAKqL,gBAAgB,UAAUrL,KAAKqL,gBAAgB,yBAAyBnL,EAAE8B,GAAG,GAAG,eAAEA,IAAIA,EAAEwN,eAAe7B,OAAO,CAAC,MAAMzN,EAAE8B,EAAEwN,eAAe,GAAG,GAAGtP,aAAa,EAAE,MAAM,CAACA,GAAG,MAAMkC,EAAEpC,KAAKyP,2BAA2BzN,GAAG,GAAGI,EAAE,MAAMA,EAAE,GAAG,eAAEJ,IAAI,IAAIA,EAAEwN,eAAe7B,OAAO,MAAM,GAAG,MAAMvN,EAAEJ,KAAK0P,yBAAyB1N,GAAG,IAAI9B,EAAE,OAAOE,EAAE,MAAM6B,EAAEjC,KAAK2P,2BAA2BzP,EAAE8B,GAAG,OAAO,eAAE,CAAC5B,EAAE6B,IAAIgM,KAAK,QAAG,iCAAiC/N,EAAE8B,GAAG,GAAG,WAAWhC,KAAKuI,MAAM7H,MAAM,gBAAgBV,KAAKuI,MAAM7H,KAAK,MAAM,GAAG,MAAM0B,QAAQpC,KAAK4P,iBAAiB5N,IAAIuG,MAAMnI,GAAGJ,MAAM0I,SAASzG,GAAG7B,EAAEmC,EAAE,eAAEP,GAAGA,EAAE6N,MAAM,KAAK1N,EAAE,eAAE,CAACuG,SAASzG,EAAE4N,MAAMtN,IAAIH,EAAE0N,SAAS9P,KAAK+P,sCAAsC7P,EAAEiC,GAAG,MAAM6B,EAAE,IAAIQ,KAAKiJ,cAAclJ,GAAGnE,EAAEmJ,EAAE,eAAEvH,GAAGA,EAAEwN,eAAe,KAAK,GAAGjG,EAAE,IAAI,MAAMtI,KAAKsI,EAAEvF,EAAEkB,IAAIjE,EAAE+O,WAAWzL,IAAI,OAAOnE,EAAEgO,cAAchM,GAAG6L,KAAM/N,GAAGA,EAAEiO,SAASzG,OAAQxH,IAAI8D,EAAEsB,IAAIpF,EAAE8P,WAAWzL,MAAQ,sCAAsCrE,EAAE8B,GAAG,OAAO,eAAE9B,EAAE8B,EAAEhC,KAAKsK,MAAM,aAAa,OAAO,MAAMtK,KAAKuI,MAAMG,WAAW,MAAM1I,KAAKiQ,gCAAgC,MAAMjQ,KAAK8B,eAAe9B,KAAKiI,SAASjI,KAAKiI,OAAO5G,SAASrB,KAAKkH,qBAAqBlH,KAAKmH,yBAAyBnH,KAAK8B,aAAaoO,UAAUlQ,KAAKoH,cAAc,GAAG,uBAAuB,MAAM,CAAC+I,YAAYjQ,IAAIF,KAAK+C,KAAK,sBAAsB7C,IAAIkQ,UAAUlQ,IAAIF,KAAKqQ,KAAKnQ,EAAEkD,KAAKlD,EAAE2P,SAAS,uBAAuB3P,GAAG,GAAG,SAASA,GAAG,eAAEA,EAAEoQ,OAAO,YAAYtQ,KAAKuI,MAAM7H,MAAM,UAAUV,KAAKuI,MAAMW,eAAelJ,KAAKuI,MAAMgI,aAAaC,WAAWC,iBAAiB,eAAE,iCAAiC,IAAI,MAAMvQ,QAAQF,KAAKuI,MAAMgG,oBAAoB,GAAGrO,GAAG,eAAE,6CAA6C,MAAM,CAACwQ,KAAK,WAAWC,aAAazQ,GAAG,MAAMkC,EAAE,eAAE,6CAA6ChC,EAAE,eAAE,wCAAwC6B,EAAEjC,KAAKsK,KAAKoE,OAAOzN,EAAEjB,KAAKuI,MAAMqI,WAAWrO,EAAE,MAAMtB,OAAE,EAAOA,EAAE4P,QAAQC,aAAa7O,GAAGE,GAAG,MAAMI,OAAE,EAAOA,EAAEwO,QAAQ,MAAMxO,OAAE,EAAOA,EAAEyO,QAAQhN,GAAG,MAAM/C,OAAE,EAAOA,EAAE8P,QAAQ,MAAM9P,OAAE,EAAOA,EAAE+P,QAAQzM,EAAE,IAAIP,EAAE,EAAE7B,EAAE6B,EAAE,GAAG9D,GAAGkC,GAAGmC,GAAGnE,EAAE,MAAM,CAACsQ,KAAK,WAAWC,aAAazQ,GAAG,MAAMkC,GAAG2E,GAAEkK,KAAK,wBAAwB,sDAAsD,CAAC/F,MAAM9I,IAAI,MAAM,CAACsO,KAAK,aAAa,8BAA8B,MAAMxQ,EAAEF,KAAKuI,MAAM,GAAG,WAAWrI,EAAEQ,KAAK,OAAO,KAAK,MAAM6P,aAAavO,EAAEyL,cAAcrN,GAAGF,EAAE+B,EAAE/B,EAAE+I,OAAOsE,IAAKrN,GAAGA,EAAEyC,UAAW1B,EAAEf,EAAE0Q,YAAY1Q,EAAE0Q,WAAWjO,SAASJ,EAAE,eAAErC,EAAEgJ,cAAc/G,EAAEjC,EAAEgR,UAAUhR,EAAEgR,SAASvO,UAAU,KAAKqB,EAAE9D,EAAE4I,iBAAiB5I,EAAE4I,iBAAiBnG,SAAS,KAAK4B,EAAE,YAAYrE,EAAEQ,KAAKR,EAAEiR,iBAAiB,KAAK5H,EAAE,YAAYrJ,EAAEQ,KAAKR,EAAE+O,cAAc,KAAK,IAAI3K,EAAE,gBAAgBpE,EAAEQ,KAAK4D,EAAEpE,EAAEmC,OAAO+O,uBAAuBtK,EAAE5G,EAAEmC,QAAQiC,QAAQpE,EAAEmC,OAAO+H,YAAYlK,EAAEmR,YAAY/M,EAAE,eAAEpE,EAAEmR,WAAW,sBAAsBnR,GAAGA,EAAEoR,oBAAoBhN,EAAEiN,MAAM,CAAChJ,MAAMoE,KAAKC,UAAU,CAACvK,OAAOnC,EAAEoR,uBAAuB,MAAMZ,KAAK3D,EAAE4D,aAAahM,SAAS3E,KAAKwR,iBAAiBlN,GAAG,MAAM,CAAC5D,KAAKqM,EAAE4D,aAAahM,EAAEsK,cAAc1F,EAAEkI,eAAezP,EAAEuP,MAAME,eAAeC,mBAAmB1P,EAAEuP,MAAMG,mBAAmBnB,aAAavO,EAAEiH,OAAOhH,EAAE2O,WAAW3P,EAAEiI,aAAa3G,EAAEkL,cAAcrN,EAAEiC,OAAOiC,EAAE4M,SAAS/O,EAAE2G,iBAAiB9E,EAAEmN,iBAAiB5M,GAAG,kCAAkCrE,GAAG,MAAM8B,QAAQ9B,EAAEkK,YAAY,MAAM,IAAIpK,KAAKqM,wBAAwB3L,KAAK,SAAS2B,OAAOL,GAAG,cAAc9B,GAAG,MAAM8B,EAAE,OAAE0I,KAAKxK,IAAIF,KAAK2R,cAAc,OAAO3P,EAAE4P,sBAAsB5P,EAAE4P,oBAAoB5R,KAAKsK,KAAKxB,kBAAkB9G,EAAE,6BAA6B9B,EAAE8B,GAAG,OAAOhC,KAAK6R,MAAM,wBAAwB,MAAC7Q,IAAUhB,KAAK8R,4CAA4C5R,EAAE8B,EAAEI,GAAGpC,KAAKmH,yBAAyBnH,KAAK8B,aAAamI,eAAejK,KAAK+R,sBAAuB,kDAAkD7R,EAAE8B,EAAEI,GAAG,GAAGlC,EAAE8R,oBAAoB,oBAAoB9R,GAAGA,EAAE+R,gBAAgB,CAAC,MAAM7R,EAAE,eAAEF,EAAE+R,iBAAiB,GAAG,eAAE7R,IAAI,kBAAkBA,EAAE8R,MAAM,CAAC,MAAMjQ,EAAE/B,EAAE+R,gBAAgBE,QAAQ/R,GAAGF,EAAE+R,gBAAgBhQ,GAAG,eAAED,EAAEI,GAAG,MAAMnB,EAAEf,EAAE2Q,QAAQ5P,EAAE+Q,oBAAmB,EAAGhS,KAAK+C,KAAK,qBAAqB9B,KAAK,wBAAwB,MAAMf,EAAEF,KAAKuI,MAAMG,SAAS1G,EAAEhC,KAAKuI,MAAMjI,iBAAiB,GAAG,eAAEN,KAAKwL,0BAA0BxL,KAAKwL,uBAAuBC,SAASzL,KAAKwL,uBAAuB,MAAMxJ,GAAG,YAAYA,EAAEtB,MAAM,eAAER,GAAG,CAAC,MAAMkC,EAAEJ,EAAEC,EAAE,GAAGhB,EAAE,eAAEgB,EAAE/B,EAAEkC,EAAEpC,KAAKoS,uBAAuB,OAAO,eAAEpS,KAAKwL,uBAAwBtL,GAAGA,EAAEuL,UAAWzL,KAAKwL,uBAAuBxL,KAAKqS,6BAA6BpR,EAAEmB,GAAG,CAACsG,SAASzH,EAAEqR,gBAAgBrQ,EAAE3B,iBAAiB0B,GAAG,MAAM,CAAC0G,SAASxI,EAAEoS,gBAAgB,GAAGhS,iBAAiB,MAAM,aAAaJ,GAAG,MAAM8B,EAAEhC,KAAK8B,aAAa4B,YAAYxD,GAAG,OAAO8B,EAAEuQ,KAAK,SAAS,KAAMvS,KAAKqL,kBAAmBrJ,EAAE,aAAa9B,GAAGF,KAAK8B,aAAa6B,YAAYzD,GAAG,wBAAwBA,GAAG,MAAM8B,QAAQ,EAAE9B,EAAE,CAACsS,UAAUxS,KAAK4D,aAAa5D,KAAKsK,KAAKC,qBAAqBhC,MAAMvI,KAAKuI,QAAQ,OAAOvI,KAAK8B,eAAe9B,KAAKkK,cAAcuI,QAAQzS,KAAK8B,aAAayN,UAAUvP,KAAKqP,WAAWrP,KAAK8B,aAAayJ,UAAUvL,KAAK8B,aAAa,MAAM9B,KAAKqI,UAAU,MAAMrI,KAAKiI,OAAOnG,aAAaE,EAAEhC,KAAK+C,KAAK,eAAef,GAAGhC,KAAK8B,aAAa4Q,QAAQ1S,KAAKqP,WAAWrP,KAAK8B,aAAamI,eAAe/J,GAAGF,KAAKqL,gBAAgBrL,KAAK8B,cAAc,wBAAwB5B,GAAG,MAAM,GAAG,YAAYA,EAAEQ,KAAK,UAAU,YAAY,gBAAgBR,EAAEQ,OAAO,uBAAuBR,EAAE8B,EAAEI,GAAG,MAAMhC,EAAEF,EAAEyS,mBAAmB1Q,EAAE0K,KAAKC,UAAU5K,GAAGO,EAAE,eAAEH,IAAIuK,KAAKC,UAAUxK,EAAEsF,QAAQvF,EAAEwK,KAAKC,UAAU5M,KAAK+I,YAAY,IAAI/E,EAAE,GAAG,OAAOhE,KAAKsH,qBAAqBzD,QAAS3D,GAAG8D,GAAG9D,GAAI,GAAGE,KAAK6B,KAAKM,KAAKJ,KAAK6B,IAAI,gBAAgB,MAAM9D,KAAK,cAAcF,KAAKuI,OAAOvI,KAAKuI,MAAMqK,WAAW5S,KAAKsK,KAAKmC,QAAQzM,KAAKsK,KAAKmC,OAAOkB,QAAQ,QAAQ3N,KAAK0H,QAAQxH,KAAKF,KAAKsH,qBAAqB3B,QAAQ3F,KAAK+I,WAAW,iBAAiB7I,GAAG,MAAM8B,EAAE,eAAE9B,GAAGA,EAAE6I,WAAW,KAAK3G,EAAE,eAAEpC,KAAK+I,aAAa,eAAE/G,GAAGhC,KAAK+I,WAAW+H,aAAa9O,GAAGhC,KAAK+I,YAAY/G,EAAE,IAAI5B,EAAE,KAAK,MAAM6B,EAAE,cAAcjC,KAAKuI,OAAOvI,KAAKuI,MAAMqK,UAAU,GAAG3Q,EAAE,CAAC,MAAMD,EAAE,eAAE9B,IAAIA,EAAE2S,MAAMzS,EAAEJ,KAAK8S,sBAAsB9Q,GAAG,IAAIhC,KAAKsH,qBAAqB3B,OAAOvD,IAAIH,EAAE,OAAO/B,EAAE,MAAMqC,EAAE,eAAErC,IAAIA,EAAE2Q,SAAS,IAAI,OAAE,OAAOtO,EAAEwQ,UAAU/S,KAAKsH,qBAAqB/E,EAAEwG,WAAW3G,EAAEhC,IAAImC,EAAEsQ,MAAMzS,GAAGmC,EAAE,sBAAsBrC,GAAG,MAAM8B,EAAEhC,KAAKuI,MAAM,IAAInG,EAAElC,GAAG,GAAG,GAAG,cAAc8B,GAAGA,EAAE4Q,UAAU,CAAC,IAAIxS,EAAE,IAAIF,EAAEF,KAAKsK,KAAKmC,OAAO,IAAIvM,IAAIA,EAAEyN,OAAO,OAAOvL,EAAE,OAAOhC,EAAE4B,EAAE4Q,UAAUI,kBAAkB5S,EAAEuN,SAASzN,EAAE8B,EAAE4Q,UAAUI,iBAAiB,MAAM/Q,EAAE/B,EAAEwH,OAAQxH,GAAG,KAAKA,GAAIqN,IAAKrN,GAAG,IAAIA,EAAE,KAAM+B,EAAE8B,KAAK,MAAM,MAAMxB,EAAEP,EAAE4Q,UAAUK,WAAW,IAAI9Q,EAAE,IAAII,EAAE,kBAAkBA,EAAE,YAAY,GAAGJ,EAAEA,EAAE+Q,QAAQ,QAAQjR,EAAEkR,KAAK,OAAO,eAAE/Q,IAAIA,EAAE+M,SAAS5M,GAAG,CAAC,IAAIrC,EAAE,IAAIkT,OAAO,UAAU7Q,EAAE,YAAY,KAAKH,EAAEA,EAAE8Q,QAAQhT,EAAE,IAAIA,EAAE,IAAIkT,OAAO,MAAM7Q,EAAE,YAAY,KAAKH,EAAEA,EAAE8Q,QAAQhT,EAAE,IAAIkC,EAAEA,EAAE8Q,QAAQ,OAAO,KAAKG,OAAOjR,EAAE,KAAKA,EAAE,IAAIA,EAAE,SAASD,EAAEA,EAAE,MAAM,KAAKC,EAAEA,EAAE,KAAK,qBAAqBlC,EAAE8B,EAAEI,GAAG,MAAMhC,EAAE,YAAYJ,KAAKuI,MAAM7H,MAAMV,KAAKuI,MAAMK,eAAe5I,KAAKuI,MAAMK,eAAe8D,eAAU,EAAOzK,EAAE,YAAYjC,KAAKuI,MAAM7H,KAAKV,KAAKuI,MAAMM,gBAAW,EAAO1G,EAAE,IAAIjB,MAAM,QAAG8C,EAAEhE,KAAKsT,iBAAiBtR,GAAGG,EAAE,GAAG,eAAE6B,GAAGA,EAAErB,SAAS,KAAKR,EAAE,GAAG,eAAEC,IAAIA,EAAEsF,OAAOtF,EAAEsF,OAAO/E,SAAS,KAAK,MAAM4B,EAAE,eAAErE,GAAG,GAAG,eAAEqE,GAAG,OAAO,KAAK,MAAMgF,EAAE,iBAAI,MAAM,CAACP,qBAAqBhJ,KAAKuI,MAAMS,qBAAqBK,gBAAgBrJ,KAAKqJ,gBAAgBR,WAAW5G,EAAE2G,eAAexI,EAAEmT,iBAAiBC,OAAOD,kBAAkB,EAAEE,QAAQtR,EAAEuH,OAAOnF,EAAEmP,qBAAqBnK,EAAEmK,qBAAqBC,eAAepK,EAAEoK,gBAAgB,oBAAoBzT,GAAG,IAAI8B,EAAE,QAAQ,iBAAiB,OAAOA,EAAE9B,EAAEwI,eAAU,EAAO1G,EAAEtB,QAAQ,iBAAIgT,wBAAwB3M,GAAEmE,MAAM,IAAI,OAAE,0BAA0B,gFAA+E,GAAI,oBAAoB,OAAOlL,KAAKqL,gBAAgB,eAAErL,KAAK,uBAAsB,GAAI,kBAAkBA,KAAK8B,cAAc9B,KAAK8B,aAAa8R,iBAAiB,oBAAoB5T,KAAK8B,cAAc9B,KAAK8B,aAAa+R,mBAAmB,+BAA+B7T,KAAK8B,cAAc9B,KAAK8B,aAAagS,8BAA8B,UAAU9T,KAAKsK,KAAKuE,SAASkF,MAAS/T,KAAKuI,MAAMwG,MAAd,2CAA8D,MAAM7O,EAAEF,KAAKoI,YAAYpI,KAAKgU,iBAAiB9T,EAAE,MAAM8B,EAAE,KAAK9B,IAAIF,KAAKgU,kBAAkBhU,KAAK+C,KAAK,2BAA0B,GAAI/C,KAAKsK,MAAMtK,KAAKsK,KAAKuE,SAASoF,IAAOjU,KAAKuI,MAAMwG,MAAd,4CAA+D7O,EAAE+N,KAAKjM,GAAGkS,MAAOhU,IAAI,eAAEA,IAAI6G,GAAEmE,MAAMhL,GAAG8B,MAAO,cAAc9B,GAAG,IAAI,MAAM8B,KAAK9B,EAAE,GAAGF,KAAKwH,cAAclC,IAAItD,GAAG,CAAC,MAAM9B,EAAEF,KAAKwH,cAAczB,IAAI/D,GAAGhC,KAAKwH,cAAc1B,IAAI9D,EAAE9B,EAAE,QAAQF,KAAKwH,cAAc1B,IAAI9D,EAAE,GAAGhC,KAAKsL,mBAAmB4I,MAAOhU,IAAI,eAAEA,IAAI6G,GAAEmE,MAAMhL,KAAM,iBAAiBA,GAAG,IAAI,MAAM8B,KAAK9B,EAAE,GAAGF,KAAKwH,cAAclC,IAAItD,GAAG,CAAC,MAAM9B,EAAEF,KAAKwH,cAAczB,IAAI/D,GAAG,EAAE,IAAI9B,EAAEF,KAAKwH,cAAcxB,OAAOhE,GAAGhC,KAAKwH,cAAc1B,IAAI9D,EAAE9B,GAAGF,KAAKsL,mBAAmB4I,MAAOhU,IAAI,eAAEA,IAAI6G,GAAEmE,MAAMhL,KAAM,qBAAqBA,GAAG,OAAOA,EAAEqI,MAAMvI,KAAKuI,MAAMrI,EAAEG,YAAYL,KAAKuI,MAAM,eAAErI,EAAE4P,YAAY5P,EAAE4P,SAAShH,iBAAiB9I,KAAKsK,KAAKxB,kBAAkB5I,EAAE,eAAeA,EAAE8B,GAAG,GAAGhC,KAAKsM,YAAYtM,KAAK8B,aAAa,OAAO,KAAK,MAAMM,QAAQpC,KAAK8B,aAAaqS,QAAQjU,EAAE8B,GAAG,GAAG,IAAII,EAAEuL,OAAO,aAAa,eAAE,GAAG,KAAK,MAAM1L,EAAEG,EAAE,GAAG,IAAIyE,EAAE5E,GAAG,CAAC,MAAM/B,QAAQF,KAAKiI,OAAOmM,WAAWnS,GAAG,OAAO,eAAE/B,EAAGA,GAAGF,KAAKqU,qBAAqB,OAAEnG,SAAShO,KAAM,MAAMiC,QAAQnC,KAAKiI,OAAOqM,aAAarS,GAAG,GAAG,eAAEE,GAAG,OAAO,KAAK,GAAG,eAAEA,EAAEoS,aAAa,CAAC,MAAMrU,QAAQF,KAAKiI,OAAOmM,WAAWjS,EAAEoS,aAAa,OAAO,eAAErU,EAAGA,GAAGF,KAAKqU,qBAAqB,OAAEnG,SAAShO,KAAM,OAAOF,KAAKqU,qBAAqB,EAAEnG,SAAS/L,MAAM,eAAE,CAAC,kBAAK8E,GAAErG,UAAU,uBAAkB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,cAAS,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,2BAAsB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,+BAA0B,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,0BAAqB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,6BAAwB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,qBAAgB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,qBAAgB,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,gBAAgB,MAAM,eAAE,CAAC,eAAE,CAACF,KAAK,UAAKuG,GAAErG,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,UAAKuG,GAAErG,UAAU,SAAS,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMvN,GAAErG,UAAU,UAAU,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMvN,GAAErG,UAAU,YAAY,MAAM,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,sBAAsB,MAAM,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,oBAAe,GAAQ,eAAE,CAAC,kBAAKqG,GAAErG,UAAU,gBAAW,GAAQqG,GAAE,eAAE,CAAC,eAAE,4CAA4CA,IAAG,IAAIwN,GAAExN,GAAiB,iB,oCCJ/+nB,IAI+2B3C,EAJ/2B,sMAIi3B,MAAMoQ,EAAE,IAAI,OAAE,CAACC,yBAAyB,aAAaC,uBAAuB,WAAWC,sBAAsB,UAAUC,uBAAuB,WAAWC,iCAAiC,sBAAsBC,8BAA8B,mBAAmBC,uBAAuB,WAAWC,sBAAsB,UAAUC,qBAAqB,SAASC,uBAAuB,aAAa7L,EAAE,IAAI,OAAE,CAAC8L,iBAAiB,SAASC,qBAAqB,aAAaC,gBAAgB,OAAOC,uBAAuB,QAAQC,wBAAwB,iBAAiBC,0BAA0B,sBAAsB,IAAInR,EAAED,EAAE,cAAc,OAAE,YAAYpE,GAAGJ,MAAMI,GAAGF,KAAK6S,MAAM,KAAK7S,KAAK8P,SAAS,KAAK9P,KAAK2V,oBAAoB,aAAa3V,KAAK+S,UAAU,IAAIvO,IAAIxE,KAAK4V,cAAS,EAAO5V,KAAK6V,UAAU,KAAK7V,KAAK8V,MAAM,KAAK9V,KAAK+I,WAAW,KAAK/I,KAAKuM,SAAQ,EAAG,WAAWrM,EAAE8B,GAAGA,EAAE6Q,MAAM3S,GAAG,MAAM,SAASF,KAAK+C,KAAK,WAAU,GAAI,YAAY7C,EAAE,IAAI,MAAM2S,MAAMzS,EAAE0P,SAAS1N,EAAEuT,oBAAoB1T,EAAE8G,WAAW5G,EAAE0T,UAAUtT,EAAEuT,MAAM7U,EAAE2U,SAAS7I,GAAG/M,KAAK,OAAO,IAAI,OAAE,CAAC8P,SAAS,eAAE1N,GAAGyT,UAAU,eAAEtT,GAAGoT,oBAAoB1T,EAAE8G,WAAW,eAAE5G,GAAG0Q,MAAMzS,EAAE0V,MAAM7U,EAAE2U,SAAS7I,KAAK7M,IAAI,QAAQ,MAAM2S,MAAM3S,EAAE4P,SAAS1P,EAAEuV,oBAAoBvT,EAAE2Q,UAAU9Q,EAAE8G,WAAW5G,EAAE0T,UAAUtT,EAAEuT,MAAM7U,EAAE2U,SAAS7I,GAAG/M,KAAKgE,EAAE,IAAIQ,IAAI,OAAOvC,EAAE4B,QAAS3D,GAAG8D,EAAEkB,IAAIhF,IAAK,IAAIoE,EAAE,CAACwL,SAAS,eAAE1P,GAAG2S,UAAU/O,EAAE6R,UAAU,eAAEtT,GAAGoT,oBAAoBvT,EAAE2G,WAAW,eAAE5G,GAAG0Q,MAAM3S,EAAE4V,MAAM7U,EAAE2U,SAAS7I,MAAM,eAAE,CAAC,eAAE,CAACrM,KAAKqV,UAAUxR,EAAE3D,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,UAAU2D,EAAE3D,UAAU,aAAa,MAAM,eAAE,CAAC,eAAE,CAACoV,MAAM,OAAElV,KAAK,CAACC,KAAK,OAAEkV,OAAM,MAAO1R,EAAE3D,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKqV,OAAOjV,KAAK,CAACC,KAAK,CAACsB,OAAO,aAAa6T,OAAOxB,EAAE3T,MAAMkV,MAAM,CAACE,OAAO,aAAaC,OAAO1B,EAAEuB,WAAW1R,EAAE3D,UAAU,2BAAsB,GAAQ,eAAE,CAAC,eAAE,CAACE,KAAK,CAACmV,MAAM,CAAC/V,EAAE8B,EAAE5B,IAAI4B,EAAE5B,GAAGc,MAAMwJ,KAAKxK,GAAGa,KAAKb,GAAG,IAAIsE,IAAItE,OAAOqE,EAAE3D,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKG,OAAOC,KAAK,CAACmV,MAAM,CAACI,eAAenW,IAAG,CAAEqM,QAAQrM,EAAE,SAASqE,EAAE3D,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,CAACG,QAAQC,KAAK,CAACmV,OAAM,MAAO1R,EAAE3D,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKqV,OAAOjV,KAAK,CAACC,KAAKwI,EAAExI,KAAKkV,MAAM,CAACG,OAAO7M,EAAE0M,MAAM,eAAe/V,GAAG,MAAM,CAACqM,QAAQrM,GAAGF,KAAK4V,SAAS,SAASrR,EAAE3D,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,OAAEI,KAAK,CAACmV,OAAM,MAAO1R,EAAE3D,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMjQ,EAAE3D,UAAU,eAAU,GAAQ2D,EAAED,EAAE,eAAE,CAAC,eAAE,4CAA4CC,GAAG,IAAI+R,EAAE/R,EAAiB,U,kCCJzpG,sFAIgK,MAAMP,EAAE,OAAEgD,UAAU,8BAA8B,SAAS7E,EAAEjC,GAAG,OAAO,eAAEA,EAAEqW,eAAe,eAAErW,EAAEsW,eAAe,MAAMtW,EAAEuW,SAAS,MAAMvW,EAAEwW,QAAQ,OAAEC,mBAAmBzW,EAAE0W,YAAY,eAAe1W,EAAE0W,YAAY1W,EAAE2W,iBAAiB,gBAAgB3W,EAAE2W,kBAAkB3V,MAAMC,QAAQjB,EAAE4W,OAAO,OAAEC,kBAAkB,MAAM7W,EAAEgS,OAAOhS,EAAE0W,YAAY,eAAe1W,EAAE0W,YAAY1W,EAAE2W,iBAAiB,gBAAgB3W,EAAE2W,mBAAmB3V,MAAMC,QAAQjB,EAAE4W,QAAQ,WAAW5W,GAAGA,EAAE8W,QAAQ,OAAEC,kBAAkB,MAAM/W,EAAEgS,OAAOhS,EAAE0W,YAAY,eAAe1W,EAAE0W,YAAY1W,EAAE2W,iBAAiB,gBAAgB3W,EAAE2W,kBAAkB,MAAM3W,EAAEgX,UAAU,OAAEC,iBAAiBnT,EAAEkH,MAAM,IAAI,OAAE,mBAAmB,oCAAoChL,IAAI,OAAEkX,Q,oCCJv2B,wKAImqB,IAAIrK,EAAE,cAAc,cAAD,CAAG,eAAE,eAAE,OAAEsK,aAAa,YAAO,YAAYnX,GAAGJ,MAAMI,GAAGF,KAAKuI,MAAM,KAAKvI,KAAKsX,OAAO,KAAK,aAAatX,KAAKkC,OAAOgS,MAAOhU,IAAI,GAAG,2BAA2BA,EAAEkD,KAAK,CAAC,MAAMhD,EAAEJ,KAAKuI,OAAOvI,KAAKuI,MAAMhD,IAAI,QAAQtD,EAAEjC,KAAKuI,OAAOvI,KAAKuI,MAAMwG,OAAO,WAAW,MAAM,OAAE/H,UAAUhH,KAAKuX,eAAerM,MAAM,aAAa,+CAA+CjJ,YAAY7B,MAAMF,GAAGA,KAAM,kBAAkB,MAAMA,EAAEA,GAAG,MAAMA,EAAE,EAAEA,EAAE,OAAOA,EAAEF,KAAK+F,IAAI,kBAAkB7F,EAAEF,KAAK+F,IAAI,uBAAuB,gBAAgB,OAAO/F,KAAKwX,YAAY,kBAAkB,OAAOxX,KAAKyX,iBAAiB,oBAAoB,OAAOzX,KAAKsM,YAAW,IAAKtM,KAAKuI,MAAMmP,cAAc,eAAe,SAAS1X,KAAK2X,iBAAiB3X,KAAK2X,gBAAgBzH,UAAUlQ,KAAK+H,cAAc,cAAc,OAAM,IAAK/H,KAAK+F,IAAI,iBAAiB,YAAY7F,QAAG,IAASA,EAAEF,KAAK4X,UAAU,UAAU1X,GAAGF,KAAK6X,eAAe,WAAW,YAAY,OAAO7X,KAAK+F,IAAI,qBAAqB/F,KAAK+F,IAAI,eAAe/F,KAAK+F,IAAI,iBAAiB/F,KAAKmF,UAAS,EAAG,iBAAiB,MAAMjF,EAAEF,KAAKsX,QAAQtX,KAAKsX,OAAOhL,UAAUtM,KAAKsX,OAAOQ,YAAY,GAAG9V,EAAEhC,KAAK,OAAOgC,EAAEsI,MAAMtI,EAAEsI,KAAKyN,QAAQ7X,EAAE8X,cAAa,GAAIhY,KAAKuI,OAAOvI,KAAKuI,MAAM0P,SAAS/X,EAAEgY,gBAAe,GAAIlY,KAAKmF,UAAUjF,EAAEiY,gBAAe,GAAIjY,EAAE,aAAa,OAAM,IAAK,eAAE,CAAC,kBAAK6M,EAAEnM,UAAU,cAAc,MAAM,eAAE,CAAC,kBAAKmM,EAAEnM,UAAU,aAAQ,GAAQ,eAAE,CAAC,kBAAKmM,EAAEnM,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMzH,EAAEnM,UAAU,YAAY,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMzH,EAAEnM,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMzH,EAAEnM,UAAU,gBAAgB,MAAM,eAAE,CAAC,eAAE,CAACF,KAAKC,QAAQ6T,UAAS,KAAMzH,EAAEnM,UAAU,WAAW,MAAM,eAAE,CAAC,kBAAKmM,EAAEnM,UAAU,UAAU,MAAMmM,EAAE,eAAE,CAAC,eAAE,gCAAgCA,GAAG,IAAIzI,EAAEyI,EAAiB,U,oCCAh1E,SAAS/K,EAAEA,EAAE9B,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAEkY,QAAQlS,KAAKuD,IAAIzH,EAAEkE,KAAKC,IAAIjG,EAAEkY,UAAU,YAAYlY,GAAGA,EAAEmY,QAAQnS,KAAKuD,IAAIzH,EAAEkE,KAAKC,IAAIjG,EAAEmY,SAAS,IAAIrW,EAAEA,EAAE,SAAS9B,EAAE8B,GAAG,IAAI9B,EAAE,EAAEqC,EAAE,EAAE,IAAI,IAAInC,EAAE,EAAEA,EAAE4B,EAAE2L,OAAOvN,IAAI,CAAC,MAAM6B,EAAED,EAAE5B,GAAGuF,KAAK,iBAAiB1D,IAAI/B,GAAG+B,EAAEM,KAAK,OAAOrC,EAAEqC,EAAE,SAASA,EAAEP,EAAEO,GAAG,MAAM,iBAAiBP,EAAEA,EAAEA,GAAGA,EAAE8U,OAAO9U,EAAE8U,MAAMnJ,OAAOzN,EAAE8B,EAAE8U,OAAOvU,EAAE,SAASnC,EAAE4B,EAAE9B,GAAG,IAAIA,EAAE,OAAO8B,EAAE,MAAM5B,EAAEF,EAAEwH,OAAQ1F,GAAG,SAASA,EAAEtB,MAAO6M,IAAKrN,IAAI,MAAMwW,QAAQtW,EAAEqW,QAAQxU,GAAG/B,EAAE,OAAOqC,EAAEnC,EAAE4B,GAAGO,EAAEN,EAAED,IAAI,IAAK,IAAIC,EAAE,EAAE,MAAME,EAAE/B,EAAEuN,OAAO,GAAG,IAAIxL,EAAE,OAAOH,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAEJ,EAAEI,IAAIN,GAAG7B,EAAEmC,GAAG,MAAMsC,EAAEqB,KAAKoS,MAAMrW,EAAEE,GAAG,OAAO+D,KAAKuD,IAAI5E,EAAE7C,GAAG,SAASC,EAAE/B,GAAG,MAAMqC,EAAErC,GAAGA,EAAEwI,SAASzG,EAAE,WAAW/B,GAAGA,EAAE2P,OAAO3P,EAAE2P,MAAM0I,aAAa,EAAE,EAAE,IAAIhW,EAAE,OAAON,EAAE,MAAME,EAAE,oBAAoBI,EAAEnC,EAAE6B,EAAEM,EAAE0P,iBAAiBhQ,EAAE,GAAG,WAAWM,EAAE7B,KAAK,OAAOsB,EAAEG,EAAEI,EAAEiW,QAAQ,GAAG,iBAAiBjW,EAAE7B,KAAK,CAAC,IAAIR,EAAEiC,EAAE,OAAOI,EAAEkW,iBAAiB5U,QAAStB,IAAIrC,EAAE8B,EAAE9B,EAAEqC,EAAEiW,UAAWtY,EAAE,GAAG,iBAAiBqC,EAAE7B,KAAK,CAAC,IAAIR,EAAEiC,EAAE,OAAOI,EAAEmW,gBAAgB7U,QAAStB,IAAIrC,EAAE8B,EAAE9B,EAAEqC,EAAEiW,UAAWtY,EAAE,OAAOqC,EAAE7B,KAAKyB,EAJr+B,mC,8NCI+d,IAAI,EAAE,cAAc,SAAI,EAAE,eAAE,CAAC,eAAE,uCAAuC,GAAG,ICAhFF,EDAoF8K,EAAE,EAAiB,ICArG,IAAI,EAAE9K,EAAE,cAAc,EAAE,cAAcnC,SAASC,WAAWC,KAAKU,KAAK,OAAOV,KAAK2Y,KAAK,KAAK3Y,KAAK4Y,MAAM,KAAK5Y,KAAK6Y,IAAI,KAAK7Y,KAAK8Y,OAAO,KAAK,QAAQ,OAAO,IAAI7W,EAAE,CAAC0W,KAAK3Y,KAAK2Y,KAAKC,MAAM5Y,KAAK4Y,MAAMC,IAAI7Y,KAAK6Y,IAAIC,OAAO9Y,KAAK8Y,SAAS,cAAc,OAAO9Y,KAAK+Y,KAAK,YAAY,GAAG,IAAI,eAAE,CAAC,eAAE,CAACrY,KAAK,CAACG,OAAOkV,QAAQjV,KAAK,CAACmV,OAAM,MAAO,EAAErV,UAAU,YAAO,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,CAACG,OAAOkV,QAAQjV,KAAK,CAACmV,OAAM,MAAO,EAAErV,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,CAACG,OAAOkV,QAAQjV,KAAK,CAACmV,OAAM,MAAO,EAAErV,UAAU,WAAM,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,CAACG,OAAOkV,QAAQjV,KAAK,CAACmV,OAAM,MAAO,EAAErV,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAM,EAAE5T,UAAU,UAAU,MAAM,EAAEqB,EAAE,eAAE,CAAC,eAAE,uCAAuC,GAAG,ICA5b+W,EDAgc,EAAE,EAAiB,I,sECAjd,MAAMrU,EAAE,CAACsU,KAAK,OAAE7T,IAAI,OAAO8T,QAAQ,CAACxK,OAAO,OAAEyK,QAAQ,SAAI,IAAI5W,EAAEyW,EAAE,cAAc,EAAE,cAAclZ,SAASC,WAAWC,KAAKU,KAAK,WAAWV,KAAK8P,SAAS,KAAK,cAAc,OAAO9P,KAAK+Y,KAAK,YAAY,GAAG,EAAE,QAAQ,OAAO,IAAIC,EAAE,CAAClJ,SAAS9P,KAAK8P,SAASe,YAAY,eAAE,CAAC,eAAE,CAACmF,MAAMrR,EAAE7D,KAAK,CAACC,KAAK,OAAEkV,OAAM,MAAO1T,EAAE3B,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMjS,EAAE3B,UAAU,UAAU,MAAM2B,EAAEyW,EAAE,eAAE,CAAC,eAAE,uCAAuCzW,GAAG,IAAIyB,EAAEzB,EAAiB,ICA/qB,IAAI,EAAE,cAAc,EAAE,cAAczC,SAASC,WAAWC,KAAKU,KAAK,OAAOV,KAAKsQ,KAAK,GAAG,cAAc,OAAOtQ,KAAK+Y,KAAK,YAAY,GAAG,IAAI,eAAE,CAAC,eAAE,CAACrY,KAAK,CAAC,CAAC,CAACG,UAAUC,KAAK,CAACmV,OAAM,MAAO,EAAErV,UAAU,YAAO,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAM,EAAE5T,UAAU,UAAU,MAAM,EAAE,eAAE,CAAC,eAAE,mCAAmC,GAAG,IAAI,EAAE,EAAiB,ICAgD,MAAM,EAAE,OAAEwY,OAAO,CAAChU,IAAI,OAAO6T,KAAK,EAAEC,QAAQ,CAACG,KAAK,EAAE/I,KAAK,EAAER,SAAS,KAAK,EAAE1N,IAAI,IAAInB,EAAE,cAAcmB,EAAE,cAActC,SAASC,WAAWC,KAAK8M,MAAM,IAAI,EAAE9M,KAAKsZ,QAAO,EAAGtZ,KAAKuZ,UAAS,EAAGvZ,KAAKwZ,cAAc,EAAExZ,KAAKyZ,iBAAgB,EAAG,aAAa,IAAIzX,EAAEhC,KAAKqP,YAAYrP,KAAKqP,UAAU,IAAI,QAAGrP,KAAKqP,UAAUqK,uBAAsB,EAAG1Z,KAAKqP,UAAUsK,QAAQ,EAAE3Z,KAAKqP,UAAUvC,MAAM9M,KAAK8M,MAAM9M,KAAK8L,QAAQ5G,IAAI,CAAC,eAAElF,KAAK,YAAagC,IAAIhC,KAAKqP,YAAYrP,KAAKqP,UAAUlK,SAASnD,GAAGhC,KAAKsK,OAAOtI,GAAGhC,KAAKyZ,iBAAiBzZ,KAAKsK,KAAKe,kBAAkB,GAAI,eAAErL,KAAK,CAAC,gBAAgB,aAAa,KAAM,IAAIgC,EAAE9B,EAAEF,KAAKqP,YAAYrP,KAAKqP,UAAUsK,QAAQ,OAAO3X,EAAE,OAAO9B,EAAEF,KAAKuI,YAAO,EAAOrI,EAAEyZ,SAAS3X,EAAE,KAAK,GAAI,eAAEhC,KAAK,CAAC,mBAAoBgC,IAAIhC,KAAKqP,YAAYrP,KAAKqP,UAAUuK,UAAU5X,KAAK,GAAI,eAAEhC,KAAK,CAAC,gBAAiBgC,IAAIhC,KAAKqP,YAAYrP,KAAKqP,UAAU7G,OAAOxG,KAAK,GAAIhC,KAAK8M,MAAMf,GAAG,SAAS,KAAM/L,KAAKqP,UAAUvC,MAAM9M,KAAK8M,MAAM9M,KAAKwM,aAAa,aAAc,OAAOxK,EAAEhC,KAAKsK,OAAOtI,EAAE6X,cAAc7Z,KAAKsK,KAAKuP,cAAc7Z,KAAKuI,OAAO0F,KAAMjM,IAAIA,IAAIhC,MAAMA,KAAKuZ,UAAUvZ,KAAKqI,YAAYrI,KAAK8Z,SAAS9Z,KAAKqL,gBAAgBrL,KAAKuZ,UAAS,IAAM,QAAUvZ,KAAKkC,OAAO+L,KAAK,KAAMjO,KAAKuZ,UAAUvZ,KAAKqI,YAAYrI,KAAK8Z,SAAS9Z,KAAKqL,gBAAgBrL,KAAKuZ,UAAS,IAAM,QAAU,UAAUvZ,KAAKuZ,WAAWvZ,KAAK+Z,SAAS/Z,KAAKuZ,UAAS,GAAIvZ,KAAK8L,QAAQL,OAAO,cAAczL,KAAKyZ,iBAAgB,EAAG,eAAe,OAAOzZ,KAAKuZ,WAAWvZ,KAAKsM,YAAYtM,KAAKyZ,iBAAiBzZ,KAAK+H,cAAc,iBAAiB/F,GAAG,IAAI9B,GAAE,EAAG,MAAM+B,EAAEjC,KAAKuI,MAAMnG,EAAEH,EAAE+X,SAAS5Z,EAAE6B,EAAEgY,SAAS,GAAG,MAAM7X,GAAG,MAAMhC,EAAE,CAAC,IAAI6B,GAAGG,EAAED,GAAG/B,GAAG6B,GAAGD,GAAGI,IAAIH,GAAE,IAAKE,GAAGH,GAAG5B,IAAI+B,GAAE,GAAIjC,EAAE+B,GAAGE,EAAE,OAAOjC,EAAE,gBAAgBF,KAAKqI,WAAWrI,KAAKyZ,kBAAkBzZ,KAAKyZ,iBAAgB,EAAGzZ,KAAKsM,WAAWtM,KAAKsK,KAAKe,iBAAiB,cAAcrJ,IAAIhC,KAAKka,eAAela,KAAKma,cAAcna,KAAK+C,KAAK,mBAAmBf,GAAGhC,KAAKyZ,kBAAkBzZ,KAAKsM,YAAYtM,KAAKyZ,iBAAgB,EAAGzZ,KAAK6K,OAAO7I,KAAKhC,KAAKyZ,iBAAgB,EAAG,aAAa,OAAM,EAAG,cAAc,OAAM,EAAG,YAAY,QAAQ3Z,MAAM0X,aAAaxX,KAAKoa,iBAAiBpa,KAAKsK,KAAK+P,SAAS,OAAO,eAAE,CAAC,eAAE,CAAC3Z,KAAK,EAAE,IAAIsB,GAAG,MAAM9B,EAAE,eAAE8B,EAAEhC,KAAK+Y,KAAK,SAAS,GAAG/Y,KAAK+C,KAAK,QAAQ7C,OAAOe,EAAEL,UAAU,aAAQ,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,cAAS,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,gBAAW,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,iBAAY,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMvT,EAAEL,UAAU,wBAAmB,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,uBAAkB,GAAQ,eAAE,CAAC,kBAAKK,EAAEL,UAAU,WAAW,MAAM,eAAE,CAAC,kBAAKK,EAAEL,UAAU,YAAO,GAAQK,EAAE,eAAE,CAAC,eAAE,qCAAqCA,GAAGA,I,kCCJt0G,gGAI0JD,eAAeoB,EAAEA,EAAEkC,EAAElC,EAAEjC,eAAe,IAAI,eAAEmE,GAAG,MAAM,GAAG,MAAMnC,QAAQmC,EAAEgW,kBAAkBlY,EAAE6G,SAASsR,oBAAoBtY,GAAGqC,GAAGmJ,cAAclE,EAAEiR,YAAYvZ,EAAEgO,cAAc1M,EAAEkY,cAAc5V,GAAGzC,EAAE,GAAGD,EAAEgN,SAAS,KAAK,MAAM,CAAC,KAAK,MAAM/O,EAAE6B,QAAQ,eAAEG,GAAG,GAAGsS,EAAE,eAAEtS,EAAE6G,OAAO,IAAI9G,KAAK/B,IAAI,OAAOa,GAAGyT,EAAE3Q,KAAK9C,GAAGyT,GAAGnL,GAAG,eAAEnH,EAAE6G,OAAOM,KAAK,IAAImL,EAAEvC,QAAQ5I,IAAImL,EAAE3Q,KAAKwF,GAAGmL,GAAGnS,GAAG,eAAEH,EAAE6G,OAAO1G,KAAK,IAAImS,EAAEvC,QAAQ5P,IAAImS,EAAE3Q,KAAKxB,GAAGsC,GAAGA,EAAEhB,QAAS3D,IAAI,MAAMwa,SAAS3N,GAAG7M,EAAEwU,GAAG3H,GAAG,eAAE3K,EAAE6G,OAAO8D,KAAK,IAAI2H,EAAEvC,QAAQpF,IAAI2H,EAAE3Q,KAAKgJ,KAAM2H,EAAE,SAASpQ,EAAEyI,EAAE/I,GAAG,OAAO+I,EAAE5M,cAAc4M,EAAE5M,cAAc,eAAE6D,IAAIA,EAAE2W,6BAA6B,eAAE5N,EAAE6N,sBAAsB7N,EAAE6N,qBAAqB,O,kCCJ7wB,kRAIytC,MAAMC,EAAE,OAAE7T,UAAU,sCAAsC8T,EAAE1a,IAAI,IAAI0a,EAAE,cAAc1a,EAAE,eAAeF,GAAGJ,SAASI,GAAGF,KAAKiQ,+BAA+B,KAAKjQ,KAAKwI,OAAO,KAAKxI,KAAK0H,OAAO,KAAK1H,KAAK+I,WAAW,KAAK/I,KAAKuI,MAAM,KAAKvI,KAAK+a,eAAe,GAAG/a,KAAKsK,KAAK,KAAK,aAAa,eAAEtK,KAAK,CAAC,iBAAiB,qBAAqB,4CAA4C,qBAAqB,SAAS,SAAS,iBAAiB,kBAAkB,cAAc,IAAKA,KAAKgb,+BAA+B,GAAI,eAAEhb,KAAK,cAAc,SAAS,IAAKA,KAAKgb,+BAAgC,sBAAsB,MAAMzS,MAAMrI,EAAEqI,OAAOU,OAAOjH,GAAG+Y,eAAe3a,GAAGJ,KAAK,MAAM,cAAcE,GAAGA,EAAE+a,UAAU,eAAEjZ,EAAE,IAAI,eAAEA,EAAE9B,EAAE+a,cAAc7a,IAAI,eAAE4B,EAAE5B,GAAG,8BAA8B,OAAO,EAAE,4BAA4BF,GAAG2a,EAAE3P,MAAM,4BAA4B,uDAAuD,sCAAsC,OAAM,EAAG,UAAUhL,GAAG,MAAM,IAAIgb,MAAM,0BAA0B,cAAc,MAAMhb,EAAE,CAAC+a,UAAU,CAAC,KAAKE,gBAAe,EAAGvJ,oBAAoB5R,KAAKsK,KAAKxB,kBAAkB1I,EAAE,eAAEJ,KAAK0H,QAAQ1H,KAAK0H,OAAOiK,YAAYzR,GAAG,IAAI,OAAEA,GAAG,OAAO,eAAEF,KAAK+I,cAAc3I,EAAE2I,WAAW,eAAE3I,EAAE2I,YAAY3I,EAAE2I,WAAW+H,aAAa9Q,KAAK+I,YAAY/I,KAAK+I,WAAW8H,SAASzQ,EAAE,cAAcF,EAAE8B,GAAG,MAAM,IAAIkZ,MAAM,0BAA0B,eAAehb,EAAE8B,GAAG,MAAM,IAAIkZ,MAAM,0BAA0B,kBAAkBhb,EAAE8B,GAAG,MAAM,IAAIkZ,MAAM,0BAA0B,YAAYhb,EAAE8B,GAAG,MAAM,IAAIkZ,MAAM,0BAA0B,mBAAmBhb,GAAG,GAAGA,EAAE6F,IAAI,0BAA0B,OAAO,iBAAI,8BAA8B,MAAM7F,EAAEF,KAAKyI,wBAAwBzI,KAAK+C,KAAK,iCAAiC7C,GAAGA,EAAE+N,KAAK,KAAMjO,KAAKiQ,iCAAiC/P,GAAGF,KAAK+C,KAAK,iCAAiC,QAAS,8BAA8B,IAAI/C,KAAKuI,QAAQvI,KAAKsK,KAAK,OAAO,MAAMpK,EAAE,OAAOF,KAAKsK,KAAK5J,MAAM6H,MAAMnI,EAAEmI,OAAOU,OAAO7G,EAAEqL,cAAcxL,EAAEyG,SAASvG,EAAEiZ,aAAana,IAAIjB,KAAKuC,EAAEnC,EAAEE,iBAAiBiJ,EAAE,IAAI/E,IAAID,QAAQ,eAAE,CAACpC,EAAEA,EAAEkZ,sBAAsB9R,EAAEnH,GAAG,KAAK,eAAEmH,EAAEnJ,GAAGF,EAAE,eAAEqJ,EAAEnJ,GAAG,KAAK,eAAEJ,KAAK0H,QAAQ,eAAE6B,EAAEnJ,EAAEJ,KAAK0H,QAAQ,KAAK1H,KAAKwI,OAAO,eAAEe,EAAEnJ,EAAEJ,KAAKwI,OAAOd,QAAQ,KAAKnF,EAAE,eAAEgH,EAAEnJ,EAAEmC,GAAG,OAAOnC,EAAE8Q,UAAUlR,KAAK+I,YAAY,eAAEQ,EAAEnJ,EAAE6I,OAAO,CAAC7I,EAAE8Q,SAASoK,WAAWlb,EAAE8Q,SAASqK,WAAW,YAAYnb,EAAEM,MAAMN,EAAEwS,WAAW,eAAErJ,EAAEnJ,EAAE6I,OAAO,CAAC7I,EAAEwS,UAAUK,aAAa,IAAI,MAAMjR,KAAKuC,EAAEvC,EAAEkJ,OAAO2P,EAAE3P,MAAMlJ,EAAEkJ,OAAO,eAAE3B,EAAEnH,EAAEH,GAAG/B,GAAGe,GAAG,eAAEsI,EAAEnH,EAAEnB,GAAG,MAAMua,EAAEta,MAAMwJ,KAAKnB,GAAGkS,OAAOzb,KAAK+C,KAAK,iBAAiByY,GAAG,2BAA2Btb,GAAG,MAAMqI,MAAMvG,EAAEuG,OAAOhI,aAAaH,IAAIJ,KAAK,OAAII,EAA6F,eAAEJ,KAAKuI,MAAMrI,QAAG,EAAO,IAAI,OAAE,sCAAsC,yCAAyC,CAACqI,MAAMvG,IAAvM,IAAI,OAAE,sCAAsC,sBAAsB,CAACuG,MAAMvG,IAAkI,+BAA+B9B,GAAG,MAAME,EAAE,eAAEF,GAAGA,EAAEsP,eAAe,KAAK,IAAIpP,GAAG,IAAIA,EAAEuN,OAAO,OAAOjC,QAAQ5I,QAAQ,IAAI,MAAMV,EAAE,GAAGH,EAAE,IAAIsG,MAAMpG,GAAGnC,KAAKgE,EAAE,eAAE7B,EAAEjC,GAAG,IAAI,eAAE8D,GAAG,OAAO0H,QAAQ5I,QAAQ,IAAI,MAAM7B,QAAQjB,KAAK0b,mBAAmB1X,GAAGzB,EAAEtB,GAAGA,EAAE0a,YAAYC,sBAAsB5X,GAAG+I,QAAQ/M,KAAK4P,iBAAiB1P,GAAGwU,EAAE,eAAEvS,EAAE8G,OAAO8D,EAAEkO,WAAW,IAAI,MAAMjZ,KAAK5B,EAAEmC,IAAI,eAAEmS,EAAE1S,GAAGC,EAAE8B,KAAK/B,GAAGI,EAAE2B,KAAK/B,GAAG,MAAM,WAAWG,EAAEzB,MAAM,IAAIuB,EAAE0L,OAAOjC,QAAQ5I,QAAQV,IAAI2K,EAAE8I,UAAU5T,EAAEsL,IAAKrN,GAAGA,EAAE8P,WAAW7N,EAAEsL,gBAAiBtL,EAAEiM,cAAcrB,GAAGkB,KAAM/N,GAAGkC,EAAEyZ,OAAO3b,EAAEiO,WAAY+F,MAAM,IAAKjS,IAAK,uBAAuB/B,GAAG,MAAME,EAAEJ,KAAKuI,MAAMnG,EAAEhC,EAAEuR,cAAc1P,EAAE,eAAE7B,EAAEF,GAAGiC,EAAE,eAAEF,UAAUjC,KAAK0b,mBAAmBzZ,GAAG+B,EAAE,eAAE/B,IAAIE,GAAGA,EAAEwZ,YAAYC,sBAAsB3Z,GAAGhB,IAAI,UAAUb,EAAE8I,eAAelF,GAAG,OAAO5B,EAAE+Y,eAAela,EAAEmB,EAAE0Z,QAAQ7a,EAAEmB,EAAE2Z,QAAQ9a,EAAEmB,EAAE6Y,gBAAgB,eAAEjb,KAAKuI,MAAMtG,GAAGG,EAAEwP,oBAAoB5R,KAAKsK,KAAKxB,iBAAiB1G,EAAE,YAAY,QAAQtC,MAAM0X,eAAe,eAAExX,KAAK+I,cAAc/I,KAAK+I,WAAWiT,WAAW,OAAO,eAAE,CAAC,kBAAKlB,EAAEla,UAAU,sCAAiC,GAAQ,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMsG,EAAEla,UAAU,kBAAkB,MAAM,eAAE,CAAC,eAAE,CAACF,KAAK,UAAKoa,EAAEla,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAK,UAAKoa,EAAEla,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,SAAIka,EAAEla,UAAU,kBAAa,GAAQ,eAAE,CAAC,kBAAKka,EAAEla,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKG,UAAUia,EAAEla,UAAU,0BAA0B,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,EAAG9T,KAAKC,WAAWma,EAAEla,UAAU,kCAAkC,MAAM,eAAE,CAAC,eAAE,CAAC4T,UAAS,KAAMsG,EAAEla,UAAU,sBAAiB,GAAQ,eAAE,CAAC,kBAAKka,EAAEla,UAAU,iBAAY,GAAQ,eAAE,CAAC,kBAAKka,EAAEla,UAAU,YAAO,GAAQka,EAAE,eAAE,CAAC,eAAE,uCAAuCA,GAAGA,I,kCCJ99K,IAIwhB1Y,EAJxhB,4HAI0hB,IAAIuC,EAAEvC,EAAE,cAAc,OAAE,cAActC,SAASC,WAAWC,KAAK0H,OAAO,KAAK1H,KAAKiM,eAAe,KAAKjM,KAAKkM,eAAe,KAAKlM,KAAKic,uBAAsB,EAAG,QAAQ,OAAO,IAAI7Z,EAAE,CAACsF,OAAO1H,KAAK0H,QAAQ1H,KAAK0H,OAAOmJ,QAAQ5E,eAAejM,KAAKiM,eAAeC,eAAelM,KAAKkM,eAAe+P,sBAAsBjc,KAAKic,0BAA0B,eAAE,CAAC,eAAE,CAACvb,KAAK,OAAEI,KAAK,CAACmV,OAAM,MAAOtR,EAAE/D,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAACE,KAAK,CAACmV,OAAM,MAAOtR,EAAE/D,UAAU,sBAAiB,GAAQ,eAAE,CAAC,eAAE,CAACE,KAAK,CAACmV,OAAM,MAAOtR,EAAE/D,UAAU,sBAAiB,GAAQ,eAAE,CAAC,eAAE,CAACF,KAAKC,QAAQG,KAAK,CAACmV,OAAM,MAAOtR,EAAE/D,UAAU,6BAAwB,GAAQ+D,EAAEvC,EAAE,eAAE,CAAC,eAAE,4CAA4CuC,GAAG,IAAIX,EAAEW,EAAiB,U,kCCJxsC,oIAI+Q,SAAS1D,EAAEe,EAAEI,EAAEnB,EAAEkB,EAAE,IAAI,QAAG,IAAIF,EAAE,GAAG,OAAOhB,EAAEP,KAAKuB,EAAEG,EAAEnB,EAAEib,gBAAgB,GAAG,OAAOjb,EAAEP,KAAK,CAAC,MAAMN,EAAEa,EAAEkb,2BAA2Bna,GAAGG,EAAElB,EAAEmb,wBAAwBna,EAAE,eAAEE,KAAKA,EAAEka,OAAOpb,EAAE6H,kBAAkB,eAAE3G,GAAG,eAAElB,EAAE6H,kBAAkB1G,EAAEhC,EAAE,MAAMsU,EAAE1S,EAAEsa,EAAEra,EAAE8K,EAAE/K,EAAEgX,EAAE/W,EAAE0C,EAAE3C,EAAEsa,EAAEra,EAAE+B,EAAEhC,EAAEgX,EAAE/W,GAAG6G,iBAAiBjE,GAAG5D,EAAE,OAAOkB,EAAEoa,KAAKrW,KAAKsW,IAAI9H,EAAE/P,GAAGxC,EAAEsa,KAAKvW,KAAKsW,IAAIzP,EAAE/I,GAAG7B,EAAEua,KAAKxW,KAAKuD,IAAIiL,EAAE/P,GAAGxC,EAAEwa,KAAKzW,KAAKuD,IAAIsD,EAAE/I,GAAG7B,EAAE2G,iBAAiBjE,EAAE1C,EAAE,SAASA,EAAEjC,EAAEE,EAAEmC,GAAG,MAAMJ,EAAEI,EAAEqa,MAAM1c,GAAG,OAAG,eAAEiC,IAAmBlB,EAAEkB,EAAE,iBAAII,EAAEN,GAAG4a,WAAWzc,GAAG,MAAM6B,EAAE,IAAI","file":"js/chunk-67d4c882.775ff81b.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{loadArcade as a}from\"../../support/arcadeOnDemand.js\";import{fixFields as n,unpackFieldNames as u,collectLabelingFields as p,collectElevationFields as m,collectFilterFields as d,collectFeatureReductionFields as f,collectFields as c,collectField as y,featureHasFields as h}from\"../../layers/support/fieldUtils.js\";import{init as F,on as w}from\"../../core/watchUtils.js\";import{combinedViewLayerTimeExtentProperty as g}from\"../../layers/support/commonProperties.js\";import x from\"../../tasks/support/Query.js\";import v from\"./support/FeatureFilter.js\";import E from\"./support/FeatureEffect.js\";import{getFetchPopupTemplate as j,getRequiredFields as b}from\"./support/popupUtils.js\";const q=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){F(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),w(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fields:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?n(t,[...u(t,e.outFields),...r]):n(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=t(this.filter)?this.filter.createQuery(e):new x(e);return t(this.timeExtent)&&(r.timeExtent=t(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return a()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:r,layer:{fields:i,objectIdField:s,renderer:o,displayField:a}}=this,n=r.featureReduction,u=new Set,h=await l([o?o.collectRequiredFields(u,i):null,p(u,r),e?m(u,r):null,t(this.filter)?d(u,r,this.filter):null,this.effect?d(u,r,this.effect.filter):null,n?f(u,r,n):null]);r.timeInfo&&this.timeExtent&&c(u,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),\"feature\"===r.type&&r.floorInfo&&c(u,r.fields,[r.floorInfo.floorField]);for(const t of h)t.error&&q.error(t.error);y(u,i,s),e&&a&&y(u,i,a);const F=Array.from(u).sort();this._set(\"requiredFields\",F)}validateFetchPopupFeatures(e){const{layer:t,layer:{popupEnabled:r}}=this;if(!r)return new o(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:t});return j(this.layer,e)?void 0:new o(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:t})}async fetchClientPopupFeatures(e){const r=t(e)?e.clientGraphics:null;if(!r||0===r.length)return Promise.resolve([]);const i=[],s=[],{layer:o}=this,l=j(o,e);if(!t(l))return Promise.resolve([]);const a=await this._loadArcadeModules(l),n=a&&a.arcadeUtils.hasGeometryOperations(l),p=await this.createPopupQuery(e),m=u(o.fields,p.outFields);for(const t of r)n||!h(m,t)?s.push(t):i.push(t);return\"stream\"===o.type||0===s.length?Promise.resolve(i):(p.objectIds=s.map((e=>e.attributes[o.objectIdField])),o.queryFeatures(p).then((e=>i.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const r=this.layer,i=r.createQuery(),s=j(r,e),o=t(s)&&await this._loadArcadeModules(s),l=t(s)&&o&&o.arcadeUtils.hasGeometryOperations(s),a=!(\"point\"!==r.geometryType&&!l);return i.returnGeometry=a,i.returnZ=a,i.returnM=a,i.outFields=await b(this.layer,s),i.outSpatialReference=this.view.spatialReference,i}canResume(){return!!super.canResume()&&(!t(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([i()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([i({readOnly:!0})],R.prototype,\"availableFields\",null),e([i({type:E})],R.prototype,\"effect\",void 0),e([i({type:v})],R.prototype,\"filter\",void 0),e([i(g)],R.prototype,\"timeExtent\",void 0),e([i()],R.prototype,\"layer\",void 0),e([i({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([i({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([i({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([i()],R.prototype,\"suspended\",void 0),e([i()],R.prototype,\"view\",void 0),R=e([s(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends o{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([t(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}