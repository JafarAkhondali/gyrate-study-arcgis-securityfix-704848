{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/draw/support/Reshape.js","webpack:///./node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","webpack:///./node_modules/@arcgis/core/views/draw/support/GraphicMover.js","webpack:///./node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["k","e","t","s","this","graphic","mover","selected","type","E","V","I","dx","dy","C","R","j","added","A","removed","D","i","oldGraphic","vertices","O","z","removeVertex","T","reshapeGraphics","F","default","style","size","vertex","color","outline","outlineColor","width","hover","hoverSize","hoverColor","hoverOutlineColor","midpoints","midpoint","U","EventedAccessor","super","_handles","_graphicAttributes","esriSketchTool","_mover","_snappingTask","_stagedVertex","_totalDx","_totalDy","_viewHandles","callbacks","enableMidpoints","handleGraphics","layer","midpointGraphics","midpointSymbol","selectedHandles","snappingManager","view","_setup","add","on","_keyDownHandler","TOOL","refresh","_clearSelection","_resetGraphics","_reset","destroy","removeAll","get","_set","push","concat","length","includes","_removeVertex","_setupGraphics","_setupMover","geometry","_geometryHelper","fromGeometry","_snappingContext","elevationInfo","mode","offset","pointer","viewEvent","pointerType","excludeFeature","visualizer","vertexHandle","_getVertexFromEditGeometry","_resetGraphicStateVars","_resetSnappingStateVars","cursor","doneSnapping","removeMany","forEach","clone","pop","_createHandleGraphics","_createMidpointGraphics","_saveRelatedIndices","addMany","symbols","spatialReference","o","r","n","a","h","l","x","y","symbol","attributes","pathIndex","pointIndex","d","m","_","pointIndexStart","pointIndexEnd","map","relatedGraphicIndices","enableMoveAllGraphics","graphics","onGraphicClick","_onGraphicClickCallback","onGraphicMoveStart","_onGraphicMoveStartCallback","onGraphicMove","_onGraphicMoveCallback","onGraphicMoveStop","_onGraphicMoveStopCallback","onGraphicPointerOver","_onGraphicPointerOverCallback","onGraphicPointerOut","_onGraphicPointerOutCallback","stopPropagation","clearSelection","emit","_isMidpoint","button","_createHandleFromMidpoint","_emitVertexAddEvent","_isHandle","native","shiftKey","_removeFromSelection","_addToSelection","visible","_emitMoveStartEvent","_setUpGeometryHelper","_saveSnappingContextForHandle","_onHandleMove","_emitReshapeStartEvent","_syncGraphicsWithGeometry","_emitMoveEvent","_emitReshapeEvent","_emitMoveStopEvent","_emitReshapeStopEvent","paths","rings","_updateHandleGraphicLocations","_updateMidpointGraphicLocations","set","editGeometry","components","update","_syncGeometryAfterHandleMove","async","snap","valid","apply","_getUpdatedGeometryAfterHandleMove","_moveRelatedCoordinates","_moveSelectedHandleCoordinates","_syncEditGeometryAfterHandleMove","c","pos","moveVertices","_isSelected","_updateHoverCursor","p","splice","coordinates","componentIndex","vertexIndex","Number","indexOf","_emitSelectEvent","_emitDeselectEvent","key","repeat","_removeHandles","_emitVertexRemoveEvent","onMoveStart","onMove","onMoveStop","onReshapeStart","onReshape","onReshapeStop","onVertexSelect","onVertexDeselect","onVertexAdd","onVertexRemove","prototype","readOnly","value","P","index","allGraphics","totalDx","totalDy","defaultPrevented","_activeGraphic","_dragEvent","_hoverGraphic","_initialDragGeometry","_manipulators","_setUpManipulators","_clickHandler","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","reset","_findTargetGraphic","onGraphicDoubleClick","onGraphicPointerDown","onGraphicPointerUp","action","origin","state","MAX_VALUE","intersectionDistance","b","getLogger","interactive","selectable","grabbable","dragging","events","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","attachSymbolChanged","error","_get","_updateGraphicSymbol","detachSymbolChanged","_resetGraphicSymbol","_intersectDistance2D","_intersectDistance3D","remove","watch","focusedSymbol","_focused","originalPoint","equals","mapPoint","radiusPx","G","toScreen","xoffset","yoffset","toMap","include","w","renderSpatialReference","camera","eye","constructOnly","nonNullable","Math","max","abs","stops","filter","maxSize","minSize","f","floor","renderer","event","visualVariables","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","xmin","min","ymin","xmax","ymax","intersects"],"mappings":"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","file":"js/chunk-f6fb21b8.c04b00f7.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t,isSome as s,abortMaybe as i,unwrap as o,get as r}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{createTask as h}from\"../../../core/promiseUtils.js\";import c from\"../../../geometry/Point.js\";import{geometryToCoordinates as l,getMidpoint as p}from\"../../../geometry/support/coordsUtils.js\";import\"../../../geometry.js\";import d from\"../../../core/Evented.js\";import m from\"../../../symbols/SimpleMarkerSymbol.js\";import v from\"../../../Graphic.js\";import y from\"../../../core/Handles.js\";import{whenOnce as _,pausable as g}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as u}from\"../../input/InputManager.js\";import{settings as f}from\"./settings.js\";import{SnappingVisualizer2D as x}from\"../../2d/interactive/SnappingVisualizer2D.js\";import{EditGeometry as G}from\"../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryHelper as b}from\"../../interactive/editGeometry/EditGeometryHelper.js\";import{SnappingContext as S}from\"../../interactive/snapping/SnappingContext.js\";import{cloneMove as H}from\"./drawUtils.js\";import{addUniqueLayer as w}from\"./layerUtils.js\";import M from\"./GraphicMover.js\";class k{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-start\"}}class E{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape\"}}class V{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-stop\"}}class I{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-start\"}}class C{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move\"}}class R{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-stop\"}}class j{constructor(e){this.added=e,this.type=\"vertex-select\"}}class A{constructor(e){this.removed=e,this.type=\"vertex-deselect\"}}class D{constructor(e,t,s,i){this.added=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-add\"}}class O{constructor(e,t,s,i){this.removed=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-remove\"}}const z={removeVertex:[\"Backspace\",\"Delete\"]},T=f.reshapeGraphics,F={vertices:{default:new m({style:\"circle\",size:T.vertex.size,color:T.vertex.color,outline:{color:T.vertex.outlineColor,width:1}}),hover:new m({style:\"circle\",size:T.vertex.hoverSize,color:T.vertex.hoverColor,outline:{color:T.vertex.hoverOutlineColor,width:1}}),selected:new m({style:\"circle\",size:T.selected.size,color:T.selected.color,outline:{color:T.selected.outlineColor,width:1}})},midpoints:{default:new m({style:\"circle\",size:T.midpoint.size,color:T.midpoint.color,outline:{color:T.midpoint.outlineColor,width:1}}),hover:new m({style:\"circle\",size:T.midpoint.size,color:T.midpoint.color,outline:{color:T.midpoint.outlineColor,width:1}})}};let U=class extends d.EventedAccessor{constructor(e){super(e),this._handles=new y,this._graphicAttributes={esriSketchTool:\"box\"},this._mover=null,this._snappingTask=null,this._stagedVertex=null,this._totalDx=0,this._totalDy=0,this._viewHandles=new y,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.graphic=null,this.handleGraphics=[],this.layer=null,this.midpointGraphics=[],this.midpointSymbol=new m({style:\"circle\",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedHandles=[],this.snappingManager=null,this.type=\"reshape\",this.view=null}initialize(){this._setup(),this._handles.add([_(this,\"view.ready\",(()=>{const{layer:e,view:t}=this;w(t,e),this._viewHandles.add([t.on(\"key-down\",(e=>this._keyDownHandler(e)),u.TOOL)])})),g(this,\"graphic\",(()=>this.refresh())),g(this,\"layer\",((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),g(this,\"enableMidpoints\",(()=>{this.refresh()}))])}destroy(){this._reset(),this._mover&&this._mover.destroy(),this._mover=null,this._handles.removeAll(),this._handles=null,this._viewHandles.removeAll(),this._viewHandles=null}get state(){const e=!!this.get(\"view.ready\"),t=!(!this.get(\"graphic\")||!this.get(\"layer\"));return e&&t?\"active\":e?\"ready\":\"disabled\"}set symbols(e){const{midpoints:t=F.midpoints,vertices:s=F.vertices}=e||{};this._set(\"symbols\",{midpoints:t,vertices:s})}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.handleGraphics,this.midpointGraphics),t.length&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedHandles(){this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_setup(){this.graphic&&this.layer&&(this._setupGraphics(),this._setupMover())}_setUpGeometryHelper(){const e=this.graphic.geometry;t(e)||\"polygon\"!==e.type&&\"polyline\"!==e.type||(this._geometryHelper=new b(G.fromGeometry(e,\"local\"),e.type))}_saveSnappingContextForHandle(e,t){var s;this._snappingContext=new S({geometry:this._geometryHelper,elevationInfo:{mode:\"on-the-ground\",offset:0},pointer:(null==(s=t.viewEvent)?void 0:s.pointerType)||\"mouse\",excludeFeature:this.graphic,visualizer:new x,vertexHandle:this._getVertexFromEditGeometry(e)})}_reset(){this._clearSelection(),this._resetGraphicStateVars(),this._resetGraphics(),this._resetSnappingStateVars(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetSnappingStateVars(){var e;s(this.snappingManager)&&this.snappingManager.doneSnapping(),null==(e=this._geometryHelper)||e.destroy(),this._geometryHelper=null,this._snappingTask=i(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphicStateVars(){this._totalDx=0,this._totalDy=0}_resetGraphics(e){const t=e||this.layer;t&&(t.removeMany(this.handleGraphics),t.removeMany(this.midpointGraphics)),this.handleGraphics.forEach((e=>e.destroy())),this.midpointGraphics.forEach((e=>e.destroy())),this._set(\"handleGraphics\",[]),this._set(\"midpointGraphics\",[]),this._set(\"selectedHandles\",[])}_setupGraphics(){const e=o(this.graphic.geometry),t=l(e.clone());if(\"polygon\"===e.type)for(const s of t){const e=s[s.length-1];s[0][0]===e[0]&&s[0][1]===e[1]&&s.length>2&&s.pop()}this._set(\"handleGraphics\",this._createHandleGraphics(t)),this.enableMidpoints&&this._set(\"midpointGraphics\",this._createMidpointGraphics(t)),this._saveRelatedIndices(this.handleGraphics),this.layer.addMany(this.midpointGraphics),this.layer.addMany(this.handleGraphics)}_createHandleGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,r)=>{e.forEach(((e,n)=>{var a;const[h,l]=e;o.push(new v({geometry:new c({x:h,y:l,spatialReference:i}),symbol:null==s||null==(a=s.vertices)?void 0:a.default,attributes:{...t,pathIndex:r,pointIndex:n}}))}))})),o}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,n)=>{e.forEach(((a,h)=>{const[l,d]=a,m=e[h+1]?h+1:0;if(\"polygon\"===r(this.graphic.geometry,\"type\")||0!==m){const[r,a]=e[m],[y,_]=p([l,d],[r,a]);o.push(new v({geometry:new c({x:y,y:_,spatialReference:i}),symbol:s.midpoints.default,attributes:{...t,pathIndex:n,pointIndexStart:h,pointIndexEnd:m}}))}}))})),o}_saveRelatedIndices(e){if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let s=0;s<t.length;s++){const i=[];for(let e=0;e<t.length;e++){if(s===e)continue;const o=t[s],r=t[e];o.x===r.x&&o.y===r.y&&i.push(e)}e[s].attributes.relatedGraphicIndices=i}}_setupMover(){this._mover=new M({enableMoveAllGraphics:!1,graphics:[].concat(this.handleGraphics,this.midpointGraphics,this.graphic),view:this.view,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const s=this.graphic.clone(),i=this._createHandleFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],s,i)}else if(this._isHandle(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertex(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedHandles.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}}_onGraphicMoveStartCallback(e){const t=e.graphic,{dx:s,dy:i}=e;if(this._resetGraphicStateVars(),this._resetSnappingStateVars(),t===this.graphic)return this.handleGraphics.forEach((e=>e.visible=!1)),this.midpointGraphics.forEach((e=>e.visible=!1)),this._clearSelection(),void this._emitMoveStartEvent(s,i);if(this._isMidpoint(t)){this._clearSelection();const e=this.graphic.clone(),s=this._createHandleFromMidpoint(t);this._emitVertexAddEvent([t],e,s),this._addToSelection(t)}else this.selectedHandles.includes(t)||(this._clearSelection(),this._addToSelection(t));this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._onHandleMove(t,s,i,e),this._emitReshapeStartEvent(t)}_onGraphicMoveCallback(e){const{graphic:t,dx:s,dy:i}=e;this._totalDx+=s,this._totalDy+=i,t===this.graphic?(this._syncGraphicsWithGeometry(),this._emitMoveEvent(s,i)):(this._onHandleMove(t,s,i,e),this._emitReshapeEvent(t))}_onGraphicMoveStopCallback(e){const{graphic:t,dx:s,dy:i}=e;if(this._totalDx+=s,this._totalDy+=i,t===this.graphic){this._syncGraphicsWithGeometry();for(const e of[].concat(this.handleGraphics,this.midpointGraphics))e.visible=!0;this._emitMoveStopEvent(),this._resetGraphicStateVars()}else this._onHandleMove(t,s,i,e),this._resetSnappingStateVars(),this._isMidpoint(t)&&this.refresh(),this._emitReshapeStopEvent(t),this._resetGraphicStateVars()}_syncGraphicsWithGeometry(){const e=this.graphic.geometry,t=\"polyline\"===e.type?e.paths:e.rings;this._updateHandleGraphicLocations(t),this._updateMidpointGraphicLocations(t)}_updateHandleGraphicLocations(e){for(const t of this.handleGraphics){const{pathIndex:s,pointIndex:i}=t.attributes,[o,r]=e[s][i];t.set(\"geometry\",new c(o,r,this.view.spatialReference))}}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:s,pointIndexStart:i,pointIndexEnd:o}=t.attributes,[r,n]=e[s][i],[a,h]=e[s][o],[l,d]=p([r,n],[a,h]);t.geometry=new c({x:l,y:d,spatialReference:this.view.spatialReference})}}_getVertexFromEditGeometry(e){var t;const{pathIndex:s,pointIndex:i}=e.attributes;return null==(t=this._geometryHelper)?void 0:t.editGeometry.components[s].vertices[i]}_onHandleMove(e,t,o,r){i(this._snappingTask);const n=e.geometry,a=\"graphic-move-stop\"===r.type;if(s(this.snappingManager)&&1===this.selectedHandles.length&&!a){const s=this.snappingManager;this._stagedVertex=s.update(n,this._snappingContext),this._syncGeometryAfterHandleMove(e,new c(this._stagedVertex),t,o,a),this._emitReshapeEvent(e),this._snappingTask=h((async i=>{const r=await s.snap(n,this._snappingContext,i);r.valid&&(this._stagedVertex=r.apply(),this._syncGeometryAfterHandleMove(e,new c(this._stagedVertex),t,o,a),this._emitReshapeEvent(e))}))}else{const i=s(this._stagedVertex)?new c(this._stagedVertex):n;this._syncGeometryAfterHandleMove(e,i,t,o,a),\"graphic-move\"===r.type&&this._emitReshapeEvent(e)}}async _syncGeometryAfterHandleMove(e,t,s,i,o=!1){const{x:r,y:n}=t,a=this._getUpdatedGeometryAfterHandleMove(e,t);let h=\"polyline\"===a.type?a.paths:a.rings;this._isHandle(e)&&(h=this._moveRelatedCoordinates(h,e,r,n),h=this._moveSelectedHandleCoordinates(h,e,s,i,\"polygon\"===a.type),this._updateMidpointGraphicLocations(h)),this.graphic.geometry=a,this._syncEditGeometryAfterHandleMove(e,r,n),o&&(e.geometry=t)}_getUpdatedGeometryAfterHandleMove(e,t){const{x:s,y:i}=t,r=o(this.graphic.geometry).clone(),n=\"polyline\"===r.type?r.paths:r.rings,{pathIndex:a,pointIndex:h}=e.attributes,c=n[a].length-1;return n[a][h]=[s,i],\"polygon\"===r.type&&(0===h?n[a][c]=[s,i]:h===c&&(n[a][0]=[s,i])),r}_moveRelatedCoordinates(e,t,s,i){const{relatedGraphicIndices:o}=t.attributes;for(const r of o){const o=this.handleGraphics[r],{pathIndex:n,pointIndex:a}=o.attributes;e[n][a]=[s,i],o.geometry=t.geometry}return e}_moveSelectedHandleCoordinates(e,t,s,i,o){for(const r of this.selectedHandles)if(r!==t){const{pathIndex:t,pointIndex:n,relatedGraphicIndices:a}=r.attributes,h=H(r.geometry,s,i,this.view),c=e[t].length-1;e[t][n]=[h.x,h.y],r.geometry=h,o&&(0===n?e[t][c]=[h.x,h.y]:n===c&&(e[t][0]=[h.x,h.y]));for(const s of a){const t=this.handleGraphics[s],{pathIndex:i,pointIndex:o}=t.attributes;e[i][o]=[h.x,h.y],t.geometry=h}}return e}_syncEditGeometryAfterHandleMove(e,t,s){const i=this._getVertexFromEditGeometry(e),o=t-i.pos[0],r=s-i.pos[1];this._geometryHelper.moveVertices([i],o,r,0)}_onGraphicPointerOverCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor=\"default\"}_createHandleFromMidpoint(e){const{_graphicAttributes:t}=this,s=[],i=o(this.graphic.geometry).clone(),{pathIndex:r,pointIndexStart:n,pointIndexEnd:a}=e.attributes,{x:h,y:c}=e.geometry,l=0===a?n+1:a,p=\"polyline\"===i.type?i.paths:i.rings;return p[r].splice(l,0,[h,c]),e.attributes={...t,pathIndex:r,pointIndex:l,relatedGraphicIndices:[]},s.push({coordinates:p[r][l],componentIndex:r,vertexIndex:l}),this.graphic.geometry=i,s}_removeHandles(e){const t=o(this.graphic.geometry).clone(),s=\"polygon\"===t.type?t.rings:t.paths,i=[];e instanceof v&&(e=[e]);for(const o of e){const{x:e,y:t}=o.geometry;for(let o=0;o<s.length;o++){const r=s[o];for(let n=0;n<r.length;n++){const[a,h]=r[n];e===a&&t===h&&(i.push({coordinates:s[o][n],componentIndex:o,vertexIndex:n}),s[o].splice(Number(n),1))}}}if(\"polygon\"===t.type)for(const o of s){const[e,t]=o[0],[i,r]=o[o.length-1];(1===o.length||o.length<3&&e===i&&t===r)&&s.splice(s.indexOf(o),1),o.length>2&&(e!==i||t!==r)&&o.push(o[0])}else for(const o of s)1===o.length&&s.splice(s.indexOf(o),1);return this.graphic.geometry=t,i}_addToSelection(e){e instanceof v&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set(\"selectedHandles\",this.selectedHandles.concat(e)),this._emitSelectEvent(e)}_removeFromSelection(e,t){const{vertices:s}=this.symbols,i=t?s.hover:s.default;e instanceof v&&(e=[e]);for(const o of e)this.selectedHandles.splice(this.selectedHandles.indexOf(o),1),this._set(\"selectedHandles\",this.selectedHandles),o.set(\"symbol\",i);this._emitDeselectEvent(e)}_clearSelection(){if(this.selectedHandles.length){const e=this.selectedHandles;for(const t of this.selectedHandles)t.set(\"symbol\",this.symbols.vertices.default);this._set(\"selectedHandles\",[]),this._emitDeselectEvent(e)}}_keyDownHandler(e){z.removeVertex.includes(e.key)&&!e.repeat&&this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_removeVertex(e){if(\"polygon\"===this.graphic.geometry.type&&this.handleGraphics.length<4||this.handleGraphics.length<3)return;const t=this.graphic.clone();e instanceof v&&(e=[e]);const s=this._removeHandles(e);this.refresh(),this._emitVertexRemoveEvent(e,t,s)}_isHandle(e){return this.handleGraphics.includes(e)}_isSelected(e){return this._isHandle(e)&&this.selectedHandles.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?\"copy\":\"move\"}_emitMoveStartEvent(e,t){const s=new I(this.graphic,e,t);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(e,t){const s=new C(this.graphic,e,t);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(){const e=new R(this.graphic,this._totalDx,this._totalDy);this.emit(\"move-stop\",e),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(e)}_emitReshapeStartEvent(e){const t=new k(this.graphic,e,this.selectedHandles);this.emit(\"reshape-start\",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)}_emitReshapeEvent(e){const t=new E(this.graphic,e,this.selectedHandles);this.emit(\"reshape\",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)}_emitReshapeStopEvent(e){const t=new V(this.graphic,e,this.selectedHandles);this.emit(\"reshape-stop\",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)}_emitSelectEvent(e){const t=new j(e);this.emit(\"select\",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)}_emitDeselectEvent(e){const t=new A(e);this.emit(\"deselect\",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)}_emitVertexAddEvent(e,t,s){const i=new D(e,this.graphic,t,s);this.emit(\"vertex-add\",i),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(i)}_emitVertexRemoveEvent(e,t,s){const i=new O(e,this.graphic,t,s);this.emit(\"vertex-remove\",i),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(i)}};e([n()],U.prototype,\"callbacks\",void 0),e([n()],U.prototype,\"enableMidpoints\",void 0),e([n()],U.prototype,\"graphic\",void 0),e([n({readOnly:!0})],U.prototype,\"handleGraphics\",void 0),e([n()],U.prototype,\"layer\",void 0),e([n({readOnly:!0})],U.prototype,\"midpointGraphics\",void 0),e([n()],U.prototype,\"midpointSymbol\",void 0),e([n({readOnly:!0})],U.prototype,\"selectedHandles\",void 0),e([n()],U.prototype,\"snappingManager\",void 0),e([n({readOnly:!0})],U.prototype,\"state\",null),e([n({value:F})],U.prototype,\"symbols\",null),e([n({readOnly:!0})],U.prototype,\"type\",void 0),e([n()],U.prototype,\"view\",void 0),U=e([a(\"esri.views.draw.support.Reshape\")],U);var P=U;export default P;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as m,GraphicPointerOutEvent as G,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new m(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new G(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new G(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}