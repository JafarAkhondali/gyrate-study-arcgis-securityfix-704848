(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21f7de96"],{"018d":function(e,t,i){"use strict";var s=i("7f83"),n=i("ae54");function a(e,t){return[e,t]}function o(e,t,i){return e[0]=t,e[1]=i,e}function r(e,t,i,s,n){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}const h=new n["a"]("0/0/0/0");class c{constructor(e,t,i,s,n,a,o,r,h,c,l,u){this.level=e,this.resolution=t,this.scale=i,this.origin=s,this.first=n,this.last=a,this.size=o,this.norm=r,this.worldStart=h,this.worldEnd=c,this.worldSize=l,this.wrap=u}static create(e,t,i){const n=Object(s["d"])(e.spatialReference),r=a(e.origin.x,e.origin.y),h=a(e.size[0]*t.resolution,e.size[1]*t.resolution),l=a(-1/0,-1/0),u=a(1/0,1/0),d=a(1/0,1/0);let p,m,g,b;return i&&(o(l,Math.max(0,Math.floor((i.xmin-r[0])/h[0])),Math.max(0,Math.floor((r[1]-i.ymax)/h[1]))),o(u,Math.max(0,Math.floor((i.xmax-r[0])/h[0])),Math.max(0,Math.floor((r[1]-i.ymin)/h[1]))),o(d,u[0]-l[0]+1,u[1]-l[1]+1)),e.isWrappable?(p=a(Math.ceil(Math.round((n.valid[1]-n.valid[0])/t.resolution)/e.size[0]),d[1]),m=a(Math.floor((n.origin[0]-r[0])/h[0]),l[1]),g=a(p[0]+m[0]-1,u[1]),b=!0):(m=l,g=u,p=d,b=!1),new c(t.level,t.resolution,t.scale,r,l,u,d,h,m,g,p,b)}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,i=!1){h.set(t);const s=i?h.col:this.denormalizeCol(h.col,h.world),n=h.row;return r(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,t,i=!1){h.set(t);const s=i?h.col:this.denormalizeCol(h.col,h.world);return Array.isArray(e)?o(e,this.getXForColumn(s),this.getYForRow(h.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(h.row)),e}}var l=c,u=i("ba6a");class d{constructor(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}}var p=d;const m=new n["a"]("0/0/0/0");class g{constructor(e,t,i,s,n,a,o,r){this.x=e,this.ymin=t,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=a,this.leftBound=o,this.rightBound=r}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[i,s]=e,[n,a]=t,o=n-i,r=a-s,h=0!==r?o/r:0,c=(Math.ceil(s)-s)*h,l=(Math.floor(s)-s)*h;return new g(i,Math.floor(s),Math.ceil(a),h,o<0?c:l,o<0?l:c,o<0?n:i,o<0?i:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const b=[[0,0],[0,0],[0,0],[0,0]],f=1e-6;class y{constructor(e,t){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=e.lods.slice();i.sort((function(e,t){return t.scale-e.scale}));const s=this._lodInfos=i.map(i=>l.create(e,i,t));i.forEach((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,i=!1){m.set(t);const s=this._infoByLevel[m.level];return s?s.getTileBounds(e,m,i):e}getTileCoords(e,t,i=!1){m.set(t);const s=this._infoByLevel[m.level];return s?s.getTileCoords(e,m,i):e}getTileCoverage(e,t=192,i="closest"){const s="closest"===i?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),n=u["a"].pool.acquire(s),a=this._wrap;let o,r,h,c=1/0,l=-1/0;const d=n.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-t,b[1][0]=b[2][0]=e.size[0]+t,b[2][1]=b[3][1]=e.size[1]+t;for(const u of b)e.toMap(u,u),u[0]=s.getColumnForX(u[0]),u[1]=s.getRowForY(u[1]);const m=[];let f=3;for(let u=0;u<4;u++){if(b[u][1]===b[f][1]){f=u;continue}const e=g.create(b[u],b[f]);c=Math.min(e.ymin,c),l=Math.max(e.ymax,l),void 0===m[e.ymin]&&(m[e.ymin]=[]),m[e.ymin].push(e),f=u}if(null==c||null==l||l-c>100)return null;let y=[];for(o=c;o<l;){null!=m[o]&&(y=y.concat(m[o])),r=1/0,h=-1/0;for(let e=y.length-1;e>=0;e--){const t=y[e];r=Math.min(r,t.getLeftCol()),h=Math.max(h,t.getRightCol())}if(r=Math.floor(r),h=Math.floor(h),o>=s.first[1]&&o<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const e=Math.floor(h/s.worldSize[0]);for(let t=Math.floor(r/s.worldSize[0]);t<=e;t++)d.push(new p(o,Math.max(s.getFirstColumnForWorld(t),r),Math.min(s.getLastColumnForWorld(t),h)))}else d.push(new p(o,r,h));else r>s.last[0]||h<s.first[0]||(r=Math.max(r,s.first[0]),h=Math.min(h,s.last[0]),d.push(new p(o,r,h)));o+=1;for(let e=y.length-1;e>=0;e--){const t=y[e];t.ymax>=o?t.incrRow():y.splice(e,1)}}return n}getTileParentId(e){m.set(e);const t=this._infoByLevel[m.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(m,this._lodInfos[i],m),m.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){m.set(t);const i=this._infoByLevel[m.level],s=e.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(m,s,m);const t=s.denormalizeCol(m.col,m.world);for(const i of e.spans)if(i.row===m.row&&i.colFrom<=t&&i.colTo>=t)return!0}if(s.resolution<i.resolution){const[t,n,a,o]=e.spans.reduce((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e),[1/0,-1/0,1/0,-1/0]),r=i.denormalizeCol(m.col,m.world),h=s.getColumnForX(i.getXForColumn(r)),c=s.getRowForY(i.getYForRow(m.row)),l=s.getColumnForX(i.getXForColumn(r+1))-1,u=s.getRowForY(i.getYForRow(m.row+1))-1;return!(h>o||l<a||c>n||u<t)}const n=s.denormalizeCol(m.col,m.world);return e.spans.some(e=>e.row===m.row&&e.colFrom<=n&&e.colTo>=n)}normalizeBounds(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=Object(s["d"])(this.tileInfo.spatialReference),n=-i*(t.valid[1]-t.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let i=1;i<t.length-1;i++)if(e>t[i]+f)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t,t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,i){const s=this._infoByLevel[i.level];return e.set(i),t.resolution<s.resolution?null:(t.resolution===s.resolution||(e.level=t.level,e.col=Math.floor(i.col*s.resolution/t.resolution+.01),e.row=Math.floor(i.row*s.resolution/t.resolution+.01)),e)}}t["a"]=y},"07cd":function(e,t,i){"use strict";var s=i("a4ee"),n=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("fc29")),r=i("3349"),h=i("b541");function c(e,t){return e.length=0,t.forEach(t=>e.push(t)),e}const l=new Set,u=[],d=new Map,p=[0,0];let m=class extends o["a"]{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new h["a"]({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:"scale-first"===i?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this.has(t))return this.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);d.has(n)||(d.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),d.get(n).push(t.key),l.add(n)});let n=this.state.scale;d.has(n)||(c(u,l),u.sort(),n=u.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e,u[0])),n=Math.min(n,i),n=Math.max(n,s);const a=d.get(n),o=t.getClosestInfoForScale(n),r=o.getColumnForX(this.state.center[0]),h=o.getRowForY(this.state.center[1]);return a.sort((e,t)=>{const i=o.denormalizeCol(e.col,e.world),s=o.denormalizeCol(t.col,t.world);return Math.sqrt((r-i)*(r-i)+(h-e.row)*(h-e.row))-Math.sqrt((r-s)*(r-s)+(h-t.row)*(h-t.row))}),l.clear(),d.clear(),a[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return e.forEach(e=>{const a=this._keyToItem.get(e);t.getTileCoords(p,a.key);const o=Object(r["i"])(p,i);o<s&&(s=o,n=a.key)}),n.id}};Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"concurrency",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"process",void 0),Object(s["a"])([Object(n["b"])()],m.prototype,"state",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"strategy",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"tileInfoView",void 0),Object(s["a"])([Object(n["b"])({readOnly:!0})],m.prototype,"updating",null),m=Object(s["a"])([Object(a["a"])("esri.views.2d.tiling.TileQueue")],m);var g=m;t["a"]=g},"3e7b":function(e,t,i){"use strict";var s=i("a4ee"),n=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("fc29")),r=i("3349"),h=i("b541");function c(e,t){return e.length=0,t.forEach(t=>e.push(t)),e}const l=new Set,u=[],d=new Map,p=[0,0];let m=class extends o["a"]{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new h["a"]({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const s=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(n,n),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);d.has(n)||(d.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),d.get(n).push(t.key),l.add(n)});let n=this.state.scale;d.has(n)||(c(u,l),u.sort(),n=u.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e,u[0])),n=Math.min(n,i),n=Math.max(n,s);const a=d.get(n),o=t.getClosestInfoForScale(n),r=o.getColumnForX(this.state.center[0]),h=o.getRowForY(this.state.center[1]);return a.sort((e,t)=>{const i=o.denormalizeCol(e.col,e.world),s=o.denormalizeCol(t.col,t.world);return Math.sqrt((r-i)*(r-i)+(h-e.row)*(h-e.row))-Math.sqrt((r-s)*(r-s)+(h-t.row)*(h-t.row))}),l.clear(),d.clear(),a[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return e.forEach(e=>{const a=this._keyToItem.get(e);t.getTileCoords(p,a.key);const o=Object(r["i"])(p,i);o<s&&(s=o,n=a.key)}),n.id}};Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"concurrency",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"process",void 0),Object(s["a"])([Object(n["b"])()],m.prototype,"state",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"strategy",void 0),Object(s["a"])([Object(n["b"])({constructOnly:!0})],m.prototype,"tileInfoView",void 0),Object(s["a"])([Object(n["b"])({readOnly:!0})],m.prototype,"updating",null),m=Object(s["a"])([Object(a["a"])("esri.views.2d.tiling.PagedTileQueue")],m)},"4a7a":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const s=e=>-1!==e.indexOf("Brush");class n{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),s(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark("Esri."+e))}}},a611:function(e,t,i){"use strict";var s,n=i("a4ee"),a=i("c120"),o=i("b2b2"),r=i("e92d"),h=(i("cea0"),i("59b2")),c=i("d386"),l=i("ce50"),u=(i("e041"),i("8eed"),i("f402"),i("2c4f")),d=i("8d60"),p=i("4d10"),m=i("3795"),g=i("7ffa"),b=i("6a0e"),f=i("9ef0");let y=s=class extends b["a"]{constructor(e){super(e),this.color=new f["a"]([0,0,0,1])}clone(){return new s(Object(g["a"])({color:this.color}))}};Object(n["a"])([Object(h["b"])({type:f["a"],json:{write:!0}})],y.prototype,"color",void 0),y=s=Object(n["a"])([Object(c["a"])("esri.webmap.background.ColorBackground")],y);var w=y,v=w,_=i("dfa0"),O=i("4dc1"),j=i("05a9"),k=i("7aa6"),T=i("412f"),x=i("f4cc"),S=i("5996"),I=i("9786"),M=i("4ae5"),C=i("3af1"),V=(i("e06a"),i("a915")),z=i("cb72"),P=i("dff3"),R=(i("ae54"),i("de65")),D=i("535f"),E=i("f61d"),N=i("a98b"),L=i("5815"),F=i("fc29"),q=i("0554");class Z{constructor(e,t,i,s){const n=e.targetGeometry,a=t.targetGeometry;s?"string"==typeof s&&(s=Object(q["b"])(s)||q["a"].ease):s=q["a"].ease,this.easing=s,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=a.x,this.tCenterY=a.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const i=this.easing(t);let s,n,a,o;t>=1?(s=this.tCenterX,n=this.tCenterY,a=this.tRotation,o=this.tScale):(s=this.sCenterX+i*this.dCenterX,n=this.sCenterY+i*this.dCenterY,a=this.sRotation+i*this.dRotation,o=this.sScale+i*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=n,e.scale=o,e.rotation=a}}let A=class extends F["a"]{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=q["a"].ease,this.view=null,this.viewpoint=null,this.viewpoint=new z["a"]({targetGeometry:new M["a"],scale:0,rotation:0}),this._updateTask=Object(L["a"])({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const s=this.viewpoint;Object(N["d"])(s,t),this.transition=new Z(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new E["a"]({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==E["a"].State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=(performance.now()-this._startTime)/this.transition.duration,t=e>=1;this.transition.applyRatio(this.viewpoint,e),t&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};Object(n["a"])([Object(h["b"])()],A.prototype,"animation",void 0),Object(n["a"])([Object(h["b"])()],A.prototype,"duration",void 0),Object(n["a"])([Object(h["b"])()],A.prototype,"transition",void 0),Object(n["a"])([Object(h["b"])()],A.prototype,"easing",void 0),Object(n["a"])([Object(h["b"])()],A.prototype,"view",void 0),Object(n["a"])([Object(h["b"])()],A.prototype,"viewpoint",void 0),A=Object(n["a"])([Object(c["a"])("esri.views.2d.AnimationManager")],A);var B=A,G=B;class U{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:e,graphicsView:t,labelManager:i,layerViews:s,state:{id:n}}=this.view;e.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),e.referenceLayerViews.forEach(this._updateLayerView,this),Object(o["k"])(i)&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),Object(o["k"])(t)&&(t.lastUpdateId!==n&&(t.viewChange(),t.lastUpdateId=n),t.updateRequested&&t.processUpdate(this._updateParameters)),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",e=>{this.stationary=e,this.requestFrame()}),this._frameTaskHandle=Object(L["a"])(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}var Y=U;function K(){return Promise.all([i.e("chunk-60f00f69").then(i.bind(null,"b69b")),Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-4c10ca96")]).then(i.bind(null,"b460"))])}const H=()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-2cc88ef8")]).then(i.bind(null,"02b4"))),W=()=>K().then(()=>Promise.all([i.e("chunk-bd182524"),i.e("chunk-53ff5184"),i.e("chunk-42f05965"),i.e("chunk-67d4c882")]).then(i.bind(null,"189c6"))),X={"base-dynamic":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-76ed6005")]).then(i.bind(null,"b969"))),"base-tile":H,"bing-maps":H,csv:W,"geo-rss":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-2cc14925")]).then(i.bind(null,"5319"))),feature:W,geojson:W,graphics:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-03b68249")]).then(i.bind(null,"c70f"))),group:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-153cadea")]).then(i.bind(null,"d86a"))),imagery:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-497b66ca")]).then(i.bind(null,"7f5c"))),"imagery-tile":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-31fd123a")]).then(i.bind(null,"aebc"))),kml:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-2c90ae68")]).then(i.bind(null,"a0ce"))),"map-image":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-b179dab4")]).then(i.bind(null,"e818"))),"map-notes":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-523b152a")]).then(i.bind(null,"791a"))),"ogc-feature":()=>K().then(()=>Promise.all([i.e("chunk-bd182524"),i.e("chunk-53ff5184"),i.e("chunk-42f05965"),i.e("chunk-67d4c882"),i.e("chunk-02817b8c")]).then(i.bind(null,"6cbe"))),"open-street-map":H,route:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-86f4e876")]).then(i.bind(null,"04b6"))),stream:()=>K().then(()=>Promise.all([i.e("chunk-bd182524"),i.e("chunk-53ff5184"),i.e("chunk-42f05965"),i.e("chunk-67d4c882"),i.e("chunk-2d237116")]).then(i.bind(null,"fa16"))),tile:H,"vector-tile":()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-342283ac"),i.e("chunk-1ff3fb2e")]).then(i.bind(null,"46bf"))),wcs:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-31fd123a")]).then(i.bind(null,"aebc"))),"web-tile":H,wms:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-4eb32158")]).then(i.bind(null,"2535"))),wmts:()=>K().then(()=>Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-0bac659f")]).then(i.bind(null,"4072"))),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};function $(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new l["a"](i+":view-not-supported",t+" is not supported in 2D")}const J={hasLayerViewModule:e=>Object(o["k"])(X[e.type]),importLayerView:e=>{const t=X[e.type];if(!Object(o["k"])(t))throw $(e);return t(e)}};var Q,ee=i("1219"),te=i("ce6d"),ie=i("50e6"),se=i("2172"),ne=i("8188"),ae=i("32ed"),oe=i("3349");function re(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let n=Number.POSITIVE_INFINITY,a=0,o=0;const r=[0,0],h="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of h)for(let e=0;e<c.length-1;e++){Object(ae["h"])(r,s,c,e);const t=Object(oe["i"])(s,r);t<n&&(n=t,a=r[0],o=r[1])}return{coordinate:new M["a"]({x:a,y:o,spatialReference:i}),distance:n}}const he=r["a"].getLogger("esri.views.MapView");let ce=Q=class extends F["a"]{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:Object(I["a"])(this.geometry,this.spatialReference)?Object(I["d"])(this.geometry,this.spatialReference):Object(ne["h"])()?Object(ne["n"])(this.geometry,this.spatialReference):(he.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}constrain(e,t){if(!this.normalizedGeometry)return e;const i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?Object(se["e"])(this.normalizedGeometry,i):Object(se["g"])(this.normalizedGeometry,i))return e;const{coordinate:s}=re(this.normalizedGeometry,i);return s?(e.targetGeometry=s,e):e}clone(){var e,t;return new Q({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}};var le;Object(n["a"])([Object(h["b"])({constructOnly:!0})],ce.prototype,"geometry",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],ce.prototype,"normalizedGeometry",null),Object(n["a"])([Object(h["b"])({constructOnly:!0})],ce.prototype,"spatialReference",void 0),ce=Q=Object(n["a"])([Object(c["a"])("esri.views.2d.constraints.GeometryConstraint")],ce);let ue=le=class extends F["a"]{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new le({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};Object(n["a"])([Object(h["b"])()],ue.prototype,"enabled",void 0),Object(n["a"])([Object(h["b"])()],ue.prototype,"rotationEnabled",void 0),ue=le=Object(n["a"])([Object(c["a"])("esri.views.2d.constraints.RotationConstraint")],ue);var de,pe=ue,me=pe;let ge=de=class extends F["a"]{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:n,maxZoom:a}=this,o=-1,r=-1,h=!1,c=!1;if(0!==i&&0!==s&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(e=>e.clone()),t.sort((e,t)=>t.scale-e.scale),t.forEach((e,t)=>e.level=t);for(const l of t)!h&&i>0&&i>=l.scale&&(o=l.level,h=!0),!c&&s>0&&s>=l.scale&&(r=e?e.level:-1,c=!0),e=l;-1===n&&(n=0===i?0:o),-1===a&&(a=0===s?t.length-1:r),n=Math.max(n,0),n=Math.min(n,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),n>a&&([n,a]=[a,n]),i=t[n].scale,s=t[a].scale,t.splice(0,n),t.splice(a-n+1,t.length),t.forEach((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",a),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,n=e.targetGeometry,a=t&&t.targetGeometry,o=0!==s&&e.scale<s,r=0!==i&&e.scale>i;if(o||r){const o=r?i:s;if(a){const i=(o-t.scale)/(e.scale-t.scale);n.x=a.x+(n.x-a.x)*i,n.y=a.y+(n.y-a.y)*i}e.scale=o}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],s=t[n+1],s===e)return n+this.effectiveMinZoom+1;if(i>e&&s<e)return n+this.effectiveMinZoom+1-(e-s)/(i-s)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new de({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};Object(n["a"])([Object(h["b"])({readOnly:!0})],ge.prototype,"effectiveLODs",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],ge.prototype,"effectiveMinZoom",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],ge.prototype,"effectiveMaxZoom",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],ge.prototype,"effectiveMinScale",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],ge.prototype,"effectiveMaxScale",void 0),Object(n["a"])([Object(h["b"])({type:[ie["a"]]})],ge.prototype,"lods",void 0),Object(n["a"])([Object(h["b"])()],ge.prototype,"minZoom",void 0),Object(n["a"])([Object(h["b"])()],ge.prototype,"maxZoom",void 0),Object(n["a"])([Object(h["b"])()],ge.prototype,"minScale",void 0),Object(n["a"])([Object(h["b"])()],ge.prototype,"maxScale",void 0),Object(n["a"])([Object(h["b"])()],ge.prototype,"snapToZoom",void 0),ge=de=Object(n["a"])([Object(c["a"])("esri.views.2d.constraints.ZoomConstraint")],ge);var be=ge,fe=be;const ye={base:null,key:"type",typeMap:{extent:C["a"],polygon:ee["a"]}};let we=class extends te["a"].EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get _defaultLODs(){const e=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){return new ce({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new me({rotationEnabled:this.rotationEnabled})}get _zoom(){return new fe({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};Object(n["a"])([Object(h["b"])({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],we.prototype,"effectiveLODs",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],we.prototype,"effectiveMinScale",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],we.prototype,"effectiveMaxScale",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],we.prototype,"effectiveMinZoom",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],we.prototype,"effectiveMaxZoom",void 0),Object(n["a"])([Object(h["b"])({types:ye,value:null})],we.prototype,"geometry",null),Object(n["a"])([Object(h["b"])({type:[ie["a"]]})],we.prototype,"lods",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"minScale",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"maxScale",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"minZoom",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"maxZoom",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"rotationEnabled",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"snapToZoom",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"view",void 0),Object(n["a"])([Object(h["b"])()],we.prototype,"_defaultLODs",null),Object(n["a"])([Object(h["b"])({type:ce})],we.prototype,"_geometry",null),Object(n["a"])([Object(h["b"])({type:me})],we.prototype,"_rotation",null),Object(n["a"])([Object(h["b"])({readOnly:!0,type:fe})],we.prototype,"_zoom",null),we=Object(n["a"])([Object(c["a"])("esri.views.2d.MapViewConstraints")],we);var ve=we,_e=ve,Oe=i("02f1"),je=i("ec6a");let ke=class extends F["a"]{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};Object(n["a"])([Object(h["b"])()],ke.prototype,"left",void 0),Object(n["a"])([Object(h["b"])()],ke.prototype,"top",void 0),Object(n["a"])([Object(h["b"])()],ke.prototype,"right",void 0),Object(n["a"])([Object(h["b"])()],ke.prototype,"bottom",void 0),ke=Object(n["a"])([Object(c["a"])("esri.views.2d.PaddedViewState.Padding")],ke);let Te=class extends je["a"]{constructor(...e){super(...e),this.paddedViewState=new je["a"],this._updateContent=(()=>{const e=Object(Oe["b"])();return()=>{const t=this._get("size"),i=this._get("padding");if(!t||!i)return;const s=this.paddedViewState;Object(oe["s"])(e,i.left+i.right,i.top+i.bottom),Object(oe["d"])(e,t,e),Object(oe["c"])(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new ke,this.size=[0,0]}set padding(e){this._set("padding",e||new ke)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Object(N["a"])(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}};Object(n["a"])([Object(h["b"])()],Te.prototype,"paddedViewState",void 0),Object(n["a"])([Object(h["b"])({type:ke})],Te.prototype,"padding",null),Object(n["a"])([Object(h["b"])()],Te.prototype,"viewpoint",null),Te=Object(n["a"])([Object(c["a"])("esri.views.2d.PaddedViewState")],Te);var xe=Te,Se=xe,Ie=(i("3e7b"),i("018d")),Me=(i("07cd"),i("d302"),i("4a7a"));const Ce=r["a"].getLogger("esri.views.MapView");function Ve(e){return e&&"esri.Viewpoint"===e.declaredClass}const ze=160;let Pe=class extends(Object(R["a"])(D["a"])){constructor(e){super(e),this._stationaryTimer=null,this.frameTask=new Y(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new Me["a"],this.type="2d",this.constraints=new _e,this.padding={top:0,right:0,bottom:0,left:0};const t=this.handles,i=()=>this.notifyChange("updating");t.add([this.watch("viewpoint",()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(ze)},!0),this.on("resize",e=>this._resizeHandler(e)),this.watch("animationManager.animation",e=>{this.animation=e}),this.allLayerViews.on("change",()=>{i(),t.remove("map-view-base-layerViewsUpdating"),t.add(this.allLayerViews.map(e=>e.watch("updating",i)),"map-view-base-layerViewsUpdating")})],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new M["a"]({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this._normalizeInput(e))return void Ce.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");const t=this.viewpoint;Object(N["c"])(t,t,e),this.viewpoint=t}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-base-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void Ce.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!t.width||!t.height)return void Ce.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;Object(N["v"])(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get initialExtentRequired(){const{extent:e,center:t,scale:i,viewpoint:s,zoom:n}=this;return!this.get("map.initialViewProperties.viewpoint")&&!e&&(!t||0===i&&-1===n)&&!s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;Object(N["s"])(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Object(N["u"])(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void(!e.scale||isNaN(e.scale)?Ce.error("#viewpoint","invalid scale value of "+e.scale):Object(o["j"])(e.targetGeometry)?Ce.error("#viewpoint","geometry not defined"):Ce.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(e.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const i=new z["a"]({targetGeometry:new M["a"],scale:0,rotation:0});Object(N["d"])(i,t),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(null==e)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);const t=this._get("extent");t&&(this._set("extent",null),this._set("center",t.center))}if(!this.constraints.effectiveLODs)return;const t=this.viewpoint;Object(N["u"])(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Object(m["m"])(this,"ready",t&&t.signal).then(()=>{const i={animate:!0,...t},s=Object(N["e"])(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});Ce.error("#goTo()","target cannot be null or undefined")}hitTest(e){return Promise.reject("Should be implemented by subclasses")}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}toMap(e){if(!this.ready)return null;const t=[0,0],[i,s]=this.state.toMap(t,[e.x,e.y]),n=this.spatialReference;return new M["a"]({x:i,y:s,spatialReference:n})}isTileInfoRequired(){return!0}toScreen(e){if(!this.ready)return null;const t=this._normalizeInput(e),i=[t.x,t.y];return this.state.toScreen(i,i),Object(V["f"])(i[0],i[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Ce.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(e,t){return!(!t&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(e){return J.importLayerView(e)}hasLayerViewModule(e){return J.hasLayerViewModule(e)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new E["a"]),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,n=i.then(()=>{s()&&(this.animation=null)}).catch(e=>{throw s()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),e}),a=new Promise(e=>e(n));return t.when().catch(()=>{s()&&a.cancel&&a.cancel()}),a}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,n=e.then(e=>{if(Object(x["w"])(t),i!==this._gotoTask)throw new l["a"]("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=e,s.finish()});return this._cancellableGoTo(i,s,n)}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation,n=e.then(e=>{if(Object(x["w"])(t),i!==this._gotoTask)throw new l["a"]("view:goto-interrupted","Goto was interrupted");return s.update(e),this.animationManager.animate(s,this.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n)}_resizeHandler(e){const t=this.state;if(!t)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Object(N["q"])(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){const e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new G({view:this})),this._set("state",new Se({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new Ie["a"](P["a"].create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[e,t],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,a=new M["a"]({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(e){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<ze&&(this._stationaryTimer=this._flipStationary(e))},e)),this._stationaryTimer}_normalizeInput(e,t=this.spatialReference){const i=e&&e.targetGeometry||e;return t?i?t.equals(i.spatialReference)?e:Object(I["a"])(i,t)?Ve(e)?(e.targetGeometry=Object(I["d"])(i,t),e):Object(I["d"])(i,t):null:null:e}_getDefaultViewpoint(){const e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==t.zoom&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;let i=null,s=null,n=0;const a=t.viewpoint&&t.viewpoint.rotation,r=t.viewpoint&&t.viewpoint.targetGeometry;Object(o["k"])(r)&&("extent"===r.type?i=r:"point"===r.type&&(s=r,n=t.viewpoint.scale));const h=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),c=this._normalizeInput(this.initialExtent),l=t.extent||i||h||c,u=t.center||s||l&&l.center,d=this.get("map.initialViewProperties.viewpoint.scale"),p=t.scale||n||d||l&&Object(N["f"])(l,this.size),m=this.get("map.initialViewProperties.viewpoint.rotation"),g=t.rotation||a||m||0;return u&&p?new z["a"]({targetGeometry:u,scale:p,rotation:g}):null}};Object(n["a"])([Object(h["b"])()],Pe.prototype,"_stationaryTimer",void 0),Object(n["a"])([Object(h["b"])()],Pe.prototype,"animation",null),Object(n["a"])([Object(h["b"])({readOnly:!0})],Pe.prototype,"animationManager",void 0),Object(n["a"])([Object(h["b"])({value:null,type:M["a"],dependsOn:["state.id","ready"]})],Pe.prototype,"center",null),Object(n["a"])([Object(h["b"])({type:_e})],Pe.prototype,"constraints",null),Object(n["a"])([Object(h["b"])({value:null,type:C["a"],dependsOn:["state.id","ready"]})],Pe.prototype,"extent",null),Object(n["a"])([Object(h["b"])({readOnly:!0})],Pe.prototype,"featuresTilingScheme",void 0),Object(n["a"])([Object(h["b"])()],Pe.prototype,"fullOpacity",void 0),Object(n["a"])([Object(h["b"])()],Pe.prototype,"graphicsView",void 0),Object(n["a"])([Object(h["b"])({type:C["a"]})],Pe.prototype,"initialExtent",void 0),Object(n["a"])([Object(h["b"])({dependsOn:["map.initialViewProperties?.viewpoint"]})],Pe.prototype,"initialExtentRequired",null),Object(n["a"])([Object(h["b"])()],Pe.prototype,"labelManager",void 0),Object(n["a"])([Object(h["b"])({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Pe.prototype,"padding",null),Object(n["a"])([Object(h["b"])({type:Object})],Pe.prototype,"renderingOptions",void 0),Object(n["a"])([Object(h["b"])()],Pe.prototype,"resizeAlign",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,dependsOn:["state.id"]})],Pe.prototype,"resolution",null),Object(n["a"])([Object(h["b"])({value:0,type:Number,dependsOn:["state.id","ready"]})],Pe.prototype,"rotation",null),Object(n["a"])([Object(h["b"])({value:0,type:Number,dependsOn:["state.id","ready"]})],Pe.prototype,"scale",null),Object(n["a"])([Object(h["b"])({type:S["a"],dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],Pe.prototype,"spatialReference",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],Pe.prototype,"state",void 0),Object(n["a"])([Object(h["b"])({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],Pe.prototype,"stationary",null),Object(n["a"])([Object(h["b"])({readOnly:!0})],Pe.prototype,"supportsGround",void 0),Object(n["a"])([Object(h["b"])({type:Me["a"],readOnly:!0})],Pe.prototype,"timeline",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],Pe.prototype,"type",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],Pe.prototype,"updating",null),Object(n["a"])([Object(h["b"])({value:null,type:z["a"],dependsOn:["state.id","ready"]})],Pe.prototype,"viewpoint",null),Object(n["a"])([Object(h["b"])({value:-1,dependsOn:["state.id"]})],Pe.prototype,"zoom",null),Pe=Object(n["a"])([Object(c["a"])("esri.views.MapViewBase")],Pe);var Re=Pe,De=Re,Ee=i("af40"),Ne=i("2589"),Le=i("7164"),Fe=i("1bf0");class qe extends Le["a"]{constructor(e,t){super(!0),this.view=e,this.registerIncoming("double-click",t,e=>this._handleDoubleClick(e,t))}_handleDoubleClick(e,t){Object(Fe["b"])(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class Ze extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",i,e=>this._handleDoubleTapDrag(e))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:i}=t;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=t,{view:a}=this,{mapViewNavigation:o}=a;switch(s){case"begin":{const{scale:e}=a;this._startScale=e,this._currentScale=e,this._previousDelta=n,o.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const e=1.015**n.y,t=this._startScale*e,i=t/this._currentScale;o.setViewpointImmediate(i),this._currentScale=t;break}case"end":{const{constraints:e}=a,{effectiveLODs:t,snapToZoom:i}=e;if(!i||!t)return void o.end();const s=e.snapScale(this._currentScale),r=(n.y>0?Math.max(s,e.snapToPreviousScale(this._startScale)):Math.min(s,e.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(r);break}}}}var Ae=i("2b7b");class Be extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",i,e=>this._handleDrag(e)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ae["a"]({start:(e,t)=>{s.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{s.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{s.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&Object(Fe["b"])(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Ge extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t;const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ae["a"]({start:(e,t)=>{s.rotate.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{s.rotate.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{s.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&Object(Fe["b"])(t.data,this.pointerAction)}),this.registerIncoming("drag",i,e=>this.dragEventSeparator.handle(e))}}var Ue=i("85d4");class Ye extends Le["a"]{constructor(e){super(!0),this.view=e,this.frameTask=null,this.watchHandles=new Ee["a"],this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",e=>this.handleEvent(e)),this.handle.pause()}onInstall(e){super.onInstall(e),this.watchHandles.add([Object(m["a"])(this.view.navigation.gamepad,"enabled",e=>{e?(this.handle.resume(),this.frameTask||(this.frameTask=Object(L["a"])({update:e=>this.frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(e){const t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,Object(Ue["d"])(this.transformation)):(this.currentDevice=e.data.device,Object(Ue["a"])(e.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(e){const t=this.transformation;if(Object(Ue["c"])(t))return;const i=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,n=He*s*e;Object(N["w"])(i,i,[t.translation[0]*n,-t.translation[1]*n]);const a=1+t.translation[2]*We*e,o=this.view.constraints.rotationEnabled?-t.heading*Ke*e:0,r=this.view.size,h=[r[0]/2,r[1]];Object(N["t"])(i,i,a,o,h,r);const c=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=c}}const Ke=.06,He=.7,We=6e-4;class Xe extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",i,e=>this._handleKeyDown(e)),this.registerIncoming("key-up",i,e=>this._handleKeyUp(e)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=this._keyMap[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class $e extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",i,e=>this._handleKeyDown(e)),this.registerIncoming("key-up",i,e=>this._handleKeyUp(e)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class Je extends Le["a"]{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",i,e=>this._handleKeyDown(e)),t.zoomIn.forEach(e=>this._keysToZoomAction[e]=0),t.zoomOut.forEach(e=>this._keysToZoomAction[e]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let a=null;switch(s){case 0:a=n.zoomIn();break;case 1:a=n.zoomOut();break;default:return}n.begin(),a.then(()=>n.end()),e.stopPropagation()}}const Qe=.6;class et extends Le["a"]{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,e=>this._handleMouseWheel(e))}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:i,y:s,deltaY:n}=e.data,a=1/Qe**(1/60*n),o=t.zoom(a,[i,s]);o&&(this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}}class tt extends Le["a"]{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",e=>this._handleDrag(e)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const t=this.view.mapViewNavigation;this.dragEventSeparator=new Ae["a"]({start:(e,i)=>{t.pinch.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{t.pinch.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{t.pinch.end(this.view),i.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var it=i("6345"),st=i("16d5"),nt=i("bec4"),at=i("1729"),ot=i("28eb"),rt=i("1740");class ht extends Le["a"]{constructor(e=nt["a"].maximumDoubleClickDelay,t=nt["a"].maximumDoubleClickDistance,i=nt["a"].maximumDoubleTouchDelay,s=nt["a"].maximumDoubleTouchDistance,n=at["a"]){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Object(V["f"])(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Ae["a"]({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",e=>this._dragEventSeparator.handle(e)),this.registerIncoming("pointer-down",e=>this._handlePointerDown(e)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)})}get hasPendingInputs(){return Object(ot["b"])(this._pointerState,e=>null!=e.doubleTapTimeout)}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,i){const{button:s,buttons:n,pointer:a,pointers:o,pointerType:r,timestamp:h}=i;return{action:e,delta:t,button:s,buttons:n,pointer:a,pointers:o,pointerType:r,timestamp:h}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=t,{center:n}=i;this._dragStartCenter=n;const a=this._createDoubleTapDragData("begin",Object(V["f"])(0,0),i);this._doubleTapDrag.emit(a,void 0,s),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,n=Object(V["f"])(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("update",n,t);this._doubleTapDrag.emit(a,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,n=Object(V["f"])(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("end",n,t);this._doubleTapDrag.emit(a,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,i=this._pointerId(t),s=this._pointerState.get(i),{pointerType:n}=t.native;if(s){const a="touch"===n?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),Object(rt["c"])(s.event.data,t)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(e){const{native:t}=e,{pointerId:i,button:s,pointerType:n}=t;return"mouse"===n?`${i}:${s}`:""+n}_storePointerDown(e){const{data:t}=e,{pointerType:i}=t.native,s=this._pointerId(t),n="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}}var ct=i("0f18"),lt=i("82a5"),ut=i("e35b");const dt={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let pt=class extends F["a"]{constructor(){super(...arguments),this._handles=new Ee["a"]}initialize(){this._handles.add([Object(m["i"])(this.view,"ready",()=>this._disconnect()),Object(m["f"])(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new it["a"](e,this.view.input),i=[new lt["a"],new ut["a"],new nt["b"],new ct["a"](this.view.navigation),new ht],s=new Ne["a"]({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new st["a"]],Ne["b"].INTERNAL),s.installHandlers("navigation",[new tt(this.view),new Ye(this.view),new et(this.view),new qe(this.view),new qe(this.view,[dt.counter]),new Be(this.view,"primary"),new Xe(this.view,dt.pan),new Je(this.view,dt.zoom),new $e(this.view,dt.rotate),new Ge(this.view,"secondary"),new Ze(this.view,"touch")],Ne["b"].INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,Object(m["a"])(this.view.navigation,"browserTouchPanEnabled",e=>{this._source.browserTouchPanningEnabled=!e})}get test(){return{inputManager:this._inputManager}}};Object(n["a"])([Object(h["b"])()],pt.prototype,"view",void 0),pt=Object(n["a"])([Object(c["a"])("esri.views.2d.input.MapViewInputManager")],pt);var mt=pt,gt=mt;let bt=0,ft=class extends F["a"]{constructor(){super(...arguments),this.color=new f["a"]([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return bt++}};Object(n["a"])([Object(h["b"])({readOnly:!0})],ft.prototype,"version",null),Object(n["a"])([Object(h["b"])({type:f["a"]})],ft.prototype,"color",void 0),Object(n["a"])([Object(h["b"])({type:f["a"]})],ft.prototype,"haloColor",void 0),Object(n["a"])([Object(h["b"])()],ft.prototype,"haloOpacity",void 0),Object(n["a"])([Object(h["b"])()],ft.prototype,"fillOpacity",void 0),ft=Object(n["a"])([Object(c["a"])("esri.views.2d.support.HighlightOptions")],ft);var yt=ft,wt=yt,vt=i("c4da"),_t=i("ca85");let Ot=class extends _t["a"]{constructor(e){super(e),this.components=["attribution","zoom"]}};Object(n["a"])([Object(h["b"])()],Ot.prototype,"components",void 0),Ot=Object(n["a"])([Object(c["a"])("esri.views.ui.2d.DefaultUI2D")],Ot);var jt=Ot,kt=jt;const Tt=r["a"].getLogger("esri.views.MapView");let xt,St,It,Mt,Ct,Vt;async function zt(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:s,MapViewNavigation:n,MagnifierView2D:a,Stage:o}]=await Promise.all([i.e("chunk-60f00f69").then(i.bind(null,"b69b")),Promise.all([i.e("chunk-2893bf7e"),i.e("chunk-bd182524"),i.e("chunk-83577a3e"),i.e("chunk-53ff5184"),i.e("chunk-4c10ca96")]).then(i.bind(null,"b460"))]);St=e,It=t,Mt=s,Ct=n,Vt=a,xt=o}function Pt(e){return e instanceof d["a"]}function Rt(e,t,i){if(e)if(Array.isArray(e)||u["a"].isCollection(e)){if(0===e.length)return;e.forEach(e=>Rt(e,t,i))}else Pt(e)?t.add(e):i.add(e)}let Dt=class extends(Object(j["a"])(Object(k["a"])(De))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new p["a"]({root:this,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:e=>null}),this.floors=new u["a"],this.graphicsView=null,this.highlightOptions=new wt,this.inputManager=new gt({view:this}),this.mapViewNavigation=null,this.supersampleScreenhotsEnabled=!0,this.ui=new kt,this.rendering=!1,Object(_["a"])()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e)}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if(Object(T["d"])(e)){const t=Object(T["c"])(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const i=Object(T["d"])(e)?Object(T["c"])(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return Promise.resolve({screenPoint:i,results:[]});const s=this.toMap(i),n=[this.graphicsView];n.push.apply(n,this.allLayerViews.toArray().reverse());const a=new Set,o=new Set,r=new Set,h=new Set;return t&&(Rt(t&&t.include,a,r),Rt(t&&t.exclude,o,h)),Promise.all(n.map(e=>!e||!e.hitTest||r.size>0&&!e.layer||r.size>0&&e.layer&&!r.has(e.layer)||h.size>0&&e.layer&&h.has(e.layer)?null:e.hitTest(i.x,i.y))).then(e=>({screenPoint:i,results:e.filter(e=>null!=e&&(!(a.size>0)||a.has(e))&&(!(o.size>0)||!o.has(e))).map(e=>({mapPoint:s,graphic:e}))}))}takeScreenshot(e){return this.ready?this._stage.takeScreenshot(Object(O["e"])(e,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")}on(e,t,i,s){const n=this.inputManager&&this.viewEvents.on(e,t,i,s);return n||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let e=Object(vt["a"])({checkMajorWebPerformanceCaveat:!1});return Object(a["a"])("safari")&&Object(a["a"])("safari")<9&&(e=new l["a"]("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Object(a["a"])("safari")})),Object(o["k"])(e)?(Tt.warn("#validate()",e.message),Promise.reject(e)):zt()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new xt(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new St({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new It(this.featuresTilingScheme)}),s=new Ct({view:this,animationManager:this.animationManager}),n=new Mt({view:this});this._magnifierView=new Vt,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",s),this._set("labelManager",n),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",e=>this.fatalError=e.error),Object(m["a"])(this,"stationary",e=>t.stationary=e,!0),Object(m["a"])(this,"state.id",()=>t.state=this.state,!0),Object(m["a"])(this,"background",e=>{t.background=e,this._magnifierView.background=e},!0),Object(m["a"])(this,"magnifier",e=>this._magnifierView.magnifier=e,!0),Object(m["a"])(this,"renderingOptions",e=>t.renderingOptions=e,!0),Object(m["a"])(this,"highlightOptions",()=>t.highlightOptions=this.highlightOptions,!0)],"map-view"),t.state=this.state,this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(e=>e(this)),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}};Object(n["a"])([Object(h["b"])({type:v})],Dt.prototype,"background",null),Object(n["a"])([Object(h["b"])()],Dt.prototype,"floors",void 0),Object(n["a"])([Object(h["b"])()],Dt.prototype,"graphicsView",void 0),Object(n["a"])([Object(h["b"])({type:wt})],Dt.prototype,"highlightOptions",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],Dt.prototype,"inputManager",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],Dt.prototype,"textureManager",null),Object(n["a"])([Object(h["b"])({readOnly:!0})],Dt.prototype,"mapViewNavigation",void 0),Object(n["a"])([Object(h["b"])({type:Boolean})],Dt.prototype,"navigating",null),Object(n["a"])([Object(h["b"])({type:Boolean,constructOnly:!0})],Dt.prototype,"supersampleScreenhotsEnabled",void 0),Object(n["a"])([Object(h["b"])({type:kt})],Dt.prototype,"ui",void 0),Object(n["a"])([Object(h["b"])({readOnly:!0})],Dt.prototype,"rendering",void 0),Object(n["a"])([Object(h["b"])({constructOnly:!0})],Dt.prototype,"renderCanvas",void 0),Object(n["a"])([Object(h["b"])({constructOnly:!0})],Dt.prototype,"deactivatedWebGLExtensions",void 0),Object(n["a"])([Object(h["b"])({constructOnly:!0})],Dt.prototype,"debugWebGLExtensions",void 0),Dt=Object(n["a"])([Object(c["a"])("esri.views.MapView")],Dt);var Et=Dt;t["a"]=Et},b541:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("b2b2"),n=i("f4cc"),a=i("5815"),o=i("8ca7");class r{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class h{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new o["a"](e.peeker),this.process=e.process;const t=e.scheduler;e.task&&Object(s["k"])(t)&&(this._task=t.registerTask(e.task,e=>this.update(e),()=>this.needsUpdate()))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(t=>e.push(t)),this._controllers.clear(),e.forEach(e=>e.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((t,i)=>e(i))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,t){const i=this.get(e);if(i)return i;const a=Object(n["e"])();let o=null;t&&(o=Object(n["r"])(t,()=>a.abort()));const r=()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),h(),l.reject(Object(n["f"])())},h=()=>{c.remove(),Object(s["k"])(o)&&o.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},c=Object(n["s"])(a.signal,r),l=Object(n["g"])();return this._deferreds.set(e,l),this._controllers.set(e,a),l.promise.then(h,h),this._queue.push(e),this._scheduleNext(),l.promise}reset(){const e=[];this._processingItems.forEach(t=>e.push(t)),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}needsUpdate(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}update(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Object(a["b"])(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(Object(s["j"])(e))return;let t;const i=Object(n["e"])(),a=new r(e,i);this._processingItems.set(e,a);try{t=this.process(e,i.signal)}catch(o){this._processError(a,o)}Object(n["p"])(t)?(a.promise=t,t.then(e=>this._processResult(a,e),e=>this._processError(a,e))):this._processResult(a,t)}get test(){return{update:e=>this.update(e)}}}},ba6a:function(e,t,i){"use strict";var s=i("ecd7");class n{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,t){const{spans:i,lodInfo:s}=this,{level:n}=s;if(0!==i.length)for(const{row:a,colFrom:o,colTo:r}of i)for(let i=o;i<=r;i++)e.call(t,n,a,s.normalizeCol(i),s.getWorldForColumn(i))}}n.pool=new s["a"](n),t["a"]=n},d302:function(e,t,i){"use strict";var s=i("ae54"),n=i("ba6a"),a=i("3349");class o{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const i=t.key.level,s=this._tileKeysPerLevel[i];r(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t)}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,t,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e))}_pruneAroundCenterTile(e,t,i,s){const n=this._tileKeysPerLevel[s];if(!n||0===n.length)return e;const{size:o,origin:r}=this.tileInfoView.tileInfo,h=i*o[0],c=i*o[1],l=[0,0],u=[0,0];for(n.sort((e,i)=>(l[0]=r.x+h*(e.col+.5),l[1]=r.y-c*(e.row+.5),u[0]=r.x+h*(i.col+.5),u[1]=r.y-c*(i.row+.5),Object(a["j"])(l,t)-Object(a["j"])(u,t)));n.length>0;){const t=n.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),r(this._tilePerId,e)}}function r(e,t){e.delete(t)}var h=o;const c=new s["a"](0,0,0,0),l=new Map,u=[],d=[];class p{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new h(e.cacheSize,this.tileInfoView,e=>{this.releaseTile(e)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:i}=this,s=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(d.length=0,u.length=0,l.clear(),!s)return;const{minScale:a,maxScale:o}=this.tileInfoView.tileInfo,{spans:r,lodInfo:h}=s,{level:p}=h,{scale:m,center:g,resolution:b}=e.state,f=!e.stationary&&m>this._previousScale;if(this._previousScale=m,this.tiles.length=0,!t&&(m>a||m<o))return this.tiles.length=0,l.clear(),i.forEach(e=>{this.releaseTile(e)}),i.clear(),d.length=0,u.length=0,l.clear(),n["a"].pool.release(s),!0;i.forEach(e=>e.visible=!0);let y=0,w=0;if(r.length>0)for(const{row:n,colFrom:u,colTo:d}of r)for(let e=u;e<=d;e++){y++;const t=c.set(p,n,h.normalizeCol(e),h.getWorldForColumn(e)).id;if(i.has(t)){const e=i.get(t);e.isReady?(l.set(t,e),w++):f||this._addParentTile(t,l)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){l.set(t,e),w++;continue}}else e=this.acquireTile(c),this.tileIndex.set(t,e);f||this._addParentTile(t,l)}}const v=w===y;i.forEach((e,t)=>{if(c.set(t),l.has(t))return;const i=this.tileInfoView.intersects(s,c),n="purge"===this.cachePolicy?c.level!==p:c.level>p;!i||!f&&v?!n&&i||u.push(t):e.isReady?d.push(t):n&&u.push(t)});for(const n of d){const e=i.get(n);e&&e.isReady&&l.set(n,e)}for(const n of u){const e=i.get(n);this._tileCache?this._tileCache.add(e):this.releaseTile(e),i.delete(n)}return l.forEach(e=>this.tiles.push(e)),i.forEach(e=>{l.has(e.key.id)||(e.visible=!1)}),this._tileCache&&this._tileCache.prune(p,g,b),n["a"].pool.release(s),l.clear(),v}clear(e=!0){const{tileIndex:t}=this;e&&t.forEach(e=>{this.releaseTile(e)}),t.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let i=e,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s&&s.isReady){t.has(s.key.id)||t.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s&&s.isReady)){t.has(s.key.id)||t.set(s.key.id,s);break}}}t["a"]=p}}]);