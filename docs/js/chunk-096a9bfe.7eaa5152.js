(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-096a9bfe"],{"0d9f":function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return it})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return k})),n.d(e,"j",(function(){return S})),n.d(e,"k",(function(){return L})),n.d(e,"l",(function(){return U})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return w}));n("c120");var i=n("e92d"),r=n("38a4"),c=n("2119"),o=n("d791"),s=n("afe1"),a=n("e431"),u=n("0b2d"),l=n("bd7e"),d=n("7289"),b=n("d18f"),f=n("a1b1"),h=n("7361");const O=i["a"].getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class j{constructor(){this.plane=Object(d["d"])(),this.origin=Object(u["f"])(),this.basis1=Object(u["f"])(),this.basis2=Object(u["f"])()}}function g(t=Q){return{plane:Object(d["d"])(t.plane),origin:Object(u["d"])(t.origin),basis1:Object(u["d"])(t.basis1),basis2:Object(u["d"])(t.basis2)}}function p(t,e,n){const i=K.get();return i.origin=t,i.basis1=e,i.basis2=n,i.plane=Object(d["w"])(0,0,0,0),w(i),i}function y(t,e=g()){return m(t.origin,t.basis1,t.basis2,e)}function v(t,e){Object(a["n"])(e.origin,t.origin),Object(a["n"])(e.basis1,t.basis1),Object(a["n"])(e.basis2,t.basis2),Object(d["c"])(t.plane,e.plane)}function m(t,e,n,i=g()){return Object(a["n"])(i.origin,t),Object(a["n"])(i.basis1,e),Object(a["n"])(i.basis2,n),w(i),W(i,"fromValues()"),i}function w(t){Object(d["j"])(t.basis2,t.basis1,t.origin,t.plane)}function _(t,e,n){t!==n&&y(t,n);const i=Object(a["h"])(h["d"].get(),L(t),e);return Object(a["i"])(n.origin,n.origin,i),n.plane[3]-=e,n}function I(t,e,n){return k(e,n),_(n,C(t,t.origin),n),n}function k(t,e=g()){const n=(t[2]-t[0])/2,i=(t[3]-t[1])/2;return Object(a["z"])(e.origin,t[0]+n,t[1]+i,0),Object(a["z"])(e.basis1,n,0,0),Object(a["z"])(e.basis2,0,i,0),Object(d["i"])(0,0,1,0,e.plane),e}function S(t,e,n){return!!Object(d["n"])(t.plane,e,n)&&J(t,n)}function P(t,e,n){if(S(t,e,n))return n;const i=M(t,e,h["d"].get());return Object(a["i"])(n,e.origin,Object(a["h"])(h["d"].get(),e.direction,Object(a["p"])(e.origin,i)/Object(a["s"])(e.direction))),n}function M(t,e,n){const i=Z.get();Y(t,e,i,Z.get());let c=Number.POSITIVE_INFINITY;for(const o of tt){const s=q(t,o,G.get()),u=h["d"].get();if(Object(d["l"])(i,s,u)){const t=Object(a["y"])(h["d"].get(),e.origin,u),i=Math.abs(Object(r["b"])(Object(a["k"])(e.direction,t)));i<c&&(c=i,Object(a["n"])(n,u))}}return c===Number.POSITIVE_INFINITY?T(t,e,n):n}function T(t,e,n){if(S(t,e,n))return n;const i=Z.get(),r=Z.get();Y(t,e,i,r);let c=Number.POSITIVE_INFINITY;for(const o of tt){const s=q(t,o,G.get()),u=h["d"].get();if(Object(d["m"])(i,s,u)){const t=Object(b["d"])(e,u);if(!Object(d["p"])(r,u))continue;t<c&&(c=t,Object(a["n"])(n,u))}}return A(t,e.origin)<c&&H(t,e.origin,n),n}function H(t,e,n){const i=Object(d["s"])(t.plane,e,h["d"].get()),r=Object(l["i"])($(t,t.basis1),i,-1,1,h["d"].get()),c=Object(l["i"])($(t,t.basis2),i,-1,1,h["d"].get());return Object(a["m"])(n,Object(a["i"])(h["d"].get(),r,c),t.origin),n}function z(t,e,n){const{origin:i,basis1:r,basis2:c}=t,o=Object(a["m"])(h["d"].get(),e,i),s=Object(f["d"])(r,o),u=Object(f["d"])(c,o),l=Object(f["d"])(L(t),o);return Object(a["z"])(n,s,u,l)}function A(t,e){const n=z(t,e,h["d"].get()),{basis1:i,basis2:r}=t,c=Object(a["s"])(i),o=Object(a["s"])(r),s=Math.max(Math.abs(n[0])-c,0),u=Math.max(Math.abs(n[1])-o,0),l=n[2];return s*s+u*u+l*l}function N(t,e){return Math.sqrt(A(t,e))}function V(t,e){let n=Number.NEGATIVE_INFINITY;for(const i of tt){const r=q(t,i,G.get()),c=Object(l["e"])(r,e);c>n&&(n=c)}return Math.sqrt(n)}function E(t,e){return Object(d["p"])(t.plane,e)&&J(t,e)}function x(t,e,n,i){return D(t,n,i)}function C(t,e){const n=-t.plane[3];return Object(f["d"])(L(t),e)-n}function F(t,e,n,i){const r=C(t,e),c=Object(a["h"])(X,L(t),n-r);return Object(a["i"])(i,e,c),i}function R(t,e){return Object(a["r"])(t.basis1,e.basis1)&&Object(a["r"])(t.basis2,e.basis2)&&Object(a["r"])(t.origin,e.origin)}function B(t,e,n){return t!==n&&y(t,n),Object(o["c"])(et,e),Object(o["u"])(et,et),Object(a["t"])(n.basis1,t.basis1,et),Object(a["t"])(n.basis2,t.basis2,et),Object(a["t"])(Object(d["r"])(n.plane),Object(d["r"])(t.plane),et),Object(a["t"])(n.origin,t.origin,e),Object(d["u"])(n.plane,n.origin,n.plane),n}function U(t,e,n,i){return t!==i&&y(t,i),Object(o["f"])(nt,Object(o["j"])(nt),e,n),Object(a["t"])(i.basis1,t.basis1,nt),Object(a["t"])(i.basis2,t.basis2,nt),w(i),i}function L(t){return Object(d["r"])(t.plane)}function D(t,e,n){switch(e){case 0:Object(a["n"])(n,t.basis1),Object(a["u"])(n,n);break;case 1:Object(a["n"])(n,t.basis2),Object(a["u"])(n,n);break;case 2:Object(a["n"])(n,L(t))}return n}function J(t,e){const n=Object(a["m"])(h["d"].get(),e,t.origin),i=Object(a["w"])(t.basis1),r=Object(a["w"])(t.basis2),c=Object(a["k"])(t.basis1,n),o=Object(a["k"])(t.basis2,n);return-c-i<0&&c-i<0&&-o-r<0&&o-r<0}function $(t,e){const n=G.get();return Object(a["n"])(n.origin,t.origin),Object(a["n"])(n.vector,e),n}function q(t,e,n){const{basis1:i,basis2:r,origin:c}=t,o=Object(a["h"])(h["d"].get(),i,e.origin[0]),s=Object(a["h"])(h["d"].get(),r,e.origin[1]);Object(a["i"])(n.origin,o,s),Object(a["i"])(n.origin,n.origin,c);const u=Object(a["h"])(h["d"].get(),i,e.direction[0]),l=Object(a["h"])(h["d"].get(),r,e.direction[1]);return Object(a["h"])(n.vector,Object(a["i"])(u,u,l),2),n}function W(t,e){Math.abs(Object(a["k"])(t.basis1,t.basis2)/(Object(a["s"])(t.basis1)*Object(a["s"])(t.basis2)))>1e-6&&O.warn(e,"Provided basis vectors are not perpendicular"),Math.abs(Object(a["k"])(t.basis1,L(t)))>1e-6&&O.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(a["k"])(L(t),t.origin)-t.plane[3])>1e-6&&O.warn(e,"Plane offset is not consistent with plane origin")}function Y(t,e,n,i){const r=L(t);Object(d["j"])(r,e.direction,e.origin,n),Object(d["j"])(Object(d["r"])(n),r,e.origin,i)}const Q={plane:Object(d["d"])(),origin:Object(u["h"])(0,0,0),basis1:Object(u["h"])(1,0,0),basis2:Object(u["h"])(0,1,0)},Z=new c["a"](d["d"]),G=new c["a"](l["d"]),X=Object(u["f"])(),K=new c["a"](()=>({origin:null,basis1:null,basis2:null,plane:null})),tt=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],et=Object(s["d"])(),nt=Object(s["d"])(),it=Object.freeze({__proto__:null,BoundedPlaneClass:j,create:g,wrap:p,copy:y,copyWithoutVerify:v,fromValues:m,updateUnboundedPlane:w,elevate:_,setExtent:I,fromAABoundingRect:k,intersectRay:S,intersectRayClosestSilhouette:P,closestPointOnSilhouette:M,closestPoint:T,projectPoint:H,projectPointLocal:z,distance2:A,distance:N,distanceToSilhouette:V,extrusionContainsPoint:E,axisAt:x,altitudeAt:C,setAltitudeAt:F,equals:R,transform:B,rotate:U,normal:L,UP:Q})},"0fc4":function(t,e,n){"use strict";function i(){return[0,0,0,0]}function r(t){return[t[0],t[1],t[2],t[3]]}function c(t,e,n,i){return[t,e,n,i]}function o(t){const e=i(),n=Math.min(4,t.length);for(let i=0;i<n;++i)e[i]=t[i];return e}function s(t,e){return new Float64Array(t,e,4)}function a(){return i()}function u(){return c(1,1,1,1)}function l(){return c(1,0,0,0)}function d(){return c(0,1,0,0)}function b(){return c(0,0,1,0)}function f(){return c(0,0,0,1)}n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return c}));const h=a(),O=u(),j=l(),g=d(),p=b(),y=f();Object.freeze({__proto__:null,create:i,clone:r,fromValues:c,fromArray:o,createView:s,zeros:a,ones:u,unitX:l,unitY:d,unitZ:b,unitW:f,ZEROS:h,ONES:O,UNIT_X:j,UNIT_Y:g,UNIT_Z:p,UNIT_W:y})},2119:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("2ab7");class r{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&Object(i["a"])(()=>this.reset()),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*c);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,c));t++)this._items.push(this.allocator())}}const c=1024},"59fd":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("dac3"),r=n("43e0"),c=n("92af"),o=n("b63c");class s extends c["a"]{constructor(t){super({...t,constraint:new r["d"](t.coordinateHelper,t.targetPoint)})}get hints(){return[new o["a"](this.targetPoint)]}}function a(t,e){switch(t.type){case"edge":return new i["a"]({coordinateHelper:e,edgeStart:e.pointToVector(t.start),edgeEnd:e.pointToVector(t.end),targetPoint:e.pointToVector(t.target),objectId:t.objectId});case"vertex":return new s({coordinateHelper:e,targetPoint:e.pointToVector(t.target),objectId:t.objectId})}}},"5abb":function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var i=n("a4ee"),r=n("9ef0"),c=n("8d60"),o=n("fc29"),s=n("38a4"),a=n("b2b2"),u=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),d=n("7533"),b=n("0d76"),f=n("21ba"),h=n("a957");const O=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let j=class extends o["a"]{constructor(t){super(t),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=O.map(t=>new b["a"]({color:[t[0],t[1],t[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(this._enabled=t,this.update())}update(){if(!this._enabled)return void this.clear();const t=t=>{if(Object(a["l"])(t.label))return t.label;let e=t.lij.toString();return Object(a["l"])(t.loadPriority)&&(e+=` (${t.loadPriority})`),e},e=this.getTiles(),n=new Array,i=new Set((this._labels.size,this._labels.keys()));e.forEach((o,u)=>{const l=o.lij.toString();i.delete(l);const b=o.lij[0],O=o.geometry;if(this.enablePolygons&&!this._polygons.has(l)){const t=new c["a"]({geometry:O,symbol:this._symbols[b%this._symbols.length]});this._polygons.set(l,t),n.push(t)}if(this.enableLabels){const i=t(o),b=u/(e.length-1),j=Object(s["l"])(0,200,b),g=Object(s["l"])(20,6,b)/.75,p=Object(a["l"])(o.loadPriority)&&o.loadPriority>=e.length,y=new r["a"]([j,p?0:j,p?0:j]),v="3d"===this.view.type?()=>new d["a"]({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new h["a"]({text:i,halo:{color:"white",size:1/.75},material:{color:y},size:g})]}):()=>new f["a"]({text:i,haloColor:"white",haloSize:1/.75,color:y,size:g});if(this._labels.has(l)){const t=this._labels.get(l),e=v();(Object(a["k"])(t.symbol)||JSON.stringify(e)!==JSON.stringify(t.symbol))&&(t.symbol=e)}else{const t=new c["a"]({geometry:O.extent.center,symbol:v()});this._labels.set(l,t),n.push(t)}}});const o=new Array;i.forEach(t=>{this._polygons.has(t)&&(o.push(this._polygons.get(t)),this._polygons.delete(t)),this._labels.has(t)&&(o.push(this._labels.get(t)),this._labels.delete(t))}),this.view.graphics.removeMany(o),this.view.graphics.addMany(n)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};Object(i["a"])([Object(u["b"])({constructOnly:!0})],j.prototype,"view",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],j.prototype,"updating",void 0),Object(i["a"])([Object(u["b"])()],j.prototype,"enabled",null),j=Object(i["a"])([Object(l["a"])("esri.views.support.TileTreeDebugger")],j)},7289:function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return I})),n.d(e,"k",(function(){return k})),n.d(e,"l",(function(){return P})),n.d(e,"m",(function(){return M})),n.d(e,"n",(function(){return S})),n.d(e,"o",(function(){return H})),n.d(e,"p",(function(){return T})),n.d(e,"q",(function(){return _})),n.d(e,"r",(function(){return C})),n.d(e,"s",(function(){return N})),n.d(e,"t",(function(){return V})),n.d(e,"u",(function(){return w})),n.d(e,"v",(function(){return E})),n.d(e,"w",(function(){return u}));var i=n("38a4"),r=n("b2b2"),c=n("e431"),o=n("0b2d"),s=(n("f895"),n("7361"));function a(t=F){return[t[0],t[1],t[2],t[3]]}function u(t,e,n,i){return d(t,e,n,i,s["e"].get())}function l(t,e=a()){return d(t[0],t[1],t[2],t[3],e)}function d(t,e,n,i,r=a()){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function b(t,e,n){return Object(c["n"])(n,t),n[3]=e,n}function f(t,e,n){const i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.abs(i-1)>1e-5&&i>1e-12?1/Math.sqrt(i):1;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function h(t,e,n,i=a()){const r=n[0]-e[0],c=n[1]-e[1],o=n[2]-e[2],s=t[0]-e[0],u=t[1]-e[1],l=t[2]-e[2],d=c*l-o*u,b=o*s-r*l,f=r*u-c*s,h=d*d+b*b+f*f,O=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;i[0]=d*O,i[1]=b*O,i[2]=f*O,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2])}function O(t,e,n,i,r){if(t.count<3)return!1;t.getVec(n,g);let o=i,s=!1;for(;o<t.count-1&&!s;)t.getVec(o,p),o++,s=!Object(c["r"])(g,p);if(!s)return!1;for(o=Math.max(o,r),s=!1;o<t.count&&!s;)t.getVec(o,y),o++,Object(c["m"])(v,g,p),Object(c["u"])(v,v),Object(c["m"])(m,p,y),Object(c["u"])(m,m),s=!Object(c["r"])(g,y)&&!Object(c["r"])(p,y)&&Math.abs(Object(c["k"])(v,m))<j;return s?(h(g,p,y,e),!0):(0!==n||1!==i||2!==r)&&O(t,e,0,1,2)}const j=.99619469809,g=Object(o["f"])(),p=Object(o["f"])(),y=Object(o["f"])(),v=Object(o["f"])(),m=Object(o["f"])();function w(t,e,n){return t!==n&&l(t,n),n[3]=-Object(c["k"])(C(n),e),n}function _(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function I(t,e,n,i){return Object(c["j"])(y,e,t),f(n,y,i)}function k(t,e,n,i){return x(t,e,Object(c["m"])(s["d"].get(),n,e),R,i)}function S(t,e,n){return!!Object(r["l"])(e)&&x(t,e.origin,e.direction,B,n)}function P(t,e,n){return x(t,e.origin,e.vector,0,n)}function M(t,e,n){return x(t,e.origin,e.vector,1,n)}function T(t,e){return E(t,e)>=0}function H(t,e){const n=e[0],i=e[1],r=e[2],c=e[3],o=e[4],s=e[5];return t[0]*(t[0]>0?n:c)+t[1]*(t[1]>0?i:o)+t[2]*(t[2]>0?r:s)+t[3]>=0}function z(t,e){const n=Object(c["k"])(C(t),e.ray.direction),i=-E(t,e.ray.origin);if(i<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return i>0;if((i<0||n<0)&&!(i<0&&n<0))return!0;const r=i/n;return n>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function A(t,e){const n=Object(c["k"])(C(t),e.ray.direction),i=-E(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return i>0;const r=i/n;return n>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function N(t,e,n){const i=Object(c["h"])(s["d"].get(),C(t),-t[3]),r=V(t,Object(c["m"])(s["d"].get(),e,i),s["d"].get());return Object(c["i"])(n,r,i),n}function V(t,e,n){const i=Object(c["h"])(s["d"].get(),C(t),Object(c["k"])(C(t),e));return Object(c["m"])(n,e,i),n}function E(t,e){return Object(c["k"])(C(t),e)+t[3]}function x(t,e,n,r,o){const s=Object(c["k"])(C(t),n);if(0===s)return!1;let a=-(Object(c["k"])(C(t),e)+t[3])/s;return 1&r&&(a=Object(i["f"])(a,0,1)),!(!(4&r)&&a<0||!(8&r)&&a>1)&&(Object(c["i"])(o,e,Object(c["h"])(o,n,a)),!0)}function C(t){return t}const F=[0,0,1,0],R=12,B=8},7361:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return h}));var i=n("2ab7"),r=n("dae5"),c=n("afe1"),o=n("b139"),s=n("02f1"),a=n("0b2d"),u=n("0fc4");class l{constructor(t,e,n){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}get(){0===this._itemsPtr&&Object(i["a"])(()=>this.reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=d){return new l(16,s["d"],t)}static createVec3f64(t=d){return new l(24,a["e"],t)}static createVec4f64(t=d){return new l(32,u["c"],t)}static createMat3f64(t=d){return new l(72,r["a"],t)}static createMat4f64(t=d){return new l(128,c["b"],t)}static createQuatf64(t=d){return new l(32,o["d"],t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const d=4096,b=l.createVec2f64(),f=l.createVec3f64(),h=l.createVec4f64(),O=(l.createMat3f64(),l.createMat4f64()),j=l.createQuatf64()},"78ba":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("b50f"),r=n("c649"),c=n("e92d"),o=n("b2b2"),s=n("f4cc"),a=n("dfa0");const u=c["a"].getLogger("esri.core.workers.WorkerHandle");class l{constructor(t,e,n,i={}){this._mainMethod=e,this._listeners=[],this._promise=Object(a["b"])(t,{...i,schedule:n}).then(t=>{if(void 0===this._thread){this._thread=t,this._promise=null,i.hasInitialize&&this.broadcast({},"initialize");for(const t of this._listeners)this._connectListener(t)}else t.close()}),this._promise.catch(e=>u.error(`Failed to initialize ${t} worker: ${e}`))}on(t,e){const n={removed:!1,eventName:t,callback:e,threadHandle:null};return this._listeners.push(n),this._connectListener(n),Object(r["c"])(()=>{n.removed=!0,Object(i["j"])(this._listeners,n),this._thread&&Object(o["l"])(n.threadHandle)&&n.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(t,e){return this.invokeMethod(this._mainMethod,t,e)}invokeMethod(t,e,n){if(this._thread){const i=this.getTransferList(e,t);return this._thread.invoke(t,e,{transferList:i,signal:n})}return this._promise?this._promise.then(()=>(Object(s["w"])(n),this.invokeMethod(t,e,n))):Promise.reject(null)}broadcast(t,e){return this._thread?Promise.all(this._thread.broadcast(e,t)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(t,e)):Promise.reject()}get promise(){return this._promise}_connectListener(t){this._thread&&this._thread.on(t.eventName,t.callback).then(e=>{t.removed||(t.threadHandle=e)})}}},a1b1:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}));var i=n("38a4"),r=n("e431"),c=n("0b2d");function o(t,e,n){const i=Object(r["k"])(t,e)/Object(r["k"])(t,t);return Object(r["h"])(n,t,i)}function s(t,e){return Object(r["k"])(t,e)/Object(r["s"])(t)}function a(t,e){const n=Object(r["k"])(t,e)/(Object(r["s"])(t)*Object(r["s"])(e));return-Object(i["b"])(n)}function u(t,e,n){Object(r["u"])(l,t),Object(r["u"])(d,e);const c=Object(r["k"])(l,d),o=Object(i["b"])(c),s=Object(r["j"])(l,l,d);return Object(r["k"])(s,n)<0?2*Math.PI-o:o}const l=Object(c["f"])(),d=Object(c["f"])()},afe1:function(t,e,n){"use strict";function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function c(t,e,n,i,r,c,o,s,a,u,l,d,b,f,h,O){return[t,e,n,i,r,c,o,s,a,u,l,d,b,f,h,O]}function o(t,e){return new Float64Array(t,e,16)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return c}));const s=i();Object.freeze({__proto__:null,create:i,clone:r,fromValues:c,createView:o,IDENTITY:s})},b139:function(t,e,n){"use strict";function i(){return[0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3]]}function c(t,e,n,i){return[t,e,n,i]}function o(t,e){return new Float64Array(t,e,4)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o}));const s=i();Object.freeze({__proto__:null,create:i,clone:r,fromValues:c,createView:o,IDENTITY:s})},b63c:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("6706"),r=n("7dcb");class c extends r["a"]{constructor(t){super(),this.point=t}equals(t){return t instanceof c&&Object(i["d"])(this.point,t.point)}}},ba80:function(t,e,n){"use strict";n.r(e),n.d(e,"FeatureServiceSnappingSource",(function(){return B}));var i=n("a4ee"),r=n("fc29"),c=n("9096"),o=n("c649"),s=n("b2b2"),a=n("477c"),u=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),d=n("e431"),b=n("0fc4"),f=n("0d9f");function h(t,e){return Object(f["i"])(e.extent,O),Object(f["h"])(O,Object(d["z"])(j,t.x,t.y,0))}const O=Object(f["d"])(),j=Object(b["e"])();var g=n("5e70");let p=class extends(Object(c["b"])(r["a"])){constructor(t){super(t),this.pointOfInterest=null}get tiles(){const t=this.tilesCoveringView,e=Object(s["l"])(this.pointOfInterest)?this.pointOfInterest:this.view.center;return t.sort((t,n)=>h(e,t)-h(e,n)),t}scaleEnabled(){return Object(g["d"])(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(s["k"])(this.tileInfo))return[];if(!this.scaleEnabled)return[];const{spans:t,lodInfo:e}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:n}=e,i=[];for(const{row:r,colFrom:c,colTo:o}of t)for(let t=c;t<=o;t++){const c={id:null,level:n,row:r,col:e.normalizeCol(t)};this.tileInfo.updateTileInfo(c),i.push(c)}return i}get tileInfo(){var t,e;return null!=(t=null==(e=this.view.featuresTilingScheme)?void 0:e.tileInfo)?t:null}get tileSize(){return Object(s["l"])(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch("view.state.viewpoint",()=>this.notifyChange("tilesCoveringView"),!0))}};Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"tiles",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"scaleEnabled",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"tilesCoveringView",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"tileInfo",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"tileSize",null),Object(i["a"])([Object(u["b"])({constructOnly:!0})],p.prototype,"view",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],p.prototype,"layer",void 0),Object(i["a"])([Object(u["b"])()],p.prototype,"pointOfInterest",void 0),p=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],p);var y=n("3795");let v=class extends c["a"]{constructor(t){super(t),this.pointOfInterest=null}get tiles(){const t=this.tilesCoveringView,e=this.effectivePointOfInterest;if(Object(s["l"])(e)){const n=t.map(t=>h(e,t));for(let i=1;i<n.length;i++)if(n[i-1]>n[i])return t.sort((t,n)=>h(e,t)-h(e,n)),t.slice()}return t}get tilesCoveringView(){var t,e;return this.filterTiles(null==(t=this.view.featureTiles)||null==(e=t.tiles)?void 0:e.toArray()).map(m)}get tileInfo(){var t,e;return null!=(t=null==(e=this.view.featureTiles)?void 0:e.tilingScheme.toTileInfo())?t:null}get tileSize(){var t,e;return null!=(t=null==(e=this.view.featureTiles)?void 0:e.tileSize)?t:256}get effectivePointOfInterest(){var t;const e=this.pointOfInterest;return Object(s["l"])(e)?e:null==(t=this.view.pointsOfInterest)?void 0:t.focus.location}initialize(){this.handles.add(Object(y["a"])(this.view,"featureTiles",t=>{this.handles.remove(_),t&&this.handles.add(t.addClient(),_)}))}filterTiles(t){return Object(s["k"])(t)?[]:t.filter(t=>Math.abs(t.measures.screenRect[3]-t.measures.screenRect[1])>w&&2===t.measures.visibility)}};function m({lij:[t,e,n],extent:i}){return{id:`${t}/${e}/${n}`,level:t,row:e,col:n,extent:i}}Object(i["a"])([Object(u["b"])({readOnly:!0})],v.prototype,"tiles",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],v.prototype,"tilesCoveringView",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],v.prototype,"tileInfo",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],v.prototype,"tileSize",null),Object(i["a"])([Object(u["b"])({constructOnly:!0})],v.prototype,"view",void 0),Object(i["a"])([Object(u["b"])()],v.prototype,"pointOfInterest",void 0),Object(i["a"])([Object(u["b"])()],v.prototype,"effectivePointOfInterest",null),v=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],v);const w=50,_="feature-tiles";var I=n("59fd"),k=n("af40"),S=n("1219"),P=n("9180"),M=n("5abb");let T=class extends M["a"]{constructor(t){super(t),this.handles=new k["a"]}initialize(){const t=setInterval(()=>this.fetchDebugInfo(),2e3);this.handles.add(Object(o["c"])(()=>clearInterval(t)))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const t=new Map,e=new Map;this.debugInfo.storedTiles.forEach(e=>{t.set(e.data.id,e.featureCount)}),this.debugInfo.pendingTiles.forEach(n=>{t.set(n.data.id,n.featureCount),e.set(n.data.id,n.state)});const n=n=>{var i;const r=e.get(n),c=null!=(i=t.get(n))?i:"?";return r?`${r}:${c}\n${n}`:`store:${c}\n${n}`},i=new Map;return this.debugInfo.storedTiles.forEach(t=>{i.set(t.data.id,t.data)}),this.debugInfo.pendingTiles.forEach(t=>{i.set(t.data.id,t.data)}),Array.from(i.values()).map(t=>({lij:[t.level,t.row,t.col],geometry:S["a"].fromExtent(Object(P["B"])(t.extent,this.view.spatialReference)),label:n(t.id)}))}fetchDebugInfo(){this.handle.getDebugInfo(null).then(t=>{this.debugInfo=t,this.update()})}};Object(i["a"])([Object(u["b"])({constructOnly:!0})],T.prototype,"handle",void 0),T=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],T);var H=n("f4cc"),z=n("78ba"),A=n("74e2");let N=class extends c["a"]{constructor(t){super(t),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new V(this.schedule),this.handles.add([this.workerHandle.on("notify-updating",({updating:t})=>this.workerHandleUpdating=t),this.workerHandle.on("notify-availability",({availability:t})=>this._set("availability",t))])}async setup(t,e){const n=this.serviceInfoFromLayer(t.layer);if(Object(s["k"])(n))return;const i={configuration:this.convertConfiguration(t.configuration),serviceInfo:n,spatialReference:t.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("setup",i,e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e))}async configure(t,e){const n=this.convertConfiguration(t);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("configure",n,e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e))}async refresh(t){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("refresh",{},t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t))}async fetchCandidates(t,e){const n={distance:t.distance,point:t.coordinateHelper.vectorToPoint(t.point).toJSON(),types:t.types,filter:Object(s["l"])(t.filter)?t.filter.createQuery().toJSON():null};return this.workerHandle.invoke(n,e)}async updateTiles(t,e){const n={tiles:t.tiles,tileInfo:Object(s["l"])(t.tileInfo)?t.tileInfo.toJSON():null,tileSize:t.tileSize};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("updateTiles",n,e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e))}async applyEdits(t,e){var n,i,r,c,o,s;const a=this.editId++,u={id:a};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("beginApplyEdits",u,e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e));const l=await this.updatingHandles.addPromise(Object(H["A"])(t.result,e)),d={id:a,edits:{addedFeatures:null!=(n=null==(i=l.addedFeatures)?void 0:i.map(({objectId:t})=>t))?n:[],deletedFeatures:null!=(r=null==(c=l.deletedFeatures)?void 0:c.map(({objectId:t,globalId:e})=>({objectId:t,globalId:e})))?r:[],updatedFeatures:null!=(o=null==(s=l.updatedFeatures)?void 0:s.map(({objectId:t})=>t))?o:[]}};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("endApplyEdits",d,e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e))}getDebugInfo(t){return this.workerHandle.invokeMethod("getDebugInfo",{},t)}convertConfiguration(t){return{filter:Object(s["l"])(t.filter)?t.filter.toJSON():null,customParameters:t.customParameters}}serviceInfoFromLayer(t){var e;return"multipatch"===t.geometryType||"mesh"===t.geometryType?null:{url:t.parsedUrl.path,fields:t.fields.map(t=>t.toJSON()),geometryType:A["a"].toJSON(t.geometryType),capabilities:t.capabilities,objectIdField:t.objectIdField,globalIdField:t.globalIdField,spatialReference:t.spatialReference.toJSON(),timeInfo:null==(e=t.timeInfo)?void 0:e.toJSON()}}};Object(i["a"])([Object(u["b"])({constructOnly:!0})],N.prototype,"schedule",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],N.prototype,"updating",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],N.prototype,"availability",void 0),Object(i["a"])([Object(u["b"])()],N.prototype,"workerHandleUpdating",void 0),N=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],N);class V extends z["a"]{constructor(t){super("FeatureServiceSnappingSourceWorker","fetchCandidates",t,{strategy:"dedicated"})}getTransferList(){return[]}}var E=n("4ae5"),x=n("50e6"),C=n("dff3");let F=class extends r["a"]{constructor(t){super(t),this.pointOfInterest=null}get tiles(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(P["u"])(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new C["a"]({origin:new E["a"]({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new x["a"]({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};Object(i["a"])([Object(u["b"])({readOnly:!0})],F.prototype,"tiles",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],F.prototype,"tileInfo",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],F.prototype,"tileSize",null),Object(i["a"])([Object(u["b"])({constructOnly:!0})],F.prototype,"layer",void 0),Object(i["a"])([Object(u["b"])()],F.prototype,"pointOfInterest",void 0),F=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],F);var R=n("26cd");let B=class extends(Object(c["b"])(r["a"])){constructor(t){super(t)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){const t=this.view;if(Object(s["l"])(t))switch(t.type){case"2d":this.tilesOfInterest=new p({view:t,layer:this.layer}),this.workerHandle=new N;break;case"3d":{const e=t.resourceController;this.tilesOfInterest=new v({view:t}),this.workerHandle=new N({schedule:t=>e.schedule(t)});break}}else this.tilesOfInterest=new F({layer:this.layer}),this.workerHandle=new N;this.handles.add([Object(o["a"])(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,"updateTilesParameters",()=>this.workerHandle.updateTiles(this.updateTilesParameters,null),2),this.handles.add([Object(a["b"])(()=>this.configuration,t=>this.workerHandle.configure(t,null),a["d"])]),Object(s["l"])(t)&&this.handles.add(Object(a["b"])(()=>R["a"].FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES,e=>{e&&!this.debug?(this.debug=new T({view:t,handle:this.workerHandle}),this.handles.add(Object(o["a"])(this.debug),"debug")):!e&&this.debug&&this.handles.remove("debug")},a["a"])),this.handles.add(this.layerSource.layer.on("apply-edits",t=>{this.workerHandle.applyEdits(t,null)}))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(t,e){return this.tilesOfInterest.pointOfInterest=t.coordinateHelper.vectorToPoint(t.point),(await this.workerHandle.fetchCandidates({...t,filter:null},e)).candidates.map(e=>Object(I["a"])(e,t.coordinateHelper))}getDebugInfo(t){return this.workerHandle.getDebugInfo(t)}};Object(i["a"])([Object(u["b"])({constructOnly:!0})],B.prototype,"spatialReference",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],B.prototype,"layerSource",void 0),Object(i["a"])([Object(u["b"])({constructOnly:!0})],B.prototype,"view",void 0),Object(i["a"])([Object(u["b"])()],B.prototype,"tilesOfInterest",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],B.prototype,"updateTilesParameters",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],B.prototype,"updating",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],B.prototype,"configuration",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],B.prototype,"availability",null),B=Object(i["a"])([Object(l["a"])("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],B)},bd7e:function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return O}));var i=n("38a4"),r=n("2119"),c=n("e431"),o=n("0b2d"),s=n("7361");function a(t){return t?{origin:Object(o["d"])(t.origin),vector:Object(o["d"])(t.vector)}:{origin:Object(o["f"])(),vector:Object(o["f"])()}}function u(t,e){const n=v.get();return n.origin=t,n.vector=e,n}function l(t,e=a()){return d(t.origin,t.vector,e)}function d(t,e,n=a()){return Object(c["n"])(n.origin,t),Object(c["n"])(n.vector,e),n}function b(t,e,n=a()){return Object(c["n"])(n.origin,t),Object(c["m"])(n.vector,e,t),n}function f(t,e){const n=Object(c["m"])(s["d"].get(),e,t.origin),r=Object(c["k"])(t.vector,n),o=Object(c["k"])(t.vector,t.vector),a=Object(i["f"])(r/o,0,1),u=Object(c["m"])(s["d"].get(),Object(c["h"])(s["d"].get(),t.vector,a),n);return Object(c["k"])(u,u)}function h(t,e,n){return Object(c["i"])(n,t.origin,Object(c["h"])(n,t.vector,e))}function O(t,e,n,r,o){const{vector:a,origin:u}=t,l=Object(c["m"])(s["d"].get(),e,u),d=Object(c["k"])(a,l)/Object(c["w"])(a);return Object(c["h"])(o,a,Object(i["f"])(d,n,r)),Object(c["i"])(o,o,t.origin)}function j(t,e){if(p(t,u(e.origin,e.direction),!1,y)){const{tA:e,pB:n,distance2:i}=y;if(e>=0&&e<=1)return i;if(e<0)return Object(c["o"])(t.origin,n);if(e>1)return Object(c["o"])(Object(c["i"])(s["d"].get(),t.origin,t.vector),n)}return null}function g(t,e,n){return!!p(t,e,!0,y)&&(Object(c["n"])(n,y.pA),!0)}function p(t,e,n,r){const o=1e-6,a=t.origin,u=Object(c["i"])(s["d"].get(),a,t.vector),l=e.origin,d=Object(c["i"])(s["d"].get(),l,e.vector),b=s["d"].get(),f=s["d"].get();if(b[0]=a[0]-l[0],b[1]=a[1]-l[1],b[2]=a[2]-l[2],f[0]=d[0]-l[0],f[1]=d[1]-l[1],f[2]=d[2]-l[2],Math.abs(f[0])<o&&Math.abs(f[1])<o&&Math.abs(f[2])<o)return!1;const h=s["d"].get();if(h[0]=u[0]-a[0],h[1]=u[1]-a[1],h[2]=u[2]-a[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;const O=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],j=f[0]*h[0]+f[1]*h[1]+f[2]*h[2],g=b[0]*h[0]+b[1]*h[1]+b[2]*h[2],p=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],y=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*p-j*j;if(Math.abs(y)<o)return!1;let v=(O*j-g*p)/y,m=(O+j*v)/p;n&&(v=Object(i["f"])(v,0,1),m=Object(i["f"])(m,0,1));const w=s["d"].get(),_=s["d"].get();return w[0]=a[0]+v*h[0],w[1]=a[1]+v*h[1],w[2]=a[2]+v*h[2],_[0]=l[0]+m*f[0],_[1]=l[1]+m*f[1],_[2]=l[2]+m*f[2],r.tA=v,r.tB=m,r.pA=w,r.pB=_,r.distance2=Object(c["o"])(w,_),!0}const y={tA:0,tB:0,pA:Object(o["f"])(),pB:Object(o["f"])(),distance2:0},v=new r["a"](()=>({origin:null,vector:null}))},d18f:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return l}));var i=n("b50f"),r=n("2119"),c=n("e431"),o=n("0b2d"),s=n("7361");function a(t){return t?{origin:Object(o["d"])(t.origin),direction:Object(o["d"])(t.direction)}:{origin:Object(o["f"])(),direction:Object(o["f"])()}}function u(t,e){return Object(i["e"])(t.origin,e.origin)&&Object(i["e"])(t.direction,e.direction)}function l(t,e){const n=g.get();return n.origin=t,n.direction=e,n}function d(t,e=a()){return f(t.origin,t.direction,e)}function b(t,e,n=a()){return Object(c["n"])(n.origin,t),Object(c["m"])(n.direction,e,t),n}function f(t,e,n=a()){return Object(c["n"])(n.origin,t),Object(c["n"])(n.direction,e),n}function h(t,e){const n=Object(c["j"])(s["d"].get(),Object(c["u"])(s["d"].get(),t.direction),Object(c["m"])(s["d"].get(),e,t.origin));return Object(c["k"])(n,n)}function O(t,e,n){const i=Object(c["k"])(t.direction,Object(c["m"])(n,e,t.origin));return Object(c["i"])(n,t.origin,Object(c["h"])(n,t.direction,i)),n}function j(){return{origin:null,direction:null}}const g=new r["a"](j)},dae5:function(t,e,n){"use strict";function i(){return[1,0,0,0,1,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function c(t,e,n,i,r,c,o,s,a){return[t,e,n,i,r,c,o,s,a]}function o(t,e){return new Float64Array(t,e,9)}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));Object.freeze({__proto__:null,create:i,clone:r,fromValues:c,createView:o})},f895:function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return N})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return _})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return H})),n.d(e,"i",(function(){return M})),n.d(e,"j",(function(){return v})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return U})),n.d(e,"n",(function(){return p}));n("c120");var i=n("e92d"),r=n("38a4"),c=n("b2b2"),o=n("d791"),s=n("e431"),a=n("0b2d"),u=n("7577"),l=n("0fc4"),d=n("d18f"),b=n("a1b1"),f=n("7361");const h=i["a"].getLogger("esri.geometry.support.sphere");function O(){return Object(l["e"])()}function j(t,e=O()){return Object(u["c"])(e,t)}function g(t,e){return Object(l["g"])(t[0],t[1],t[2],e)}function p(t){return t}function y(t){t[0]=t[1]=t[2]=t[3]=0}function v(t){return t}function m(t){return Array.isArray(t)?t[3]:t}function w(t){return Array.isArray(t)?t:R}function _(t,e,n,i){return Object(l["g"])(t,e,n,i)}function I(t,e,n){return t!==n&&Object(s["n"])(n,t),n[3]=t[3]+e,n}function k(t,e,n){return h.error("sphere.setExtent is not yet supported"),t===n?n:j(t,n)}function S(t,e,n){if(Object(c["k"])(e))return!1;const{origin:i,direction:r}=e,o=P;o[0]=i[0]-t[0],o[1]=i[1]-t[1],o[2]=i[2]-t[2];const s=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],a=2*(r[0]*o[0]+r[1]*o[1]+r[2]*o[2]),u=a*a-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(u<0)return!1;const l=Math.sqrt(u);let d=(-a-l)/(2*s);const b=(-a+l)/(2*s);return(d<0||b<d&&b>0)&&(d=b),!(d<0)&&(n&&(n[0]=i[0]+r[0]*d,n[1]=i[1]+r[1]*d,n[2]=i[2]+r[2]*d),!0)}const P=Object(a["f"])();function M(t,e){return S(t,e,null)}function T(t,e,n){if(S(t,e,n))return n;const i=H(t,e,f["d"].get());return Object(s["i"])(n,e.origin,Object(s["h"])(f["d"].get(),e.direction,Object(s["p"])(e.origin,i)/Object(s["s"])(e.direction))),n}function H(t,e,n){const i=f["d"].get(),r=f["a"].get();Object(s["j"])(i,e.origin,e.direction);const c=m(t);Object(s["j"])(n,i,e.origin),Object(s["h"])(n,n,1/Object(s["s"])(n)*c);const a=V(t,e.origin),u=Object(b["a"])(e.origin,n);return Object(o["j"])(r),Object(o["f"])(r,r,u+a,i),Object(s["t"])(n,n,r),n}function z(t,e,n){return S(t,e,n)?n:(Object(d["a"])(e,w(t),n),A(t,n,n))}function A(t,e,n){const i=Object(s["m"])(f["d"].get(),e,w(t)),r=Object(s["h"])(f["d"].get(),i,t[3]/Object(s["s"])(i));return Object(s["i"])(n,r,w(t))}function N(t,e){const n=Object(s["m"])(f["d"].get(),e,w(t)),i=Object(s["w"])(n),r=t[3]*t[3];return Math.sqrt(Math.abs(i-r))}function V(t,e){const n=Object(s["m"])(f["d"].get(),e,w(t)),i=Object(s["s"])(n),c=m(t),o=c+Math.abs(c-i);return Object(r["b"])(c/o)}const E=Object(a["f"])();function x(t,e,n,i){const c=Object(s["m"])(E,e,w(t));switch(n){case 0:{const t=Object(r["e"])(c,E)[2];return Object(s["z"])(i,-Math.sin(t),Math.cos(t),0)}case 1:{const t=Object(r["e"])(c,E),e=t[1],n=t[2],o=Math.sin(e);return Object(s["z"])(i,-o*Math.cos(n),-o*Math.sin(n),Math.cos(e))}case 2:return Object(s["u"])(i,c);default:return}}function C(t,e){const n=Object(s["m"])(B,e,w(t));return Object(s["s"])(n)-t[3]}function F(t,e,n,i){const r=C(t,e),c=x(t,e,2,B),o=Object(s["h"])(B,c,n-r);return Object(s["i"])(i,e,o)}const R=Object(a["f"])(),B=Object(a["f"])(),U=Object.freeze({__proto__:null,create:O,copy:j,fromCenterAndRadius:g,wrap:p,clear:y,fromRadius:v,getRadius:m,getCenter:w,fromValues:_,elevate:I,setExtent:k,intersectRay:S,intersectsRay:M,intersectRayClosestSilhouette:T,closestPointOnSilhouette:H,closestPoint:z,projectPoint:A,distanceToSilhouette:N,angleToSilhouette:V,axisAt:x,altitudeAt:C,setAltitudeAt:F})}}]);