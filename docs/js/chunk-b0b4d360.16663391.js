(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0b4d360","chunk-2d0d3e74","chunk-2d0d3e74"],{"008c":function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return F})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return N})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return v})),n.d(e,"g",(function(){return E}));var i=n("a9ab");const r=(t,e,n)=>[e,n],s=(t,e,n)=>[e,n,t[2]],o=(t,e,n)=>[e,n,t[2],t[3]];function a(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:t.extent?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function u({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function l({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function c(t,e,n){const i=[];let r,s,o,a;for(let c=0;c<n.length;c++){const d=n[c];c>0?(o=u(t,d[0]),a=l(t,d[1]),o===r&&a===s||(i.push(e(d,o-r,a-s)),r=o,s=a)):(r=u(t,d[0]),s=l(t,d[1]),i.push(e(d,r,s)))}return i.length>0?i:null}function d(t,e,n,i){return c(t,n?i?o:s:i?s:r,e)}function h(t,e,n,i){const a=[],u=n?i?o:s:i?s:r;for(let r=0;r<e.length;r++){const n=c(t,u,e[r]);n&&n.length>=3&&a.push(n)}return a.length?a:null}function f(t,e,n,i){const a=[],u=n?i?o:s:i?s:r;for(let r=0;r<e.length;r++){const n=c(t,u,e[r]);n&&n.length>=2&&a.push(n)}return a.length?a:null}function m({scale:t,translate:e},n){return n*t[0]+e[0]}function p({scale:t,translate:e},n){return e[1]-n*t[1]}function g(t,e,n){const i=new Array(n.length);if(!n.length)return i;const[r,s]=t.scale;let o=m(t,n[0][0]),a=p(t,n[0][1]);i[0]=e(n[0],o,a);for(let u=1;u<n.length;u++){const t=n[u];o+=t[0]*r,a-=t[1]*s,i[u]=e(t,o,a)}return i}function x(t,e,n){const i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=g(t,e,n[r]);return i}function y(t,e,n,i){return g(t,n?i?o:s:i?s:r,e)}function _(t,e,n,i){return x(t,n?i?o:s:i?s:r,e)}function b(t,e,n,i){return x(t,n?i?o:s:i?s:r,e)}function I(t,e,n,i,r){return e.xmin=u(t,n.xmin),e.ymin=l(t,n.ymin),e.xmax=u(t,n.xmax),e.ymax=l(t,n.ymax),e!==n&&(i&&(e.zmin=n.zmin,e.zmax=n.zmax),r&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}function M(t,e,n,i,r){return e.points=d(t,n.points,i,r),e}function F(t,e,n,i,r){return e.x=u(t,n.x),e.y=l(t,n.y),e!==n&&(i&&(e.z=n.z),r&&(e.m=n.m)),e}function w(t,e,n,i,r){const s=h(t,n.rings,i,r);return s?(e.rings=s,e):null}function B(t,e,n,i,r){const s=f(t,n.paths,i,r);return s?(e.paths=s,e):null}function j(t,e){return t&&e?Object(i["f"])(e)?F(t,{},e,!1,!1):Object(i["h"])(e)?B(t,{},e,!1,!1):Object(i["g"])(e)?w(t,{},e,!1,!1):Object(i["e"])(e)?M(t,{},e,!1,!1):Object(i["d"])(e)?I(t,{},e,!1,!1):null:null}function N(t,e,n,i,r){return e.points=y(t,n.points,i,r),e}function O(t,e,n,i,r){return e.x=m(t,n.x),e.y=p(t,n.y),e!==n&&(i&&(e.z=n.z),r&&(e.m=n.m)),e}function v(t,e,n,i,r){return e.rings=b(t,n.rings,i,r),e}function E(t,e,n,i,r){return e.paths=_(t,n.paths,i,r),e}},"04c4":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("c120"),r=n("ce76");const s=5e4,o={minX:0,minY:0,maxX:0,maxY:0};function a(t,e,n){o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3],t.search(o,n)}class u{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new r["a"](9,Object(i["a"])("csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach((n,i)=>{t[e++]=i}),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(t=>this._idByBounds.has(t))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),a(this._index,t,t=>e(this._idByBounds.get(t)))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>s&&this._loadIndex()))}}},4261:function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return P})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return F})),n.d(e,"g",(function(){return M})),n.d(e,"h",(function(){return o})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return y})),n.d(e,"k",(function(){return S})),n.d(e,"l",(function(){return q})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return f})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return l})),n.d(e,"r",(function(){return c})),n.d(e,"s",(function(){return X})),n.d(e,"t",(function(){return a})),n.d(e,"u",(function(){return O})),n.d(e,"v",(function(){return x})),n.d(e,"w",(function(){return w})),n.d(e,"x",(function(){return B})),n.d(e,"y",(function(){return k})),n.d(e,"z",(function(){return I})),n.d(e,"A",(function(){return j})),n.d(e,"B",(function(){return N})),n.d(e,"C",(function(){return T})),n.d(e,"D",(function(){return E})),n.d(e,"E",(function(){return v})),n.d(e,"F",(function(){return b})),n.d(e,"G",(function(){return Y})),n.d(e,"H",(function(){return p})),n.d(e,"I",(function(){return C}));var i=n("b2b2"),r=(n("3af1"),n("9180"));function s(t){return t}function o(t=L){return s([t[0],t[1],t[2],t[3],t[4],t[5]])}function a(t,e,n,i,r,s,a=o()){return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=r,a[5]=s,a}function u(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function l(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function d(t,e,n=0,i=e.length/3){let r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],l=t[5];for(let c=0;c<i;c++)r=Math.min(r,e[n+3*c]),s=Math.min(s,e[n+3*c+1]),o=Math.min(o,e[n+3*c+2]),a=Math.max(a,e[n+3*c]),u=Math.max(u,e[n+3*c+1]),l=Math.max(l,e[n+3*c+2]);t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=l}function h(t,e,n,i){t[0]=Math.min(t[0],t[0]+e),t[3]=Math.max(t[3],t[3]+e),t[1]=Math.min(t[1],t[1]+n),t[4]=Math.max(t[4],t[4]+n),t[2]=Math.min(t[2],t[2]+i),t[5]=Math.max(t[5],t[5]+i)}function f(t,e,n){const i=e.length;let r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],l=t[5];if(n)for(let c=0;c<i;c++){const t=e[c];r=Math.min(r,t[0]),s=Math.min(s,t[1]),o=Math.min(o,t[2]),a=Math.max(a,t[0]),u=Math.max(u,t[1]),l=Math.max(l,t[2])}else for(let c=0;c<i;c++){const t=e[c];r=Math.min(r,t[0]),s=Math.min(s,t[1]),a=Math.max(a,t[0]),u=Math.max(u,t[1])}t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=l}function m(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function p(t){return t[0]>=t[3]?0:t[3]-t[0]}function g(t){return t[1]>=t[4]?0:t[4]-t[1]}function x(t){return t[2]>=t[5]?0:t[5]-t[2]}function y(t){const e=p(t),n=x(t),i=g(t);return Math.sqrt(e*e+n*n+i*i)}function _(t,e=[0,0,0]){return e[0]=t[0]+p(t)/2,e[1]=t[1]+g(t)/2,e[2]=t[2]+x(t)/2,e}function b(t,e=[0,0,0]){return e[0]=p(t),e[1]=g(t),e[2]=x(t),e}function I(t){return Math.max(p(t),x(t),g(t))}function M(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function F(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[3]<=t[3]&&e[4]<=t[4]&&e[5]<=t[5]}function w(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function B(t,e){return!!Object(i["j"])(e)||w(t,e)}function j(t,e,n,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+i,r[3]=t[3]+e,r[4]=t[4]+n,r[5]=t[5]+i,r}function N(t,e,n=t){const i=t[0]+p(t)/2,r=t[1]+g(t)/2,s=t[2]+x(t)/2;return n[0]=i+(t[0]-i)*e,n[1]=r+(t[1]-r)*e,n[2]=s+(t[2]-s)*e,n[3]=i+(t[3]-i)*e,n[4]=r+(t[4]-r)*e,n[5]=s+(t[5]-s)*e,n}function O(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function v(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function E(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function T(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function S(t){return t?T(t,z):o(z)}function Y(t,e){return e||(e=Object(r["l"])()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function X(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function D(t){return 6===t.length}function k(t){return 0===p(t)&&0===g(t)&&0===x(t)}function q(t,e,n){if(Object(i["j"])(t)||Object(i["j"])(e))return t===e;if(!D(t)||!D(e))return!1;if(n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1}else for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function C(t,e,n,i,r,s){return a(t,e,n,i,r,s,R)}const P=s([-1/0,-1/0,-1/0,1/0,1/0,1/0]),z=s([1/0,1/0,1/0,-1/0,-1/0,-1/0]),L=s([0,0,0,0,0,0]),R=o()},"461f":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("9392"),r=n("8152"),s=n("d97e");const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new i["a"](e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(t.centroid||(t.centroid=Object(s["a"])(new r["a"],t.geometry,e.hasZ,e.hasM)),t.centroid)}},"5f6c":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return s(t,null==e?n.path:e)}},n.exports),n.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,n("c8ba"))},6517:function(t,e,n){"use strict";var i=n("b2b2"),r=n("e92d"),s=n("ce50"),o=n("ce6d"),a=n("9180"),u=n("6655"),l=n("4261"),c=n("04c4"),d=n("461f");class h{constructor(t){this.geometryInfo=t,this._boundsStore=new c["a"],this._featuresById=new Map,this._markedIds=new Set,this.events=new o["a"],this.featureAdapter=d["a"]}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const t=Object(a["l"])(a["a"]);return this._featuresById.forEach(e=>{const n=this._boundsStore.get(e.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))}),t}get storeStatistics(){let t=0;return this._featuresById.forEach(e=>{e.geometry&&e.geometry.coords&&(t+=e.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e,n){for(const i of t){const t=this._boundsStore.get(i.objectId);t&&e(Object(l["s"])(n,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach(e=>t(e))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,t=>{e(this._featuresById.get(t))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let t=!1;this._featuresById.forEach((e,n)=>{this._markedIds.has(n)||(t=!0,this._remove(e))}),this._markedIds.clear(),t&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void r["a"].getLogger("esri.layers.graphics.data.FeatureStore").error(new s["a"]("featurestore:invalid-feature","feature id is missing",{feature:t}));const n=this._featuresById.get(e);let o;if(this._markedIds.add(e),n?(t.displayId=n.displayId,o=this._boundsStore.get(e),this._boundsStore.delete(e)):Object(i["k"])(this.onFeatureAdd)&&this.onFeatureAdd(t),!t.geometry||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);o=Object(u["r"])(o||Object(a["l"])(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(e,o),this._featuresById.set(e,t)}_remove(t){return Object(i["k"])(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}e["a"]=h},7015:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return h}));var i=n("b3b6"),r=n("2035");const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function o(t){t||(t=Object(r["b"])());let e=t in s;if(!e){const n=t.split("-");n.length>1&&n[0]in s&&(t=n[0],e=!0),e||(t="en")}const[n,i,o="#,##0.###"]=s[t];return{decimal:n,group:i,pattern:o}}function a(t,e){const n=o((e={...e}).locale);e.customs=n;const i=e.pattern||n.pattern;return isNaN(t)||Math.abs(t)===1/0?null:l(t,i,e)}const u=/[#0,]*[#0](?:\.0*#*)?/;function l(t,e,n){const i=(n=n||{}).customs.group,r=n.customs.decimal,s=e.split(";"),o=s[0];if(-1!==(e=s[t<0?1:0]||"-"+o).indexOf("%"))t*=100;else if(-1!==e.indexOf("‰"))t*=1e3;else{if(-1!==e.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==e.indexOf("E"))throw new Error("exponential notation not supported")}const a=u,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+e);return!1===n.fractional&&(n.places=0),e.replace(a,c(t,l[0],{decimal:r,group:i,places:n.places,round:n.round}))}function c(t,e,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const i=e.split("."),r="string"==typeof n.places&&n.places.indexOf(",");let s=n.places;r?s=n.places.substring(r+1):s>=0||(s=(i[1]||[]).length),n.round<0||(t=Number(t.toFixed(Number(s))));const o=String(Math.abs(t)).split("."),a=o[1]||"";if(i[1]||n.places){r&&(n.places=n.places.substring(0,r));const t=void 0!==n.places?n.places:i[1]&&i[1].lastIndexOf("0")+1;t>a.length&&(o[1]=a.padEnd(Number(t),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const u=i[0].replace(",","");let l=u.indexOf("0");-1!==l&&(l=u.length-l,l>o[0].length&&(o[0]=o[0].padStart(l,"0")),-1===u.indexOf("#")&&(o[0]=o[0].substr(o[0].length-l)));let c,d,h=i[0].lastIndexOf(",");if(-1!==h){c=i[0].length-h-1;const t=i[0].substr(0,h);h=t.lastIndexOf(","),-1!==h&&(d=t.length-h-1)}const f=[];for(let m=o[0];m;){const t=m.length-c;f.push(t>0?m.substr(t):m),m=t>0?m.slice(0,t):"",d&&(c=d,d=void 0)}return o[0]=f.reverse().join(n.group||","),o.join(n.decimal||".")}function d(t){const e=o((t=t||{}).locale),n=t.pattern||e.pattern,r=e.group,s=e.decimal;let a=1;if(-1!==n.indexOf("%"))a/=100;else if(-1!==n.indexOf("‰"))a/=1e3;else if(-1!==n.indexOf("¤"))throw new Error("currency notation not supported");const l=n.split(";");return 1===l.length&&l.push("-"+l[0]),{regexp:p(l,(function(e){return(e="(?:"+Object(i["a"])(e,".")+")").replace(u,(function(e){const n={signed:!1,separator:t.strict?r:[r,""],fractional:t.fractional,decimal:s,exponent:!1},i=e.split(".");let o=t.places;1===i.length&&1!==a&&(i[1]="###"),1===i.length||0===o?n.fractional=!1:(void 0===o&&(o=t.pattern?i[1].lastIndexOf("0")+1:1/0),o&&null==t.fractional&&(n.fractional=!0),!t.places&&o<i[1].length&&(o+=","+i[1].length),n.places=o);const u=i[0].split(",");return u.length>1&&(n.groupSize=u.pop().length,u.length>1&&(n.groupSize2=u.pop().length)),"("+f(n)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:s,factor:a}}function h(t,e){const n=d(e),i=new RegExp("^"+n.regexp+"$").exec(t);if(!i)return NaN;let r=i[1];if(!i[1]){if(!i[2])return NaN;r=i[2],n.factor*=-1}return r=r.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(r)*n.factor}function f(t){"places"in(t=t||{})||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!/^0/.test(String(t.places))||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);const e=m(t),n=p(t.fractional,(function(e){let n="";return e&&0!==t.places&&(n="\\"+t.decimal,t.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+t.places+"}"),n}),!0);let i=e+n;return n&&(i="(?:(?:"+i+")|(?:"+n+"))"),i+p(t.exponent,(function(e){return e?"([eE]"+m({signed:t.eSigned})+")":""}))}function m(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",p(t.signed,(function(t){return t?"[-+]":""}),!0)+p(t.separator,(function(e){if(!e)return"(?:\\d+)";" "===(e=Object(i["a"])(e))?e="\\s":" "===e&&(e="\\s\\xa0");const n=t.groupSize,r=t.groupSize2;if(r){const t="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+e+"]\\d{"+r+"})*["+e+"]\\d{"+n+"})";return n-r>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":t}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+e+"]\\d{"+n+"})*)"}),!0)}const p=function(t,e,n){if(!(t instanceof Array))return e(t);const i=[];for(let r=0;r<t.length;r++)i.push(e(t[r]));return g(i.join("|"),n)},g=function(t,e){return"("+(e?"?:":"")+t+")"}},"88d1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o}));var i=n("c120"),r=n("7ffa"),s=n("8246");function o(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?s["c"]:"esriGeometryPolyline"===t?s["e"]:s["d"]}}}function a(t,e){if(Object(i["a"])("csp-restrictions"))return()=>({[e]:null,...t});try{let n=`this.${e} = null;`;for(const e in t)n+=`this${e.indexOf(".")?`["${e}"]`:"."+e} = ${JSON.stringify(t[e])};`;const i=new Function(n);return()=>new i}catch(n){return()=>({[e]:null,...t})}}function u(t={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(r["a"])(t)}}]}},ce76:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("b2b2"),r=n("b50f"),s=n("8a44"),o=n("4637");class a{constructor(t=9,e){this.compareMinX=d,this.compareMinY=h,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),b.prune(),I.prune(),M.prune(),F.prune()}all(t){this._all(this.data,t)}search(t,e){let n=this.data;const i=this.toBBox;if(y(t,n))for(b.clear();n;){for(let r=0,s=n.children.length;r<s;r++){const s=n.children[r],o=n.leaf?i(s):s;y(t,o)&&(n.leaf?e(s):x(t,o)?this._all(s,e):b.push(s))}n=b.pop()}}collides(t){let e=this.data;const n=this.toBBox;if(!y(t,e))return!1;for(b.clear();e;){for(let i=0,r=e.children.length;i<r;i++){const r=e.children[i],s=e.leaf?n(r):r;if(y(t,s)){if(e.leaf||x(t,s))return!0;b.push(r)}}e=b.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new j([]),this}remove(t){if(!t)return this;let e,n=this.data,s=null,o=0,a=!1;const u=this.toBBox(t);for(M.clear(),F.clear();n||M.length>0;){var l;if(n||(n=Object(i["d"])(M.pop()),s=M.data[M.length-1],o=null!=(l=F.pop())?l:0,a=!0),n.leaf&&(e=Object(r["g"])(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),M.push(n),this._condense(M),this;a||n.leaf||!x(n,u)?s?(o++,n=s.children[o],a=!1):n=null:(M.push(n),F.push(o),o=0,s=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let n=t;for(I.clear();n;){var i;if(!0===n.leaf)for(const t of n.children)e(t);else I.pushArray(n.children);n=null!=(i=I.pop())?i:null}}_build(t,e,n,i){const r=n-e+1;let s=this._maxEntries;if(r<=s){const i=new j(t.slice(e,n+1));return u(i,this.toBBox),i}i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/s**(i-1)));const o=new N([]);o.height=i;const a=Math.ceil(r/s),l=a*Math.ceil(Math.sqrt(s));_(t,e,n,l,this.compareMinX);for(let u=e;u<=n;u+=l){const e=Math.min(u+l-1,n);_(t,u,e,a,this.compareMinY);for(let n=u;n<=e;n+=a){const r=Math.min(n+a-1,e);o.children.push(this._build(t,n,r,i-1))}}return u(o,this.toBBox),o}_chooseSubtree(t,e,n,i){for(;i.push(e),!0!==e.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let s=0,o=e.children.length;s<o;s++){const o=e.children[s],a=f(o),u=p(t,o)-a;u<r?(r=u,i=a<i?a:i,n=o):u===r&&a<i&&(i=a,n=o)}e=n||e.children[0]}return e}_insert(t,e,n){const i=this.toBBox,r=n?t:i(t);M.clear();const s=this._chooseSubtree(r,this.data,e,M);for(s.children.push(t),c(s,r);e>=0&&M.data[e].children.length>this._maxEntries;)this._split(M,e),e--;this._adjustParentBBoxes(r,M,e)}_split(t,e){const n=t.data[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const s=this._chooseSplitIndex(n,r,i);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(s,n.children.length-s),a=n.leaf?new j(o):new N(o);a.height=n.height,u(n,this.toBBox),u(a,this.toBBox),e?t.data[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=new N([t,e]),this.data.height=t.height+1,u(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r,s;i=r=1/0;for(let o=e;o<=n-e;o++){const e=l(t,0,o,this.toBBox),a=l(t,o,n,this.toBBox),u=g(e,a),c=f(e)+f(a);u<i?(i=u,s=o,r=c<r?c:r):u===i&&c<r&&(r=c,s=o)}return s}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:d,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,s=l(t,0,e,r),o=l(t,n-e,n,r);let a=m(s)+m(o);for(let u=e;u<n-e;u++){const e=t.children[u];c(s,t.leaf?r(e):e),a+=m(s)}for(let u=n-e-1;u>=e;u--){const e=t.children[u];c(o,t.leaf?r(e):e),a+=m(o)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)c(e.data[i],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const i=t.data[e-1],s=i.children;s.splice(Object(r["g"])(s,n,s.length,i.indexHint),1)}else this.clear();else u(n,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function u(t,e){l(t,0,t.children.length,e,t)}function l(t,e,n,i,r){r||(r=new j([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s,o=e;o<n;o++)s=t.children[o],c(r,t.leaf?i(s):s);return r}function c(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function d(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function g(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function x(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t,e,n,r,s){const a=[e,n];for(;a.length;){const e=Object(i["d"])(a.pop()),n=Object(i["d"])(a.pop());if(e-n<=r)continue;const u=n+Math.ceil((e-n)/r/2)*r;Object(o["a"])(t,u,n,e,s),a.push(n,u,u,e)}}const b=new s["a"],I=new s["a"],M=new s["a"],F=new s["a"]({deallocator:void 0});class w{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends w{constructor(){super(...arguments),this.height=1,this.indexHint=new r["a"]}}class j extends B{constructor(t){super(),this.children=t,this.leaf=!0}}class N extends B{constructor(t){super(),this.children=t,this.leaf=!1}}},d77e:function(t,e,n){"use strict";n.r(e),n.d(e,"csvLatitudeFieldNames",(function(){return Y})),n.d(e,"csvLongitudeFieldNames",(function(){return X}));var i=n("c120"),r=n("ce50"),s=n("e041"),o=n("7f83"),a=n("5996"),u=n("9786"),l=(n("e06a"),n("2eab")),c=n("8188"),d=n("7015"),h=n("9392"),f=n("8152"),m=n("80b7"),p=n("d641"),g=n("88d1"),x=n("1ec3"),y=n("6517"),_=n("6411");const b=/^\s*"([\S\s]*)"\s*$/,I=/""/g,M="\n",F=[","," ",";","|","\t"];function w(t,e){const n={},i=t.length;for(let r=0;r<i;r++)n[t[r]]=e[r];return n}function*B(t,e,n){let i=0;for(;i<=t.length;){const r=t.indexOf(e,i),s=t.substring(i,r>-1?r:void 0);i+=s.length+1,n&&!s.trim()||(yield s)}}function j(t){const e=t.includes("\r\n")?"\r\n":M;return B(t,e,!0)}function N(t,e){return B(t,e,!1)}function O(t){const e=t.trim();let n=0,i="";for(const r of F){const t=e.split(r).length;t>n&&(n=t,i=r)}return""===i?null:i}function*v(t,e,n){let i="",r="",s=0,o=[];t:for(;;){const{value:a,done:u}=t.next();if(u)return;const l=N(a,n);e:for(;;){const{value:t,done:e}=l.next();if(e)break e;if(i+=r+t,r="",s+=E(t),s%2==0){if(s>0){const t=b.exec(i);if(!t){o=[],i="",s=0;continue t}o.push(t[1].replace(I,'"'))}else o.push(i);i="",s=0}else r=n}0===s?(yield w(e,o),o=[]):r=M}}function E(t){let e=0,n=0;for(n=t.indexOf('"',n);n>=0;)e++,n=t.indexOf('"',n+1);return e}const T=Object(g["c"])("esriGeometryPoint"),S=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],Y=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],X=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"],D=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,k=["csv"],q=[0,0];class C{constructor(t,e){this.x=t,this.y=e}}const P=function(){const t=Object(d["a"])(),e=new RegExp("^"+t.regexp+"$"),n=new RegExp("["+t.group+"\\s\\xa0]","g"),i=t.factor;return function(r){const s=e.exec(r);if(t.factor=i,!s)return NaN;let o=s[1];if(!s[1]){if(!s[2])return NaN;o=s[2],t.factor*=-1}return o=o.replace(n,"").replace(t.decimal,"."),+o*t.factor}}(),z="isInteger"in Number?Number.isInteger:t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;class L{constructor(){this._fieldsIndex=null,this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null,this._fieldsIndex=null}async load(t,e={}){const[n]=await Promise.all([this._fetch(t.url,e),this._checkProjection(e&&t.parsing&&t.parsing.spatialReference)]),i=this._parse(n,t);if(this._queryEngine=this._createQueryEngine(n,i),i.layerDefinition.extent=this._queryEngine.fullExtent,i.layerDefinition.timeInfo){const{start:t,end:e}=this._queryEngine.timeExtent;i.layerDefinition.timeInfo.timeExtent=[t,e]}return i}async applyEdits(){throw new r["a"]("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer")}queryFeatures(t={},e={}){return this._queryEngine.executeQuery(t,e.signal)}queryFeatureCount(t={},e={}){return this._queryEngine.executeQueryForCount(t,e.signal)}queryObjectIds(t={},e={}){return this._queryEngine.executeQueryForIds(t,e.signal)}queryExtent(t={},e={}){return this._queryEngine.executeQueryForExtent(t,e.signal)}querySnapping(t,e={}){return this._queryEngine.executeQueryForSnapping(t,e.signal)}async _fetch(t,e){if(!t)throw new r["a"]("csv-source:invalid-source","url not defined");const n=Object(s["J"])(t);return(await Object(l["default"])(n.path,{query:n.query,responseType:"text",signal:e.signal})).data}_parse(t,e){const n=e.parsing||{},i={columnDelimiter:n.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:n.latitudeField,longitudeFieldName:n.longitudeField}},o=j(t);let{value:a}=o.next();if(!a)throw new r["a"]("csv","CSV is empty",{csv:t});if(a=a.trim(),!n.columnDelimiter){const t=O(a);if(!t)throw new r["a"]("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");i.columnDelimiter=t}const u=a.split(i.columnDelimiter),l=i.layerDefinition={name:Object(s["k"])(e.url,k)||"csv",drawingInfo:T,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:n.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:n.spatialReference||{wkid:102100}}};if(!n.latitudeField||!n.longitudeField){const t=this._inferLocationInfo(u);if(!n.longitudeField&&!t.longitudeFieldName||!n.latitudeField&&!t.latitudeFieldName)throw new r["a"]("csv","Unable to identify latitudeField and/or longitudeField from CSV");i.locationInfo={longitudeFieldName:n.longitudeField||t.longitudeFieldName,latitudeFieldName:n.latitudeField||t.latitudeFieldName}}const c=this._inferFields(o,i.columnDelimiter,u,i.locationInfo);if(n.fields&&n.fields.length){const t=new Map;for(const e of n.fields)t.set(e.name.toLowerCase(),e);for(const e of c){const n=t.get(e.name.toLowerCase());if(n){const t=e.name;Object.assign(e,n),e.name=t}}}if(l.fields=c,!l.fields.some(t=>"esriFieldTypeOID"===t.type&&(l.objectIdField=t.name,!0))){const t={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};l.objectIdField=t.name,l.fields.unshift(t)}if(this._fieldsIndex=new m["a"](l.fields),l.timeInfo){const t=l.timeInfo;if(t.startTimeField){const e=this._fieldsIndex.get(t.startTimeField);e?(t.startTimeField=e.name,e.type="esriFieldTypeDate"):t.startTimeField=null}if(t.endTimeField){const e=this._fieldsIndex.get(t.endTimeField);e?(t.endTimeField=e.name,e.type="esriFieldTypeDate"):t.endTimeField=null}if(t.trackIdField){const e=this._fieldsIndex.get(t.trackIdField);t.trackIdField=e?e.name:null}t.startTimeField||t.endTimeField||(l.timeInfo=null)}return i}_inferLocationInfo(t){let e=null,n=null;const i=e=>t.find(t=>t.toLowerCase()===e);return X.some(t=>(e=i(t),!!e)),Y.some(t=>(n=i(t),!!n)),{longitudeFieldName:e,latitudeFieldName:n}}_inferFields(t,e,n,i){const r=[],s=v(t,n,e),o=[];t:for(;o.length<10;){const{value:t,done:e}=s.next();if(e)break t;o.push(t)}for(const a of n)if(a===i.longitudeFieldName||a===i.latitudeFieldName)r.push({name:a,type:"esriFieldTypeDouble",alias:a});else{const t=o.map(t=>t[a]),e=this._inferFieldType(t),n={name:a,type:null,alias:a};switch(e){case"integer":n.type="esriFieldTypeInteger";break;case"double":n.type="esriFieldTypeDouble";break;case"date":n.type="esriFieldTypeDate",n.length=36;break;default:n.type="esriFieldTypeString",n.length=255}r.push(n)}return r}_inferFieldType(t){if(!t.length)return"string";const e=/[^+-.,0-9]/;return t.map(t=>{let n=!1;if(""!==t){if(e.test(t))n=!0;else{let e=P(t);if(!isNaN(e))return/[.,]/.test(t)||!z(e)||e>214783647||e<-214783648?"double":"integer";if(-1===t.indexOf("E"))n=!0;else{if(e=Number(t),!isNaN(e))return"double";if(-1===t.indexOf(","))n=!0;else{if(t=t.replace(",","."),e=Number(t),!isNaN(e))return"double";n=!0}}}if(n){if(!/^[-]?\d*[.,]?\d*$/.test(t)){const e=new Date(t);return this._isValidDate(e,t)?"date":"string"}return"string"}return"string"}}).reduce((t,e)=>void 0===t||t===e?e:"string"===t||"string"===e?"string":"double"===t||"double"===e?"double":void 0)}_isValidDate(t,e){if(!t||"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return!1;let n=!0;if(Object(i["a"])("chrome")&&/\d+\W*$/.test(e)){const t=e.match(/[a-zA-Z]{2,}/);if(t){let e=!1,i=0;for(;!e&&i<=t.length;)e=!D.test(t[i]),i++;n=!e}}return n}_createQueryEngine(t,e){const{latitudeFieldName:n,longitudeFieldName:i}=e.locationInfo,{objectIdField:r,fields:s,extent:l,timeInfo:d}=e.layerDefinition;let m=[];const g=[],x=new Set,b=new Set,I=[];for(const{name:o,type:a}of s)"esriFieldTypeDate"===a?x.add(o):S.indexOf(a)>-1&&b.add(o),o!==r&&I.push(o);let M=0;const F=j(t);F.next();const w=v(F,I,e.columnDelimiter);t:for(;;){const{value:t,done:e}=w.next();if(e)break t;const s=this._parseCoordinateValue(t[n]),o=this._parseCoordinateValue(t[i]);if(null!=o&&null!=s&&!isNaN(s)&&!isNaN(o)){t[n]=s,t[i]=o;for(const e in t)if(e!==n&&e!==i)if(x.has(e)){const n=new Date(t[e]);t[e]=this._isValidDate(n,t[e])?n.getTime():null}else if(b.has(e)){const n=P(t[e]);isNaN(n)?t[e]=null:t[e]=n}t[r]=M,M++,m.push(new C(o,s)),g.push(t)}}if(!Object(o["c"])({wkid:4326},l.spatialReference))if(Object(o["n"])(l.spatialReference))for(const o of m)[o.x,o.y]=Object(u["c"])(o.x,o.y,q);else m=Object(c["r"])(p["a"],m,a["a"].WGS84,l.spatialReference,null);const B=new y["a"]({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),N=new _["a"]({fields:e.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:d,objectIdField:r,spatialReference:l.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:B}),O=[];for(let o=0;o<m.length;o++){const{x:t,y:e}=m[o],n=g[o];n[r]=o+1,O.push(new h["a"](new f["a"]([],[t,e]),n,null,n[r]))}return B.addMany(O),N}_parseCoordinateValue(t){if(null==t||""===t)return null;let e=P(t);return(isNaN(e)||Math.abs(e)>181)&&(e=parseFloat(t)),e}async _checkProjection(t){try{await Object(x["a"])(o["a"],t)}catch{throw new r["a"]("csv-layer","Projection not supported")}}}e["default"]=L}}]);