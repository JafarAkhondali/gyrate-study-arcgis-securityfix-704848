{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["async","c","t","r","a","load","s","itemUrl","start","n","num","sortOrder","u","sortField","l","i","query","signal","p","portal","_request","total","nextStart","resources","map","created","e","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","path","m","h","d","FormData","append","access","method","body","deleteAll","lastIndexOf","slice","o","length","Blob","url","responseType","data","f","w"],"mappings":"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","file":"js/chunk-2d22611c.3c0c1ae1.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{get as e,isSome as t,isNone as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import{join as o,getPathExtension as s}from\"../../core/urlUtils.js\";import n from\"../../request.js\";async function c(t,r={},a){await t.load(a);const s=o(t.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:l=\"created\"}=r,i={query:{start:n,num:c,sortOrder:u,sortField:l},signal:e(a,\"signal\")},p=await t.portal._request(s,i);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:e,size:r,resource:a})=>({created:new Date(e),size:r,resource:t.resourceFromPath(a)})))}}async function u(r,s,n,c){if(!r.hasPath())throw new a(`portal-item-resource-${s}:invalid-path`,\"Resource does not have a valid path\");await r.portalItem.load(c);const u=o(r.portalItem.userItemUrl,\"add\"===s?\"addResources\":\"updateResources\"),[l,i]=p(r.path),m=await h(n),d=new FormData;return l&&\".\"!==l&&d.append(\"resourcesPrefix\",l),d.append(\"fileName\",i),d.append(\"file\",m,i),d.append(\"f\",\"json\"),t(c)&&c.access&&d.append(\"access\",c.access),await r.portalItem.portal._request(u,{method:\"post\",body:d,signal:e(c,\"signal\")}),r}async function l(t,r,s){if(!r.hasPath())throw new a(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await t.load(s);const n=o(t.userItemUrl,\"removeResources\");await t.portal._request(n,{method:\"post\",query:{resource:r.path},signal:e(s,\"signal\")}),r.portalItem=null}async function i(t,r){await t.load(r);const a=o(t.userItemUrl,\"removeResources\");return t.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:e(r,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){const[t,r]=d(e),[a,o]=p(t);return[a,o,r]}function d(e){const t=s(e);return r(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(e){if(e instanceof Blob)return e;return(await n(e.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,i as removeAllResources,l as removeResource,m as splitPrefixFileNameAndExtension};\n"],"sourceRoot":""}