{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/SceneLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/floorFilterUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/core/AsyncUpdate.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/attributeEditing.js","webpack:///./node_modules/@arcgis/core/views/layers/SceneLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],"names":["m","r","super","this","events","forAllFeatures","e","t","o","getFeatureExtent","s","l","d","node","mbs","sourceSpatialReference","f","viewSpatialReference","Math","max","min","c","constructOnly","prototype","y","getLogger","p","arguments","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","error","i3slayer","definitionExpression","create","fieldsIndex","isStandardized","i","fieldNames","fields","missingFields","length","join","parsedDefinitionExpression","testFeature","clone","where","readOnly","_dataQueryEngineInstance","_handles","outSpatialReference","spatialReference","toJSON","ensureDataQueryEngine","add","layerView","on","spatialIndex","emit","destroy","_set","dataQueryEngine","executeQueryForCount","_ensureQueryJSON","count","extent","executeQueryForExtent","fromJSON","executeQueryForIds","returnGeometry","returnCentroid","executeQuery","features","forEach","geometry","defaultQueryJSON","layer","objectIdField","map","view","resourceController","scheduler","n","task","a","hasZ","hasM","geometryType","timeInfo","featureStore","aliasOf","Q","q","D","lodFactor","progressiveLoadFactor","_elevationContext","_isIntegratedMesh","_supportsLabeling","_interactiveEditingSessions","Map","_queryEngine","viewFilter","filter","checkSupport","layerFieldsIndex","loadAsyncModule","_loadAsyncModule","applyFilters","_applyFilters","addSqlFilter","fieldsHelper","requiredFields","qualitySettings","sceneService","lodCrossfadeinDuration","lodCrossfadeoutDuration","lodCrossfadeUncoveredDuration","updatingHandles","_rangeInfosChanged","addPromise","_rendererChange","_filterChange","_geometryFilterChange","handles","result","_handleEdits","warn","outFields","createQuery","_ensureQueryEngine","_ensureQuery","signal","then","sourceLayer","_createQueryEngine","renderSpatialReference","_collection","FEATURE_QUERY_ENGINE","featureAdapter","attributeStorageInfo","_forAllFeatures","id","index","meta","_highlights","set","handle","acquireSet","queryObjectIds","setFeatureIds","highlight","attributeEditingContext","canResume","_controller","rootNodeVisible","getFilters","floorFilterClause","addFilters","crsIndex","_addDefinitionExpressionToQuery","from","sessions","_getObjectIdField","forEachNode","_forAllNodes","featureIds","attributeOverrides","getAttributeData","setAttributeData","clearMemCache","parsedGeometry","isMBSGeoemtryVisible","filterImpact","type","availableFields","O","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","u","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","h","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","String","types","json","read","write","source","reader","target","writer","Array","Number","overridePolicy","j","v","k","_projectionEngineLoaded","W","destroyed","_geometryEngine","Float64Array","sort","sortedObjectIds","push","parsedWhereClause","T","V","A","warnOnce","C","isWGS84","geodesicBuffer","WGS84","wkid","L","B","G","async","indexOf","rings","aabr","delete","intersects","concat","_geVersion","splice","every","Z","U","objectHandle","P","indices","data","stride","startIndex","endIndex","$","contains","disjoint","z","collection","object","maskSR","renderSR","aabbCache","triangle","positions","triangleTest","geometryTest","x","isWebMercator","buffer","H","get","getObjectTransform","getComponentAabb","rotationScale","position","b","getComponentPositions","S","R","w","F","I","abs","floorInfo","floors","floorField","attributeInfo","attributeData","Object","keys","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","asyncUpdateState","updateAsync","startAsyncUpdate","declaredClass","endAsyncUpdate","clear","remove","definitionExpressionFields","rendererFields","labelingFields","viewFilterFields","autoUpdateAsync","renderer","collectRequiredFields","labelsVisible","attributes","createInteractiveEditSession","findIndex","name","setAttribute","rollback","commit","size","featureIndex","value","featureId","updateValue","edits","updateFeatures","has","normalizeFieldName","updatedFeatures","objectId","Error","popupEnabled","_validateFetchPopupFeatures","Promise","reject","clientGraphics","resolve","associatedLayer","prepareFetchPopupFeatures","whenGraphicAttributes","catch"],"mappings":"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","file":"js/chunk-1eca538c.1e42997d.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import o from\"../../../../core/Accessor.js\";import s from\"../../../../core/Evented.js\";import{intersects as c,create as p}from\"../../../../geometry/support/aaBoundingRect.js\";import{projectBoundingSphere as a}from\"../../../../geometry/projection.js\";import{a as i}from\"../../../../chunks/vec4f64.js\";import{toRect as n,create as u}from\"../../../../geometry/support/aaBoundingBox.js\";let m=class extends o{constructor(r){super(r),this.events=new s}destroy(){}forEach(r){this.forAllFeatures((e=>(r(e),1)))}forEachBounds(r,e,t){const o=this.getFeatureExtent;for(const s of r)e(o(s,t))}forEachInBounds(r,e){this.forAllFeatures((t=>{const o=this.getFeatureExtent(t,l);return c(r,n(o,d))&&e(t),1}),(e=>{if(a(e.node.mbs,this.sourceSpatialReference,f,this.viewSpatialReference),f[0]>=r[0]&&f[2]<=r[2]&&f[1]>=r[1]&&f[3]<=r[3])return 1;const t=Math.max(r[0],Math.min(f[0],r[2])),o=Math.max(r[1],Math.min(f[1],r[3])),s=f[0]-t,c=f[1]-o;return s*s+c*c<=f[3]*f[3]?1:2}))}};r([e({constructOnly:!0})],m.prototype,\"featureAdapter\",void 0),r([e({constructOnly:!0})],m.prototype,\"forAllFeatures\",void 0),r([e({constructOnly:!0})],m.prototype,\"getFeatureExtent\",void 0),r([e({constructOnly:!0})],m.prototype,\"sourceSpatialReference\",void 0),r([e({constructOnly:!0})],m.prototype,\"viewSpatialReference\",void 0),m=r([t(\"esri.views.3d.layers.i3s.I3SQueryFeatureStore\")],m);const f=i(),l=u(),d=p();var y=m;export default y;export{m as I3SQueryFeatureStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import e from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isNone as t}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../core/Error.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import o from\"../../../../core/Accessor.js\";import a from\"../../../../geometry/Extent.js\";import i from\"../../../../core/Handles.js\";import u from\"../../../../tasks/support/FeatureSet.js\";import y from\"../../../../tasks/support/Query.js\";import c from\"../../../../layers/graphics/data/QueryEngine.js\";const l=c;let p=class extends o{constructor(e){super(e),this._dataQueryEngineInstance=null,this._handles=new i}get defaultQueryJSON(){return new y({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this.ensureDataQueryEngine()}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null),this._handles&&(this._handles.destroy(),this._handles=null),this._set(\"layerView\",null)}async executeQueryForCount(e,t){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),t)}async executeQueryForExtent(e,t){const{count:r,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),t);return{count:r,extent:a.fromJSON(s)}}async executeQueryForIds(e,t){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),t)}async executeQuery(e,t){const r=this._ensureQueryJSON(e);if(r.returnGeometry)throw new n(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(r.returnCentroid)throw new n(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const s=await this.dataQueryEngine.executeQuery(r,t),o=u.fromJSON(s);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){if(t(e))return this.defaultQueryJSON;const r=e.toJSON();return r.outSpatialReference||(e.outSpatialReference=this.spatialReference),r}ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||\"OBJECTID\",t=\"esriGeometryPolygon\",r=this.layer.fields.map((e=>e.toJSON())),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.task,a=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:t,fields:r,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:a,scheduler:s,task:o}),this._dataQueryEngineInstance}};e([r({constructOnly:!0})],p.prototype,\"layerView\",void 0),e([r({constructOnly:!0})],p.prototype,\"task\",void 0),e([r({constructOnly:!0})],p.prototype,\"spatialIndex\",void 0),e([r({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],p.prototype,\"spatialReference\",void 0),e([r({readOnly:!0,aliasOf:\"layerView.i3slayer\"})],p.prototype,\"layer\",void 0),e([r({readOnly:!0})],p.prototype,\"defaultQueryJSON\",null),p=e([s(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],p);var d=p;export default d;export{p as I3SQueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as t,isNone as r,destroyMaybe as i}from\"../../../core/maybe.js\";import s from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import n from\"../../../Graphic.js\";import{Task as a}from\"../../support/Scheduler.js\";import{WhereClause as u}from\"../../../core/sql/WhereClause.js\";import d from\"../../../tasks/support/Query.js\";import{LayerView3D as p}from\"./LayerView3D.js\";import{updatingProgress as h}from\"./support/layerViewUpdatingProperties.js\";import c from\"../../layers/support/FeatureFilter.js\";import y from\"../../layers/SceneLayerView.js\";import{getIndexCrs as f}from\"./i3s/I3SUtil.js\";import{createGetFeatureExtent as g}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshView3D as m}from\"./I3SMeshView3D.js\";import{I3SMeshViewFilter as F}from\"./i3s/I3SMeshViewFilter.js\";import v from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as w}from\"./i3s/I3SQueryFeatureAdapter.js\";import _ from\"./i3s/I3SQueryFeatureStore.js\";import{DefinitionExpressionSceneLayerView as S}from\"./support/DefinitionExpressionSceneLayerView.js\";import{getFloorFilterClause as j}from\"./support/floorFilterUtils.js\";import{PopupSceneLayerView as E}from\"./support/PopupSceneLayerView.js\";import{createInteractiveEditSession as I,processAttributeEdits as b}from\"./i3s/attributeEditing.js\";import{defineFieldProperties as x}from\"./support/fieldProperties.js\";import{SceneLayerViewRequiredFields as C}from\"./support/SceneLayerViewRequiredFields.js\";const Q=s.getLogger(\"esri.views.3d.layers.SceneLayerView3D\"),q=x();let D=class extends(m(S(E(p(y))))){constructor(){super(...arguments),this.lodFactor=1,this.progressiveLoadFactor=1,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!0,this._interactiveEditingSessions=new Map,this._queryEngine=null}get filter(){return t(this.viewFilter)?this.viewFilter.filter:null}set filter(e){!r(e)&&F.checkSupport(e)?t(this.viewFilter)?this.viewFilter.filter=e:this.viewFilter=new F({filter:e,layerFieldsIndex:this.layer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),applyFilters:()=>this._applyFilters(!0),addSqlFilter:(e,t)=>this.addSqlFilter(e,t,this.logError)}):this.viewFilter=null}get requiredFields(){var e,t;return null!=(e=null==(t=this.fieldsHelper)?void 0:t.requiredFields)?e:[]}get floorFilterClause(){const e=j(this);return t(e)?u.create(e,this.layer.fieldsIndex):null}get lodCrossfadeinDuration(){var e,t;return null!=(e=null==(t=this.view)?void 0:t.qualitySettings.sceneService[\"3dObject\"].lodCrossfadeinDuration)?e:0}get lodCrossfadeoutDuration(){var e,t;return null!=(e=null==(t=this.view)?void 0:t.qualitySettings.sceneService[\"3dObject\"].lodCrossfadeoutDuration)?e:0}get lodCrossfadeUncoveredDuration(){var e,t;return null!=(e=null==(t=this.view)?void 0:t.qualitySettings.sceneService[\"3dObject\"].lodCrossfadeUncoveredDuration)?e:0}initialize(){this.fieldsHelper=new C({layerView:this}),this.updatingHandles.add(this.layer,\"rangeInfos\",(e=>this._rangeInfosChanged(e)),2),this.updatingHandles.add(this.layer,\"renderer\",(e=>this.updatingHandles.addPromise(this._rendererChange(e))),2);for(const e of[\"parsedDefinitionExpression\",\"filter\",\"viewFilter.parsedWhereClause\",\"viewFilter.parsedGeometry\",\"viewFilter.sortedObjectIds\",\"floorFilterClause\"])this.updatingHandles.add(this,e,(()=>this._filterChange()));for(const e of[\"filter\",\"viewFilter.parsedGeometry\"])this.updatingHandles.add(this,e,(()=>this._geometryFilterChange()));this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e))))}destroy(){this.fieldsHelper=i(this.fieldsHelper)}_rangeInfosChanged(e){null!=e&&e.length>0&&Q.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return t(this.filter)?this.filter.createQuery(e):new d(e)}queryExtent(e,t){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),null==t?void 0:t.signal)}queryFeatureCount(e,t){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),null==t?void 0:t.signal)}queryFeatures(e,t){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),null==t?void 0:t.signal).then((e=>{if(null==e||!e.features)return e;const t=this.layer;for(const r of e.features)r.layer=t,r.sourceLayer=t;return e}))}queryObjectIds(e,t){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),null==t?void 0:t.signal)}_ensureQueryEngine(){return this._queryEngine||(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=g(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new v({layerView:this,task:a.FEATURE_QUERY_ENGINE,spatialIndex:new _({featureAdapter:new w({objectIdField:this.layer.objectIdField,attributeStorageInfo:this.layer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,t)=>this._forAllFeatures(((t,r,i)=>e({id:t,index:r,meta:i})),t,2),getFeatureExtent:e,sourceSpatialReference:f(this.layer),viewSpatialReference:this.view.spatialReference})})}highlight(e){const t=this._highlights;if(e instanceof d){const{set:r,handle:i}=t.acquireSet();return this.queryObjectIds(e).then((e=>t.setFeatureIds(r,e))),i}return super.highlight(e)}createInteractiveEditSession(e){return I(this.attributeEditingContext,e)}_createLayerGraphic(e){const t=new n(null,null,e);return t.layer=this.layer,t.sourceLayer=this.layer,t}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}getFilters(){const e=super.getFilters();return this.floorFilterClause&&this.addSqlFilter(e,this.floorFilterClause,this.logError),this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),t(this.viewFilter)&&this.viewFilter.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}_ensureQuery(e){return this._addDefinitionExpressionToQuery(r(e)?this.createQuery():d.from(e))}get attributeEditingContext(){return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:this._getObjectIdField(),forEachNode:e=>this._forAllNodes((r=>t(r)?e(r.node,r.featureIds):null)),attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this.attributeOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(e,t)=>this.setAttributeData(e,t),clearMemCache:()=>this.clearMemCache()}}_handleEdits(e){b(this.attributeEditingContext,e)}get hasGeometryFilter(){const e=this.viewFilter;return t(e)&&t(e.parsedGeometry)}computeNodeFiltering(e){const t=this.viewFilter,i=r(t)||t.isMBSGeoemtryVisible(e.mbs,this.view.spatialReference,this._controller.crsIndex);e.filterImpact=i?0:1}};e([o({aliasOf:\"layer\"})],D.prototype,\"i3slayer\",void 0),e([o()],D.prototype,\"suspended\",void 0),e([o(h)],D.prototype,\"updatingProgress\",void 0),e([o({type:c})],D.prototype,\"filter\",null),e([o()],D.prototype,\"viewFilter\",void 0),e([o(q.requiredFields)],D.prototype,\"requiredFields\",null),e([o(q.availableFields)],D.prototype,\"availableFields\",void 0),e([o()],D.prototype,\"fieldsHelper\",void 0),e([o()],D.prototype,\"floorFilterClause\",null),e([o({readOnly:!0,aliasOf:\"view.qualitySettings.sceneService.3dObject.lodFactor\"})],D.prototype,\"lodFactor\",void 0),e([o({readOnly:!0,aliasOf:\"_controller.updatingProgress\"})],D.prototype,\"updatingProgressValue\",void 0),D=e([l(\"esri.views.3d.layers.SceneLayerView3D\")],D);var O=D;export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isNone as t,isSome as r}from\"../../../../core/maybe.js\";import s from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{indexOf as o,PositionHint as a}from\"../../../../core/arrayUtils.js\";import c from\"../../../../core/Accessor.js\";import l from\"../../../../geometry/SpatialReference.js\";import{canProject as p,project as u}from\"../../../../geometry/support/webMercatorUtils.js\";import\"../../../../geometry.js\";import{t as f,b as d,s as g}from\"../../../../chunks/vec3.js\";import{whenOnce as h}from\"../../../../core/watchUtils.js\";import{getUnitString as y}from\"../../../../core/unitUtils.js\";import{fromValues as m,expandWithNestedArray as j,expand as b}from\"../../../../geometry/support/aaBoundingRect.js\";import{projectBoundingSphere as S,load as R,project as w,projectVectorToVector as E}from\"../../../../geometry/projection.js\";import{WhereClause as F}from\"../../../../core/sql/WhereClause.js\";import{create as x}from\"../../../../geometry/support/aaBoundingBox.js\";import I from\"../../../layers/support/FeatureFilter.js\";import{objectIdFilter as M,filterInPlace as _}from\"./I3SUtil.js\";const v=s.getLogger(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\");let O,k=class extends c{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){h(this,\"filter.geometry\").then((()=>this.loadAsyncModule(W().then((e=>{this.destroyed||(this._geometryEngine=e,this.applyFilters())})))))}get sortedObjectIds(){if(t(this.filter.objectIds))return null;const e=new Float64Array(this.filter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=r(this.filter)?this.filter.where:null;if(t(e)||!e)return null;try{return F.create(e,this.layerFieldsIndex)}catch(s){v.error(`Failed to parse filter where clause: ${s}`)}return null}addFilters(e,t,s,i){const n=this.sortedObjectIds;r(n)&&e.push((e=>M(n,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const o=this.parsedGeometry;if(r(o)){const r=this.spatialRelationship;e.push(((e,n)=>T(e,n,i,t,s,o,r)))}}isMBSGeoemtryVisible(e,t,s){const i=this.parsedGeometry;if(r(i)){const r=this.spatialRelationship,n=i[0].spatialReference||t;if(!S(e,s,V,n))return v.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return A(V,i,n,r)}return!0}get parsedGeometry(){if(t(this.filter))return null;if(!this._geometryEngine)return null;const{geometry:e}=this.filter;if(t(e))return null;const{distance:r,units:s}=this.filter,i=this.spatialRelationship,n=\"mesh\"===e.type?e.extent:e;if(t(r)||0===r)return C(n,i);const o=s||y(n.spatialReference);if(n.spatialReference.isWGS84){return C(this._geometryEngine.geodesicBuffer(n,r,o),i)}if(p(n,l.WGS84)){return C(u(this._geometryEngine.geodesicBuffer(u(n,l.WGS84),r,o),n.spatialReference),i)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule(R().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let a=null;try{a=w(n,l.WGS84)}catch(c){}if(a)try{a=w(this._geometryEngine.geodesicBuffer(a,r,o),n.spatialReference)}catch(c){a=null}return a||v.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${n.spatialReference.wkid}) to WGS84.`),C(a,i)}get spatialRelationship(){return r(this.filter)?this.filter.spatialRelationship:\"intersects\"}static checkSupport(e){return e.timeExtent?(v.warn(\"Filters with a timeExtent are not supported for mesh scene layers\"),!1):!!L(e.spatialRelationship)||(v.warn(`Filters with spatialRelationship other than ${B.join(\", \")} are not supported for mesh scene layers`),!1)}};function G(){return!!O}async function W(){return G()||(O=await import(\"../../../../geometry/geometryEngine.js\")),O}e([i({type:I})],k.prototype,\"filter\",void 0),e([i()],k.prototype,\"layerFieldsIndex\",void 0),e([i()],k.prototype,\"loadAsyncModule\",void 0),e([i()],k.prototype,\"applyFilters\",void 0),e([i()],k.prototype,\"addSqlFilter\",void 0),e([i({readOnly:!0})],k.prototype,\"sortedObjectIds\",null),e([i({readOnly:!0})],k.prototype,\"parsedWhereClause\",null),e([i({readOnly:!0})],k.prototype,\"parsedGeometry\",null),e([i({readOnly:!0})],k.prototype,\"spatialRelationship\",null),e([i()],k.prototype,\"_projectionEngineLoaded\",void 0),e([i()],k.prototype,\"_geometryEngine\",void 0),k=e([n(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\")],k);const B=(e=>e)([\"contains\",\"intersects\",\"disjoint\"]);function L(e){return null!=e&&B.indexOf(e)>=0}function C(e,t){if(!e)return null;if(\"disjoint\"===t&&\"polygon\"===e.type){const t=new Array(e.rings.length);for(let i=0;i<e.rings.length;++i){const r=m(1/0,1/0,-1/0,-1/0);j(r,e.rings[i]),t[i]={type:\"polygon\",rings:[e.rings[i]],spatialReference:e.spatialReference,aabr:r}}t.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const r=new Set,s=new a;for(let e=0;e<t.length;++e){const i=t[e];for(let s=e+1;s<t.length;++s){const e=t[s];if(e.aabr[0]>=i.aabr[2])break;r.add(e)}r.forEach((e=>{if(i!==e)if(e.aabr[2]<=i.aabr[0])r.delete(e);else if(O.intersects(i,e)){i.rings=i.rings.concat(e.rings),b(i.aabr,e.aabr),delete i._geVersion,r.delete(e);const n=o(t,e,t.length,s);t.splice(n,1)}})),r.add(i)}for(const e of t)delete e.aabr;return t}return[e]}function A(e,t,r,s){const i=q(e,r);return t.every((e=>1!==Z(e,i,s)))}function T(e,t,r,s,i,n,o){const a=n[0].spatialReference||s.spatialReference;if(!S(t.node.mbs,i,V,a))return void v.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter\");const c=q(V,a),l=U(o,s,a,r,t.objectHandle);for(const p of n){if(0===e.length)return;switch(Z(p,c,o)){case 1:return void(e.length=0);case 0:continue}_(e,t.featureIds,(e=>P(p,e,l)))}}const V=[0,0,0,0];function U(e,t,r,s,i){const n=t.renderSpatialReference,o=new Map,a={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:r};a.rings[0][3]=a.rings[0][0];const c={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let l,p;switch(e){case\"intersects\":l=(e,t)=>O.intersects(e,t)?0:2,p=$;break;case\"contains\":l=(e,t)=>O.contains(e,t)?2:1,p=$;break;case\"disjoint\":default:l=(e,t)=>O.disjoint(e,t)?2:1,p=z}return{collection:s,object:i,type:e,maskSR:r,renderSR:n,aabbCache:o,triangle:a,positions:c,triangleTest:l,geometryTest:p}}function q(e,t){const r={x:e[0],y:e[1],hasZ:!1,hasM:!1,type:\"point\",spatialReference:t},s=!t.isWGS84&&!t.isWebMercator?O.buffer(r,e[3],1):O.geodesicBuffer(r,e[3],1);return s.type=\"polygon\",s}function Z(e,t,r){switch(r){case\"intersects\":case\"contains\":return $(e,t);case\"disjoint\":return z(e,t)}}function $(e,t){return O.intersects(e,t)?O.contains(e,t)?0:2:1}function z(e,t){return O.intersects(e,t)?O.contains(e,t)?1:2:0}const H=2**-32;function P(e,t,r){const{collection:s,object:i,renderSR:n,maskSR:o,geometryTest:a,aabbCache:c}=r;let l=c.get(t);if(!l){const e=s.getObjectTransform(i);s.getComponentAabb(i,t,D);const r=[[D[0],D[1],0],[D[0],D[4],0],[D[3],D[4],0],[D[3],D[1],0]];for(let t=0;t<4;++t)f(r[t],r[t],e.rotationScale),d(r[t],r[t],e.position),E(r[t],n,r[t],o);l={rings:[r],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:o},l.rings[0][4]=l.rings[0][0],c.set(t,l)}switch(a(e,l)){case 1:return!1;case 0:return!0}const{triangle:p,triangleTest:u,positions:h}=r,y=p.rings[0][0],m=p.rings[0][1],j=p.rings[0][2],b=s.getObjectTransform(i);s.getComponentPositions(i,t,h);const{indices:S,data:R,stride:w,startIndex:F,endIndex:x}=h;for(let I=F;I<x;I+=3){const t=w*S[I+0],r=w*S[I+1],s=w*S[I+2];g(y,R[t+0],R[t+1],R[t+2]),g(m,R[r+0],R[r+1],R[r+2]),g(j,R[s+0],R[s+1],R[s+2]),f(y,y,b.rotationScale),f(m,m,b.rotationScale),f(j,j,b.rotationScale),d(y,y,b.position),d(m,m,b.position),d(j,j,b.position),E(y,n,y,o),E(m,n,m,o),E(j,n,j,o);const i=m[0]-y[0],a=m[1]-y[1],c=j[0]-y[0],l=j[1]-y[1];if(!(Math.abs(i*l-a*c)<H))switch(delete p._geVersion,u(e,p)){case 1:return!1;case 0:return!0}}switch(r.type){case\"intersects\":return!1;case\"contains\":case\"disjoint\":default:return!0}}const D=x();export{k as I3SMeshViewFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo){const r=o.view.floors;if(!r||!r.length)return null;const l=r.filter((o=>\"\"!==o)).map((o=>`'${o}'`));l.push(\"''\");const f=n.floorInfo.floorField;return`${f} IN (${l.join(\", \")}) OR ${f} IS NULL`}return null}export{o as getFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import e from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import{create as o}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this.objectIdField=t.objectIdField,this.getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this.objectIdField&&(n[this.objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this.objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[r,o,i,n,a]=this.getFeatureExtent(t,s);return new e([5],[r,o,i,n,o,i,n,a,i,r,a,i,r,o,i])}getCentroid(t,o){if(t.geometry)return r(new e,t.geometry,o.hasZ,o.hasM);const[i,n,a,m,u,d]=this.getFeatureExtent(t,s);return new e([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=o();export{n as I3SQueryFeatureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import s from\"./Logger.js\";import{subclass as e}from\"./accessorSupport/decorators/subclass.js\";import{runTracked as a}from\"./accessorSupport/tracking.js\";import{SimpleTrackingTarget as r}from\"./accessorSupport/tracking/SimpleTrackingTarget.js\";import n from\"./Accessor.js\";const c=a=>{let r=class extends a{constructor(){super(...arguments),this.asyncUpdateState=new Map}autoUpdateAsync(t,s){return o((s=>this.updateAsync(t,s)),s)}async updateAsync(t,e){if(!this.startAsyncUpdate(t)){try{const s=await e();this._set(t,s)}catch(a){s.getLogger(this.declaredClass).warn(`Async update of \"${t}\" failed. Async update functions should not throw exceptions.`)}this.endAsyncUpdate(t)&&this.updateAsync(t,e)}}startAsyncUpdate(t){var s;const e=null!=(s=this.asyncUpdateState.get(t))?s:0;return 1&e?(this.asyncUpdateState.set(t,2|e),!0):(this.asyncUpdateState.set(t,1|e),!1)}endAsyncUpdate(t){var s;const e=-2&(null!=(s=this.asyncUpdateState.get(t))?s:0);return 2&e?(this.asyncUpdateState.set(t,-3&e),!0):(this.asyncUpdateState.set(t,e),!1)}};return r=t([e(\"esri.core.AsyncUpdate\")],r),r};function o(t,s){const e=()=>{o&&!p&&t(n)},n=()=>{if(!o||p)return s();o.clear(),p=!0;const t=a(o,s);return p=!1,t},c=()=>{o&&(o.destroy(),o=null)};let o=new r(e),p=!1;return t(n),{remove:c}}let p=class extends(c(n)){};p=t([e(\"esri.core.AsyncUpdate\")],p);export{p as AsyncUpdate,c as AsyncUpdateMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{unwrapOr as r}from\"../../../../core/maybe.js\";import s from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{fixFields as o,collectLabelingFields as l,collectFilterFields as p}from\"../../../../layers/support/fieldUtils.js\";import{AsyncUpdateMixin as a}from\"../../../../core/AsyncUpdate.js\";import{HandleOwner as d}from\"../../../../core/HandleOwner.js\";const n=s.getLogger(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\");let c=class extends(a(d)){constructor(e){super(e)}get requiredFields(){const{layerView:{layer:{fields:e},definitionExpressionFields:s},rendererFields:t,labelingFields:i,viewFilterFields:l}=this;return o(e,[...r(s,[]),...r(t,[]),...r(i,[]),...r(l,[])])}initialize(){const e=this.layerView.layer;this.layer=e,this.handles.add([this.autoUpdateAsync(\"rendererFields\",(()=>{const{fields:e,renderer:r}=this.layer;return r?u((s=>r.collectRequiredFields(s,e))):null})),this.autoUpdateAsync(\"labelingFields\",(()=>{const{layer:e}=this;return e.labelsVisible?u((r=>l(r,e))):null})),this.autoUpdateAsync(\"viewFilterFields\",(()=>{const{layer:e,filter:r}=this.layerView;return u((s=>p(s,e,r)))}))])}};async function u(e){const r=new Set;try{return await e(r),Array.from(r).sort()}catch(s){return n.error(s),null}}e([t()],c.prototype,\"layerView\",void 0),e([t()],c.prototype,\"layer\",void 0),e([t()],c.prototype,\"requiredFields\",null),e([t()],c.prototype,\"rendererFields\",void 0),e([t()],c.prototype,\"labelingFields\",void 0),e([t()],c.prototype,\"viewFilterFields\",void 0),c=e([i(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\")],c);export{c as SceneLayerViewRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../core/lang.js\";import{isSome as e,isNone as n}from\"../../../../core/maybe.js\";import{attributeLookup as r}from\"../support/attributeUtils.js\";const o={setAttribute(){},rollback(){},commit(){}};function s(e,r){const s=r.attributes[e.objectIdField],i=e.sessions.get(s);if(i)return i;const a=t(r.attributes),u=new Set;if(null==s)return o;const c=e.attributeOverrides.createInteractiveEditSession(s),f=new Map,l=(t,e)=>{const n=f.get(t);if(null==n){const n=e.indexOf(s);return f.set(t,n),n}return n};let d=0;const b={setAttribute(t,o){if(0!==d)return;const s=e.fieldsIndex.get(t);if(n(s))return;const i=e.attributeStorageInfo.findIndex((t=>t.name===s.name));if(i<0)return;c.set(i,o);const a=e.attributeStorageInfo[i];let f=!1;u.add(t),e.forEachNode(((t,n)=>{const s=l(t,n);if(-1===s)return;const i=e.getAttributeData(t.index);if(i){const n=i[a.name];n&&(n[s]=o,e.setAttributeData(t.index,i,r),f=!0)}})),f&&e.clearMemCache()},rollback(){if(0===d){for(const t of u)this.setAttribute(t,a[t]);c.rollback(),d=1,e.sessions.delete(s)}},commit(){0===d&&(c.commit(),d=2,e.sessions.delete(s))}};return e.sessions.set(s,b),b}function i(t,n){const r=a(t,n);if(0===r.size)return;const o=new Map;for(let e=0;e<t.attributeStorageInfo.length;e++)o.set(t.attributeStorageInfo[e].name,e);let s=!1;r.forEach(((n,r)=>{const i=t.getAttributeData(r);let a=!1;n.forEach(((n,r)=>{const u=e(i)?i[r]:null,c=o.get(r);for(const{featureIndex:e,value:o,featureId:i}of n)u&&(u[e]=o,a=!0,s=!0),t.attributeOverrides.updateValue(i,c,o)})),a&&t.setAttributeData(r,i,null)})),s&&t.clearMemCache()}function a(t,e){const n=e.edits.updateFeatures;if(!n||0===n.length)return new d;const o=f(e),s=new d,i=new Map;for(let r=0;r<t.attributeStorageInfo.length;r++)i.set(t.attributeStorageInfo[r].name,r);const a=t.fieldsIndex,c=t.objectIdField,l=n.filter((t=>{const e=r(a,t.attributes,c);return o.has(e)}));return t.forEachNode(((e,n)=>{const o=new Set(n);for(const i of l){const f=r(a,i.attributes,c);if(!o.has(f))continue;const l=n.indexOf(f);for(const n in i.attributes){const r=t.fieldsIndex.normalizeFieldName(n),o=u(s,e.index,r),a=i.attributes[n];o.push({featureIndex:l,featureId:f,value:a})}}})),s}function u(t,e,n){const r=c(t,e),o=r.get(n);if(o)return o;const s=new Array;return r.set(n,s),s}function c(t,e){const n=t.get(e);if(n)return n;const r=new l;return t.set(e,r),r}function f(t){const e=new Set;if(!t.updatedFeatures)return e;for(const n of t.updatedFeatures)null!=n.objectId&&null==n.error&&e.add(n.objectId);return e}const l=Map,d=Map;export{s as createInteractiveEditSession,i as processAttributeEdits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./LayerView.js\";class o extends t{constructor(){super(...arguments),this.layer=null,this.filter=null}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error(\"Not implemented\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"Not implemented\")}queryFeatures(e,r){throw new Error(\"Not implemented\")}queryObjectIds(e,r){throw new Error(\"Not implemented\")}queryFeatureCount(e,r){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(e,r){throw new Error(\"Not implemented\")}}e([r()],o.prototype,\"layer\",void 0),e([r()],o.prototype,\"availableFields\",null),e([r()],o.prototype,\"maximumNumberOfFeatures\",null),e([r({readOnly:!0})],o.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([r()],o.prototype,\"filter\",void 0);export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{fixFields as e,unpackFieldNames as r}from\"../../../../layers/support/fieldUtils.js\";function i(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:i,layer:{fields:t},requiredFields:l}=this;return i.outFields?e(t,[...r(t,i.outFields),...l]):e(t,l)}}}}export{i as defineFieldProperties};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../../core/Error.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:r}=this,{popupEnabled:s}=r;if(!s)return new t(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:r});return a(r,e)?void 0:new t(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:r})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,s){const t=this._validateFetchPopupFeatures(s);if(t)return Promise.reject(t);const c=r(s)?s.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=[],l=[],n=\"scene\"===this.layer.type&&r(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,h=o(this.layer.fields,await i(n,a(this.layer,s)));await this.prepareFetchPopupFeatures(h);const m=new Set;for(const r of c)p(h,r,m)?l.push(r):u.push(r);return 0===l.length?Promise.resolve(u):this.whenGraphicAttributes(l,[...m]).catch((()=>l)).then((e=>u.concat(e)))}};return u=e([s(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n"],"sourceRoot":""}