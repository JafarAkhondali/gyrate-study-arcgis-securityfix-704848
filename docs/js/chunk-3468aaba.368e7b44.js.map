{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/MapNotesLayer.js","webpack:///./node_modules/@arcgis/core/layers/graphics/objectIdUtils.js","webpack:///./node_modules/@arcgis/core/layers/GraphicsLayer.js"],"names":["F","e","layers","some","layerDefinition","visibilityField","G","name","alias","type","nullable","editable","_","P","super","arguments","this","visibilityMode","graphics","sourceLayer","layer","on","item","readOnly","prototype","k","geometryType","geometryTypeJSON","layerId","title","identifyingSymbol","toJSON","z","capabilities","operations","supportsMapNotesEditing","featureCollections","featureCollectionJSON","featureCollectionType","legendEnabled","minScale","maxScale","spatialReference","WGS84","sublayers","map","id","t","r","origin","o","read","items","featureCollection","length","xmin","ymin","xmax","ymax","fromJSON","reduce","extent","union","_findSublayer","l","i","featureSet","a","n","find","drawingInfo","renderer","symbol","features","geometry","attributes","popupInfo","popupTemplate","push","s","p","m","messages","u","c","_writeMapNoteSublayer","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","Object","assign","forEach","_writeMapNote","_normalizeObjectIds","objectIdField","fields","y","graphic","Set","has","add","json","origins","write","enabled","target","ignoreOrigin","Number","nonNullable","value","B","isFinite","Math","max","elevationInfo","screenSizePerspectiveEnabled","internal","removeAll","destroy","addMany","remove","removeMany","emit","constructOnly","h"],"mappings":"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","file":"js/chunk-3468aaba.368e7b44.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as t}from\"../core/lang.js\";import{setDeepValue as r}from\"../core/object.js\";import{isNone as o,isSome as i}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{reader as a}from\"../core/accessorSupport/decorators/reader.js\";import n from\"../core/Warning.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../core/accessorSupport/decorators/writer.js\";import y from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{equals as m}from\"../geometry/support/spatialReferenceUtils.js\";import u from\"../geometry/SpatialReference.js\";import c from\"../geometry/Extent.js\";import\"../geometry.js\";import f from\"../core/Collection.js\";import d from\"../symbols/SimpleLineSymbol.js\";import g from\"../symbols/SimpleFillSymbol.js\";import b from\"../symbols/SimpleMarkerSymbol.js\";import S from\"../symbols/TextSymbol.js\";import\"../symbols.js\";import h from\"../Graphic.js\";import O from\"./Layer.js\";import{MultiOriginJSONMixin as j}from\"../core/MultiOriginJSONSupport.js\";import{canProjectWithoutEngine as w,isLoaded as N,load as L,project as v}from\"../geometry/projection.js\";import{OperationalLayer as J}from\"./mixins/OperationalLayer.js\";import{normalizeCentralMeridian as x}from\"../geometry/support/normalizeUtils.js\";import T from\"./support/Field.js\";import{BlendLayer as C}from\"./mixins/BlendLayer.js\";import{PortalLayer as M}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as I}from\"./mixins/ScaleRangeLayer.js\";import R from\"./FeatureLayer.js\";import E from\"./GraphicsLayer.js\";import{findLastObjectIdFromFeatures as D}from\"./graphics/objectIdUtils.js\";function F(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}const G=new T({name:\"OBJECTID\",alias:\"OBJECTID\",type:\"oid\",nullable:!1,editable:!1}),_=new T({name:\"title\",alias:\"Title\",type:\"string\",nullable:!0,editable:!0});let P=class extends E{constructor(){super(...arguments),this.visibilityMode=\"inherited\"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on(\"after-add\",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on(\"after-remove\",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};e([l({readOnly:!0})],P.prototype,\"sublayers\",null),e([l()],P.prototype,\"layer\",void 0),e([l({readOnly:!0})],P.prototype,\"visibilityMode\",void 0),P=e([s(\"esri.layers.MapNotesLayer.MapNotesSublayer\")],P);const k=[{geometryType:\"polygon\",geometryTypeJSON:\"esriGeometryPolygon\",layerId:\"polygonLayer\",title:\"Polygons\",identifyingSymbol:(new g).toJSON()},{geometryType:\"polyline\",geometryTypeJSON:\"esriGeometryPolyline\",layerId:\"polylineLayer\",title:\"Polylines\",identifyingSymbol:(new d).toJSON()},{geometryType:\"multipoint\",geometryTypeJSON:\"esriGeometryMultipoint\",layerId:\"multipointLayer\",title:\"Multipoints\",identifyingSymbol:(new b).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"pointLayer\",title:\"Points\",identifyingSymbol:(new b).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"textLayer\",title:\"Text\",identifyingSymbol:(new S).toJSON()}];let z=class extends(C(I(J(M(j(O)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType=\"notes\",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.spatialReference=u.WGS84,this.sublayers=new f(k.map((e=>new P({id:e.layerId,title:e.title,layer:this})))),this.title=\"Map Notes\",this.type=\"map-notes\",this.visibilityMode=\"inherited\"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!F(t)&&\"portal-item\"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,r){if(!F(t))return null;const o=t.layers.map((e=>{const t=new R;return t.read(e,r),t}));return new f({items:o})}readLegacyfeatureCollectionJSON(e,r){return F(r)?t(r.featureCollection):null}readFullExtent(e,t){if(!t.layers.length)return new c({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:u.WGS84});const r=u.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{const r=t.layerDefinition.extent;return r?c.fromJSON(r).union(e):e}),new c({spatialReference:r}))}readMinScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer(\"multipointLayer\")}get pointLayer(){return this._findSublayer(\"pointLayer\")}get polygonLayer(){return this._findSublayer(\"polygonLayer\")}get polylineLayer(){return this._findSublayer(\"polylineLayer\")}readSpatialReference(e,t){return t.layers.length?u.fromJSON(t.layers[0].layerDefinition.spatialReference):u.WGS84}readSublayers(e,t,r){if(F(t))return null;const o=[];for(let l=0;l<t.layers.length;l++){var i;const{layerDefinition:e,featureSet:r}=t.layers[l],a=null!=(i=e.geometryType)?i:r.geometryType,n=k.find((t=>{var r,o,i;return a===t.geometryTypeJSON&&(null==(r=e.drawingInfo)||null==(o=r.renderer)||null==(i=o.symbol)?void 0:i.type)===t.identifyingSymbol.type}));if(n){const t=new P({id:n.layerId,title:e.name,layer:this,graphics:r.features.map((({geometry:e,symbol:t,attributes:r,popupInfo:o})=>h.fromJSON({attributes:r,geometry:e,symbol:t,popupTemplate:o})))});o.push(t)}}return new f(o)}writeSublayers(e,t,l,a){const{minScale:n,maxScale:s}=this;if(o(e))return;const p=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing){var m;if(p)null==a||null==(m=a.messages)||m.push(new y(\"map-notes-layer:editing-not-supported\",\"New map notes cannot be added to this layer\"));return}const u=[];let c=this.spatialReference.toJSON();e:for(const r of e)for(const e of r.graphics)if(i(e.geometry)){c=e.geometry.spatialReference.toJSON();break e}for(const r of k){const t=e.find((e=>r.layerId===e.id));this._writeMapNoteSublayer(u,t,r,n,s,c,a)}r(\"featureCollection.layers\",u,t)}get textLayer(){return this._findSublayer(\"textLayer\")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}read(e,r){\"featureCollection\"in e&&(e=t(e),Object.assign(e,e.featureCollection)),super.read(e,r)}async beforeSave(){if(o(this.sublayers))return;let e=null;const t=[];for(const o of this.sublayers)for(const r of o.graphics)if(i(r.geometry)){const o=r.geometry;e?m(o.spatialReference,e)||(w(o.spatialReference,e)||N()||await L(),r.geometry=v(o,e)):e=o.spatialReference,t.push(r)}const r=await x(t.map((e=>e.geometry)));t.forEach(((e,t)=>e.geometry=r[t]))}_findSublayer(e){var t,r;return o(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,r,i,l,a,n,s){const p=[];if(!o(r)){for(const e of r.graphics)this._writeMapNote(p,e,i.geometryType,s);this._normalizeObjectIds(p,G),e.push({layerDefinition:{name:r.title,drawingInfo:{renderer:{type:\"simple\",symbol:t(i.identifyingSymbol)}},geometryType:i.geometryTypeJSON,minScale:l,maxScale:a,objectIdField:\"OBJECTID\",fields:[G.toJSON(),_.toJSON()],spatialReference:n},featureSet:{features:p,geometryType:i.geometryTypeJSON}})}}_writeMapNote(e,t,r,l){if(o(t))return;const{geometry:a,symbol:s,popupTemplate:p}=t;if(o(a))return;var y,m;if(a.type!==r)return void(null==l||null==(y=l.messages)||y.push(new n(\"map-notes-layer:invalid-geometry-type\",`Geometry \"${a.type}\" cannot be saved in \"${r}\" layer`,{graphic:t})));if(o(s))return void(null==l||null==(m=l.messages)||m.push(new n(\"map-notes-layer:no-symbol\",\"Skipping map notes with no symbol\",{graphic:t})));const u={attributes:{...t.attributes},geometry:a.toJSON(),symbol:s.toJSON()};i(p)&&(u.popupInfo=p.toJSON()),e.push(u)}_normalizeObjectIds(e,t){const r=t.name;let o=D(r,e)+1;const i=new Set;for(const l of e){l.attributes||(l.attributes={});const{attributes:e}=l;(null==e[r]||i.has(e[r]))&&(e[r]=o++),i.add(e[r])}}};e([l({readOnly:!0})],z.prototype,\"capabilities\",void 0),e([a([\"portal-item\",\"web-map\"],\"capabilities\",[\"layers\"])],z.prototype,\"readCapabilities\",null),e([l({readOnly:!0})],z.prototype,\"featureCollections\",void 0),e([a([\"web-map\",\"portal-item\"],\"featureCollections\",[\"layers\"])],z.prototype,\"readFeatureCollections\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{enabled:!0,target:\"featureCollection\"}}}}})],z.prototype,\"featureCollectionJSON\",void 0),e([a([\"web-map\",\"portal-item\"],\"featureCollectionJSON\",[\"featureCollection\"])],z.prototype,\"readLegacyfeatureCollectionJSON\",null),e([l({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],z.prototype,\"featureCollectionType\",void 0),e([l({json:{write:!1}})],z.prototype,\"fullExtent\",void 0),e([a([\"web-map\",\"portal-item\"],\"fullExtent\",[\"layers\"])],z.prototype,\"readFullExtent\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{target:\"featureCollection.showLegend\",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],z.prototype,\"legendEnabled\",void 0),e([l({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([l({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"minScale\",void 0),e([a([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\"])],z.prototype,\"readMinScale\",null),e([l({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"maxScale\",void 0),e([a([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\"])],z.prototype,\"readMaxScale\",null),e([l({readOnly:!0})],z.prototype,\"multipointLayer\",null),e([l({value:\"ArcGISFeatureLayer\",type:[\"ArcGISFeatureLayer\"]})],z.prototype,\"operationalLayerType\",void 0),e([l({readOnly:!0})],z.prototype,\"pointLayer\",null),e([l({readOnly:!0})],z.prototype,\"polygonLayer\",null),e([l({readOnly:!0})],z.prototype,\"polylineLayer\",null),e([l({type:u})],z.prototype,\"spatialReference\",void 0),e([a([\"web-map\",\"portal-item\"],\"spatialReference\",[\"layers\"])],z.prototype,\"readSpatialReference\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],z.prototype,\"sublayers\",void 0),e([a(\"web-map\",\"sublayers\",[\"layers\"])],z.prototype,\"readSublayers\",null),e([p(\"web-map\",\"sublayers\")],z.prototype,\"writeSublayers\",null),e([l({readOnly:!0})],z.prototype,\"textLayer\",null),e([l()],z.prototype,\"title\",void 0),e([l({readOnly:!0,json:{read:!1}})],z.prototype,\"type\",void 0),z=e([s(\"esri.layers.MapNotesLayer\")],z);var B=z;export default B;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import s from\"./Layer.js\";import t from\"../symbols/support/ElevationInfo.js\";import{BlendLayer as i}from\"./mixins/BlendLayer.js\";import{ScaleRangeLayer as p}from\"./mixins/ScaleRangeLayer.js\";import a,{graphicsCollectionProperty as c}from\"../support/GraphicsCollection.js\";let n=class extends(i(p(s))){constructor(r){super(r),this.elevationInfo=null,this.graphics=new a,this.screenSizePerspectiveEnabled=!0,this.type=\"graphics\",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(r){return this.graphics.add(r),this}addMany(r){return this.graphics.addMany(r),this}removeAll(){return this.graphics.removeAll(),this}remove(r){this.graphics.remove(r)}removeMany(r){this.graphics.removeMany(r)}on(r,e){return super.on(r,e)}graphicChanged(r){this.emit(\"graphic-update\",r)}};r([e({type:t})],n.prototype,\"elevationInfo\",void 0),r([e(c())],n.prototype,\"graphics\",void 0),r([e({type:[\"show\",\"hide\"]})],n.prototype,\"listMode\",void 0),r([e()],n.prototype,\"screenSizePerspectiveEnabled\",void 0),r([e({readOnly:!0})],n.prototype,\"type\",void 0),r([e({constructOnly:!0})],n.prototype,\"internal\",void 0),n=r([o(\"esri.layers.GraphicsLayer\")],n);var h=n;export default h;\n"],"sourceRoot":""}