{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":["o","e","super","this","layerViews","handles","add","on","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","layer","watch","_visibilityModeHandler","_visibleHandler","target","added","toArray","removed","moved","_set","_get","some","updating","_isOverridden","find","i","layers","_findLayerViewForLayer","visible","_hasLayerViewVisibleOverrides","_firstVisibleOnLayerOrder","length","getItemAt","forEach","remove","map","_layerViewVisibleHandler","s","_enforceVisibility","_updateUpdating","visibilityMode","_enforceExclusiveVisibility","notifyChange","cast","prototype","h"],"mappings":"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","file":"js/chunk-2d0cc20b.989baec2.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Collection.js\";import{referenceSetter as t,castForReferenceSetter as a}from\"../../core/collectionUtils.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.layerViews=new r}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",t(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([i({cast:a})],o.prototype,\"layerViews\",null),e([i()],o.prototype,\"view\",void 0),o=e([s(\"esri.views.layers.GroupLayerView\")],o);var h=o;export default h;\n"],"sourceRoot":""}