{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["d","n","minX","minY","maxX","maxY","t","i","s","search","e","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","get","delete","remove","set","push","l","r","type","toJSON","f","spatialReference","h","isWebMercator","I","g","b","plus180Line","v","minus180Line","J","N","y","points","map","p","M","m","xmin","ymin","xmax","ymax","u","j","cut","extent","valid","rings","isArray","x","o","a","c","frameId","frameIds","Math","ceil","abs","closed","minPts","paths","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","super","constraint","coordinateHelper","edgeStart","edgeEnd","start","end","targetPoint","fromPoint","target","geometryInfo","_boundsStore","_featuresById","_markedIds","Set","events","featureAdapter","geometryType","numFeatures","min","max","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","getLogger","error","feature","add","displayId","onFeatureAdd","onFeatureRemove","O","availability","sources","multipoint","point","polygon","polyline","loadedWkids","loadedWkts","pendingAdds","updatingHandles","updating","layerSource","layer","task","abort","mapSources","destroySource","handles","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","queryEngine","executeQueryForSnapping","toPoint","distance","types","query","createQuery","where","then","candidates","flat","property","graphic","removed","added","needsInitializeProjection","uid","createPendingAdd","async","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","wkid","wkt","visible","fromExtent","ensureSource","createOptimizedFeature","featureStore","createSource","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","removeById","destroy","constructOnly","prototype","readOnly","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","_initFormat","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","deallocator","_","w","arguments"],"mappings":"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","file":"js/chunk-59bef320.21ed52d5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getInfo as n}from\"./spatialReferenceUtils.js\";import{extentIntersectsPolyline as t}from\"./intersects.js\";import{getBoundsXY as i}from\"./boundsUtils.js\";import{isPoint as m,isMultipoint as s,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{create as r}from\"./aaBoundingRect.js\";import{cutParams as a,getGeometryParts as f,offsetMagnitude as c}from\"./normalizeUtilsCommon.js\";function l(r){if(!r)return null;if(\"mesh\"===r.type)return r.toJSON();let f=null;const l=r.spatialReference,h=n(l);if(!h)return r.toJSON();const d=l.isWebMercator?102100:4326,I=a[d].maxX,g=a[d].minX,b=a[d].plus180Line,v=a[d].minus180Line;let J;const N=r.toJSON();if(m(N))J=y(N,I,g);else if(s(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;i(n,N);const m={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},s=c(m.xmin,g)*(2*I),e=0===s?N:u(N,s);m.xmin+=s,m.xmax+=s,t(m,b)&&m.xmax!==I||t(m,v)&&m.xmin!==g?f=e:J=e}else J=r.toJSON();if(null!==f){return(new j).cut(f,I)}return J}function u(n,t){const i=f(n);for(const m of i)for(const n of m)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const m=n[0];if(m>t){const i=c(m,t);n[0]=m+i*(-2*t)}else if(m<i){const t=c(m,i);n[0]=m+t*(-2*i)}}else{const m=n.x;if(m>t){const i=c(m,t);n.x+=i*(-2*t)}else if(m<i){const t=c(m,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:m,ymax:s}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:m,xmax:f,ymax:s},t={xmin:a,ymin:m,xmax:x<o?u:c,ymax:s},e={xmin:0,ymin:m,xmax:f,ymax:s},r={xmin:a,ymin:m,xmax:0,ymax:s},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:m,xmax:f,ymax:s},frameIds:[l]},{extent:{xmin:a,ymin:m,xmax:u,ymax:s},frameIds:[p]}):i.push({extent:{xmin:c,ymin:m,xmax:u,ymax:s},frameIds:[l]});return i}function d(n,t){const[i,m]=t.valid,s=2*m;let e,x=0;return n>m?(e=Math.ceil(Math.abs(n-m)/s),n-=e*s,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/s),n+=e*s,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:m,xmax:s,ymax:e}=t;return g(n,i,m)&&g(n,i,e)&&g(n,s,e)&&g(n,s,m)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const m=i.length,s=-2*t;for(let e=0;e<m;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+s,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=r();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{removeUnordered as i}from\"../../../../core/arrayUtils.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import p from\"../../../../core/Accessor.js\";import d from\"../../../../geometry/Point.js\";import c from\"../../../../geometry/Polygon.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../../geometry/support/typeUtils.js\";import{initializeProjection as u,canProjectWithoutEngine as h,project as m}from\"../../../../geometry/projection.js\";import y from\"../../../../layers/graphics/OptimizedFeature.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import{HandleOwnerMixin as f}from\"../../../../core/HandleOwner.js\";import{sortCandidatesInPlace as S}from\"../snappingUtils.js\";import{normalizeCentralMeridianSync as j}from\"../../../../geometry/support/normalizeUtilsSync.js\";import w from\"../../../../layers/graphics/data/FeatureStore.js\";import v from\"../../../../layers/graphics/data/QueryEngine.js\";import{convertSnappingCandidate as k}from\"./queryEngineUtils.js\";let O=class extends(f(p)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,r){const s=(await a(this.mapSources((s=>s.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.toPoint(e.point,new d).toJSON(),distance:e.distance,types:e.types,query:t(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},r).then((({candidates:e})=>e)))))).flat().map((t=>k(t,e.coordinateHelper)));return S(e.point,s),{candidates:s}}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],s=new Map;for(const o of e)r(o.geometry)||(this.needsInitializeProjection(o.geometry.spatialReference)?(t.push(o.geometry.spatialReference),s.set(o.uid,o)):this.add(o));this.createPendingAdd(t,s)}createPendingAdd(e,t){if(!e.length)return;const r=n((async r=>{await u(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(r.promise);const s={task:r,graphics:t},o=()=>i(this.pendingAdds,s);r.promise.then(o,o),this.pendingAdds.push(s)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(r(e.geometry)||!e.visible)return;let s=e.geometry;if(\"mesh\"===s.type)return;\"extent\"===s.type&&(s=c.fromExtent(s));const o=this.ensureSource(s.type);if(r(o))return;const i=this.createOptimizedFeature(e.uid,s);t(i)&&o.featureStore.add(i)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!h(e,this.spatialReference))}createOptimizedFeature(e,t){const r=m(j(t),this.spatialReference);return r?new y(g(r,!1,!1),{[b]:e},null,e):null}ensureSource(e){const r=this.sources[e];if(t(r))return r;const s=this.createSource(e);return this.sources[e]=s,s}createSource(e){const r=l.toJSON(e),s=new w({geometryType:r,hasZ:!1,hasM:!1});return{featureStore:s,queryEngine:new v({featureStore:s,fields:[{name:b,type:\"esriFieldTypeOID\",alias:b}],geometryType:r,hasM:!1,hasZ:!1,objectIdField:b,spatialReference:this.spatialReference,scheduler:t(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:r,polygon:s,polyline:o,multipoint:i}=this.sources,a=[];return t(r)&&a.push(e(r)),t(s)&&a.push(e(s)),t(o)&&a.push(e(o)),t(i)&&a.push(e(i)),a}};e([s({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([s({constructOnly:!0})],O.prototype,\"layerSource\",void 0),e([s({constructOnly:!0})],O.prototype,\"view\",void 0),e([s({readOnly:!0})],O.prototype,\"updating\",null),e([s({readOnly:!0})],O.prototype,\"availability\",void 0),O=e([o(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],O);const b=\"OBJECTID\";export{O as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n"],"sourceRoot":""}