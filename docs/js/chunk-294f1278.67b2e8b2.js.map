{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/symbols/cim/SDFHelper.js","webpack:///./node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","webpack:///./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","webpack:///./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","webpack:///./node_modules/@arcgis/core/symbols/cim/Rasterizer.js"],"names":["r","t","type","n","symbolLayers","length","markerGraphics","o","geometry","l","symbol","geom","asFill","e","rings","paths","xmin","ymin","xmax","ymax","i","s","f","m","a","c","u","y","Math","floor","h","max","x","round","M","g","p","d","width","height","push","Array","sqrt","Uint8Array","getLogger","S","toLowerCase","indexOf","style","weight","v","underline","strikethrough","b","N","markerPlacement","angleToLine","async","k","error","primitiveOverrides","valueExpressionInfo","expression","spatialReference","fields","then","primitiveName","propertyName","value","Promise","all","O","getSize","angleAlignment","enable","findApplicableOverrides","C","P","L","X","I","w","z","J","color","JSON","stringify","toString","templateHash","materialHash","cim","materialOverrides","colorLocked","F","j","angle","offsetX","offsetY","scaleX","effects","tintColor","url","colorSubstitutions","rotation","filter","separation","lineSymbol","W","capStyle","joinStyle","miterLimit","isOutline","cap","join","referenceWidth","zOrder","A","name","isDashed","stepY","gridAngle","size","scaleSymbolsProportionally","alignment","anchorPoint","isAbsoluteAnchorPoint","anchorPointUnits","outlineColor","outlineWidth","frameHeight","rotateClockwise","referenceSize","sizeRatio","frame","Y","H","fontStyleName","font","family","fontFamilyName","decoration","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","R","Number","$","fontName","horizontalAlignment","verticalAlignment","text","textString","textCase","outlineSize","getTextureAnchor","billboardMode3D","depth3D","respectFrame","clippingPath","parseInt","substr","NaN","toRgba","call","$view","geometryType","fn","buildOverrideKey","T","parse","applyOverrides","slice","this","_textRasterizationCanvas","document","createElement","getContext","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","haloStyle","textAlign","renderHalo","globalCompositeOperation","fillText","getImageData","data","premultiplyColors","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","drawImage","lineWidth","strokeText","textBaseline","measureText","cos","PI","sin","Legend","Preview","targetSize","scaleFactor","fill","legend","canvasPaths","preview","stroke","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","analyzeCIMSymbol","attributes","rasterizeCIMSymbol","fetchPictureMarkerResource","get","responseType","signal","set","_getRasterizedResource","rotateClockWise","rasterizedResource","getSymbolImage","min","createImageData","Uint8ClampedArray","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","putImageData","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","rasterizeJSONResource","_rasterizeTextResource","preserveOutlineWidth","has","window","devicePixelRatio","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","_imageTo32Array","Object","keys","map","alias","_rasterizationCanvas","rasterizeSimpleFill","rasterizeSimpleLine","fromSimpleMarker","fromCIMHatchFill","fromCIMInsidePolygon","rasterize","ImageData","setAttribute","oldColor","newColor"],"mappings":"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","file":"js/chunk-294f1278.67b2e8b2.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import n from\"./Rect.js\";import{packFloatRGBA as o}from\"./packingUtils.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let o=1/0,r=-1/0,l=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new n(o,l,r-o,e-l)}function s(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function f(n){return n?n.rings?s(n.rings):n.paths?s(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function m(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const m=s-e,a=f-i,c=128,u=1,y=Math.floor(.5*(.5*c-u)),h=(c-2*(y+u))/Math.max(m,a),x=Math.round(m*h)+2*y,M=Math.round(a*h)+2*y;let g=1;if(n){g=M/h/(n.ymax-n.ymin)}let p=0,d=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);p=r.x/(o*t),d=r.y/o}}else p=r.x,d=r.y;p=.5*(n.xmax+n.xmin)+p*(n.xmax-n.xmin),d=.5*(n.ymax+n.ymin)+d*(n.ymax-n.ymin),p-=e,d-=i,p*=h,d*=h,p+=y,d+=y;return[g,p/x-.5,-(d/M-.5)]}function a(t){const n=e(t.geom),o=i(n),r=128,l=1,s=Math.floor(.5*(.5*r-l)),f=(r-2*(s+l))/Math.max(o.width,o.height),m=Math.round(o.width*f)+2*s,a=Math.round(o.height*f)+2*s,h=[];for(const e of n)if(e&&e.length>1){const n=[];for(const t of e){let[r,l]=t;r-=o.x,l-=o.y,r*=f,l*=f,r+=s-.5,l+=s-.5,n.push([r,l])}if(t.asFill){const t=n.length-1;n[0][0]===n[t][0]&&n[0][1]===n[t][1]||n.push(n[0])}h.push(n)}const x=c(h,m,a,s);return t.asFill&&u(h,m,a,s,x),[y(x,s),m,a]}function c(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=u;r<y;r++)for(let l=h;l<x;l++){let s,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(s=t[0],f=t[1]):m>p?(s=i[0],f=i[1]):(m/=p,s=t[0]+m*M,f=t[1]+m*g);const a=(r-s)*(r-s)+(l-f)*(l-f),c=(o-l-1)*n+r;a<e[c]&&(e[c]=a)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function u(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=u;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<u;++t)l[i+t]=-l[i+t]}}}}function y(t,n){const r=2*n,l=t.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const n=.5-t[i]/r;o(n,e,4*i)}return e}export{a as buildSDF,f as getExtent,r as getSDFInfo,m as getSDFMetrics,l as getSDFSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import t from\"../../core/Logger.js\";import{createRendererExpression as i,ArcadeExpression as o}from\"../../support/arcadeOnDemand.js\";import r from\"../../Color.js\";import{pt2px as n}from\"../../core/screenUtils.js\";import{fromCIMColor as a,_adjustTextCase as l}from\"./utils.js\";import s from\"../../views/2d/arcade/callExpressionWithFeature.js\";import{CIMSymbolHelper as c,OverrideHelper as f}from\"./CIMSymbolHelper.js\";import{getExtent as m,getSDFMetrics as p}from\"./SDFHelper.js\";const u=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function y(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;case\"Round\":default:return 1}}function h(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;case\"Round\":default:return 1}}function g(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function d(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function S(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function v(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function b(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function N(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function k(e,t,o,r){const n=o||[];if(!e)return n;let a,l;const s={};if(\"CIMSymbolReference\"!==e.type)return u.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const o of l){const r=o.valueExpressionInfo;if(r&&t){const n=r.expression,a=i(n,t.spatialReference,t.fields).then((e=>{e&&b(s,o.primitiveName,o.propertyName,e)}));e.push(a)}else null!=o.value&&b(s,o.primitiveName,o.propertyName,o.value)}await Promise.all(e)}switch(a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":O(a,l,s,t,n,r)}return n}function O(e,t,i,o,r,n){if(!e)return;const a=e.symbolLayers;if(!a)return;let l;const s=c.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(l=1);let m=a.length;for(;m--;){const c=a[m];if(!c||!1===c.enable)continue;const p=[];switch(f.findApplicableOverrides(c,t,p),c.type){case\"CIMSolidFill\":C(c,i,p,o,r);break;case\"CIMPictureFill\":P(c,i,p,o,r);break;case\"CIMHatchFill\":L(c,i,p,o,r);break;case\"CIMGradientFill\":M(c,i,p,o,r);break;case\"CIMSolidStroke\":X(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMPictureStroke\":I(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMGradientStroke\":x(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMCharacterMarker\":if(w(c,i,p,o,r))break;break;case\"CIMPictureMarker\":if(w(c,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=N(c)),z(c,i,p,o,r,l,s);break;case\"CIMVectorMarker\":if(w(c,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=N(c)),J(c,i,p,o,r,l,s,n);break;default:u.error(\"Cannot analyze CIM layer\",c.type)}}}function C(t,i,o,r,n){const l=t.primitiveName,s=a(t.color),c=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:F(l,i,\"Color\",r,s,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t.effects})}function P(t,i,o,r,n){const l=t.primitiveName,s=t.tintColor?a(t.tintColor):{r:255,g:255,b:255,a:1},c=e(JSON.stringify(t)).toString(),f=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:()=>f,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:F(l,i,\"TintColor\",r,s,j),height:F(l,i,\"Height\",r,t.height),scaleX:F(l,i,\"ScaleX\",r,t.scaleX),angle:F(l,i,\"Rotation\",r,t.rotation),offsetX:F(l,i,\"OffsetX\",r,t.offsetX),offsetY:F(l,i,\"OffsetY\",r,t.offsetY)})}function L(t,i,o,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===a.indexOf(e.propertyName))),s=t.primitiveName,c=e(JSON.stringify(t)).toString(),f=e(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:W(f,i,l,r),cim:t,materialOverrides:l,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:F(s,i,\"Separation\",r,t.separation),scaleX:1,angle:F(s,i,\"Rotation\",r,t.rotation),offsetX:F(s,i,\"OffsetX\",r,t.offsetX),offsetY:F(s,i,\"OffsetY\",r,t.offsetY)})}function M(t,i,o,r,n){const a=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:a,materialHash:0===o.length?a:W(a,i,o,r),cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function X(t,i,o,r,n,l,s){const c=e(JSON.stringify(t)).toString(),f=t.primitiveName,m=a(t.color),p=void 0!==t.width?t.width:4,u=y(t.capStyle),g=h(t.joinStyle),d=t.miterLimit;n.push({type:\"line\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:l,colorLocked:t.colorLocked,effects:t.effects,color:F(f,i,\"Color\",r,m,j),width:F(f,i,\"Width\",r,p),cap:F(f,i,\"CapStyle\",r,u),join:F(f,i,\"JoinStyle\",r,g),miterLimit:F(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:A(t.name),isDashed:!1})}function I(t,i,o,r,n,l,s){const c=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),f=t.primitiveName,m=a(t.tintColor),p=void 0!==t.width?t.width:4,u=y(t.capStyle),g=h(t.joinStyle),d=t.miterLimit,S=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:S,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:l,colorLocked:t.colorLocked,effects:t.effects,color:F(f,i,\"TintColor\",r,m,j),width:F(f,i,\"Width\",r,p),cap:F(f,i,\"CapStyle\",r,u),join:F(f,i,\"JoinStyle\",r,g),miterLimit:F(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:A(t.name),isDashed:!1})}function x(t,i,o,r,n,a,l){const s=t.primitiveName,c=void 0!==t.width?t.width:4,f=y(t.capStyle),m=h(t.joinStyle),p=t.miterLimit,u=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:u,materialHash:0===o.length?u:W(u,i,o,r),cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},width:F(s,i,\"Width\",r,c),cap:F(s,i,\"CapStyle\",r,f),join:F(s,i,\"JoinStyle\",r,m),miterLimit:F(s,i,\"MiterLimit\",r,p),referenceWidth:l,zOrder:A(t.name),isDashed:!1})}function w(t,i,o,r,n){const a=t.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===s.indexOf(e.propertyName))),f=e(JSON.stringify(t)).toString();return n.push({type:\"fill\",templateHash:f,materialHash:0===o.length?f:W(f,i,c,r),cim:t,materialOverrides:c,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,i,\"StepY\",r,l.stepY),scaleX:1,angle:F(l.primitiveName,i,\"GridAngle\",r,l.gridAngle),offsetX:F(l.primitiveName,i,\"OffsetX\",r,l.offsetX),offsetY:F(l.primitiveName,i,\"OffsetY\",r,l.offsetY)}),!0}function z(t,i,o,r,n,l,s){const c=t.primitiveName,f=t.size,m=t.scaleX,p=t.rotation,u=t.offsetX,y=t.offsetY,h=a(t.tintColor),g=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();let d=!1,S=\"\";for(const e of o)e.primitiveName===c&&(void 0!==e.value?S+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(d=!0));n.push({type:\"marker\",templateHash:e(JSON.stringify(t)+S).toString(),materialHash:d?()=>g:g,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:!1,alignment:l,size:F(c,i,\"Size\",r,f),scaleX:F(c,i,\"ScaleX\",r,m),rotation:F(c,i,\"Rotation\",r,p),offsetX:F(c,i,\"OffsetX\",r,u),offsetY:F(c,i,\"OffsetY\",r,y),color:F(c,i,\"TintColor\",r,h,j),anchorPoint:t.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:t.markerPlacement})}function J(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":Y(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":H(e,f,t,i,o,r,n,a,c)}}}function H(t,i,o,r,n,s,m,p,u){const y=[];f.findApplicableOverrides(i,r,y);const h=i.geometry;if(!(\"x\"in h)||!(\"y\"in h))return;const b=i.symbol,N=v(b),k=S(b.fontStyleName);b.font={family:b.fontFamilyName,decoration:N,...k};const O=t.frame,C=h.x-.5*(O.xmin+O.xmax),P=h.y-.5*(O.ymin+O.ymax),L=t.size/u,M=t.primitiveName,X=(b.height||0)*L,I=b.angle||0,x=((b.offsetX||0)+C)*L,w=((b.offsetY||0)+P)*L,z=a(c.getFillColor(b));let J=a(c.getStrokeColor(b)),H=c.getStrokeWidth(b);H||(J=a(c.getFillColor(b.haloSymbol)),H=b.haloSize*L);let Y=\"\";for(const e of r)e.primitiveName===M&&void 0!==e.value&&(Y+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const R=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),$=e(JSON.stringify(i)+R+Y).toString();s.push({type:\"text\",templateHash:$,materialHash:()=>e(JSON.stringify(b.font)).toString(),cim:b,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,alignment:m,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,fontName:b.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:F(M,o,\"Size\",n,X),angle:F(M,o,\"Rotation\",n,I),offsetX:F(M,o,\"OffsetX\",n,x),offsetY:F(M,o,\"OffsetY\",n,w),horizontalAlignment:g(b.horizontalAlignment),verticalAlignment:d(b.verticalAlignment),text:F(i.primitiveName,o,\"TextString\",n,i.textString,l,b.textCase),color:z,outlineColor:J,outlineSize:H,referenceSize:p,sizeRatio:1,markerPlacement:t.markerPlacement})}function Y(t,i,o,r,n,l,s,f,u,y){const h=i.symbol,g=i.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void R(t,i,r,o,n,l,s,f,u);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=m(g);if(!h)continue;const[d,S,v]=p(h,t.frame,t.size,t.anchorPoint,\"Relative\"!==t.anchorPointUnits),b=\"CIMSolidFill\"===y.type,N={type:\"sdf\",geom:g,asFill:b},k=t.primitiveName,O=t.size,C=t.rotation||0,P=t.offsetX,L=t.offsetY,M=y.primitiveName,X=a(b?c.getFillColor(y):c.getStrokeColor(y)),I=b?{r:0,g:0,b:0,a:0}:a(c.getStrokeColor(y)),x=c.getStrokeWidth(y);if(!b&&!x)break;let w=!1,z=\"\";for(const e of o)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...t,markerGraphics:null}),H=e(JSON.stringify(N)).toString(),Y={type:\"marker\",templateHash:e(JSON.stringify(i)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:N,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:F(t.primitiveName,r,\"Size\",n,O),rotation:F(t.primitiveName,r,\"Rotation\",n,C),offsetX:F(t.primitiveName,r,\"OffsetX\",n,P),offsetY:F(t.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:u,rotateClockwise:t.rotateClockwise,referenceSize:f,sizeRatio:d,color:F(M,r,\"Color\",n,X,j),outlineColor:F(M,r,\"Color\",n,I,j),outlineWidth:F(M,r,\"Width\",n,x),markerPlacement:t.markerPlacement};l.push(Y);break}default:R(t,i,r,o,n,l,s,f,u)}}}function R(t,i,o,r,a,l,s,f,m){const p=$(t,i);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=r.filter((e=>e.primitiveName!==t.primitiveName||-1===y.indexOf(e.propertyName)));let h=\"\";for(const e of r)void 0!==e.value&&(h+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const[g,d,S]=c.getTextureAnchor(p),v=t.primitiveName,b=t.rotation||0,N=t.offsetX||0,k=t.offsetY||0,O=e(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:W(O,o,u,a),cim:p,materialOverrides:u,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:t.size,rotation:F(v,o,\"Rotation\",a,b),offsetX:F(v,o,\"OffsetX\",a,N),offsetY:F(v,o,\"OffsetY\",a,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:f,sizeRatio:S/n(t.size),markerPlacement:t.markerPlacement};l.push(C)}function $(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}function A(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function j(e){if(!e||0===e.length)return null;const t=new r(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function F(e,t,i,r,n,a,l){const c=t[e];if(c){const e=c[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof o)return(t,i,o)=>{let c=s(e,t,{$view:o},r.geometryType,i);return null!==c&&a&&(c=a.call(null,c,l)),null!==c?c:n}}return n}function W(t,i,r,n){for(const e of r){if(e.valueExpressionInfo){const t=i[e.primitiveName]&&i[e.primitiveName][e.propertyName];t instanceof o&&(e.fn=(e,i,o)=>s(t,e,{$view:o},n.geometryType,i))}}return(i,o,n)=>{for(const e of r)e.fn&&(e.value=e.fn(i,o,n));return e(t+f.buildOverrideKey(r)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return f.applyOverrides(i,t),i}export{T as analyzeCIMResource,k as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{getJsonType as r,isPolygon as a,isPolyline as i}from\"../../geometry/support/jsonUtils.js\";import{pt2px as s}from\"../../core/screenUtils.js\";import o from\"../support/Symbol3DAnchorPosition2D.js\";import n from\"../../request.js\";import{createLabelOverrideFunction as c,evaluateValueOrFunction as l,colorToArray as m}from\"./utils.js\";import{scaleCIMMarker as h}from\"../support/cimSymbolUtils.js\";import{analyzeCIMSymbol as f,analyzeCIMResource as g}from\"./cimAnalyzer.js\";import y from\"./Rasterizer.js\";import{TextRasterizer as u}from\"./TextRasterizer.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,r)=>{if(e&&e.targetSize){let a;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/s(t)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new y,this._textRasterizer=new u,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,a,i,s,o,n,c){i=i||(t?null!=t.centroid?\"esriGeometryPolygon\":r(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,a,i,c);return this.rasterizeCIMSymbol(l,t,i,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],n=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await f(e.data,n,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=c(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(e,t){const r=e.materialHash;if(!this._pictureMarkerCache.get(r)){const a=(await n(e.cim.url,{responseType:\"image\",signal:t&&t.signal})).data;this._pictureMarkerCache.set(r,a)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,m=e.anchorX||0,h=e.anchorY||0,f=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=l(n.offsetX,t,i,s)*e||0,y=l(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=l(n.rotation,t,i,s)||0,f=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=l(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":m=-.5;break;case\"right\":m=.5;break;default:m=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:m,anchorY:h,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let a=0,i=0,n=0,c=0;const l=[];for(let o=0;o<e.length;o++){const t=e[o],m=t.rasterizedResource;if(!m)continue;const h=m.size,f=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=s(f)-h[0]*(.5+y),C=s(g)-h[1]*(.5+u),I=M+h[0],z=C+h[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}a=M<a?M:a,i=C<i?C:i,n=I>n?I:n,c=z>c?z:c;const P=r.createImageData(m.size[0],m.size[1]);P.data.set(new Uint8ClampedArray(m.image.buffer));const x={offsetX:f,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};l.push(x)}t.width=n-a,t.height=c-i;const m=-a,h=c;for(let o=0;o<l.length;o++){const e=l[o],t=this._imageDataToCanvas(e.rasterizedImage),a=e.rasterizedImage.width,i=e.rasterizedImage.height,n=m-a*(.5+e.anchorX),c=h-i*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;r.save(),r.translate(s(e.offsetX),-s(e.offsetY)),r.translate(m,h),r.rotate(a),r.translate(-m,-h),r.drawImage(t,n,c),r.restore()}else r.drawImage(t,n+s(e.offsetX),c-s(e.offsetY))}const f=new o({x:m/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(t,r,a,i,s,o){let n,c,m,f;if(\"esriGeometryPolyline\"===a||\"esriGeometryPolygon\"===a){const h=i&&i.style?i.style:p.Legend,f=\"esriGeometryPolyline\"===a?M.stroke[h]:M.fill[h];if(\"line\"===t.type){if(\"CIMSolidStroke\"!==t.cim.type){if(\"CIMPictureStroke\"===t.cim.type){const e=l(t.width,r,s,o),{image:a,width:i,height:n}=this._getPictureResource(t,e);return this._rasterizePictureResource(t,a,i,n,f,e)}return null}({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}else if(\"marker\"===t.type){if(\"CIMPictureMarker\"===t.cim.type)return null;if(\"CIMVectorMarker\"!==t.cim.type)return null;t.cim.offsetX=l(t.offsetX,r,s,o),t.cim.offsetY=l(t.offsetY,r,s,o),t.cim.rotation=l(t.rotation,r,s,o),t.cim.markerPlacement=t.markerPlacement,({analyzedCIM:n}=P(t,r,s,o)),m=e(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,f)}else{if(\"text\"===t.type)return null;if(\"fill\"===t.type){if(\"CIMHatchFill\"===t.cim.type||\"CIMVectorMarker\"===t.cim.type||\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type){const e=t.cim.size||t.cim.height;let a,i,c;if(\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type)({image:a,width:i,height:c}=this._getPictureResource(t,e));else{({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=e.image,i=e.size[0],c=e.size[1]}return this._rasterizePictureResource(t,a,i,c,f,null)}if(\"CIMSolidFill\"!==t.cim.type)return null;({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}}}else{if(\"text\"===t.type)return f=this._rasterizeTextResource(t,r,i,s,o),f;({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=d(i,t,null);if(\"CIMPictureMarker\"===t.cim.type){const a=l(t.size,r,s,o)*e,{image:i,width:n,height:c}=this._getPictureResource(t,a);return f={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:t.anchorPoint?t.anchorPoint.x:0,anchorY:t.anchorPoint?t.anchorPoint.y:0},f}h(n,e,{preserveOutlineWidth:!1}),c=n}m+=a,i&&(m+=JSON.stringify(i));const g=this._resourceCache;return g.has(m)?g.get(m):(f=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),g.set(m,f),f)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=l(e.text,t,a,i);if(!o||0===o.length)return null;const n=l(e.fontName,t,a,i),c=l(e.style,t,a,i),h=l(e.weight,t,a,i),f=l(e.decoration,t,a,i),g=l(e.size,t,a,i)*s,y=l(e.horizontalAlignment,t,a,i),u=l(e.verticalAlignment,t,a,i),p=m(l(e.color,t,a,i)),M=m(l(e.outlineColor,t,a,i)),C={color:p,size:g,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:h,decoration:f},halo:{size:l(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,r,o,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=s(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=s(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(r,o);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:s(e.cim.offsetX)||0,m42:s(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;a(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):i(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const a of d){const e=a?a.length:0;if(e>1){let t=a[0];m.moveTo(s(t[0]),s(t[1]));for(let r=1;r<e;++r)t=a[r],m.lineTo(s(t[0]),s(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?s(t):s(t)/a:r.width,o=t?a>1?s(t)*a:s(t):r.height;return{image:this._imageTo32Array(r,i,o),width:i,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=a(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=g(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{resampleHermite as e}from\"./utils.js\";import r from\"./Rect.js\";import{SymbolHelper as t,CIMSymbolHelper as a}from\"./CIMSymbolHelper.js\";import{getSDFInfo as n,buildSDF as i}from\"./SDFHelper.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===e.type||\"esriSFS\"===e.type){const[r,a,n]=t.rasterizeSimpleFill(this._rasterizationCanvas,e.style,s);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===e.type||\"esriSLS\"===e.type){const[r,a,n]=t.rasterizeSimpleLine(e.style,e.cap);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===e.type||\"esriSMS\"===e.type||\"line-marker\"===e.type?(m=a.fromSimpleMarker(e),f=n(m)):\"CIMHatchFill\"===e.type?(m=a.fromCIMHatchFill(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):e.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===e.markerPlacement.type?(m=a.fromCIMInsidePolygon(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=e,f=n(m)),f&&!o){const[e,r,t]=i(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=a.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(r,t,a,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=r,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");a instanceof ImageData?i.putImageData(a,0,0):(a.setAttribute(\"width\",`${r}px`),a.setAttribute(\"height\",`${t}px`),i.drawImage(a,0,0,r,t));const o=i.getImageData(0,0,r,t),m=new Uint8Array(o.data);if(n)for(const e of n)if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){const[r,t,a,n]=e.oldColor,[i,s,o,l]=e.newColor;if(r===i&&t===s&&a===o&&n===l)continue;for(let e=0;e<m.length;e+=4)r===m[e]&&t===m[e+1]&&a===m[e+2]&&n===m[e+3]&&(m[e]=i,m[e+1]=s,m[e+2]=o,m[e+3]=l)}let l;for(let e=0;e<m.length;e+=4)l=m[e+3]/255,m[e]=m[e]*l,m[e+1]=m[e+1]*l,m[e+2]=m[e+2]*l;let f=m,c=r,h=t;const p=s;if(c>=p||h>=p){const a=c/h;a>1?(c=p,h=Math.round(p/a)):(h=p,c=Math.round(p*a)),f=new Uint8Array(4*c*h);const n=new Uint8ClampedArray(f.buffer);e(m,r,t,n,c,h,!1)}return{size:[r,t],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n"],"sourceRoot":""}