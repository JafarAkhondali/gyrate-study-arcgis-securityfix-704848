{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","webpack:///./node_modules/@arcgis/core/views/support/TileTreeDebugger.js","webpack:///./node_modules/@arcgis/core/core/workers/WorkerHandle.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/tileUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/WorkerTileTreeDebugger.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTilesSimple.js","webpack:///./node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js"],"names":["t","super","constraint","coordinateHelper","edgeStart","edgeEnd","this","start","end","targetPoint","r","n","type","fromPoint","target","objectId","y","b","e","updating","enablePolygons","enableLabels","_polygons","Map","_labels","_enabled","_symbols","map","color","outline","width","update","clear","label","o","lij","toString","loadPriority","getTiles","Array","i","Set","size","keys","forEach","p","delete","g","d","geometry","has","symbol","length","set","push","u","_","f","w","j","view","verticalOffset","screenLength","callout","border","symbolLayers","text","halo","material","haloColor","haloSize","get","s","JSON","stringify","extent","center","graphics","removeMany","addMany","from","values","constructOnly","prototype","readOnly","h","getLogger","_mainMethod","_listeners","_promise","scheduler","then","_thread","hasInitialize","broadcast","_connectListener","close","catch","error","removed","eventName","callback","threadHandle","remove","invokeMethod","getTransferList","invoke","transferList","signal","Promise","reject","all","on","fromAABoundingRect","distance","x","create","a","pointOfInterest","tilesCoveringView","sort","scale","layer","minScale","maxScale","ready","featuresTilingScheme","state","tileInfo","scaleEnabled","spans","lodInfo","getTileCoverage","level","row","colFrom","colTo","l","id","col","normalizeCol","updateTileInfo","handles","add","watch","notifyChange","effectivePointOfInterest","slice","filterTiles","featureTiles","tiles","toArray","tilingScheme","toTileInfo","tileSize","pointsOfInterest","focus","location","addClient","filter","Math","abs","measures","screenRect","visibility","setInterval","fetchDebugInfo","clearInterval","destroy","debugInfo","storedTiles","data","featureCount","pendingTiles","fromExtent","spatialReference","handle","getDebugInfo","availability","workerHandleUpdating","editId","updatingHandles","workerHandle","_set","serviceInfoFromLayer","configuration","convertConfiguration","serviceInfo","toJSON","addPromise","point","toPoint","types","createQuery","result","c","edits","addedFeatures","deletedFeatures","updatedFeatures","customParameters","geometryType","url","parsedUrl","path","fields","capabilities","objectIdField","timeInfo","strategy","origin","lods","resolution","tilesOfInterest","layerSource","resourceController","setup","updateTiles","updateTilesParameters","configure","debug","applyEdits","refresh","candidates","fetchCandidates"],"mappings":"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","file":"js/chunk-6b4e548a.7c8f8fcb.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{lerp as l}from\"../../core/mathUtils.js\";import a from\"../../Color.js\";import n from\"../../symbols/TextSymbol3DLayer.js\";import h from\"../../symbols/PointSymbol3D.js\";import p from\"../../symbols/SimpleFillSymbol.js\";import c from\"../../symbols/TextSymbol.js\";import m from\"../../Graphic.js\";const y=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let b=class extends i{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=y.map((e=>new p({color:[e[0],e[1],e[2],.6],outline:{color:\"black\",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(!this._enabled)return void this.clear();const e=e=>{if(s(e.label))return e.label;let o=e.lij.toString();return s(e.loadPriority)&&(o+=` (${e.loadPriority})`),o},t=this.getTiles(),r=new Array,i=new Set((this._labels.size,this._labels.keys()));t.forEach(((p,y)=>{const b=p.lij.toString();i.delete(b);const g=p.lij[0],d=p.geometry;if(this.enablePolygons&&!this._polygons.has(b)){const e=new m({geometry:d,symbol:this._symbols[g%this._symbols.length]});this._polygons.set(b,e),r.push(e)}if(this.enableLabels){const i=e(p),g=y/(t.length-1),u=l(0,200,g),_=l(20,6,g)/.75,f=s(p.loadPriority)&&p.loadPriority>=t.length,w=new a([u,f?0:u,f?0:u]),j=\"3d\"===this.view.type?()=>new h({verticalOffset:{screenLength:40/.75},callout:{type:\"line\",color:\"white\",border:{color:\"black\"}},symbolLayers:[new n({text:i,halo:{color:\"white\",size:1/.75},material:{color:w},size:_})]}):()=>new c({text:i,haloColor:\"white\",haloSize:1/.75,color:w,size:_});if(this._labels.has(b)){const e=this._labels.get(b),s=j();(o(e.symbol)||JSON.stringify(s)!==JSON.stringify(e.symbol))&&(e.symbol=s)}else{const e=new m({geometry:d.extent.center,symbol:j()});this._labels.set(b,e),r.push(e)}}}));const p=new Array;i.forEach((e=>{this._polygons.has(e)&&(p.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(p.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(p),this.view.graphics.addMany(r)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};e([t({constructOnly:!0})],b.prototype,\"view\",void 0),e([t({readOnly:!0})],b.prototype,\"updating\",void 0),e([t()],b.prototype,\"enabled\",null),b=e([r(\"esri.views.support.TileTreeDebugger\")],b);export{b as TileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../maybe.js\";import t from\"../Logger.js\";import{makeHandle as r}from\"../handleUtils.js\";import{remove as s}from\"../arrayUtils.js\";import{throwIfAborted as i}from\"../promiseUtils.js\";import{open as o}from\"./workers.js\";const h=t.getLogger(\"esri.core.workers.WorkerHandle\");class n{constructor(e,t,r,s={}){this._mainMethod=t,this._listeners=[],this._promise=o(e,{...s,scheduler:r}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,s.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>h.error(`Failed to initialize ${e} worker: ${t}`)))}on(t,i){const o={removed:!1,eventName:t,callback:i,threadHandle:null};return this._listeners.push(o),this._connectListener(o),r((()=>{o.removed=!0,s(this._listeners,o),this._thread&&e(o.threadHandle)&&o.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:s,signal:r})}return this._promise?this._promise.then((()=>(i(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{n as WorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{s as t}from\"../../../../../chunks/vec3.js\";import{a as o}from\"../../../../../chunks/vec4f64.js\";import{boundedPlane as r}from\"../../../../3d/support/geometryUtils.js\";function e(o,e){return r.fromAABoundingRect(e.extent,s),r.distance(s,t(n,o.x,o.y,0))}const s=r.create(),n=o();export{e as distanceToTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import s from\"../../../../../../core/Accessor.js\";import{HandleOwnerMixin as l}from\"../../../../../../core/HandleOwner.js\";import{scaleBoundsPredicate as n}from\"../../../../../support/layerViewUtils.js\";import{distanceToTile as p}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let a=class extends(l(s)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=t(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,t)=>p(r,e)-p(r,t))),e}scaleEnabled(){return n(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||r(this.tileInfo))return[];if(!this.scaleEnabled)return[];const{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:i}=t,o=[];for(const{row:r,colFrom:s,colTo:l}of e)for(let e=s;e<=l;e++){const s={id:null,level:i,row:r,col:t.normalizeCol(e)};this.tileInfo.updateTileInfo(s),o.push(s)}return o}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return t(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch(\"view.state.viewpoint\",(()=>this.notifyChange(\"tilesCoveringView\")),!0))}};e([i({readOnly:!0})],a.prototype,\"tiles\",null),e([i({readOnly:!0})],a.prototype,\"scaleEnabled\",null),e([i({readOnly:!0})],a.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],a.prototype,\"tileInfo\",null),e([i({readOnly:!0})],a.prototype,\"tileSize\",null),e([i({constructOnly:!0})],a.prototype,\"view\",void 0),e([i({constructOnly:!0})],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"pointOfInterest\",void 0),a=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D\")],a);export{a as FeatureServiceTiles2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import{init as o}from\"../../../../../../core/watchUtils.js\";import{HandleOwner as l}from\"../../../../../../core/HandleOwner.js\";import{distanceToTile as n}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let u=class extends l{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=this.effectivePointOfInterest;if(t(r)){const t=e.map((e=>n(r,e)));for(let i=1;i<t.length;i++)if(t[i-1]>t[i])return e.sort(((e,t)=>n(r,e)-n(r,t))),e.slice()}return e}get tilesCoveringView(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(c)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e;const r=this.pointOfInterest;return t(r)?r:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(o(this.view,\"featureTiles\",(e=>{this.handles.remove(p),e&&this.handles.add(e.addClient(),p)})))}filterTiles(e){if(r(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>a&&2===e.measures.visibility))}};function c({lij:[e,t,r],extent:i}){return{id:`${e}/${t}/${r}`,level:e,row:t,col:r,extent:i}}e([i({readOnly:!0})],u.prototype,\"tiles\",null),e([i({readOnly:!0})],u.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],u.prototype,\"tileInfo\",null),e([i({readOnly:!0})],u.prototype,\"tileSize\",null),e([i({constructOnly:!0})],u.prototype,\"view\",void 0),e([i()],u.prototype,\"pointOfInterest\",void 0),e([i()],u.prototype,\"effectivePointOfInterest\",null),u=e([s(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],u);const a=50,p=\"feature-tiles\";export{u as FeatureServiceTiles3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{makeHandle as t}from\"../../../../core/handleUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import s from\"../../../../geometry/Polygon.js\";import i from\"../../../../core/Handles.js\";import{toExtent as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileTreeDebugger as n}from\"../../../support/TileTreeDebugger.js\";let p=class extends n{constructor(e){super(e),this.handles=new i}initialize(){const e=setInterval((()=>this.fetchDebugInfo()),2e3);this.handles.add(t((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((r=>{e.set(r.data.id,r.featureCount),t.set(r.data.id,r.state)}));const r=r=>{var o;const s=t.get(r),i=null!=(o=e.get(r))?o:\"?\";return s?`${s}:${i}\\n${r}`:`store:${i}\\n${r}`},o=new Map;return this.debugInfo.storedTiles.forEach((e=>{o.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{o.set(e.data.id,e.data)})),Array.from(o.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:s.fromExtent(a(e.extent,this.view.spatialReference)),label:r(e.id)})))}fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};e([r({constructOnly:!0})],p.prototype,\"handle\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger\")],p);export{p as WorkerTileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{whenOrAbort as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../geometry/Point.js\";import{featureGeometryTypeKebabDictionary as s}from\"../../../../../geometry/support/typeUtils.js\";import{HandleOwner as d}from\"../../../../../core/HandleOwner.js\";import{WorkerHandle as l}from\"../../../../../core/workers/WorkerHandle.js\";let p=class extends d{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new u(this.scheduler),this.handles.add([this.workerHandle.on(\"notify-updating\",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on(\"notify-availability\",(({availability:e})=>this._set(\"availability\",e)))])}async setup(e,i){const r=this.serviceInfoFromLayer(e.layer);if(t(r))return;const o={configuration:this.convertConfiguration(e.configuration),serviceInfo:r,spatialReference:e.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"setup\",o,i)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},i))}async configure(e,t){const i=this.convertConfiguration(e);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"configure\",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async refresh(e){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"refresh\",{},e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},e))}async fetchCandidates(e,t){const r={distance:e.distance,point:e.coordinateHelper.toPoint(e.point,new n).toJSON(),types:e.types,filter:i(e.filter)?e.filter.createQuery().toJSON():null};return this.workerHandle.invoke(r,t)}async updateTiles(e,t){const r={tiles:e.tiles,tileInfo:i(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};await this.workerHandle.invokeMethod(\"updateTiles\",r,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async applyEdits(e,t){var i,r,o,n,s,d;const l=this.editId++,p={id:l};await this.workerHandle.invokeMethod(\"beginApplyEdits\",p,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t));const u=await a(e.result,t),c={id:l,edits:{addedFeatures:null!=(i=null==(r=u.addedFeatures)?void 0:r.map((({objectId:e})=>e)))?i:[],deletedFeatures:null!=(o=null==(n=u.deletedFeatures)?void 0:n.map((({objectId:e})=>e)))?o:[],updatedFeatures:null!=(s=null==(d=u.updatedFeatures)?void 0:d.map((({objectId:e})=>e)))?s:[]}};await this.workerHandle.invokeMethod(\"endApplyEdits\",c,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}getDebugInfo(e){return this.workerHandle.invokeMethod(\"getDebugInfo\",{},e)}convertConfiguration(e){return{filter:i(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}serviceInfoFromLayer(e){var t;return\"multipatch\"===e.geometryType||\"mesh\"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:s.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};e([r({constructOnly:!0})],p.prototype,\"scheduler\",void 0),e([r({readOnly:!0})],p.prototype,\"updating\",null),e([r({readOnly:!0})],p.prototype,\"availability\",void 0),e([r()],p.prototype,\"workerHandleUpdating\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle\")],p);class u extends l{constructor(e){super(\"FeatureServiceSnappingSourceWorker\",\"fetchCandidates\",e,{strategy:\"dedicated\"})}getTransferList(){return[]}}export{p as FeatureServiceSnappingSourceWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import t from\"../../../../../core/Accessor.js\";import s from\"../../../../../geometry/Point.js\";import{fromValues as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import p from\"../../../../../layers/support/LOD.js\";import l from\"../../../../../layers/support/TileInfo.js\";let n=class extends t{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:\"0/0/0\",level:0,row:0,col:0,extent:i(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new l({origin:new s({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new p({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};e([r({readOnly:!0})],n.prototype,\"tiles\",null),e([r({readOnly:!0})],n.prototype,\"tileInfo\",null),e([r({readOnly:!0})],n.prototype,\"tileSize\",null),e([r({constructOnly:!0})],n.prototype,\"layer\",void 0),e([r()],n.prototype,\"pointOfInterest\",void 0),n=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple\")],n);export{n as FeatureServiceTilesSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{reaction as o}from\"../../../../core/accessorSupport/trackingUtils.js\";import a from\"../../../../core/Accessor.js\";import n from\"../../../../geometry/Point.js\";import{init as l}from\"../../../../core/watchUtils.js\";import u from\"../../../support/debugFlags.js\";import{HandleOwnerMixin as p}from\"../../../../core/HandleOwner.js\";import{convertSnappingCandidate as c}from\"./queryEngineUtils.js\";import{FeatureServiceTiles2D as d}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as h}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{WorkerTileTreeDebugger as f}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as m}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as y}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";let g=class extends(p(a)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){if(r(this.view))switch(this.view.type){case\"2d\":this.tilesOfInterest=new d({view:this.view,layer:this.layer});break;case\"3d\":this.tilesOfInterest=new h({view:this.view})}else this.tilesOfInterest=new y({layer:this.layer});if(this.workerHandle=new m({scheduler:r(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),this.handles.add([t(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,\"updateTilesParameters\",(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),2),this.handles.add([o((()=>this.configuration),(e=>this.workerHandle.configure(e,null)))]),r(this.view)){const e=this.view;this.handles.add(l(u,\"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES\",(r=>{r&&!this.debug?(this.debug=new f({view:e,handle:this.workerHandle}),this.handles.add(t(this.debug),\"debug\")):!r&&this.debug&&this.handles.remove(\"debug\")})))}this.handles.add(this.layerSource.layer.on(\"apply-edits\",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,r){this.tilesOfInterest.pointOfInterest=e.coordinateHelper.toPoint(e.point,new n);const{candidates:t}=await this.workerHandle.fetchCandidates({...e,filter:null},r);return{candidates:t.map((r=>c(r,e.coordinateHelper)))}}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};e([i({constructOnly:!0})],g.prototype,\"spatialReference\",void 0),e([i({constructOnly:!0})],g.prototype,\"layerSource\",void 0),e([i({constructOnly:!0})],g.prototype,\"view\",void 0),e([i()],g.prototype,\"tilesOfInterest\",void 0),e([i({readOnly:!0})],g.prototype,\"updateTilesParameters\",null),e([i({readOnly:!0})],g.prototype,\"updating\",null),e([i({readOnly:!0})],g.prototype,\"configuration\",null),e([i({readOnly:!0})],g.prototype,\"availability\",null),g=e([s(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],g);export{g as FeatureServiceSnappingSource};\n"],"sourceRoot":""}