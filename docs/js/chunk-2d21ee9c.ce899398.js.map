{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/identity/IdentityForm.js","webpack:///./node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///./node_modules/tabbable/dist/index.esm.js","webpack:///./node_modules/@arcgis/core/identity/IdentityModal.js","webpack:///./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack:///./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack:///./node_modules/@arcgis/core/identity/ServerInfo.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["base","group","label","footer","esriInput","esriButton","esriButtonSecondary","s","e","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","t","i","u","a","d","class","oAuthInfo","info","test","lblItem","c","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","b","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isContentEditable","node","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","documentOrder","isInput","tagName","isHiddenInput","isDetailsWithSummary","r","children","some","child","getCheckedRadio","nodes","form","length","checked","isTabbableRadio","name","radioSet","radioScope","ownerDocument","queryRadios","window","CSS","escape","err","console","message","isRadio","isNonTabbableRadio","isHidden","displayCheck","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","_node$getBoundingClie","getBoundingClientRect","width","height","display","isNodeMatchingSelectorFocusable","options","isNodeMatchingSelectorTabbable","tabbable","regularTabbables","orderedTabbables","forEach","candidate","candidateTabindex","push","tabbableNodes","sort","map","concat","focusableCandidateSelector","isFocusable","Error","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","target","arguments","source","getOwnPropertyDescriptors","defineProperties","activeFocusTraps","trapQueue","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","isSelectableInput","toLowerCase","select","isEscapeEvent","keyCode","isTabEvent","delay","fn","setTimeout","findIndex","arr","idx","every","valueOrHandler","_len","params","_key","elements","userOptions","doc","document","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","container","contains","getNodeForOption","optionName","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","lastTabbableNode","tryFocus","focus","preventScroll","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkTab","destinationNode","containerIndex","_ref","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","destinationGroup","lastOfGroupIndex","_ref3","_destinationGroupIndex","_destinationGroup","checkKey","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","undefined","updateContainerElements","containerElements","elementsAsArray","Boolean","open","closed","title","dialog","content","closeButton","iconClose","createElement","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","o","n","close","p","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","Date","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","R","host","P","C","D","localStorage","sessionStorage","j","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","formConstructor","tokenValidity","normalizeWebTierAuth","_appUrlObj","location","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","assign","q","scope","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","findCredential","destroy","resolve","_restInfoPms","_selfReq","origin","selfDfd","_getPortalSelf","_enqueue","_isRESTService","_","f","g","isAdmin","serverUrl","customParameters","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","checkAppAccess","credential","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","l","getResourceName","on","generateToken","oAuthWin_","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","_postMessageAuthHandle","endsWith","postMessage","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","headers","Promise","allSSL","portalMode","supportsOAuth","protocol","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_findOAuthInfo","parent","isValid","_pendingDfd","_exchangeToken","oAuthState","oAuthSignIn","_getPlatformSelf","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"js/chunk-2d21ee9c.ce899398.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as n}from\"../chunks/index.js\";import u from\"../widgets/Widget.js\";const l={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},p=\"ArcGIS Online\";let a=class extends u{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:u,messages:a}=this,d=n(\"div\",{class:l.group},r(u?a.oAuthInfo:a.info,{server:/\\.arcgis\\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblUser,n(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:l.esriInput}))),m=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblPwd,n(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:l.esriInput}))),h=n(\"div\",{class:this.classes(l.group,l.footer)},n(\"input\",{type:\"submit\",disabled:!!i,value:i?a.lblSigning:a.lblOk,class:l.esriButton}),n(\"input\",{type:\"button\",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),b=s?n(\"div\",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return n(\"form\",{class:l.base,bind:this,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),i(\"esri/identity/t9n/identity\")],a.prototype,\"messages\",void 0),s([e()],a.prototype,\"signingIn\",void 0),s([e()],a.prototype,\"server\",void 0),s([e()],a.prototype,\"resource\",void 0),s([e()],a.prototype,\"error\",void 0),s([e()],a.prototype,\"oAuthPrompt\",void 0),a=s([t(\"esri.identity.IdentityForm\")],a);var d=a;export default d;\n","/*!\n* focus-trap 6.3.0\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(e.target);\n      });\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.2.0\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    var _node$getBoundingClie = node.getBoundingClientRect(),\n        width = _node$getBoundingClie.width,\n        height = _node$getBoundingClie.height;\n\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options.displayCheck) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (!isNodeMatchingSelectorFocusable(options, node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as n}from\"../widgets/support/widget.js\";import a from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const l={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let d=class extends a{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,n=e&&!!o,a={[l.open]:n,[l.closed]:!n},c=r(\"button\",{class:l.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?r(\"h1\",{id:d,class:l.title},s):null,m=n?r(\"div\",{bind:this,class:l.dialog,role:\"dialog\",\"aria-labelledby\":d,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return r(\"div\",{tabIndex:-1,class:this.classes(l.base,a)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:l.content,id:t,innerHTML:e}):n(e)?r(\"div\",{class:l.content,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:l.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],d.prototype,\"container\",void 0),t([o()],d.prototype,\"content\",void 0),t([o()],d.prototype,\"open\",void 0),t([o(),i(\"esri/t9n/common\")],d.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],d.prototype,\"title\",void 0),d=t([s(\"esri.identity.IdentityModal\")],d);var p=d;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{fixJson as s}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import i from\"../config.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"../core/Error.js\";import{urlToObject as h,hasSameOrigin as l,Url as c,queryToObject as d,normalize as u,getProxyRule as p,makeAbsolute as _,objectToQuery as f}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as g}from\"../core/events.js\";import{createAbortController as m,createResolver as v,onAbort as S,isAborted as w}from\"../core/promiseUtils.js\";import I from\"../core/Evented.js\";import{id as k}from\"../kernel.js\";import A from\"../request.js\";import y from\"./IdentityForm.js\";import U from\"./IdentityModal.js\";import x from\"./OAuthCredential.js\";import T from\"./OAuthInfo.js\";import O from\"./ServerInfo.js\";const R={},b=e=>{const t=new c(e.owningSystemUrl).host,s=new c(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage}catch{}let j=class extends I{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=y,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appUrlObj=h(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),o=!0;i||(i=new O,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),o=!1):(r=new q({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),o||r.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new T(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new q(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,i=!0;t&&(s=!!t.token,r=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=m(),n=v();if(t.signal&&S(t.signal,(()=>{o.abort()})),S(o,(()=>{n.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))})),w(o))return n.promise;t.signal=o.signal;const h=this._isAdminResource(e),c=s?this.findCredential(e):null;let d;if(c&&r&&r.details&&498===r.details.httpStatus)c.destroy();else if(c)return d=new a(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+c.userId+\"'. You do not have access to this resource: \"+e,{error:r}),n.reject(d),n.promise;const u=this._findCredential(e,t);if(u)return n.resolve(u),n.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new a(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),n.reject(d),n.promise;p=new O,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return p.hasPortal&&void 0===p._selfReq&&(i||l(p.tokenServiceUrl,window.location.origin)||this._gwDomains.some((e=>e.tokenServiceUrl===p.tokenServiceUrl)))&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,n,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),i=new c(window.location.href.toLowerCase()),o=e.shortLivedTokenValidity;let n,h,d,u,p,_,f,g;t&&(g=this.tokenValidity||o||this.defaultTokenValidity,g>o&&o>0&&(g=o)),s&&(n=s.isAdmin,h=s.serverUrl,d=s.token,_=s.signal,f=s.ssl,e.customParameters=s.customParameters),n?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new c(u.toLowerCase()),e.webTierAuth&&s&&s.serverUrl&&!f&&\"http\"===i.scheme&&(l(i.uri,u,!0)||\"https\"===p.scheme&&i.host===p.host&&\"7080\"===i.port&&\"7443\"===p.port)&&(u=u.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const m={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:h,token:d,expiration:g,referer:n||r?window.location.host:null,client:n?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:_,...null==s?void 0:s.ioArgs};r||(m.withCredentials=!1);return A(u,m).then((s=>{const r=s.data;if(!r||!r.token)return new a(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return R[i]||(R[i]={}),t&&(R[i][t.username]=t.password),r.validity=g,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let r=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let o;const n={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))o=i.server+\"/sharing/rest/oauth2/validateAppAccess\",n.client_id=t;else{if(!i.token)return{credential:i};o=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};o=i.server+\"/rest/services\"}return i.token&&(n.token=i.token),A(o,{query:n,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new a(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return r=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new a(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new a(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:r})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=d(e);if(r.error){const e=\"access_denied\"===r.error,t=new a(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,o=new q({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=o.userId,i.storage=r.persist?C:D,i.token=o.token,i.expires=o.expires,i.userId=o.userId,i.ssl=o.ssl,i.save(),s.resolve(o)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=v(),i=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=n)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=n=h=l=c=null},o=()=>{i(),this._oAuthDfd=null,r.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&S(s.signal,(()=>{o()}));let n=new this.formConstructor;n.resource=this.getResourceName(e),n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");let h=n.on(\"cancel\",o),l=this.dialog.watch(\"open\",o),c=n.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((o=>{i();const n=new q({userId:e.username,server:t.server,token:o.token,expires:null!=o.expires?Number(o.expires):null,ssl:!!o.ssl,isAdmin:s.isAdmin,validity:o.validity});r.resolve(n)})).catch((e=>{n.error=e,n.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=v();const i=this._oAuthDfd;null!=r&&r.signal&&S(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),i.promise;const n=new this.formConstructor;n.oAuthPrompt=!0,n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{u(),this._oAuthDfd=null,i.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))},l=n.on(\"cancel\",h),c=this.dialog.watch(\"open\",h),d=n.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,s)})),u=()=>{l.remove(),c.remove(),d.remove(),n.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=g(window,\"message\",(t=>{var s;if((t.origin===window.location.origin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=d(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new a(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,o,n=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],o=this.findServerInfo(s.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,s.userId),n=this._getIdenticalSvcIdx(e,s),!a)return-1===n&&s.resources.push(e),this._addResource(e,i),s;-1!==n&&(s.resources.splice(n,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,o=this.findServerInfo(t.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,t.userId),n=s,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!l(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!l(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(i.request.proxyUrl||\"\").toLowerCase(),s=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==s&&(e=e.substring(s+t.length+1)),e=u(e),h(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const t=new c(e.toLowerCase()),s=this._portalConfig;let r=this._gwDomains.some((e=>e.regex.test(t.uri)));return!r&&s&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),t.uri)),r||i.portalUrl&&(r=l(t,i.portalUrl,!0)),r||(r=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),r=r||this._agsPortal.test(t.path),r}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,o)=>{-1===s&&i.regex.test(e)&&(s=o),-1===r&&i.regex.test(t)&&(r=o)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,r;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return t=r+\"/admin/generateToken\",s=A(e=r+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(r=e.toLowerCase().indexOf(\"/sharing\"),-1!==r&&(t=e.substring(0,r)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return A(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return A(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return A(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||l(s,e,!0)))}_checkProtocol(e,t,s,r){let i=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===o.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&p(o)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){s(new a(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,s,r,i,o){return r||(r=v()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let o=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},i=(r,i,o,n)=>{var h,c;const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let _,f;if(r)t(new q({userId:r,server:d.server,token:o||null,expires:null!=n?Number(n):null,ssl:!!i}));else if(window!==window.parent&&null!=(h=this._appUrlObj.query)&&h[\"arcgis-auth-origin\"]&&null!=(c=this._appUrlObj.query)&&c[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var m;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=g(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),t(new q(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),s(a.fromJSON(e.data.error))))}));S(null==(m=e.options_)?void 0:m.signal,(()=>{r.remove()}))}else if(p){let r=p._oAuthCred;if(!r){const e=new x(p,C),t=new x(p,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,p._oAuthCred=r}if(r.isValid())_=new q({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),p.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(_.server,p.appId,_.token).then((e=>{_.token=e,r.token=e,r.save(),t(_)})).catch((()=>{t(_)})):t(_);else if(this._oAuthHash&&this._hasSameServerInstance(p.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;_=new q({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),p.userId=_.userId,r.storage=e.persist?C:D,r.token=_.token,r.expires=_.expires,r.userId=_.userId,r.ssl=_.ssl,r.save(),this._oAuthHash=null,t(_)}else{const r=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,s):(f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((({portalUrl:e,token:s,username:i})=>{!e||l(e,window.location.origin,!0)?(_=new q({server:d.server,userId:i,token:s}),t(_)):r()})).catch(r):r()}}else if(u){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s)}}else f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f)},o=()=>{const r=e.sinfo_,i=r.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new q(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new q({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{s(e)}))}};this._errbackFunc=s;const n=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=r(\"authInfo.tokenServicesUrl\",t)||r(\"authInfo.tokenServiceUrl\",t)||r(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=r(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}h&&s.owningSystemUrl?o():i()}),(()=>{e.sinfo_._restInfoPms=null;const t=new a(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):h&&n?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,o,n;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,o=t.currentVersion,\"multitenant\"===t.portalMode&&(n=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(o)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:n,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?i(t.username,t.allSSL,t.portalToken,t.tokenExpiration):i()})):i()}_generateOAuthInfo(e){let t,s,r=e.portalUrl;const i=e.customBaseUrl,o=e.owningTenant,n=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(n){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return n&&s?(this._hasTestedIfAppIsOnPortal=!0,t=A(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new T({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return r=r.replace(/^http:/i,\"https:\"),A(r+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:_(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=r,t.popup=window!==window.top||!(l(r,window.location.origin)||this._gwDomains.some((e=>e.regex.test(r)&&e.regex.test(window.location.origin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,s,r){const i={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const o={client_id:r.appId,response_type:\"token\",state:JSON.stringify(i),expiration:r.expiration,locale:r.locale,redirect_uri:r.popup?_(r.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0);const n=r.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",h=n+\"?\"+f(o);if(r.popup){const e=window.open(h,\"esriJSAPIOAuth\",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new a(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=g(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new a(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:n,resourceUrl:e,serverInfo:s,oAuthInfo:r}):window.location.href=h}};j=e([n(\"esri.identity.IdentityManagerBase\")],j);let q=class extends I.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=k.findServerInfo(this.server),t=e&&e.owningSystemUrl,s=!!t&&\"server\"===this.scope,r=s&&P(e,k._legacyFed),i=e.webTierAuth,o=i&&k.normalizeWebTierAuth,n=R[this.server],a=n&&n[this.userId];let h,l=this.resources&&this.resources[0],c=s&&k.findServerInfo(t),d={username:this.userId,password:a};if(i&&!o)return;s&&!c&&k.serverInfos.some((e=>(k._isIdProvider(t,e.server)&&(c=e),!!c)));const u=c&&k.findCredential(c.server,this.userId);if(!s||u){if(!r){if(s)h={serverUrl:l,token:u&&u.token,ssl:u&&u.ssl};else if(o)d=null,h={ssl:this.ssl};else{if(!a){let t;return l&&(l=k._sanitizeUrl(l),this._enqueued=1,t=k._enqueue(l,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(h={isAdmin:!0})}return k.generateToken(s?c:e,s?null:d,h).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}u.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&k.credentials.forEach((e=>{const t=k.findServerInfo(e.server),s=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&s&&\"server\"===e.scope&&(k._hasSameServerInstance(this.server,s)||k._isIdProvider(s,this.server))&&(P(t,k._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&k.findServerInfo(this.server),s=t&&t.owningSystemUrl,r=s&&k.findServerInfo(s);!1===e||s&&\"portal\"!==this.scope&&(!r||!r.webTierAuth||k.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=k.credentials.indexOf(this);e>-1&&k.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([o()],q.prototype,\"creationTime\",void 0),e([o()],q.prototype,\"expires\",void 0),e([o()],q.prototype,\"isAdmin\",void 0),e([o()],q.prototype,\"oAuthState\",void 0),e([o()],q.prototype,\"resources\",void 0),e([o()],q.prototype,\"scope\",void 0),e([o()],q.prototype,\"server\",void 0),e([o()],q.prototype,\"ssl\",void 0),e([o()],q.prototype,\"token\",void 0),e([o()],q.prototype,\"tokenRefreshBuffer\",void 0),e([o()],q.prototype,\"userId\",void 0),e([o()],q.prototype,\"validity\",void 0),q=e([n(\"esri.identity.Credential\")],q);export{q as Credential,j as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n"],"sourceRoot":""}