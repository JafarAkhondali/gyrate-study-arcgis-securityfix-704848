{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/layers/TileLayerView.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/TileLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["i","c","e","t","layer","o","this","Promise","reject","type","get","allSublayers","toArray","filter","r","minScale","maxScale","popupTemplate","popupEnabled","visible","map","async","s","createQuery","p","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean","prototype","xoffset","Math","max","abs","yoffset","n","length","size","stops","maxSize","minSize","f","floor","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","tileInfo","format","lods","scale","levelRangeFromScaleRange","minLevel","maxLevel","originOf","fullExtent","addResolvingPromise","_addTilingSchemeMatchPromise","view","suspended","emit","readOnly","aliasOf","y","a","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","m","x","l","xmin","min","ymin","xmax","ymax","toMap","intersects"],"mappings":"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","file":"js/chunk-5aaaddb0.217f1ff8.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as p}from\"../../core/promiseUtils.js\";import{calculateTolerance as a}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)return Promise.reject(new s(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:o}));if(\"tile\"!==o.type)return Promise.reject(new s(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:o.type}));const i=this.get(\"view.scale\"),c=o.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return p(c.map((async o=>{const s=o.createQuery(),p=r(t)?t.event:null,i=a({renderer:o.renderer,event:p});s.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),s.outFields=await o.popupTemplate.getRequiredFields();return(await o.queryFeatures(s)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([t()],c.prototype,\"layer\",void 0),c=e([o(\"esri.layers.mixins.TileLayerView\")],c),c};export default i;export{i as TileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as r}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{canProjectWithoutEngine as s}from\"../../../geometry/projection.js\";import{RefreshableLayerView as a}from\"../../layers/RefreshableLayerView.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{TiledLayerView3D as p}from\"./TiledLayerView3D.js\";import n from\"../../layers/LayerView.js\";import{createQueryGeometry as m}from\"../../support/drapedUtils.js\";import{TileLayerView as f}from\"../../layers/TileLayerView.js\";let c=class extends(a(p(f(l(n))))){get imageFormatIsOpaque(){return\"jpg\"===this.layer.tileInfo.format}get hasMixedImageFormats(){return\"mixed\"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,r=e[0].scale,t=e[e.length-1].scale;return this.levelRangeFromScaleRange(r,t)}return{minLevel:0,maxLevel:0}}initialize(){if(\"web-tile\"===this.layer.type){const e=this.layer.get(\"fullExtent.spatialReference\"),t=this.layer.get(\"tileInfo.spatialReference\");if(r(e)||r(t)||!s(e,t)){const e=\"defaults\"===this.layer.originOf(\"fullExtent\")||r(this.layer.fullExtent)?\"SceneView requires fullExtent to be specified by the user on WebTileLayer\":\"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer\";this.addResolvingPromise(Promise.reject(new i(\"layerview:incompatible-fullextent\",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,r){return m(e,r,this.view)}async doRefresh(e){this.suspended||this.emit(\"data-changed\")}};e([t({readOnly:!0})],c.prototype,\"imageFormatIsOpaque\",null),e([t({readOnly:!0})],c.prototype,\"hasMixedImageFormats\",null),e([t({aliasOf:\"layer.fullExtent\"})],c.prototype,\"fullExtent\",void 0),e([t()],c.prototype,\"layer\",void 0),e([t({aliasOf:\"layer.tileInfo\"})],c.prototype,\"tileInfo\",void 0),e([t({readOnly:!0})],c.prototype,\"dataLevelRange\",null),c=e([o(\"esri.views.3d.layers.TileLayerView3D\")],c);var y=c;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}