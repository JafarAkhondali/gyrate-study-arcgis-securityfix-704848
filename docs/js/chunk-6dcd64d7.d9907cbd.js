(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dcd64d7","chunk-2d0d3e74","chunk-2d0d3e74"],{"003f":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("f2e0");class i{constructor(){this.id=Object(n["b"])()}unload(){}}},"0278":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("b2b2"),i=r("1153"),s=r("b616"),o=r("003f"),c=r("1038");class a extends o["a"]{constructor(t,e=[],r=0,n=-1){super(),this._primitiveType=r,this.edgeIndicesLength=n,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[i,s]of t)s&&this._vertexAttributes.set(i,{...s});if(null==e||0===e.length){const t=u(this._vertexAttributes),e=Object(c["d"])(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const r of this._vertexAttributes.keys())this._indices.set(r,e)}else for(const[i,s]of e)s&&(this._indices.set(i,l(s)),"position"===i&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(i).length:this.edgeIndicesLength))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return Object(n["j"])(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)}computeAttachmentOriginTriangles(t){const e=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(c["c"])(r,e,t)}computeAttachmentOriginPoints(t){const e=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(c["b"])(r,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get("position");if(0===t.length)return null;const e=0===this.primitiveType?3:1;Object(i["a"])(t.length%e==0,"Indexing error: "+t.length+" not divisible by "+e);const r=Object(c["d"])(t.length/e),n=this.vertexAttributes.get("position");return new s["a"](r,e,t,n)}}function u(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}function l(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}},"04f0":function(t,e,r){"use strict";r.d(e,"a",(function(){return j})),r.d(e,"b",(function(){return v})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return O})),r.d(e,"e",(function(){return d})),r.d(e,"f",(function(){return N}));var n=r("0b2d"),i=r("4212"),s=r("e431"),o=r("dae5"),c=r("b139"),a=r("7577");function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function l(t,e,r){r*=.5;const n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function f(t,e){const r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>i["a"]?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function d(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],c=r[0],a=r[1],u=r[2],l=r[3];return t[0]=n*l+o*c+i*u-s*a,t[1]=i*l+o*a+s*c-n*u,t[2]=s*l+o*u+n*a-i*c,t[3]=o*l-n*c-i*a-s*u,t}function h(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],c=Math.sin(r),a=Math.cos(r);return t[0]=n*a+o*c,t[1]=i*a+s*c,t[2]=s*a-i*c,t[3]=o*a-n*c,t}function b(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],c=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*c,t[1]=i*a+o*c,t[2]=s*a+n*c,t[3]=o*a-i*c,t}function p(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],c=Math.sin(r),a=Math.cos(r);return t[0]=n*a+i*c,t[1]=i*a-n*c,t[2]=s*a+o*c,t[3]=o*a-s*c,t}function m(t,e){const r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function g(t,e,r,n){const s=e[0],o=e[1],c=e[2],a=e[3];let u,l,f,d,h,b=r[0],p=r[1],m=r[2],g=r[3];return l=s*b+o*p+c*m+a*g,l<0&&(l=-l,b=-b,p=-p,m=-m,g=-g),1-l>i["a"]?(u=Math.acos(l),f=Math.sin(u),d=Math.sin((1-n)*u)/f,h=Math.sin(n*u)/f):(d=1-n,h=n),t[0]=d*s+h*b,t[1]=d*o+h*p,t[2]=d*c+h*m,t[3]=d*a+h*g,t}function _(t){const e=Object(i["b"])(),r=Object(i["b"])(),n=Object(i["b"])(),s=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*r),t[1]=s*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function O(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r*r+n*n+i*i+s*s,c=o?1/o:0;return t[0]=-r*c,t[1]=-n*c,t[2]=-i*c,t[3]=s*c,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function y(t,e){const r=e[0]+e[4]+e[8];let n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);const i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+s]-e[3*s+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t}function T(t,e,r,n){const i=.5*Math.PI/180;e*=i,r*=i,n*=i;const s=Math.sin(e),o=Math.cos(e),c=Math.sin(r),a=Math.cos(r),u=Math.sin(n),l=Math.cos(n);return t[0]=s*a*l-o*c*u,t[1]=o*c*l+s*a*u,t[2]=o*a*u-s*c*l,t[3]=o*a*l+s*c*u,t}function x(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const j=a["c"],M=a["l"],S=a["a"],A=d,E=a["b"],w=a["d"],F=a["j"],P=a["e"],B=P,I=a["f"],C=I,D=a["k"],R=a["g"],L=a["h"];function N(t,e,r){const n=Object(s["i"])(e,r);return n<-.999999?(Object(s["h"])(z,U,e),Object(s["o"])(z)<1e-6&&Object(s["h"])(z,k,e),Object(s["s"])(z,z),l(t,z,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Object(s["h"])(z,e,r),t[0]=z[0],t[1]=z[1],t[2]=z[2],t[3]=1+n,D(t,t))}const z=Object(n["e"])(),U=Object(n["g"])(1,0,0),k=Object(n["g"])(0,1,0);function V(t,e,r,n,i,s){return g(H,e,i,s),g(W,r,n,s),g(t,H,W,2*s*(1-s)),t}const H=Object(c["a"])(),W=Object(c["a"])();function q(t,e,r,n){const i=G;return i[0]=r[0],i[3]=r[1],i[6]=r[2],i[1]=n[0],i[4]=n[1],i[7]=n[2],i[2]=-e[0],i[5]=-e[1],i[8]=-e[2],D(t,y(t,i))}const G=Object(o["a"])();Object.freeze({__proto__:null,identity:u,setAxisAngle:l,getAxisAngle:f,multiply:d,rotateX:h,rotateY:b,rotateZ:p,calculateW:m,slerp:g,random:_,invert:O,conjugate:v,fromMat3:y,fromEuler:T,str:x,copy:j,set:M,add:S,mul:A,scale:E,dot:w,lerp:F,length:P,len:B,squaredLength:I,sqrLen:C,normalize:D,exactEquals:R,equals:L,rotationTo:N,sqlerp:V,setAxes:q})},"0d9f":function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"b",(function(){return it})),r.d(e,"c",(function(){return R}));r("c120");var n=r("e92d"),i=r("38a4"),s=r("0b2d"),o=r("e431"),c=r("680b"),a=r("d791"),u=r("2119"),l=r("afe1"),f=r("f091"),d=r("2047"),h=r("8d95"),b=r("4054"),p=r("70ab");const m=n["a"].getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class g{constructor(){this.plane=Object(p["c"])(),this.origin=Object(s["e"])(),this.basis1=Object(s["e"])(),this.basis2=Object(s["e"])()}}function _(t=K){return{plane:Object(p["c"])(t.plane),origin:Object(s["d"])(t.origin),basis1:Object(s["d"])(t.basis1),basis2:Object(s["d"])(t.basis2)}}function O(t,e,r){const n=tt.get();return n.origin=t,n.basis1=e,n.basis2=r,n.plane=Object(p["u"])(0,0,0,0),x(n),n}function v(t,e=_()){return T(t.origin,t.basis1,t.basis2,e)}function y(t,e){Object(o["l"])(e.origin,t.origin),Object(o["l"])(e.basis1,t.basis1),Object(o["l"])(e.basis2,t.basis2),Object(p["a"])(t.plane,e.plane)}function T(t,e,r,n=_()){return Object(o["l"])(n.origin,t),Object(o["l"])(n.basis1,e),Object(o["l"])(n.basis2,r),x(n),$(n,"fromValues()"),n}function x(t){Object(p["f"])(t.basis2,t.basis1,t.origin,t.plane)}function j(t,e,r){t!==r&&v(t,r);const n=Object(o["f"])(f["d"].get(),H(t),e);return Object(o["g"])(r.origin,r.origin,n),r.plane[3]-=e,r}function M(t,e,r){return S(e,r),j(r,N(t,t.origin),r),r}function S(t,e=_()){const r=(t[2]-t[0])/2,n=(t[3]-t[1])/2;return Object(o["x"])(e.origin,t[0]+r,t[1]+n,0),Object(o["x"])(e.basis1,r,0,0),Object(o["x"])(e.basis2,0,n,0),Object(p["b"])(0,0,1,0,e.plane),e}function A(t,e,r){return!!Object(p["i"])(t.plane,e,r)&&q(t,r)}function E(t,e,r){if(A(t,e,r))return r;const n=w(t,e,f["d"].get());return Object(o["g"])(r,e.origin,Object(o["f"])(f["d"].get(),e.direction,Object(o["p"])(e.origin,n)/Object(o["q"])(e.direction))),r}function w(t,e,r){const n=Z.get();Y(t,e,n,Z.get());let s=Number.POSITIVE_INFINITY;for(const a of et){const u=X(t,a,J.get()),l=f["d"].get();if(Object(p["d"])(n,u,l)){const t=Object(c["h"])(f["d"].get(),e.origin,l),n=Math.abs(Object(i["b"])(Object(o["i"])(e.direction,t)));n<s&&(s=n,Object(o["l"])(r,l))}}return s===Number.POSITIVE_INFINITY?F(t,e,r):r}function F(t,e,r){if(A(t,e,r))return r;const n=Z.get(),i=Z.get();Y(t,e,n,i);let s=Number.POSITIVE_INFINITY;for(const c of et){const a=X(t,c,J.get()),u=f["d"].get();if(Object(p["e"])(n,a,u)){const t=Object(b["d"])(e,u);if(!Object(p["g"])(i,u))continue;t<s&&(s=t,Object(o["l"])(r,u))}}return I(t,e.origin)<s&&P(t,e.origin,r),r}function P(t,e,r){const n=Object(p["p"])(t.plane,e,f["d"].get()),i=Object(h["e"])(G(t,t.basis1),n,-1,1,f["d"].get()),s=Object(h["e"])(G(t,t.basis2),n,-1,1,f["d"].get());return Object(o["k"])(r,Object(o["g"])(f["d"].get(),i,s),t.origin),r}function B(t,e,r){const{origin:n,basis1:i,basis2:s}=t,c=Object(o["k"])(f["d"].get(),e,n),a=Object(d["c"])(i,c),u=Object(d["c"])(s,c),l=Object(d["c"])(H(t),c);return Object(o["x"])(r,a,u,l)}function I(t,e){const r=B(t,e,f["d"].get()),{basis1:n,basis2:i}=t,s=Object(o["q"])(n),c=Object(o["q"])(i),a=Math.max(Math.abs(r[0])-s,0),u=Math.max(Math.abs(r[1])-c,0),l=r[2];return a*a+u*u+l*l}function C(t,e){return Math.sqrt(I(t,e))}function D(t,e){let r=Number.NEGATIVE_INFINITY;for(const n of et){const i=X(t,n,J.get()),s=Object(h["b"])(i,e);s>r&&(r=s)}return Math.sqrt(r)}function R(t,e){return Object(p["g"])(t.plane,e)&&q(t,e)}function L(t,e,r,n){return W(t,r,n)}function N(t,e){const r=-t.plane[3];return Object(d["c"])(H(t),e)-r}function z(t,e,r,n){const i=N(t,e),s=Object(o["f"])(Q,H(t),r-i);return Object(o["g"])(n,e,s),n}function U(t,e){return Object(o["r"])(t.basis1,e.basis1)&&Object(o["r"])(t.basis2,e.basis2)&&Object(o["r"])(t.origin,e.origin)}function k(t,e,r){return t!==r&&v(t,r),Object(a["a"])(rt,e),Object(a["b"])(rt,rt),Object(o["n"])(r.basis1,t.basis1,rt),Object(o["n"])(r.basis2,t.basis2,rt),Object(o["n"])(Object(p["n"])(r.plane),Object(p["n"])(t.plane),rt),Object(o["n"])(r.origin,t.origin,e),Object(p["s"])(r.plane,r.origin,r.plane),r}function V(t,e,r,n){return t!==n&&v(t,n),Object(a["r"])(nt,Object(a["i"])(nt),e,r),Object(o["n"])(n.basis1,t.basis1,nt),Object(o["n"])(n.basis2,t.basis2,nt),x(n),n}function H(t){return Object(p["n"])(t.plane)}function W(t,e,r){switch(e){case 0:Object(o["l"])(r,t.basis1),Object(o["s"])(r,r);break;case 1:Object(o["l"])(r,t.basis2),Object(o["s"])(r,r);break;case 2:Object(o["l"])(r,H(t))}return r}function q(t,e){const r=Object(o["k"])(f["d"].get(),e,t.origin),n=Object(o["t"])(t.basis1),i=Object(o["t"])(t.basis2),s=Object(o["i"])(t.basis1,r),c=Object(o["i"])(t.basis2,r);return-s-n<0&&s-n<0&&-c-i<0&&c-i<0}function G(t,e){const r=J.get();return Object(o["l"])(r.origin,t.origin),Object(o["l"])(r.vector,e),r}function X(t,e,r){const{basis1:n,basis2:i,origin:s}=t,c=Object(o["f"])(f["d"].get(),n,e.origin[0]),a=Object(o["f"])(f["d"].get(),i,e.origin[1]);Object(o["g"])(r.origin,c,a),Object(o["g"])(r.origin,r.origin,s);const u=Object(o["f"])(f["d"].get(),n,e.direction[0]),l=Object(o["f"])(f["d"].get(),i,e.direction[1]);return Object(o["f"])(r.vector,Object(o["g"])(u,u,l),2),r}function $(t,e){Math.abs(Object(o["i"])(t.basis1,t.basis2)/(Object(o["q"])(t.basis1)*Object(o["q"])(t.basis2)))>1e-6&&m.warn(e,"Provided basis vectors are not perpendicular"),Math.abs(Object(o["i"])(t.basis1,H(t)))>1e-6&&m.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(o["i"])(H(t),t.origin)-t.plane[3])>1e-6&&m.warn(e,"Plane offset is not consistent with plane origin")}function Y(t,e,r,n){const i=H(t);Object(p["f"])(i,e.direction,e.origin,r),Object(p["f"])(Object(p["n"])(r),i,e.origin,n)}const K={plane:Object(p["c"])(),origin:Object(s["g"])(0,0,0),basis1:Object(s["g"])(1,0,0),basis2:Object(s["g"])(0,1,0)},Z=new u["a"](p["c"]),J=new u["a"](h["a"]),Q=Object(s["e"])(),tt=new u["a"](()=>({origin:null,basis1:null,basis2:null,plane:null})),et=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],rt=Object(l["b"])(),nt=Object(l["b"])();var it=Object.freeze({__proto__:null,BoundedPlaneClass:g,create:_,wrap:O,copy:v,copyWithoutVerify:y,fromValues:T,updateUnboundedPlane:x,elevate:j,setExtent:M,fromAABoundingRect:S,intersectRay:A,intersectRayClosestSilhouette:E,closestPointOnSilhouette:w,closestPoint:F,projectPoint:P,projectPointLocal:B,distance2:I,distance:C,distanceToSilhouette:D,extrusionContainsPoint:R,axisAt:L,altitudeAt:N,setAltitudeAt:z,equals:U,transform:k,rotate:V,normal:H,UP:K})},"0fc4":function(t,e,r){"use strict";function n(){return[0,0,0,0]}function i(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function o(t){const e=n(),r=Math.min(4,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function c(t,e){return new Float64Array(t,e,4)}function a(){return n()}function u(){return s(1,1,1,1)}function l(){return s(1,0,0,0)}function f(){return s(0,1,0,0)}function d(){return s(0,0,1,0)}function h(){return s(0,0,0,1)}r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return o}));const b=a(),p=u(),m=l(),g=f(),_=d(),O=h();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,fromArray:o,createView:c,zeros:a,ones:u,unitX:l,unitY:f,unitZ:d,unitW:h,ZEROS:b,ONES:p,UNIT_X:m,UNIT_Y:g,UNIT_Z:_,UNIT_W:O})},1038:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return u}));var n=r("0b2d"),i=r("e431"),s=r("a125");let o=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const c=new Uint16Array([0]),a=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function u(t){if(1===t)return c;if(t<a.length)return new Uint16Array(a.buffer,0,t);if(t>o.length){const e=Math.max(2*o.length,t);o=new Uint32Array(e);for(let t=0;t<o.length;t++)o[t]=t}return new Uint32Array(o.buffer,0,t)}function l(t,e,r){if(!t)return!1;const{size:n,data:o}=t;Object(i["x"])(r,0,0,0),Object(i["x"])(m,0,0,0);let c=0,a=0;for(let u=0;u<e.length-2;u+=3){const t=e[u+0]*n,l=e[u+1]*n,f=e[u+2]*n;Object(i["x"])(h,o[t+0],o[t+1],o[t+2]),Object(i["x"])(b,o[l+0],o[l+1],o[l+2]),Object(i["x"])(p,o[f+0],o[f+1],o[f+2]);const d=Object(s["a"])(h,b,p);d?(Object(i["g"])(h,h,b),Object(i["g"])(h,h,p),Object(i["f"])(h,h,1/3*d),Object(i["g"])(r,r,h),c+=d):(Object(i["g"])(m,m,h),Object(i["g"])(m,m,b),Object(i["g"])(m,m,p),a+=3)}return(0!==a||0!==c)&&(0!==c?(Object(i["f"])(r,r,1/c),!0):0!==a&&(Object(i["f"])(r,m,1/a),!0))}function f(t,e,r){if(!t||!e)return!1;const{size:n,data:s}=t;Object(i["x"])(r,0,0,0);let o=-1,c=0;for(let i=0;i<e.length;i++){const t=e[i]*n;o!==t&&(r[0]+=s[t+0],r[1]+=s[t+1],r[2]+=s[t+2],c++),o=t}return c>1&&Object(i["f"])(r,r,1/c),c>0}function d(t,e,r,n){if(!t)return!1;const{size:s,data:o}=t;Object(i["x"])(n,0,0,0),Object(i["x"])(m,0,0,0);let c=0,a=0;const u=e?e.length-1:o.length/s-1,l=u+(r?2:0);for(let f=0;f<l;f+=2){const t=f<u?f:u,r=f<u?f+1:0,l=(e?e[t]:t)*s,d=(e?e[r]:r)*s;h[0]=o[l+0],h[1]=o[l+1],h[2]=o[l+2],b[0]=o[d+0],b[1]=o[d+1],b[2]=o[d+2],Object(i["f"])(h,Object(i["g"])(h,h,b),.5);const p=Object(i["B"])(h,b);p>0?(Object(i["g"])(n,n,Object(i["f"])(h,h,p)),c+=p):(Object(i["g"])(m,m,h),a++)}return 0!==c?(Object(i["f"])(n,n,1/c),!0):0!==a&&(Object(i["f"])(n,m,1/a),!0)}const h=Object(n["e"])(),b=Object(n["e"])(),p=Object(n["e"])(),m=Object(n["e"])()},1153:function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return v})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return _})),r.d(e,"e",(function(){return O})),r.d(e,"f",(function(){return E})),r.d(e,"g",(function(){return g})),r.d(e,"h",(function(){return p})),r.d(e,"i",(function(){return T})),r.d(e,"j",(function(){return b})),r.d(e,"k",(function(){return d})),r.d(e,"l",(function(){return h})),r.d(e,"m",(function(){return m})),r.d(e,"n",(function(){return x})),r.d(e,"o",(function(){return f}));var n=r("38a4"),i=(r("0b2d"),r("d791"),r("02f1")),s=r("0fc4"),o=r("3349"),c=r("7577");const a=Object(s["c"])();class u{constructor(t){this.message=t}toString(){return"AssertException: "+this.message}}function l(t,e){if(!t){e=e||"assert";const t=new Error(e);throw t.stack&&console.log(t.stack),new u(e)}}function f(t,e){t||(e=e||"",console.warn("Verify failed: "+e+"\n"+new Error("verify").stack))}function d(t,e,r,n){let i,s=(r[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(i=s,s=o,o=i);let c=(r[1]-t[1])/e[1],a=(n[1]-t[1])/e[1];if(c>a&&(i=c,c=a,a=i),s>a||c>o)return!1;c>s&&(s=c),a<o&&(o=a);let u=(r[2]-t[2])/e[2],l=(n[2]-t[2])/e[2];return u>l&&(i=u,u=l,l=i),!(s>l||u>o)&&(l<o&&(o=l),!(o<0))}function h(t,e,r,n,s,o=Object(i["b"])()){const c=(n[s]-r[s])*(e[0]-t[0])-(n[0]-r[0])*(e[s]-t[s]),a=(n[0]-r[0])*(t[s]-r[s])-(n[s]-r[s])*(t[0]-r[0]);if(0===c)return!1;const u=a/c;return o[0]=t[0]+u*(e[0]-t[0]),o[1]=t[s]+u*(e[s]-t[s]),!0}function b(t,e,r,n,i){i||(i=t),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1,Object(c["m"])(a,a,e),i.length>2&&(i[2]=-a[2]),Object(c["m"])(a,a,r),l(0!==a[3]),i[0]=a[0]/a[3],i[1]=a[1]/a[3],i[2]=a[2]/a[3],i[0]=(.5*i[0]+.5)*n[2]+n[0],i[1]=(.5*i[1]+.5)*n[3]+n[1]}function p(t,e){return Math.log(t)/Math.log(e)}function m(t,e,r,n){t[12]=e,t[13]=r,t[14]=n}function g(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function _(t,e,r){return 2*Math.atan(Math.sqrt(e*e+r*r)*Math.tan(.5*t)/e)}function O(t,e,r){return 2*Math.atan(Math.sqrt(e*e+r*r)*Math.tan(.5*t)/r)}function v(t,e,r){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+r*r))}function y(t,e,r){return 2*Math.atan(r*Math.tan(.5*t)/Math.sqrt(e*e+r*r))}function T(t,e,r=0){const i=Object(n["d"])(t,0,S);for(let n=0;n<4;n++)e[r+n]=Math.floor(256*A(i*j[n]))}function x(t,e=0){let r=0;for(let n=0;n<4;n++)r+=t[e+n]*M[n];return r}const j=[1,256,65536,16777216],M=[1/256,1/65536,1/16777216,1/4294967296],S=x(new Uint8ClampedArray([255,255,255,255]));function A(t){return t-Math.floor(t)}function E(t,e,r,n,i){const s=t;0===t[11]?(n[0]=2/(e*s[0]),n[1]=2/(r*s[5]),n[2]=(1+s[12])/s[0],n[3]=(1+s[13])/s[5],Object(o["s"])(i,0,1)):(n[0]=-2/(e*s[0]),n[1]=-2/(r*s[5]),n[2]=(1-s[8])/s[0],n[3]=(1-s[9])/s[5],Object(o["s"])(i,1,0))}},"17b0":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("3886"),i=r("2f98");function s(t,e){const r=t.vertex.code;e.verticalOffsetEnabled?(t.vertex.uniforms.add("verticalOffset","vec4"),e.screenSizePerspectiveEnabled&&(t.include(i["a"]),t.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),r.add(n["a"]`
    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
      ${1===e.viewingMode?n["a"]`vec3 worldNormal = normalize(worldPos + localOrigin);`:n["a"]`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
      ${e.screenSizePerspectiveEnabled?n["a"]`
          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));
          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:n["a"]`
          float verticalOffsetScreenHeight = verticalOffset.x;`}
      // Screen sized offset in world space, used for example for line callouts
      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
      return worldNormal * worldOffset;
    }

    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      return worldPos + calculateVerticalOffset(worldPos, localOrigin);
    }
    `)):r.add(n["a"]`
    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }
    `)}function o(t,e,r,n=c){return n.screenLength=t.screenLength,n.perDistance=Math.tan(.5*e)/(.5*r),n.minWorldLength=t.minWorldLength,n.maxWorldLength=t.maxWorldLength,n}!function(t){function e(t,e,r){if(!e.verticalOffset)return;const n=o(e.verticalOffset,r.camera.fovY,r.camera.fullViewport[3]),i=r.camera.pixelRatio||1;t.setUniform4f("verticalOffset",n.screenLength*i,n.perDistance,n.minWorldLength,n.maxWorldLength)}t.bindUniforms=e}(s||(s={}));const c={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0}},"189c":function(t,e,r){"use strict";function n(t,e,r=32774,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:r,opAlpha:r,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function i(t,e,r,n,i=32774,s=32774,o=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:r,dstAlpha:n,opRgb:i,opAlpha:s,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}r.d(e,"a",(function(){return L})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return m})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return n}));const s={face:1029,mode:2305},o={zNear:0,zFar:1},c={r:!0,g:!0,b:!0,a:!0};function a(t){return O.intern(t)}function u(t){return y.intern(t)}function l(t){return x.intern(t)}function f(t){return M.intern(t)}function d(t){return A.intern(t)}function h(t){return w.intern(t)}function b(t){return P.intern(t)}function p(t){return I.intern(t)}function m(t){return D.intern(t)}class g{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),r=this.interns;return r.has(e)||r.set(e,this.makeRef(t)),r.get(e)}}function _(t){return"["+t.join(",")+"]"}const O=new g(v,t=>({__tag:"Blending",...t}));function v(t){return t?_([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const y=new g(T,t=>({__tag:"Culling",...t}));function T(t){return t?_([t.face,t.mode]):null}const x=new g(j,t=>({__tag:"PolygonOffset",...t}));function j(t){return t?_([t.factor,t.units]):null}const M=new g(S,t=>({__tag:"DepthTest",...t}));function S(t){return t?_([t.func]):null}const A=new g(E,t=>({__tag:"StencilTest",...t}));function E(t){return t?_([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const w=new g(F,t=>({__tag:"DepthWrite",...t}));function F(t){return t?_([t.zNear,t.zFar]):null}const P=new g(B,t=>({__tag:"ColorWrite",...t}));function B(t){return t?_([t.r,t.g,t.b,t.a]):null}const I=new g(C,t=>({__tag:"StencilWrite",...t}));function C(t){return t?_([t.mask]):null}const D=new g(R,t=>({blending:a(t.blending),culling:u(t.culling),polygonOffset:l(t.polygonOffset),depthTest:f(t.depthTest),stencilTest:d(t.stencilTest),depthWrite:h(t.depthWrite),colorWrite:b(t.colorWrite),stencilWrite:p(t.stencilWrite)}));function R(t){return t?_([v(t.blending),T(t.culling),j(t.polygonOffset),S(t.depthTest),E(t.stencilTest),F(t.depthWrite),B(t.colorWrite),C(t.stencilWrite)]):null}class L{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(t,e,r,n){return(r||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}},1956:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("c120");var n=r("e92d");r("ce50");function i(t){}n["a"].getLogger("esri/views/webgl")},"19b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return _})),r.d(e,"d",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return b}));var n=r("e431"),i=r("2119"),s=r("f091"),o=r("4054");function c(t){return t?{ray:Object(o["c"])(t.ray),c0:t.c0,c1:t.c1}:{ray:Object(o["c"])(),c0:0,c1:Number.MAX_VALUE}}function a(t,e,r){const n=g.get();return n.ray=t,n.c0=e,n.c1=r,n}function u(t,e=c()){return l(t.ray,t.c0,t.c1,e)}function l(t,e,r,n=c()){return Object(o["b"])(t,n.ray),n.c0=e,n.c1=r,n}function f(t,e=c()){return Object(o["b"])(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function d(t,e=c()){return h(t,Object(n["s"])(s["d"].get(),t.vector),e)}function h(t,e,r=c()){const i=Object(n["q"])(t.vector);return Object(o["e"])(t.origin,e,r.ray),r.c0=0,r.c1=i,r}function b(t,e){return m(t,t.c0,e)}function p(t,e){return m(t,t.c1,e)}function m(t,e,r){return Object(n["g"])(r,t.ray.origin,Object(n["f"])(r,t.ray.direction,e))}const g=new i["a"](()=>({c0:0,c1:0,ray:null}));var _=Object.freeze({__proto__:null,create:c,wrap:a,copy:u,fromValues:l,fromRay:f,fromLineSegment:d,fromLineSegmentAndDirection:h,getStart:b,getEnd:p,getAt:m})},"1e2c":function(t,e,r){"use strict";r.d(e,"a",(function(){return V}));var n=r("6c97"),i=r("a21b"),s=r("b2b2"),o=r("ce50"),c=r("e041"),a=r("f4cc"),u=r("ce6d"),l=r("38a4"),f=r("228a"),d=r("2db0"),h=r("1153"),b=r("003f"),p=r("c514"),m=r("a1ff"),g=r("8539"),_=r("d5f7"),O=r("d267"),v=r("c15d"),y=r("e92d");const T=y["a"].getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),x=542327876,j=131072,M=4;function S(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function A(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}const E=S("DXT1"),w=S("DXT3"),F=S("DXT5"),P=31,B=0,I=1,C=2,D=3,R=4,L=7,N=20,z=21;function U(t,e,r,n){const{textureData:i,internalFormat:s,width:o,height:c}=k(r,n);e.samplingMode=i.levels.length>1?9987:9729,e.hasMipmap=i.levels.length>1,e.internalFormat=s,e.width=o,e.height=c;const a=new m["a"](t,e,i);return t.bindTexture(a,0),a}function k(t,e){const r=new Int32Array(t,0,P);if(r[B]!==x)return T.error("Invalid magic number in DDS header"),null;if(!(r[N]&M))return T.error("Unsupported format, must contain a FourCC code"),null;const n=r[z];let i,s;switch(n){case E:i=8,s=33776;break;case w:i=16,s=33778;break;case F:i=16,s=33779;break;default:return T.error("Unsupported FourCC code:",A(n)),null}let o=1,c=r[R],a=r[D];0==(3&c)&&0==(3&a)||(T.warn("Rounding up compressed texture size to nearest multiple of 4."),c=c+3&-4,a=a+3&-4);const u=c,f=a;let d,h;r[C]&j&&!1!==e&&(o=Math.max(1,r[L])),1===o||Object(l["k"])(c)&&Object(l["k"])(a)||(T.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);let b=r[I]+4;const p=[];for(let l=0;l<o;++l)h=(c+3>>2)*(a+3>>2)*i,d=new Uint8Array(t,b,h),p.push(d),b+=h,c=Math.max(1,c>>1),a=Math.max(1,a>>1);return{textureData:{type:"compressed",levels:p},internalFormat:s,width:u,height:f}}class V extends b["a"]{constructor(t,e){super(),this.data=t,this.type=4,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new u["a"],this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=V.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){const t=this.data;Object(s["j"])(t)||(t instanceof HTMLVideoElement?this.startPreloadVideoElement(t):t instanceof HTMLImageElement&&this.startPreloadImageElement(t))}startPreloadVideoElement(t){Object(c["t"])(t.src)||"auto"===t.preload&&t.crossOrigin||(t.preload="auto",t.crossOrigin="anonymous",t.src=t.src)}startPreloadImageElement(t){Object(c["u"])(t.src)||Object(c["t"])(t.src)||t.crossOrigin||(t.crossOrigin="anonymous",t.src=t.src)}static getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static estimateTexMemRequired(t,e){if(Object(s["j"])(t))return 0;if(Object(i["c"])(t)||Object(i["k"])(t))return e.encoding===V.BASIS_ENCODING?Object(v["b"])(t):t.byteLength;const{width:r,height:n}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?V.getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*n*(e.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(t){const e=this.params.mipmap&&!this.params.disableAnisotropy;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:e?t.parameters.maxMaxAnisotropy:void 0}}load(t,e){if(Object(s["k"])(this.glTexture))return this.glTexture;if(Object(s["k"])(this.loadingPromise))return this.loadingPromise;const r=this.data;return Object(s["j"])(r)?(this.glTexture=new m["a"](t,this.createDescriptor(t),null),t.bindTexture(this.glTexture,0),this.glTexture):"string"==typeof r?this.loadFromURL(t,e,r):r instanceof Image?this.loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(t,r,e):(Object(i["c"])(r)||Object(i["k"])(r))&&this.params.encoding===V.DDS_ENCODING?this.loadFromDDSData(t,r):(Object(i["c"])(r)||Object(i["k"])(r))&&this.params.encoding===V.BASIS_ENCODING?this.loadFromBasis(t,r):Object(i["k"])(r)?this.loadFromPixelData(t,r):Object(i["c"])(r)?this.loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this.data instanceof HTMLVideoElement)||Object(s["j"])(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(Object(s["k"])(this.powerOfTwoStretchInfo)){const{framebuffer:r,vao:n,sourceTexture:i}=this.powerOfTwoStretchInfo;i.setData(this.data),this.drawStretchedTexture(t,e,r,n,i,this.glTexture)}else{const{width:t,height:e}=this.data,{width:r,height:n}=this.glTexture.descriptor;t!==r||e!==n?this.glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,n),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(t,e){return this.glTexture=U(t,this.createDescriptor(t),e,this.params.mipmap),t.bindTexture(this.glTexture,0),this.glTexture}loadFromBasis(t,e){return this.loadAsync(()=>Object(v["a"])(t,this.createDescriptor(t),e).then(t=>(this.glTexture=t,t)))}loadFromPixelData(t,e){Object(h["a"])(this.params.width>0&&this.params.height>0);const r=this.createDescriptor(t);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new m["a"](t,r,e),t.bindTexture(this.glTexture,0),this.glTexture}async loadAsync(t){const e=Object(a["e"])();this.loadingController=e;const r=t(e.signal);this.loadingPromise=r;const n=()=>{this.loadingController===e&&(this.loadingController=null),this.loadingPromise===r&&(this.loadingPromise=null)};return r.then(n,n),r}loadFromURL(t,e,r){return this.loadAsync(async n=>{const i=await Object(d["a"])(r,{signal:n});return this.loadFromImage(t,i,e)})}loadFromImageElement(t,e,r){return r.complete?this.loadFromImage(t,r,e):this.loadAsync(async n=>{const i=await Object(f["a"])(r,r.src,!1,n);return this.loadFromImage(t,i,e)})}loadFromVideoElement(t,e,r){return r.readyState>=2?this.loadFromImage(t,r,e):this.loadFromVideoElementAsync(t,e,r)}loadFromVideoElementAsync(t,e,r){return this.loadAsync(n=>new Promise((i,c)=>{const u=()=>{r.removeEventListener("loadeddata",l),r.removeEventListener("error",f),Object(s["k"])(d)&&d.remove()},l=()=>{r.readyState>=2&&(u(),i(this.loadFromImage(t,r,e)))},f=t=>{u(),c(t||new o["a"]("Failed to load video"))};r.addEventListener("loadeddata",l),r.addEventListener("error",f);const d=Object(a["r"])(n,()=>f(Object(a["f"])()))}))}loadFromImage(t,e,r){const n=V.getDataDimensions(e);this.params.width=n.width,this.params.height=n.height;const i=this.createDescriptor(t);return i.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(t,i)||Object(l["k"])(n.width)&&Object(l["k"])(n.height)?(i.width=n.width,i.height=n.height,this.glTexture=new m["a"](t,i,e),t.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(t,e,n,i,r),t.bindTexture(this.glTexture,0),this.glTexture)}requiresPowerOfTwo(t,e){const r=33071,n="number"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return!Object(p["a"])(t.gl)&&(e.hasMipmap||!n)}makePowerOfTwoTexture(t,e,r,i,s){const{width:o,height:c}=r,a=Object(l["o"])(o),u=Object(l["o"])(c);let f;switch(i.width=a,i.height=u,this.params.powerOfTwoResizeMode){case 2:i.textureCoordinateScaleFactor=[o/a,c/u],f=new m["a"](t,i),f.updateData(0,0,0,o,c,e);break;case 1:case null:case void 0:f=this.stretchToPowerOfTwo(t,e,i,s);break;default:Object(n["a"])(this.params.powerOfTwoResizeMode)}return i.hasMipmap&&f.generateMipmap(),f}stretchToPowerOfTwo(t,e,r,n){const i=new m["a"](t,r),s=new O["a"](t,{colorTarget:0,depthStencilTarget:0},i),o=new m["a"](t,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),c=Object(_["d"])(t);return this.drawStretchedTexture(t,n,s,c,o,i),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:c,sourceTexture:o,framebuffer:s}:(c.dispose(!0),o.dispose(),s.detachColorTexture(),t.bindFramebuffer(null),s.dispose()),i}drawStretchedTexture(t,e,r,n,i,s){t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,s.descriptor.width,s.descriptor.height);const c=e.program;t.bindProgram(c),c.setUniform4f("color",1,1,1,1),c.setUniform1i("tex",0),t.bindTexture(i,0),t.bindVAO(n),t.setPipelineState(e.pipeline),t.drawArrays(5,0,Object(g["f"])(n,"geometry")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height)}unload(){if(Object(s["k"])(this.powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this.powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(Object(s["k"])(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),Object(s["k"])(this.loadingController)){const t=this.loadingController;this.loadingController=null,this.loadingPromise=null,t.abort()}this.events.emit("unloaded")}}V.DDS_ENCODING="image/vnd-ms.dds",V.BASIS_ENCODING="image/x.basis"},2047:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return d}));var n=r("38a4"),i=r("0b2d"),s=r("e431");function o(t,e,r){const n=Object(s["i"])(t,e)/Object(s["i"])(t,t);return Object(s["f"])(r,t,n)}function c(t,e){return Object(s["i"])(t,e)/Object(s["q"])(t)}function a(t,e){const r=Object(s["i"])(t,e)/(Object(s["q"])(t)*Object(s["q"])(e));return-Object(n["b"])(r)}function u(t,e,r){Object(s["s"])(l,t),Object(s["s"])(f,e);const i=Object(s["i"])(l,f),o=Object(n["b"])(i),c=Object(s["h"])(l,l,f);return Object(s["i"])(c,r)<0?2*Math.PI-o:o}const l=Object(i["e"])(),f=Object(i["e"])();var d=Object.freeze({__proto__:null,projectPoint:o,projectPointSignedLength:c,angle:a,angleAroundAxis:u})},2119:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("b2b2"),i=r("2ab7");class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=i["a"].before(()=>this.reset()),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n["q"])(this.tickHandle)),this.items=Object(n["q"])(this.items)}get(){return 0===this.itemsPtr&&Object(i["a"])(()=>{}),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,o));t++)this.items.push(this.allocator())}}const o=1024},"2db0":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("2eab");async function i(t,e){const{data:r}=await Object(n["default"])(t,{responseType:"image",...e});return r}},"2f98":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("3886"),i=r("7c51");function s(t){t.vertex.code.add(n["a"]`
    float screenSizePerspectiveMinSize(float size, vec4 factor) {
      float nonZeroSize = 1.0 - step(size, 0.0);

      return (
        factor.z * (
          1.0 +
          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding
          nonZeroSize *
          2.0 * factor.w / (
            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1
          )
        )
      );
    }
  `),t.vertex.code.add(n["a"]`
    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
      return absCosAngle * absCosAngle * absCosAngle;
    }
  `),t.vertex.code.add(n["a"]`
    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
      return vec4(
        min(params.x / (distanceToCamera - params.y), 1.0),
        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
        params.z,
        params.w
      );
    }
  `),t.vertex.code.add(n["a"]`
    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
    }
  `),t.vertex.code.add(n["a"]`
    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorFloat(
        size,
        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
      );
    }
  `),t.vertex.code.add(n["a"]`
    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);
    }
  `),t.vertex.code.add(n["a"]`
    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
    }
  `)}!function(t){function e(t,e){if(e.screenSizePerspective){Object(i["a"])(e.screenSizePerspective,t,"screenSizePerspective");const r=e.screenSizePerspectiveAlignment||e.screenSizePerspective;Object(i["a"])(r,t,"screenSizePerspectiveAlignment")}}t.bindUniforms=e}(s||(s={}))},3482:function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return m})),r.d(e,"e",(function(){return _})),r.d(e,"f",(function(){return E})),r.d(e,"g",(function(){return v})),r.d(e,"h",(function(){return y})),r.d(e,"i",(function(){return g})),r.d(e,"j",(function(){return T})),r.d(e,"k",(function(){return j}));var n=r("0b2d"),i=r("e431"),s=r("d791"),o=r("2119"),c=r("0fc4"),a=r("7577"),u=r("f091"),l=r("70ab"),f=r("19b9");function d(t){return t?[Object(l["c"])(t[0]),Object(l["c"])(t[1]),Object(l["c"])(t[2]),Object(l["c"])(t[3]),Object(l["c"])(t[4]),Object(l["c"])(t[5])]:[Object(l["c"])(),Object(l["c"])(),Object(l["c"])(),Object(l["c"])(),Object(l["c"])(),Object(l["c"])()]}function h(){return[Object(n["e"])(),Object(n["e"])(),Object(n["e"])(),Object(n["e"])(),Object(n["e"])(),Object(n["e"])(),Object(n["e"])(),Object(n["e"])()]}function b(t,e=d()){for(let r=0;r<6;r++)Object(l["a"])(t[r],e[r])}function p(t,e,r,n=A){const o=Object(s["m"])(u["a"].get(),e,t);Object(s["a"])(o,o);for(let s=0;s<8;++s){const t=Object(a["m"])(u["e"].get(),M[s],o);Object(i["x"])(n[s],t[0]/t[3],t[1]/t[3],t[2]/t[3])}m(r,n)}function m(t,e){Object(l["j"])(e[4],e[0],e[3],t[0]),Object(l["j"])(e[1],e[5],e[6],t[1]),Object(l["j"])(e[4],e[5],e[1],t[2]),Object(l["j"])(e[3],e[2],e[6],t[3]),Object(l["j"])(e[0],e[1],e[2],t[4]),Object(l["j"])(e[5],e[4],e[7],t[5])}function g(t,e){for(let r=0;r<6;r++)if(Object(l["k"])(t[r],e))return!1;return!0}function _(t,e){return x(t,Object(f["e"])(e,S.get()))}function O(t,e){for(let r=0;r<6;r++){const n=t[r];if(!Object(l["l"])(n,e))return!1}return!0}function v(t,e,r){return x(t,Object(f["a"])(e,r,S.get()))}function y(t,e){for(let r=0;r<6;r++)if(Object(l["m"])(t[r],e)>0)return!1;return!0}function T(t,e){for(let r=0;r<6;r++)if(Object(l["o"])(t[r],e))return!1;return!0}function x(t,e){for(let r=0;r<6;r++)if(!Object(l["q"])(t[r],e))return!1;return!0}const j={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},M=[Object(c["d"])(-1,-1,-1,1),Object(c["d"])(1,-1,-1,1),Object(c["d"])(1,1,-1,1),Object(c["d"])(-1,1,-1,1),Object(c["d"])(-1,-1,1,1),Object(c["d"])(1,-1,1,1),Object(c["d"])(1,1,1,1),Object(c["d"])(-1,1,1,1)],S=new o["a"](f["b"]),A=h();var E=Object.freeze({__proto__:null,create:d,createPoints:h,copy:b,fromMatrix:p,computePlanes:m,intersectsSphere:g,intersectsRay:_,intersectClipRay:O,intersectsLineSegment:v,intersectsPoint:y,intersectsAABB:T,planePointIndices:j})},"35b3":function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return a}));var n=r("b2b2"),i=r("fa1e"),s=r("003f"),o=r("7c51");class c extends s["a"]{constructor(t,e){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=i["a"],this._params=Object(o["e"])(t,e),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(t){return!1}setParameterValues(t){Object(o["k"])(this._params,t)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(t){}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.parametersChanged())}isVisibleInPass(t){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(t){t!==this._renderPriority&&(this._renderPriority=t,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(t){t!==this._insertOrder&&(this._insertOrder=t,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){Object(n["k"])(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function a(t,e){return t.isVisible()&&t.isVisibleInPass(e.pass)&&0!=(t.renderOccluded&e.renderOccludedMask)}const u={renderOccluded:1}},3886:function(t,e,r){"use strict";function n(t,...e){let r="";for(let n=0;n<e.length;n++)r+=t[n]+e[n];return r+=t[t.length-1],r}r.d(e,"a",(function(){return n})),function(t){function e(t){return Math.round(t).toString()}function r(t){return t.toPrecision(8)}t.int=e,t.float=r}(n||(n={}))},4054:function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return O})),r.d(e,"e",(function(){return b})),r.d(e,"f",(function(){return _})),r.d(e,"g",(function(){return g})),r.d(e,"h",(function(){return y})),r.d(e,"i",(function(){return j}));var n=r("b2b2"),i=r("a915"),s=r("0b2d"),o=r("e431"),c=r("2119"),a=r("3349"),u=r("f091");function l(t){return t?{origin:Object(s["d"])(t.origin),direction:Object(s["d"])(t.direction)}:{origin:Object(s["e"])(),direction:Object(s["e"])()}}function f(t,e){const r=x.get();return r.origin=t,r.direction=e,r}function d(t,e=l()){return b(t.origin,t.direction,e)}function h(t,e,r=l()){return Object(o["l"])(r.origin,t),Object(o["k"])(r.direction,e,t),r}function b(t,e,r=l()){return Object(o["l"])(r.origin,t),Object(o["l"])(r.direction,e),r}function p(t,e,r=l()){return m(t,t.screenToRender(e,Object(i["b"])(u["d"].get())),r)}function m(t,e,r=l()){const s=Object(i["b"])(Object(a["c"])(u["d"].get(),e));if(s[2]=0,!t.unprojectFromRenderScreen(s,r.origin))return null;const c=Object(i["b"])(Object(a["c"])(u["d"].get(),e));c[2]=1;const f=t.unprojectFromRenderScreen(c,u["d"].get());return Object(n["j"])(f)?null:(Object(o["k"])(r.direction,f,r.origin),r)}function g(t,e,r=l()){return _(t,t.screenToRender(e,Object(i["b"])(u["d"].get())),r)}function _(t,e,r=l()){Object(o["l"])(r.origin,t.eye);const i=Object(o["x"])(u["d"].get(),e[0],e[1],1),s=t.unprojectFromRenderScreen(i,u["d"].get());return Object(n["j"])(s)?null:(Object(o["k"])(r.direction,s,r.origin),r)}function O(t,e){const r=Object(o["h"])(u["d"].get(),Object(o["s"])(u["d"].get(),t.direction),Object(o["k"])(u["d"].get(),e,t.origin));return Object(o["i"])(r,r)}function v(t,e){return Math.sqrt(O(t,e))}function y(t,e,r){const n=Object(o["i"])(t.direction,Object(o["k"])(r,e,t.origin));return Object(o["g"])(r,t.origin,Object(o["f"])(r,t.direction,n)),r}function T(){return{origin:null,direction:null}}const x=new c["a"](T);var j=Object.freeze({__proto__:null,create:l,wrap:f,copy:d,fromPoints:h,fromValues:b,fromScreen:p,fromRender:m,fromScreenAtEye:g,fromRenderAtEye:_,distance2:O,distance:v,closestPoint:y,createWrapper:T})},4377:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t){t.code.add(n["a"]`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)}},"47f8":function(t,e,r){"use strict";function n(){return new Float32Array(3)}function i(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t,e,r){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}function o(t,e){return new Float32Array(t,e,3)}function c(){return n()}function a(){return s(1,1,1)}function u(){return s(1,0,0)}function l(){return s(0,1,0)}function f(){return s(0,0,1)}r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s}));const d=c(),h=a(),b=u(),p=l(),m=f();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,zeros:c,ones:a,unitX:u,unitY:l,unitZ:f,ZEROS:d,ONES:h,UNIT_X:b,UNIT_Y:p,UNIT_Z:m})},"4db9":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t,e){e.linearDepth?t.vertex.code.add(n["a"]`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):t.vertex.code.add(n["a"]`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)}},"501b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t){t.code.add(n["a"]`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)}},"55e6":function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return v})),r.d(e,"c",(function(){return U})),r.d(e,"d",(function(){return W})),r.d(e,"e",(function(){return R})),r.d(e,"f",(function(){return m})),r.d(e,"g",(function(){return g})),r.d(e,"h",(function(){return _})),r.d(e,"i",(function(){return O})),r.d(e,"j",(function(){return E})),r.d(e,"k",(function(){return B})),r.d(e,"l",(function(){return j})),r.d(e,"m",(function(){return h})),r.d(e,"n",(function(){return y})),r.d(e,"o",(function(){return k})),r.d(e,"p",(function(){return q})),r.d(e,"q",(function(){return L})),r.d(e,"r",(function(){return w})),r.d(e,"s",(function(){return I})),r.d(e,"t",(function(){return M})),r.d(e,"u",(function(){return b})),r.d(e,"v",(function(){return T})),r.d(e,"w",(function(){return V})),r.d(e,"x",(function(){return G})),r.d(e,"y",(function(){return N})),r.d(e,"z",(function(){return F})),r.d(e,"A",(function(){return C})),r.d(e,"B",(function(){return S})),r.d(e,"C",(function(){return p})),r.d(e,"D",(function(){return x})),r.d(e,"E",(function(){return H})),r.d(e,"F",(function(){return X})),r.d(e,"G",(function(){return z})),r.d(e,"H",(function(){return P})),r.d(e,"I",(function(){return D})),r.d(e,"J",(function(){return A}));class n{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<9;n++)e[n]=this.typedBuffer[r+n];return e}setMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<9;n++)this.typedBuffer[r+n]=e[n]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;for(let c=0;c<9;++c)n[s+c]=i[o+c]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class i{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<16;n++)e[n]=this.typedBuffer[r+n];return e}setMat(t,e){const r=t*this.typedBufferStride;for(let n=0;n<16;n++)this.typedBuffer[r+n]=e[n]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;for(let c=0;c<16;++c)n[s+c]=i[o+c]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=16;class s{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=1;var o=r("3349");class c{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(o["s"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=2;var a=r("e431");class u{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(a["x"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1],this.typedBuffer[t*this.typedBufferStride+2])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1],this.typedBuffer[t*this.typedBufferStride+2]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r,this.typedBuffer[t*this.typedBufferStride+2]=n}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1],n[s+2]=i[o+2]}get buffer(){return this.typedBuffer.buffer}}u.ElementCount=3;var l=r("7577");class f{constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(t,e){return Object(l["l"])(e,this.typedBuffer[t*this.typedBufferStride],this.typedBuffer[t*this.typedBufferStride+1],this.typedBuffer[t*this.typedBufferStride+2],this.typedBuffer[t*this.typedBufferStride+3])}setVec(t,e){this.typedBuffer[t*this.typedBufferStride]=e[0],this.typedBuffer[t*this.typedBufferStride+1]=e[1],this.typedBuffer[t*this.typedBufferStride+2]=e[2],this.typedBuffer[t*this.typedBufferStride+3]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n,i){this.typedBuffer[t*this.typedBufferStride]=e,this.typedBuffer[t*this.typedBufferStride+1]=r,this.typedBuffer[t*this.typedBufferStride+2]=n,this.typedBuffer[t*this.typedBufferStride+3]=i}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer,s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s]=i[o],n[s+1]=i[o+1],n[s+2]=i[o+2],n[s+3]=i[o+3]}get buffer(){return this.typedBuffer.buffer}}f.ElementCount=4;class d extends s{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new d(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}d.ElementType="f32";class h extends c{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new h(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}h.ElementType="f32";class b extends u{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new b(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}b.ElementType="f32";class p extends f{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new p(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}p.ElementType="f32";class m extends n{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new m(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}m.ElementType="f32";class g extends n{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new g(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}g.ElementType="f64";class _ extends i{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new _(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}_.ElementType="f32";class O extends i{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new O(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}O.ElementType="f64";class v extends s{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new v(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}v.ElementType="f64";class y extends c{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new y(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}y.ElementType="f64";class T extends u{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new T(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}T.ElementType="f64";class x extends f{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}static fromTypedArray(t,e){return new x(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}x.ElementType="f64";class j extends s{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new j(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}j.ElementType="u8";class M extends c{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new M(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}M.ElementType="u8";class S extends u{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new S(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}S.ElementType="u8";class A extends f{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}static fromTypedArray(t,e){return new A(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}A.ElementType="u8";class E extends s{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new E(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}E.ElementType="u16";class w extends c{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new w(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}w.ElementType="u16";class F extends u{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new F(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}F.ElementType="u16";class P extends f{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}static fromTypedArray(t,e){return new P(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}P.ElementType="u16";class B extends s{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new B(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}B.ElementType="u32";class I extends c{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new I(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}I.ElementType="u32";class C extends u{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new C(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}C.ElementType="u32";class D extends f{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}static fromTypedArray(t,e){return new D(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}D.ElementType="u32";class R extends s{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new R(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}R.ElementType="i8";class L extends c{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new L(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}L.ElementType="i8";class N extends u{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new N(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}N.ElementType="i8";class z extends f{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}static fromTypedArray(t,e){return new z(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}z.ElementType="i8";class U extends s{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new U(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}U.ElementType="i16";class k extends c{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new k(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}k.ElementType="i16";class V extends u{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new V(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}V.ElementType="i16";class H extends f{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}static fromTypedArray(t,e){return new H(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}H.ElementType="i16";class W extends s{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new W(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}W.ElementType="i32";class q extends c{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new q(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}q.ElementType="i32";class G extends u{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new G(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}G.ElementType="i32";class X extends f{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}static fromTypedArray(t,e){return new X(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}X.ElementType="i32"},5957:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return a}));var n=r("55e6"),i=r("1153");function s(t,e,r,n){const i=r.typedBuffer,s=r.typedBufferStride,o=t.length;n*=s;for(let c=0;c<o;++c){const r=2*t[c];i[n]=e[r],i[n+1]=e[r+1],n+=s}}function o(t,e,r,n,i){const s=r.typedBuffer,o=r.typedBufferStride,c=t.length;if(n*=o,null==i||1===i)for(let a=0;a<c;++a){const r=3*t[a];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}else for(let a=0;a<c;++a){const r=3*t[a];for(let t=0;t<i;++t)s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}}function c(t,e,r,n,i=1){const s=r.typedBuffer,o=r.typedBufferStride,c=t.length;if(n*=o,1===i)for(let a=0;a<c;++a){const r=4*t[a];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}else for(let a=0;a<c;++a){const r=4*t[a];for(let t=0;t<i;++t)s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}}function a(t,e,r,n,i,s=1){if(r){const o=n.typedBuffer,c=n.typedBufferStride,a=t.length,u=r[0],l=r[1],f=r[2],d=r[4],h=r[5],b=r[6],p=r[8],m=r[9],g=r[10],_=r[12],O=r[13],v=r[14];if(i*=c,1===s)for(let r=0;r<a;++r){const n=3*t[r],s=e[n],a=e[n+1],y=e[n+2];o[i]=u*s+d*a+p*y+_,o[i+1]=l*s+h*a+m*y+O,o[i+2]=f*s+b*a+g*y+v,i+=c}else for(let r=0;r<a;++r){const n=3*t[r],a=e[n],y=e[n+1],T=e[n+2],x=u*a+d*y+p*T+_,j=l*a+h*y+m*T+O,M=f*a+b*y+g*T+v;for(let t=0;t<s;++t)o[i]=x,o[i+1]=j,o[i+2]=M,i+=c}}else o(t,e,n,i,s)}function u(t,e,r,n,i,s){if(r){const o=r,c=n.typedBuffer,a=n.typedBufferStride,u=t.length,l=o[0],f=o[1],d=o[2],h=o[4],b=o[5],p=o[6],m=o[8],g=o[9],_=o[10],O=Math.abs(1-l*l+h*h+m*m)>1e-5||Math.abs(1-f*f+b*b+g*g)>1e-5||Math.abs(1-d*d+p*p+_*_)>1e-5,v=1e-6,y=1-v;if(i*=a,1===s)for(let r=0;r<u;++r){const n=3*t[r],s=e[n],o=e[n+1],u=e[n+2];let T=l*s+h*o+m*u,x=f*s+b*o+g*u,j=d*s+p*o+_*u;if(O){const t=T*T+x*x+j*j;if(t<y&&t>v){const e=Math.sqrt(t);T/=e,x/=e,j/=e}}c[i+0]=T,c[i+1]=x,c[i+2]=j,i+=a}else for(let r=0;r<u;++r){const n=3*t[r],o=e[n],u=e[n+1],T=e[n+2];let x=l*o+h*u+m*T,j=f*o+b*u+g*T,M=d*o+p*u+_*T;if(O){const t=x*x+j*j+M*M;if(t<y&&t>v){const e=Math.sqrt(t);x/=e,j/=e,M/=e}}for(let t=0;t<s;++t)c[i+0]=x,c[i+1]=j,c[i+2]=M,i+=a}}else o(t,e,n,i,s)}function l(t,e,r,n,i,s=1){const o=n.typedBuffer,c=n.typedBufferStride,a=t.length;if(i*=c,1===s){if(4===r)for(let u=0;u<a;++u){const r=4*t[u];o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=e[r+3],i+=c}else if(3===r)for(let u=0;u<a;++u){const r=3*t[u];o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=255,i+=c}}else if(4===r)for(let u=0;u<a;++u){const r=4*t[u];for(let t=0;t<s;++t)o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=e[r+3],i+=c}else if(3===r)for(let u=0;u<a;++u){const r=3*t[u];for(let t=0;t<s;++t)o[i]=e[r],o[i+1]=e[r+1],o[i+2]=e[r+2],o[i+3]=255,i+=c}}function f(t,e,r,o,f,d){for(const h of e.fieldNames){const e=t.vertexAttributes.get(h),b=t.indices.get(h);if(e&&b)switch(h){case"position":{Object(i["a"])(3===e.size);const t=f.getField(h,n["u"]);t&&a(b,e.data,r,t,d);break}case"normal":{Object(i["a"])(3===e.size);const t=f.getField(h,n["u"]);t&&u(b,e.data,o,t,d,1);break}case"uv0":{Object(i["a"])(2===e.size);const t=f.getField(h,n["m"]);t&&s(b,e.data,t,d);break}case"color":{Object(i["a"])(3===e.size||4===e.size);const t=f.getField(h,n["J"]);t&&l(b,e.data,e.size,t,d);break}case"symbolColor":{Object(i["a"])(3===e.size||4===e.size);const t=f.getField(h,n["J"]);t&&l(b,e.data,e.size,t,d);break}case"tangent":{Object(i["a"])(4===e.size);const t=f.getField(h,n["C"]);t&&c(b,e.data,t,d);break}}}}},"5a22":function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n=r("b2b2"),i=r("0b2d"),s=r("e431"),o=r("680b"),c=r("d791"),a=r("afe1"),u=r("f895"),l=r("1153"),f=r("003f"),d=r("697e"),h=r("bea9"),b=r("b623");class p extends f["a"]{constructor(t={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=Object(a["b"])(),this._bvObjectSpace=new g,this._bvWorldSpace=new g,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==t.castShadow||t.castShadow,this.metadata=t.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new m),this.transformation=Object(a["b"])();const{geometries:e,materials:r,transformations:n,origins:i}=t;if(Array.isArray(e)){Object(l["a"])(r.length===e.length,"Object3D: materials don't match geometries"),Object(l["a"])(n.length===e.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=e.length,this._geometries.length=e.length;for(let t=0;t<e.length;t++)this._geometries[t]=e[t],this._geometryRecords[t]=d["a"].pool.acquire(e[t],r[t],Object(a["c"])(n[t]),{highlights:null,occludees:null,visible:!0},i&&i[t])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(t){Object(c["c"])(this._objectTransformation,t),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){Object(l["a"])(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}getNumGeometryRecords(){return this._geometryRecords.length}getGeometryRecord(t){return Object(l["a"])(t>=0&&t<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[t]}addGeometry(t,e,r,i,s,o){r=r||a["a"],this._geometries.push(t);const c=d["a"].pool.acquire(t,e,r,i||{highlights:null,occludees:null,visible:!0},s,o);return this._geometryRecords.push(c),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(n["k"])(c.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:c}),this._invalidateBoundingVolume(),c}removeGeometry(t){const e=this._geometryRecords.splice(t,1)[0];return this._hasVolatileTransformation=Object(n["k"])(e.shaderTransformation)?this._geometryRecords.some(t=>Object(n["k"])(t.shaderTransformation)):this._hasVolatileTransformation,e.dispose(),this._geometries.splice(t,1),this._emit("objectGeometryRemoved",{object:this,record:e}),this._invalidateBoundingVolume(),e}removeAllGeometries(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(t){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[t]}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(t){this._visible=t;for(const e of this._geometryRecords)e.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}maskOccludee(){const t=new h["a"](1);for(const e of this._geometryRecords)e.instanceParameters.occludees=Object(b["b"])(e.instanceParameters.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometryRecords)e.instanceParameters.occludees=Object(b["g"])(e.instanceParameters.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new h["a"](0);for(const e of this._geometryRecords)e.instanceParameters.highlights=Object(b["b"])(e.instanceParameters.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometryRecords)e.instanceParameters.highlights=Object(b["g"])(e.instanceParameters.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,e){return Object(c["m"])(Object(n["u"])(e,Object(a["b"])()),this.transformation,t.getStaticTransformation())}getCombinedShaderTransformation(t,e){return e=e||Object(a["b"])(),Object(c["m"])(e,this.transformation,t.getShaderTransformation()),e}hasVolativeTransformation(){return this._hasVolatileTransformation}getBBMin(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}getBBMax(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}getBounds(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let i=0;i<this._geometryRecords.length;++i){const t=this._geometries[i],e=this._geometryRecords[i],r=t.boundingInfo;Object(n["k"])(r)&&(this._calculateTransformedBoundingVolume(r,this._bvObjectSpace,e.getShaderTransformation()),this._calculateTransformedBoundingVolume(r,this._bvWorldSpace,this.getCombinedShaderTransformation(e)))}Object(s["j"])(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),Object(s["j"])(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);const t=Object(i["e"])(),e=Object(i["e"])(),r=Object(o["j"])(this.transformation);for(let i=0;i<this._geometryRecords.length;++i){const c=this._geometries[i].boundingInfo;if(Object(n["j"])(c))continue;const a=this._geometryRecords[i].getShaderTransformation(),u=Object(o["j"])(a);Object(s["n"])(t,c.getCenter(),a);const l=Object(s["p"])(t,this._bvObjectSpace.bounds),f=c.getBSRadius()*u;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],l+f),Object(s["n"])(e,t,this.transformation);const d=Object(s["p"])(e,this._bvWorldSpace.bounds),h=f*r;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],d+h)}this._bvDirty=!1}_calculateTransformedBoundingVolume(t,e,r){const n=t.getBBMin(),o=t.getBBMax(),c=Object(i["d"])(n),a=Object(i["d"])(o);Object(s["n"])(c,c,r),Object(s["n"])(a,a,r);for(let i=0;i<3;++i)e.bbMin[i]=Math.min(e.bbMin[i],c[i],a[i]),e.bbMax[i]=Math.max(e.bbMax[i],c[i],a[i]);for(let i=0;i<3;++i){Object(s["l"])(c,n),Object(s["l"])(a,o),c[i]=o[i],a[i]=n[i],Object(s["n"])(c,c,r),Object(s["n"])(a,a,r);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],c[t],a[t]),e.bbMax[t]=Math.max(e.bbMax[t],c[t],a[t])}}_invalidateBoundingVolume(){this._bvDirty=!0,Object(n["k"])(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(t,e){Object(n["k"])(this._parentLayer)&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.indexOf(e)>-1,getGeometryIndex:e=>t._geometries.indexOf(e)}}}class m{constructor(){this.bbMin=Object(i["g"])(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=Object(i["g"])(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}class g extends m{constructor(){super(...arguments),this.bounds=Object(u["b"])()}init(){Object(s["x"])(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(s["x"])(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(u["a"])(this.bounds)}}},"5f6c":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return s(t,null==e?r.path:e)}},r.exports),r.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,r("c8ba"))},"68af":function(t,e,r){"use strict";var n=r("b2b2"),i=r("8dd3"),s=r("d7f7");class o extends s["a"]{constructor(t){super(t),this._textureIDs=new Set,this._textureRepository=t.textureRep,this._textureId=t.textureId,this._initTransparent=!!t.initTextureTransparent,this._texture=this._acquireIfNotUndefined(this._textureId),this._textureNormal=this._acquireIfNotUndefined(t.normalTextureId),this._textureEmissive=this._acquireIfNotUndefined(t.emissiveTextureId),this._textureOcclusion=this._acquireIfNotUndefined(t.occlusionTextureId),this._textureMetallicRoughness=this._acquireIfNotUndefined(t.metallicRoughnessTextureId)}dispose(){this._textureIDs.forEach(t=>this._textureRepository.release(t)),this._textureIDs.clear()}updateTexture(t){t!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=t,this._texture=this._acquireIfNotUndefined(this._textureId))}bindTexture(t,e){Object(n["k"])(this._texture)&&(e.setUniform1i("tex",i["a"].DIFFUSE),t.bindTexture(this._texture.glTexture,i["a"].DIFFUSE)),Object(n["k"])(this._textureNormal)&&(e.setUniform1i("normalTexture",i["a"].NORMAL),t.bindTexture(this._textureNormal.glTexture,i["a"].NORMAL)),Object(n["k"])(this._textureEmissive)&&(e.setUniform1i("texEmission",i["a"].EMISSION),t.bindTexture(this._textureEmissive.glTexture,i["a"].EMISSION)),Object(n["k"])(this._textureOcclusion)&&(e.setUniform1i("texOcclusion",i["a"].OCCLUSION),t.bindTexture(this._textureOcclusion.glTexture,i["a"].OCCLUSION)),Object(n["k"])(this._textureMetallicRoughness)&&(e.setUniform1i("texMetallicRoughness",i["a"].METALLIC_ROUGHNESS),t.bindTexture(this._textureMetallicRoughness.glTexture,i["a"].METALLIC_ROUGHNESS))}bindTextureScale(t,e){const r=Object(n["k"])(this._texture)&&this._texture.glTexture;r&&r.descriptor.textureCoordinateScaleFactor?e.setUniform2fv("textureCoordinateScaleFactor",r.descriptor.textureCoordinateScaleFactor):e.setUniform2f("textureCoordinateScaleFactor",1,1)}_acquireIfNotUndefined(t){if(!Object(n["j"])(t))return this._textureIDs.add(t),this._textureRepository.acquire(t,this._initTransparent)}_releaseIfNotUndefined(t){Object(n["j"])(t)||(this._textureIDs.delete(t),this._textureRepository.release(t))}}e["a"]=o},"690a":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("e92d");const i=n["a"].getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this.includedModules=new Map}include(t,e){this.includedModules.has(t)?this.includedModules.get(t)!==e&&i.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(t,e),t(this.builder,e))}}class o extends s{constructor(){super(...arguments),this.vertex=new u,this.fragment=new u,this.attributes=new l,this.varyings=new f,this.extensions=new d,this.constants=new h}get builder(){return this}generateSource(t){const e=this.extensions.generateSource(t),r=this.attributes.generateSource(t),n=this.varyings.generateSource(),i="vertex"===t?this.vertex:this.fragment,s=i.uniforms.generateSource(),o=i.code.generateSource(),c="vertex"===t?p:b,a=this.constants.generateSource().concat(i.constants.generateSource());return`\n${e.join("\n")}\n\n${c}\n\n${a.join("\n")}\n\n${s.join("\n")}\n\n${r.join("\n")}\n\n${n.join("\n")}\n\n${o.join("\n")}`}}class c{constructor(){this._entries=new Array,this._set=new Set}add(t,e,r){const n=`${t}_${e}_${r}`;return this._set.has(n)||(this._entries.push([t,e,r]),this._set.add(n)),this}generateSource(){const t=t=>t?`[${t}]`:"";return this._entries.map(e=>`uniform ${e[1]} ${e[0]}${t(e[2])};`)}}class a{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class u extends s{constructor(){super(...arguments),this.uniforms=new c,this.code=new a,this.constants=new h}get builder(){return this}}class l{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map(t=>`attribute ${t[1]} ${t[0]};`)}}class f{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(){return this._entries.map(t=>`varying ${t[1]} ${t[0]};`)}}class d{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?d.ALLOWLIST_VERTEX:d.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(t=>e.includes(t)).map(t=>`#extension ${t} : enable`)}}d.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],d.ALLOWLIST_VERTEX=[];class h{constructor(){this._entries=[]}add(t,e,r){let n="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":n=h.numberToFloatStr(r);break;case"int":n=h.numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])},                            ${h.numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])},                             ${h.numberToIntStr(r[3])})`;break;case"bvec2":n=`bvec2(${r[0].toString()},                             ${r[1].toString()})`;break;case"bvec3":n=`bvec3(${r[0].toString()},                             ${r[1].toString()},                             ${r[2].toString()})`;break;case"bvec4":n=`bvec4(${r[0].toString()},                             ${r[1].toString()},                             ${r[2].toString()},                             ${r[3].toString()})`;break;case"mat2":case"mat3":case"mat4":n=`${e}(${Array.prototype.map.call(r,t=>h.numberToFloatStr(t)).join(", ")})`}return this._entries.push(`const ${e} ${t} = ${n};`),this}static numberToIntStr(t){return t.toFixed(0)}static numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const b="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",p="precision highp float;\nprecision highp sampler2D;"},"697e":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("b2b2"),i=r("ecd7"),s=r("f2e0"),o=r("e431");class c{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(t,e,r,n,i,o){this.id=Object(s["b"])(),this.geometry=t,this.material=e,this.transformation=r,this.instanceParameters=n,this.origin=i,this._shaderTransformation=o,this._disposed=!1}release(){this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return Object(n["k"])(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(t){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))&&(Object(o["n"])(t,t,this.getStaticTransformation()),!0)}}c.pool=new i["a"](c)},"6a07":function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return o}));var n=r("0fc4"),i=r("3886");const s=Object(n["d"])(1,1,0,1),o=Object(n["d"])(1,0,1,1);function c(t){t.fragment.uniforms.add("depthTex","sampler2D"),t.fragment.uniforms.add("highlightViewportPixelSz","vec4"),t.fragment.constants.add("occludedHighlightFlag","vec4",s).add("unoccludedHighlightFlag","vec4",o),t.fragment.code.add(i["a"]`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = occludedHighlightFlag;
      }
      else {
        gl_FragColor = unoccludedHighlightFlag;
      }
    }
  `)}!function(t){function e(t,e,r){t.bindTexture(r.highlightDepthTexture,5),e.setUniform1i("depthTex",5),e.setUniform4f("highlightViewportPixelSz",0,0,r.inverseViewport[0],r.inverseViewport[1])}t.bindOutputHighlight=e}(c||(c={}))},"6d5b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t,e){e.attributeColor?(t.attributes.add("color","vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(n["a"]`
      void forwardVertexColor() { vColor = color; }
    `),t.vertex.code.add(n["a"]`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):t.vertex.code.add(n["a"]`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)}},"70a2":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s}));const n=t=>{class e extends t{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const e of null!=(t=this._managedDisposables)?t:[]){var t;const r=this[e];this[e]=null,r&&"function"==typeof r.dispose&&r.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}}return e};class i extends(n(class{})){}function s(){return(t,e)=>{var r,n;t.hasOwnProperty("_managedDisposables")||(t._managedDisposables=null!=(r=null==(n=t._managedDisposables)?void 0:n.slice())?r:[]),t._managedDisposables.unshift(e)}}},"70ab":function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return E})),r.d(e,"e",(function(){return w})),r.d(e,"f",(function(){return S})),r.d(e,"g",(function(){return B})),r.d(e,"h",(function(){return W})),r.d(e,"i",(function(){return A})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return F})),r.d(e,"l",(function(){return R})),r.d(e,"m",(function(){return U})),r.d(e,"n",(function(){return V})),r.d(e,"o",(function(){return C})),r.d(e,"p",(function(){return L})),r.d(e,"q",(function(){return D})),r.d(e,"r",(function(){return I})),r.d(e,"s",(function(){return j})),r.d(e,"t",(function(){return g})),r.d(e,"u",(function(){return l}));var n=r("b2b2"),i=r("38a4"),s=r("0b2d"),o=r("e431"),c=r("f091"),a=r("f895");function u(t=H){return[t[0],t[1],t[2],t[3]]}function l(t,e,r,n){return d(t,e,r,n,c["e"].get())}function f(t,e=u()){return d(t[0],t[1],t[2],t[3],e)}function d(t,e,r,n,i=u()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function h(t,e,r=u()){return Object(o["l"])(r,t),r[3]=e,r}function b(t,e,r=u()){Object(o["l"])(r,e);const n=Object(o["i"])(e,e);return Math.abs(n-1)>1e-5&&n>1e-12&&Object(o["f"])(r,r,1/Math.sqrt(n)),j(r,t,r),r}function p(t,e,r,n=u()){return S(Object(o["k"])(c["d"].get(),t,e),Object(o["k"])(c["d"].get(),r,e),t,n)}function m(t,e){return g(t,e,0,1,2)}function g(t,e,r,n,i){if(t.count<3)return!1;t.getVec(r,O);let s=n,c=!1;for(;s<t.count-1&&!c;)t.getVec(s,v),s++,c=!Object(o["r"])(O,v);if(!c)return!1;for(s=Math.max(s,i),c=!1;s<t.count&&!c;)t.getVec(s,y),s++,Object(o["k"])(T,O,v),Object(o["s"])(T,T),Object(o["k"])(x,v,y),Object(o["s"])(x,x),c=!Object(o["r"])(O,y)&&!Object(o["r"])(v,y)&&Math.abs(Object(o["i"])(T,x))<_;return c?(p(O,v,y,e),!0):(0!==r||1!==n||2!==i)&&g(t,e,0,1,2)}const _=.99619469809,O=Object(s["e"])(),v=Object(s["e"])(),y=Object(s["e"])(),T=Object(s["e"])(),x=Object(s["e"])();function j(t,e,r){return t!==r&&f(t,r),r[3]=-Object(o["i"])(V(r),e),r}function M(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function S(t,e,r,n=u()){return b(r,Object(o["h"])(c["d"].get(),e,t),n)}function A(t,e,r){return!!Object(n["k"])(e)&&k(t,e.origin,e.direction,!0,!1,r)}function E(t,e,r){return k(t,e.origin,e.vector,!1,!1,r)}function w(t,e,r){return k(t,e.origin,e.vector,!1,!0,r)}function F(t,e){return U(t,Object(a["c"])(e))-e[3]>=0}function P(t,e){return U(t,Object(a["c"])(e))+e[3]<0}function B(t,e){return U(t,e)>=0}function I(t,e){return U(t,e)<0}function C(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],c=e[5];return t[0]*(t[0]>0?r:s)+t[1]*(t[1]>0?n:o)+t[2]*(t[2]>0?i:c)+t[3]>=0}function D(t,e){const r=Object(o["i"])(V(t),e.ray.direction),n=-U(t,e.ray.origin);if(n<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return n>0;if((n<0||r<0)&&!(n<0&&r<0))return!0;const i=n/r;return r>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function R(t,e){const r=Object(o["i"])(V(t),e.ray.direction),n=-U(t,e.ray.origin);if(r>-1e-6&&r<1e-6)return n>0;const i=n/r;return r>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function L(t,e,r){const n=Object(o["f"])(c["d"].get(),V(t),-t[3]),i=N(t,Object(o["k"])(c["d"].get(),e,n),c["d"].get());return Object(o["g"])(r,i,n),r}function N(t,e,r){const n=Object(o["f"])(c["d"].get(),V(t),Object(o["i"])(V(t),e));return Object(o["k"])(r,e,n),r}function z(t,e){return Math.abs(U(t,e))}function U(t,e){return Object(o["i"])(V(t),e)+t[3]}function k(t,e,r,n,s,c){const a=Object(o["i"])(V(t),r);if(0===a)return!1;let u=-(Object(o["i"])(V(t),e)+t[3])/a;return s&&(u=n?Math.max(0,u):Object(i["d"])(u,0,1)),!(u<0||!n&&u>1)&&(Object(o["g"])(c,e,Object(o["f"])(c,r,u)),!0)}function V(t){return t}const H=[0,0,1,0];var W=Object.freeze({__proto__:null,create:u,wrap:l,copy:f,fromValues:d,fromNormalAndOffset:h,fromPositionAndNormal:b,fromPoints:p,fromManyPoints:m,fromManyPointsSampleAt:g,setOffsetFromPoint:j,negate:M,fromVectorsAndPoint:S,intersectRay:A,intersectLineSegment:E,intersectLineSegmentClamp:w,isSphereFullyInside:F,isSphereFullyOutside:P,isPointInside:B,isPointOutside:I,isAABBFullyInside:C,clip:D,clipInfinite:R,projectPoint:L,projectVector:N,distance:z,signedDistance:U,normal:V,UP:H})},7438:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return f}));var n=r("189c");const i=Object(n["f"])(770,1,771,771),s=Object(n["g"])(1,1),o=Object(n["g"])(0,771);function c(t){return 2===t?null:1===t?o:s}function a(t){return 2===t?n["d"]:null}const u=5e5,l={factor:-1,units:-2};function f(t){return t?l:null}function d(t){return 3===t||2===t?513:515}},7577:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return j})),r.d(e,"e",(function(){return O})),r.d(e,"f",(function(){return v})),r.d(e,"g",(function(){return F})),r.d(e,"h",(function(){return P})),r.d(e,"i",(function(){return _})),r.d(e,"j",(function(){return M})),r.d(e,"k",(function(){return x})),r.d(e,"l",(function(){return s})),r.d(e,"m",(function(){return A})),r.d(e,"n",(function(){return z}));var n=r("4212");function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function o(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function c(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function l(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function f(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function h(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function p(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function m(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function g(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function _(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+i*i+s*s}function O(t){const e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function v(t){const e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function y(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function x(t,e){const r=e[0],n=e[1],i=e[2],s=e[3];let o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=s*o),t}function j(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function M(t,e,r,n){const i=e[0],s=e[1],o=e[2],c=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=o+n*(r[2]-o),t[3]=c+n*(r[3]-c),t}function S(t,e){let r,i,s,o,c,a;e=e||1;do{r=2*Object(n["b"])()-1,i=2*Object(n["b"])()-1,c=r*r+i*i}while(c>=1);do{s=2*Object(n["b"])()-1,o=2*Object(n["b"])()-1,a=s*s+o*o}while(a>=1);const u=Math.sqrt((1-c)/a);return t[0]=e*r,t[1]=e*i,t[2]=e*s*u,t[3]=e*o*u,t}function A(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}function E(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],c=r[1],a=r[2],u=r[3],l=u*n+c*s-a*i,f=u*i+a*n-o*s,d=u*s+o*i-c*n,h=-o*n-c*i-a*s;return t[0]=l*u+h*-o+f*-a-d*-c,t[1]=f*u+h*-c+d*-o-l*-a,t[2]=d*u+h*-a+l*-c-f*-o,t[3]=e[3],t}function w(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function F(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function P(t,e){const r=t[0],i=t[1],s=t[2],o=t[3],c=e[0],a=e[1],u=e[2],l=e[3];return Math.abs(r-c)<=n["a"]*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-a)<=n["a"]*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-u)<=n["a"]*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-l)<=n["a"]*Math.max(1,Math.abs(o),Math.abs(l))}const B=c,I=a,C=u,D=g,R=_,L=O,N=v;var z=Object.freeze({__proto__:null,copy:i,set:s,add:o,subtract:c,multiply:a,divide:u,ceil:l,floor:f,min:d,max:h,round:b,scale:p,scaleAndAdd:m,distance:g,squaredDistance:_,length:O,squaredLength:v,negate:y,inverse:T,normalize:x,dot:j,lerp:M,random:S,transformMat4:A,transformQuat:E,str:w,exactEquals:F,equals:P,sub:B,mul:I,div:C,dist:D,sqrDist:R,len:L,sqrLen:N})},"7c33":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));const n=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],i=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}]},"7c51":function(t,e,r){"use strict";r.d(e,"a",(function(){return M})),r.d(e,"b",(function(){return F})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return v})),r.d(e,"e",(function(){return S})),r.d(e,"f",(function(){return T})),r.d(e,"g",(function(){return x})),r.d(e,"h",(function(){return E})),r.d(e,"i",(function(){return d})),r.d(e,"j",(function(){return m})),r.d(e,"k",(function(){return A})),r.d(e,"l",(function(){return j}));var n=r("b2b2"),i=r("38a4"),s=r("0b2d"),o=r("e431"),c=r("4261"),a=r("1153"),u=r("b623"),l=r("da1c");const f=Object(c["h"])();function d(t,e,r,n,i,s,o){const c=Object(u["e"])(e),l=r.tolerance;if(!c)if(t.boundingInfo)Object(a["a"])(0===t.primitiveType),b(t.boundingInfo,n,i,l,s,o);else{const e=t.indices.get("position"),r=t.vertexAttributes.get("position");m(n,i,0,e.length/3,e,r,void 0,s,o)}}const h=Object(s["e"])();function b(t,e,r,i,s,o){if(Object(n["j"])(t))return;const a=y(e,r,h);if(Object(c["E"])(f,t.getBBMin()),Object(c["D"])(f,t.getBBMax()),Object(n["k"])(s)&&s.applyToAabb(f),T(f,e,a,i)){const{primitiveIndices:n,indices:c,position:a}=t,u=n?n.length:c.length/3;if(u>P){const n=t.getChildren();if(void 0!==n){for(let t=0;t<8;++t)void 0!==n[t]&&b(n[t],e,r,i,s,o);return}}m(e,r,0,u,c,a,n,s,o)}}const p=Object(s["e"])();function m(t,e,r,i,s,o,c,a,u){if(c)return g(t,e,r,i,s,o,c,a,u);const l=o.data,f=o.stride||o.size,d=t[0],h=t[1],b=t[2],m=e[0]-d,_=e[1]-h,O=e[2]-b;for(let g=r,y=3*r;g<i;++g){let t=f*s[y++],e=l[t++],r=l[t++],i=l[t];t=f*s[y++];let o=l[t++],c=l[t++],T=l[t];t=f*s[y++];let x=l[t++],j=l[t++],M=l[t];Object(n["k"])(a)&&([e,r,i]=a.applyToVertex(e,r,i,g),[o,c,T]=a.applyToVertex(o,c,T,g),[x,j,M]=a.applyToVertex(x,j,M,g));const S=o-e,A=c-r,E=T-i,w=x-e,F=j-r,P=M-i,B=_*P-F*O,I=O*w-P*m,C=m*F-w*_,D=S*B+A*I+E*C;if(Math.abs(D)<=Number.EPSILON)continue;const R=d-e,L=h-r,N=b-i,z=R*B+L*I+N*C;if(D>0){if(z<0||z>D)continue}else if(z>0||z<D)continue;const U=L*E-A*N,k=N*S-E*R,V=R*A-S*L,H=m*U+_*k+O*V;if(D>0){if(H<0||z+H>D)continue}else if(H>0||z+H<D)continue;const W=(w*U+F*k+P*V)/D;W>=0&&u(W,v(S,A,E,w,F,P,p),g)}}function g(t,e,r,i,s,o,c,a,u){const l=o.data,f=o.stride||o.size,d=t[0],h=t[1],b=t[2],m=e[0]-d,g=e[1]-h,_=e[2]-b;for(let O=r;O<i;++O){const t=c[O];let e=3*t,r=f*s[e++],i=l[r++],o=l[r++],y=l[r];r=f*s[e++];let T=l[r++],x=l[r++],j=l[r];r=f*s[e];let M=l[r++],S=l[r++],A=l[r];Object(n["k"])(a)&&([i,o,y]=a.applyToVertex(i,o,y,O),[T,x,j]=a.applyToVertex(T,x,j,O),[M,S,A]=a.applyToVertex(M,S,A,O));const E=T-i,w=x-o,F=j-y,P=M-i,B=S-o,I=A-y,C=g*I-B*_,D=_*P-I*m,R=m*B-P*g,L=E*C+w*D+F*R;if(Math.abs(L)<=Number.EPSILON)continue;const N=d-i,z=h-o,U=b-y,k=N*C+z*D+U*R;if(L>0){if(k<0||k>L)continue}else if(k>0||k<L)continue;const V=z*F-w*U,H=U*E-F*N,W=N*w-E*z,q=m*V+g*H+_*W;if(L>0){if(q<0||k+q>L)continue}else if(q>0||k+q<L)continue;const G=(P*V+B*H+I*W)/L;G>=0&&u(G,v(E,w,F,P,B,I,p),t)}}const _=Object(s["e"])(),O=Object(s["e"])();function v(t,e,r,n,i,s,c){return Object(o["x"])(_,t,e,r),Object(o["x"])(O,n,i,s),Object(o["h"])(c,_,O),Object(o["s"])(c,c),c}function y(t,e,r){return Object(o["x"])(r,1/(e[0]-t[0]),1/(e[1]-t[1]),1/(e[2]-t[2]))}function T(t,e,r,n){return x(t,e,r,n,1/0)}function x(t,e,r,n,i){const s=(t[0]-n-e[0])*r[0],o=(t[3]+n-e[0])*r[0];let c=Math.min(s,o),a=Math.max(s,o);const u=(t[1]-n-e[1])*r[1],l=(t[4]+n-e[1])*r[1];if(a=Math.min(a,Math.max(u,l)),a<0)return!1;if(c=Math.max(c,Math.min(u,l)),c>a)return!1;const f=(t[2]-n-e[2])*r[2],d=(t[5]+n-e[2])*r[2];return a=Math.min(a,Math.max(f,d)),!(a<0)&&(c=Math.max(c,Math.min(f,d)),!(c>a)&&c<i)}function j(t,e,r,n,s){let o=(r.screenLength||0)*t.pixelRatio;s&&(o=Object(l["f"])(o,n,e,s));const c=o*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return Object(i["i"])(c*e,r.minWorldLength||0,null!=r.maxWorldLength?r.maxWorldLength:1/0)}function M(t,e,r){if(!t)return;const n=t.parameters,i=t.paddingPixelsOverride;e.setUniform4f(r,n.divisor,n.offset,n.minPixelSize,i)}function S(t,e){const r=e?S(e):{};for(const n in t){let e=t[n];e&&e.forEach&&(e=w(e)),null==e&&n in r||(r[n]=e)}return r}function A(t,e){let r=!1;for(const n in e){const i=e[n];void 0!==i&&(r=!0,Array.isArray(i)?t[n]=i.slice():t[n]=i)}return r}function E(t,e,r,n,s){if(!e.options.selectionMode)return;const o=t.vertexAttributes.get("position").data,c=t.vertexAttributes.get("size"),a=c&&c.data[0],u=r[0],l=r[1],f=((a+n)/2+4)*t.screenToWorldRatio;let d=Number.MAX_VALUE;for(let h=0;h<o.length-5;h+=3){const t=o[h],e=o[h+1],r=u-t,n=l-e,s=o[h+3]-t,c=o[h+4]-e,a=Object(i["d"])((s*r+c*n)/(s*s+c*c),0,1),f=s*a-r,b=c*a-n,p=f*f+b*b;p<d&&(d=p)}d<f*f&&s()}function w(t){const e=[];return t.forEach(t=>e.push(t)),e}const F={multiply:1,ignore:2,replace:3,tint:4},P=1e3},"82b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o}));r("c120");function n(t){switch(t){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},"87b7":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return l})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return d})),r.d(e,"i",(function(){return o})),r.d(e,"j",(function(){return s}));const n={func:513},i={func:519},s={mask:255},o={mask:0},c=t=>({function:{func:517,ref:t,mask:t},operation:{fail:7680,zFail:7680,zPass:7680}}),a=t=>({function:{func:519,ref:t,mask:t},operation:{fail:7680,zFail:7680,zPass:7681}}),u={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},l={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},f={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},d={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},"8d95":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return j})),r.d(e,"e",(function(){return g}));var n=r("38a4"),i=r("0b2d"),s=r("e431"),o=r("2119"),c=r("f091");function a(t){return t?{origin:Object(i["d"])(t.origin),vector:Object(i["d"])(t.vector)}:{origin:Object(i["e"])(),vector:Object(i["e"])()}}function u(t,e){const r=x.get();return r.origin=t,r.vector=e,r}function l(t,e=a()){return f(t.origin,t.vector,e)}function f(t,e,r=a()){return Object(s["l"])(r.origin,t),Object(s["l"])(r.vector,e),r}function d(t,e,r=a()){return Object(s["l"])(r.origin,t),Object(s["k"])(r.vector,e,t),r}function h(t,e){const r=Object(s["k"])(c["d"].get(),e,t.origin),i=Object(s["i"])(t.vector,r),o=Object(s["i"])(t.vector,t.vector),a=Object(n["d"])(i/o,0,1),u=Object(s["k"])(c["d"].get(),Object(s["f"])(c["d"].get(),t.vector,a),r);return Object(s["i"])(u,u)}function b(t,e){return Math.sqrt(h(t,e))}function p(t,e,r){return g(t,e,0,1,r)}function m(t,e,r){return Object(s["g"])(r,t.origin,Object(s["f"])(r,t.vector,e))}function g(t,e,r,i,o){const{vector:a,origin:u}=t,l=Object(s["k"])(c["d"].get(),e,u),f=Object(s["i"])(a,l)/Object(s["t"])(a);return Object(s["f"])(o,a,Object(n["d"])(f,r,i)),Object(s["g"])(o,o,t.origin)}function _(t,e){if(y(t,u(e.origin,e.direction),!1,T)){const{tA:e,pB:r,distance2:n}=T;if(e>=0&&e<=1)return n;if(e<0)return Object(s["m"])(t.origin,r);if(e>1)return Object(s["m"])(Object(s["g"])(c["d"].get(),t.origin,t.vector),r)}return null}function O(t,e,r){return!!y(t,e,!0,T)&&(Object(s["l"])(r,T.pA),!0)}function v(t,e){return y(t,e,!0,T)?T.distance2:null}function y(t,e,r,i){const o=1e-6,a=t.origin,u=Object(s["g"])(c["d"].get(),a,t.vector),l=e.origin,f=Object(s["g"])(c["d"].get(),l,e.vector),d=c["d"].get(),h=c["d"].get();if(d[0]=a[0]-l[0],d[1]=a[1]-l[1],d[2]=a[2]-l[2],h[0]=f[0]-l[0],h[1]=f[1]-l[1],h[2]=f[2]-l[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;const b=c["d"].get();if(b[0]=u[0]-a[0],b[1]=u[1]-a[1],b[2]=u[2]-a[2],Math.abs(b[0])<o&&Math.abs(b[1])<o&&Math.abs(b[2])<o)return!1;const p=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],m=h[0]*b[0]+h[1]*b[1]+h[2]*b[2],g=d[0]*b[0]+d[1]*b[1]+d[2]*b[2],_=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],O=(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*_-m*m;if(Math.abs(O)<o)return!1;let v=(p*m-g*_)/O,y=(p+m*v)/_;r&&(v=Object(n["d"])(v,0,1),y=Object(n["d"])(y,0,1));const T=c["d"].get(),x=c["d"].get();return T[0]=a[0]+v*b[0],T[1]=a[1]+v*b[1],T[2]=a[2]+v*b[2],x[0]=l[0]+y*h[0],x[1]=l[1]+y*h[1],x[2]=l[2]+y*h[2],i.tA=v,i.tB=y,i.pA=T,i.pB=x,i.distance2=Object(s["m"])(T,x),!0}const T={tA:0,tB:0,pA:Object(i["e"])(),pB:Object(i["e"])(),distance2:0},x=new o["a"](()=>({origin:null,vector:null}));var j=Object.freeze({__proto__:null,create:a,wrap:u,copy:l,fromValues:f,fromPoints:d,distance2:h,distance:b,projectPoint:p,pointAt:m,projectPointClamp:g,closestRayDistance2:_,closestLineSegmentPoint:O,closestLineSegmentDistance2:v})},"8dd3":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7}},"8e97":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n,i=r("d791"),s=r("970c");!function(t){function e(t,e,r){t.setUniform3f("camPos",r[3]-e[0],r[7]-e[1],r[11]-e[2])}function r(t,e){t.setUniformMatrix4fv("proj",e)}function n(t,e){t.setUniform2fv("nearFar",e)}function s(t,e,r){Object(i["t"])(o,r,e),t.setUniform3fv("localOrigin",e),t.setUniformMatrix4fv("view",o)}function c(t,e){s(t,e.origin,e.camera.viewMatrix)}function a(t,e){t.setUniform4fv("viewport",e.camera.fullViewport)}t.bindCamPosition=e,t.bindProjectionMatrix=r,t.bindNearFar=n,t.bindViewCustomOrigin=s,t.bindView=c,t.bindViewport=a}(n||(n={}));const o=Object(s["a"])()},"91b0":function(t,e,r){"use strict";class n{constructor(t,e){this._context=t,this._desc=e,this._context.instanceCounter.increment(5,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,e.internalFormat,e.width,e.height)}get descriptor(){return this._desc}resize(t,e){const r=this._desc;if(r.width===t&&r.height===e)return;r.width=t,r.height=e;const n=this._context.gl;this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}e["a"]=n},"970c":function(t,e,r){"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e,r,n,i,s,o,c,a,u,l,f,d,h,b,p){const m=new Float32Array(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=s,m[6]=o,m[7]=c,m[8]=a,m[9]=u,m[10]=l,m[11]=f,m[12]=d,m[13]=h,m[14]=b,m[15]=p,m}function o(t,e){return new Float32Array(t,e,16)}r.d(e,"a",(function(){return n}));const c=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:c})},"9a64":function(t,e,r){"use strict";function n(t,e,r){for(let n=0;n<r;++n)e[2*n]=t[n],e[2*n+1]=t[n]-e[2*n]}function i(t,e,r,i){for(let c=0;c<i;++c)s[0]=t[c],n(s,o,1),e[c]=o[0],r[c]=o[1]}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));const s=new Float64Array(1),o=new Float32Array(2)},"9f8b":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("5f6c"),i=Object(n["b"])((function(t){var e;void 0!==(e=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(t.exports=e)})),s=Object(n["b"])((function(t){var e;void 0!==(e=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(t.exports=e)})),o=Object(n["b"])((function(t){var e;void 0!==(e=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(t.exports=e)}))},a125:function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"b",(function(){return T}));var n=r("0b2d"),i=r("e431"),s=r("2119"),o=r("3349"),c=r("f091"),a=r("8d95");function u(t){return t?{p0:Object(n["d"])(t.p0),p1:Object(n["d"])(t.p1),p2:Object(n["d"])(t.p2)}:{p0:Object(n["e"])(),p1:Object(n["e"])(),p2:Object(n["e"])()}}function l(t,e,r){const n=O.get();return n.p0=t,n.p1=e,n.p2=r,n}function f(t,e=u()){return d(t.p0,t.p1,t.p2,e)}function d(t,e,r,n=u()){return Object(i["l"])(n.p0,t),Object(i["l"])(n.p1,e),Object(i["l"])(n.p2,r),n}function h(t,e){const r=t.p0,n=t.p1,s=t.p2,o=Object(i["k"])(c["d"].get(),n,r),u=Object(i["k"])(c["d"].get(),s,n),l=Object(i["k"])(c["d"].get(),r,s),f=Object(i["k"])(c["d"].get(),e,r),d=Object(i["k"])(c["d"].get(),e,n),h=Object(i["k"])(c["d"].get(),e,s),b=Object(i["h"])(o,o,l),p=Object(i["i"])(Object(i["h"])(c["d"].get(),o,b),f),m=Object(i["i"])(Object(i["h"])(c["d"].get(),u,b),d),g=Object(i["i"])(Object(i["h"])(c["d"].get(),l,b),h);if(p>0&&m>0&&g>0){const t=Object(i["i"])(b,f);return t*t/Object(i["i"])(b,b)}const O=Object(a["b"])(Object(a["c"])(r,o,_.get()),e),v=Object(a["b"])(Object(a["c"])(n,u,_.get()),e),y=Object(a["b"])(Object(a["c"])(s,l,_.get()),e);return Math.min(O,v,y)}function b(t,e,r){const n=1e-5,{direction:s,origin:o}=e,{p0:c,p1:a,p2:u}=t,l=a[0]-c[0],f=a[1]-c[1],d=a[2]-c[2],h=u[0]-c[0],b=u[1]-c[1],p=u[2]-c[2],m=s[1]*p-b*s[2],g=s[2]*h-p*s[0],_=s[0]*b-h*s[1],O=l*m+f*g+d*_;if(O>-n&&O<n)return!1;const v=1/O,y=o[0]-c[0],T=o[1]-c[1],x=o[2]-c[2],j=v*(y*m+T*g+x*_);if(j<0||j>1)return!1;const M=T*d-f*x,S=x*l-d*y,A=y*f-l*T,E=v*(s[0]*M+s[1]*S+s[2]*A);return!(E<0||j+E>1)&&(r&&(Object(i["f"])(r,s,v*(h*M+b*S+p*A)),Object(i["g"])(r,o,r)),!0)}function p(t,e,r){const n=Object(o["i"])(t,e),i=Object(o["i"])(e,r),s=Object(o["i"])(r,t),c=(n+i+s)/2,a=c*(c-n)*(c-i)*(c-s);return a<=0?0:Math.sqrt(a)}function m(t){return p(t.p0,t.p1,t.p2)}function g(t,e,r){return Object(i["k"])(v,e,t),Object(i["k"])(y,r,t),Object(i["q"])(Object(i["h"])(v,v,y))/2}const _=new s["a"](a["a"]),O=new s["a"](()=>({p0:null,p1:null,p2:null})),v=Object(n["e"])(),y=Object(n["e"])();var T=Object.freeze({__proto__:null,create:u,wrap:l,copy:f,fromValues:d,distance2:h,intersectRay:b,areaPoints2d:p,area2d:m,areaPoints3d:g})},a1ff:function(t,e,r){"use strict";var n=r("b2b2"),i=r("38a4"),s=r("c514");const o=4,c=0;class a{constructor(t,e,r=null){this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(0,this),this._context=t,this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){if(this._context&&this._context.gl){if(this._glName){const t=this._context.gl;this._context.unbindTextureAllUnits(this),t.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}release(){this.dispose()}resize(t,e){const r=this._descriptor;r.width===t&&r.height===e||(r.width=t,r.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const e=this._context.gl;this._glName||(this._glName=e.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||o,this._descriptor.height=this._descriptor.height||o);const r=this._context.getBoundTexture(c);this._context.bindTexture(this,c);const i=this._descriptor;a._validateTexture(this._context,i),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);const s=i.pixelFormat;let l=i.internalFormat?i.internalFormat:s;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let r=t.width,n=t.height;t instanceof HTMLVideoElement&&(r=t.videoWidth,n=t.videoHeight),i.width&&i.height&&console.assert(r===i.width&&n===i.height),e.texImage2D(e.TEXTURE_2D,0,l,s,i.dataType,t),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=r),void 0===i.height&&(i.height=n)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),e.DEPTH24_STENCIL8&&l===e.DEPTH_STENCIL&&(l=e.DEPTH24_STENCIL8);let r=i.width,o=i.height;if(u(t)){const n=Math.round(Math.log(Math.max(r,o))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&n===t.levels.length;for(let s=0;;++s){const n=t.levels[Math.min(s,t.levels.length-1)];if(e.compressedTexImage2D(e.TEXTURE_2D,s,l,r,o,0,n),1===r&&1===o||!i.hasMipmap)break;r=Math.max(1,r>>1),o=Math.max(1,o>>1)}}else if(Object(n["k"])(t))e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,s,i.dataType,t),i.hasMipmap&&this.generateMipmap();else for(let t=0;e.texImage2D(e.TEXTURE_2D,t,l,r,o,0,s,i.dataType,null),(1!==r||1!==o)&&i.hasMipmap;++t)r=Math.max(1,r>>1),o=Math.max(1,o>>1)}a._applySamplingMode(e,this._descriptor),a._applyWrapMode(e,this._descriptor),a._applyAnisotropicFilteringParameters(this._context,this._descriptor),r&&this._context.bindTexture(r,c)}updateData(t,e,r,n,i,s){s||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const o=this._context.gl,a=this._descriptor,u=this._context.getBoundTexture(c);this._context.bindTexture(this,c),(e<0||r<0||n>a.width||i>a.height||e+n>a.width||r+i>a.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,a.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,t,e,r,a.pixelFormat,a.dataType,s):o.texSubImage2D(o.TEXTURE_2D,t,e,r,n,i,a.pixelFormat,a.dataType,s),this._context.bindTexture(u,c)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,a._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.getBoundTexture(c);this._context.bindTexture(this,c);const r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(e,c)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,a._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,a._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(a._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(a._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(t,e){(e.width<0||e.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=Object(i["k"])(e.width)&&Object(i["k"])(e.height);Object(s["a"])(t.gl)||r||("number"==typeof e.wrapMode?33071!==e.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===e.wrapMode.s&&33071===e.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(t,e){let r=e.samplingMode,n=e.samplingMode;9985===r||9987===r?(r=9729,e.hasMipmap||(n=9729)):9984!==r&&9986!==r||(r=9728,e.hasMipmap||(n=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n)}static _applyWrapMode(t,e){"number"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){if(null==e.maxAnisotropy)return;const r=t.capabilities.textureFilterAnisotropic;if(!r)return;const n=t.gl;n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy)}}function u(t){return Object(n["k"])(t)&&"type"in t&&"compressed"===t.type}e["a"]=a},afe1:function(t,e,r){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function s(t,e,r,n,i,s,o,c,a,u,l,f,d,h,b,p){return[t,e,r,n,i,s,o,c,a,u,l,f,d,h,b,p]}function o(t,e){return new Float64Array(t,e,16)}r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return s}));const c=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:c})},b139:function(t,e,r){"use strict";function n(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function o(t,e){return new Float64Array(t,e,4)}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));const c=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o,IDENTITY:c})},b616:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("8a44"),i=r("0b2d"),s=r("e431"),o=r("1153");class c{constructor(t,e,r,n){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.indices=r,this.position=n,this.center=Object(i["e"])(),Object(o["a"])(t.length>=1),Object(o["a"])(r.length%this._numIndexPerPrimitive==0),Object(o["a"])(r.length>=t.length*this._numIndexPerPrimitive),Object(o["a"])(3===n.size||4===n.size);const{data:c,size:u}=n,l=t.length;let f=u*r[this._numIndexPerPrimitive*t[0]];a.clear(),a.push(f),this.bbMin=Object(i["g"])(c[f],c[f+1],c[f+2]),this.bbMax=Object(i["d"])(this.bbMin);for(let i=0;i<l;++i){const e=this._numIndexPerPrimitive*t[i];for(let t=0;t<this._numIndexPerPrimitive;++t){f=u*r[e+t],a.push(f);let n=c[f];this.bbMin[0]=Math.min(n,this.bbMin[0]),this.bbMax[0]=Math.max(n,this.bbMax[0]),n=c[f+1],this.bbMin[1]=Math.min(n,this.bbMin[1]),this.bbMax[1]=Math.max(n,this.bbMax[1]),n=c[f+2],this.bbMin[2]=Math.min(n,this.bbMin[2]),this.bbMax[2]=Math.max(n,this.bbMax[2])}}Object(s["j"])(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let d=this.radius*this.radius;for(let i=0;i<a.length;++i){f=a.getItemAt(i);const t=c[f]-this.center[0],e=c[f+1]-this.center[1],r=c[f+2]-this.center[2],n=t*t+e*e+r*r;if(n<=d)continue;const s=Math.sqrt(n),o=.5*(s-this.radius);this.radius=this.radius+o,d=this.radius*this.radius;const u=o/s;this.center[0]+=t*u,this.center[1]+=e*u,this.center[2]+=r*u}a.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(Object(s["m"])(this.bbMin,this.bbMax)>1){const t=Object(s["j"])(Object(i["e"])(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,r=new Uint8Array(e),n=new Array(8);for(let i=0;i<8;++i)n[i]=0;const{data:o,size:a}=this.position;for(let i=0;i<e;++i){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[i];let c=a*this.indices[s],u=o[c],l=o[c+1],f=o[c+2];for(let t=1;t<this._numIndexPerPrimitive;++t){c=a*this.indices[s+t];const e=o[c],r=o[c+1],n=o[c+2];e<u&&(u=e),r<l&&(l=r),n<f&&(f=n)}u<t[0]&&(e|=1),l<t[1]&&(e|=2),f<t[2]&&(e|=4),r[i]=e,++n[e]}let u=0;for(let i=0;i<8;++i)n[i]>0&&++u;if(u<2)return;const l=new Array(8);for(let i=0;i<8;++i)l[i]=n[i]>0?new Uint32Array(n[i]):void 0;for(let i=0;i<8;++i)n[i]=0;for(let i=0;i<e;++i){const t=r[i];l[t][n[t]++]=this.primitiveIndices[i]}this._children=new Array(8);for(let i=0;i<8;++i)void 0!==l[i]&&(this._children[i]=new c(l[i],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){a.prune()}}const a=new n["a"]({deallocator:null})},b623:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return u}));var n=r("b2b2"),i=r("d791"),s=r("afe1"),o=r("1153"),c=r("9a64");function a(t,e){return Object(n["j"])(t)&&(t=[]),t.push(e),t}function u(t,e){if(Object(n["j"])(t))return t;const r=t.filter(t=>t!==e);return 0===r.length?null:r}function l(t){return!!Object(n["k"])(t)&&!t.visible}function f(t,e){const r=new Map;return r.set(0,e.acquire(t,0)),r.set(1,e.acquire(t,7)),r.set(4,e.acquire(t,3)),r.set(3,e.acquire(t,2)),r.set(2,e.acquire(t,1)),r.set(5,e.acquire(t,4)),r.set(7,e.acquire(t,3)),r.set(6,e.acquire(t,3)),r}function d(t,e){e.release(t,0),e.release(t,7),e.release(t,3),e.release(t,2),e.release(t,1),e.release(t,4)}function h(t,e,r){const s=t.origin.vec3;Object(o["m"])(g,-s[0],-s[1],-s[2]),Object(n["k"])(t.transformation)?Object(i["m"])(e,g,t.transformation):Object(i["c"])(e,g),r&&(Object(i["a"])(r,e),Object(i["b"])(r,r))}function b(t,e,r,n,i){p[0]=t.get(e,0),p[1]=t.get(e,1),p[2]=t.get(e,2),Object(c["a"])(p,m,3),r.set(i,0,m[0]),n.set(i,0,m[1]),r.set(i,1,m[2]),n.set(i,1,m[3]),r.set(i,2,m[4]),n.set(i,2,m[5])}const p=new Float64Array(3),m=new Float32Array(6),g=Object(s["b"])()},be24:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t,e){e.vvInstancingEnabled&&(e.vvSize||e.vvColor)&&t.attributes.add("instanceFeatureAttribute","vec4"),e.vvSize?(t.vertex.uniforms.add("vvSizeMinSize","vec3"),t.vertex.uniforms.add("vvSizeMaxSize","vec3"),t.vertex.uniforms.add("vvSizeOffset","vec3"),t.vertex.uniforms.add("vvSizeFactor","vec3"),t.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),t.vertex.uniforms.add("vvSymbolAnchor","vec3"),t.vertex.code.add(n["a"]`
      vec3 vvScale(vec4 _featureAttribute) {
        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
      }

      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
      }
    `),t.vertex.code.add(n["a"]`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${e.vvInstancingEnabled?n["a"]`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):t.vertex.code.add(n["a"]`
      vec4 localPosition() { return vec4(position, 1.0); }

      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }
    `),e.vvColor?(t.vertex.constants.add("vvColorNumber","int",8),t.vertex.code.add(n["a"]`
      uniform float vvColorValues[vvColorNumber];
      uniform vec4 vvColorColors[vvColorNumber];

      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${e.vvInstancingEnabled?n["a"]`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):t.vertex.code.add(n["a"]`
      vec4 vvColor() { return vec4(1.0); }
    `)}!function(t){function e(t,e){e.vvSizeEnabled&&(t.setUniform3fv("vvSizeMinSize",e.vvSizeMinSize),t.setUniform3fv("vvSizeMaxSize",e.vvSizeMaxSize),t.setUniform3fv("vvSizeOffset",e.vvSizeOffset),t.setUniform3fv("vvSizeFactor",e.vvSizeFactor)),e.vvColorEnabled&&(t.setUniform1fv("vvColorValues",e.vvColorValues),t.setUniform4fv("vvColorColors",e.vvColorColors))}function r(t,r){e(t,r),r.vvOpacityEnabled&&(t.setUniform1fv("vvOpacityValues",r.vvOpacityValues),t.setUniform1fv("vvOpacityOpacities",r.vvOpacityOpacities))}function n(t,r){e(t,r),r.vvSizeEnabled&&(t.setUniform3fv("vvSymbolAnchor",r.vvSymbolAnchor),t.setUniformMatrix3fv("vvSymbolRotationMatrix",r.vvSymbolRotationMatrix))}t.bindUniforms=e,t.bindUniformsWithOpacity=r,t.bindUniformsForSymbols=n}(i||(i={}))},bea9:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("f2e0");class i{constructor(t){this.channel=t,this.id=Object(n["b"])()}}},c15d:function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return f}));var n=r("b2b2"),i=r("a1ff"),s=r("8539"),o=r("b2cd");function c(){if(Object(n["j"])(a)){const t=t=>Object(o["b"])("esri/libs/basisu/"+t);a=r.e("chunk-5ba1e7e0").then(r.bind(null,"a58f")).then((function(t){return t.b})).then(({default:e})=>e({locateFile:t}).then(t=>(t.initializeBasis(),delete t.then,t)))}return a}let a,u=null,l=null;async function f(){return Object(n["j"])(l)&&(l=c(),u=await l),l}function d(t){if(Object(n["j"])(u))return t.byteLength;const e=new u.BasisFile(new Uint8Array(t));if(e.getNumImages()<1)return 0;const r=e.getNumLevels(0),i=e.getHasAlpha(),o=e.getImageWidth(0,0),c=e.getImageHeight(0,0);e.close(),e.delete();const a=Object(s["b"])(i?37496:37492),l=(4**r-1)/(3*4**(r-1));return Math.ceil(o*c*a*l)}async function h(t,e,r){Object(n["j"])(u)&&(u=await f());const s=new u.BasisFile(new Uint8Array(r));if(s.getNumImages()<1)return null;const o=s.getNumLevels(0),c=s.getHasAlpha(),a=s.getImageWidth(0,0),l=s.getImageHeight(0,0),{compressedTextureETC:d,compressedTextureS3TC:h}=t.capabilities,[b,p]=d?c?[1,37496]:[0,37492]:h?c?[3,33779]:[2,33776]:[13,6408];s.startTranscoding();const m=[];for(let n=0;n<o;n++)m.push(new Uint8Array(s.getImageTranscodedSizeInBytes(0,n,b))),s.transcodeImage(m[n],0,n,b,0,0);s.close(),s.delete();const g={...e,samplingMode:o>1?9987:9729,hasMipmap:o>1,internalFormat:p,width:a,height:l};return new i["a"](t,g,{type:"compressed",levels:m})}},c2d1:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("3886"),i=r("501b");function s(t,e){t.fragment.include(i["a"]),3===e.output?(t.extensions.add("GL_OES_standard_derivatives"),t.fragment.code.add(n["a"]`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===e.output&&t.fragment.code.add(n["a"]`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)}},c3a4:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t,e){this._module=t,this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}},c514:function(t,e,r){"use strict";function n(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}e["a"]=n},c51b:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("3886");function i(t){t.vertex.code.add(n["a"]`
    const float PI = 3.141592653589793;
  `),t.fragment.code.add(n["a"]`
    const float PI = 3.141592653589793;
    const float LIGHT_NORMALIZATION = 1.0 / PI;
    const float INV_PI = 0.3183098861837907;
    const float HALF_PI = 1.570796326794897;
    `)}},c6d7:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return i}));var n=r("3886");function i(t,e){t.fragment.uniforms.add("terrainDepthTexture","sampler2D"),t.fragment.uniforms.add("cameraNearFar","vec2"),t.fragment.uniforms.add("inverseViewport","vec2"),t.fragment.code.add(n["a"]`
    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);
      if(fragmentDepth ${e.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `)}function s(t,e,r){r.multipassTerrainEnabled&&r.terrainLinearDepthTexture&&(t.setUniform1i("terrainDepthTexture",10),e.bindTexture(r.terrainLinearDepthTexture,10))}},ca98:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t,e){e&&(this._config=e.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}dispose(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}reload(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(t),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(t,e,r){}bindMaterial(t,e,r){}bindDraw(t,e,r){}bindPipelineState(t){t.setPipelineState(this.pipeline)}ensureAttributeLocations(t){this.program.assertCompatibleVertexAttributeLocations(t)}get primitiveType(){return 4}}},d047:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("3886"),i=r("501b");function s(t){t.include(i["a"]),t.code.add(n["a"]`
    float linearDepthFromFloat(float depth, vec2 nearFar) {
      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
    }

    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
    }
  `)}},d0ac:function(t,e,r){"use strict";r.d(e,"a",(function(){return I})),r.d(e,"b",(function(){return M})),r.d(e,"c",(function(){return w})),r.d(e,"d",(function(){return P})),r.d(e,"e",(function(){return A})),r.d(e,"f",(function(){return j})),r.d(e,"g",(function(){return E})),r.d(e,"h",(function(){return F})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return B}));var n=r("2047"),i=r("e431"),s=r("f091");function o(t=b){return[t[0],t[1],t[2],t[3]]}function c(t,e,r,n){return l(t,e,r,n,s["e"].get())}function a(t,e){return l(t[0],t[1],t[2],e,s["e"].get())}function u(t,e=o()){return l(t[0],t[1],t[2],t[3],e)}function l(t,e,r,n,i=o()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function f(t,e,r=o()){return Object(i["l"])(r,t),r[3]=e,r}function d(t,e,r=o()){return Object(i["h"])(r,t,e),Object(i["s"])(r,r),r[3]=Object(n["a"])(t,e),r}function h(t){return t}const b=[0,0,1,0];var p=Object.freeze({__proto__:null,create:o,wrap:c,wrapAxisAngle:a,copy:u,fromValues:l,fromAxisAndAngle:f,fromPoints:d,axis:h,UP:b}),m=r("8d95"),g=r("4054"),_=r("f895"),O=r("70ab"),v=r("0d9f"),y=r("19b9"),T=r("3482"),x=r("a125");const j=O["h"],M=v["b"],S=x["b"],A=m["d"],E=g["i"],w=y["c"],F=_["e"],P=T["f"],B=n["d"],I=p},d267:function(t,e,r){"use strict";r("c120");var n=r("e92d"),i=r("a1ff"),s=r("91b0");const o=n["a"].getLogger("esri.views.webgl.FrameBufferObject");class c{constructor(t,e,r,n){if(this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...e},t.instanceCounter.increment(4,this),r){let e;var o;if(Array.isArray(r))for(const n of r){const{attachmentPoint:r,texture:s}=n,o=s instanceof i["a"]?s:new i["a"](t,s);e=o.descriptor,this._colorAttachments.set(r,o),this._validateColorAttachmentPoint(r),this._validateTextureDimensions(e,this._desc)}else r instanceof i["a"]?(e=r.descriptor,this._colorAttachments.set(36064,r)):(e=r,this._colorAttachments.set(36064,new i["a"](t,r))),0!==(null==(o=this._desc)?void 0:o.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(e,this._desc)}if(n instanceof s["a"]){var a;const t=null!=(a=this._desc.depthStencilTarget)?a:3;2===t?this._stencilAttachment=n:1===t||3===t?this._depthAttachment=n:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),c._validateBufferDimensions(n.descriptor,this._desc)}else if(n){let t;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),n instanceof i["a"]?(this._depthStencilTexture=n,t=this._depthStencilTexture.descriptor):(t=n,this._depthStencilTexture=new i["a"](this._context,t)),this._validateTextureDimensions(t,this._desc)}}dispose(){if(!this._desc)return;const t=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(4,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(36064);return t&&t instanceof i["a"]?t:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&e instanceof i["a"]?e:null}attachColorTexture(t,e=36064){if(!t)return;this._validateColorAttachmentPoint(e);const r=t.descriptor;if(this._validateTextureDimensions(r,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);const r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,t.glName,0)}this._colorAttachments.set(e,t)}detachColorTexture(t=36064){const e=this._colorAttachments.get(t);if(e instanceof i["a"]){const r=e;if(this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,t,e.TEXTURE_2D,null,0)}return this._colorAttachments.delete(t),r}}attachDepthStencilTexture(t){if(!t)return;const e=t.descriptor;if(34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(e,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(!t)return;const e=t.descriptor;if(34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),c._validateBufferDimensions(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===e.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}copyToTexture(t,e,r,n,i,s,o){(t<0||e<0||i<0||s<0)&&console.error("Offsets cannot be negative!"),(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!");const c=this._desc,a=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(t+r>c.width||e+n>c.height||i+r>a.width||s+n>a.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const u=this._context;u.bindTexture(o,0),u.bindFramebuffer(this),u.gl.copyTexSubImage2D(3553,0,i,s,t,e,r,n)}readPixels(t,e,r,n,i,s,o){(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,r,n,i,s,o)}resize(t,e){const r=this._desc;if(r.width!==t||r.height!==e){if(!this._initialized)return r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(){var t,e,r,n;const o=this._context.gl;if(this._initialized)return void o.bindFramebuffer(o.FRAMEBUFFER,this.glName);this._glName&&o.deleteFramebuffer(this._glName);const c=this._context,u=o.createFramebuffer(),l=this._desc,f=null!=(t=l.colorTarget)?t:1,d=null!=(e=l.width)?e:1,h=null!=(r=l.height)?r:1;if(o.bindFramebuffer(o.FRAMEBUFFER,u),0===this._colorAttachments.size)if(0===f)this._colorAttachments.set(36064,a(c,l));else{const t=new s["a"](c,{internalFormat:32854,width:d,height:h});this._colorAttachments.set(36064,t)}this._colorAttachments.forEach((t,e)=>{t&&(t instanceof i["a"]?o.framebufferTexture2D(o.FRAMEBUFFER,e,o.TEXTURE_2D,t.glName,0):o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,t.glName))});const b=null!=(n=l.depthStencilTarget)?n:0;switch(b){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new s["a"](c,{internalFormat:1===l.depthStencilTarget?33189:34041,width:d,height:h}));const t=1===b?o.DEPTH_ATTACHMENT:o.DEPTH_STENCIL_ATTACHMENT;o.framebufferRenderbuffer(o.FRAMEBUFFER,t,o.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new s["a"](c,{internalFormat:36168,width:d,height:h})),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){c.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");const t={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d,height:h};this._depthStencilTexture=new i["a"](c,t)}o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=u,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach((t,e)=>{if(t instanceof i["a"]){if(this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){const r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,e,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}}),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}static _validateBufferDimensions(t,e){console.assert(t.width>=0&&t.height>=0),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateTextureDimensions(t,e){console.assert(t.width>=0&&t.height>=0),3553!==t.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateColorAttachmentPoint(t){if(-1===c._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;c._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else c._MAX_COLOR_ATTACHMENTS=1}const e=t-36064;e+1>c._MAX_COLOR_ATTACHMENTS&&o.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${c._MAX_COLOR_ATTACHMENTS} color attachments`)}}c._MAX_COLOR_ATTACHMENTS=-1;const a=(t,e)=>new i["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});e["a"]=c},d272:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("b2b2"),i=r("0b2d"),s=r("e431"),o=r("3886");function c(t,e){if(e.slicePlaneEnabled){t.extensions.add("GL_OES_standard_derivatives"),e.sliceEnabledForVertexPrograms&&(t.vertex.uniforms.add("slicePlaneOrigin","vec3"),t.vertex.uniforms.add("slicePlaneBasis1","vec3"),t.vertex.uniforms.add("slicePlaneBasis2","vec3")),t.fragment.uniforms.add("slicePlaneOrigin","vec3"),t.fragment.uniforms.add("slicePlaneBasis1","vec3"),t.fragment.uniforms.add("slicePlaneBasis2","vec3");const r=o["a"]`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,n=o["a"]`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `,i=e.sliceHighlightDisabled?o["a"]`#define highlightSlice(_color_, _pos_) (_color_)`:o["a"]`
        ${n}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(r),t.fragment.code.add(r),t.fragment.code.add(i)}else{const r=o["a"]`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(r),t.fragment.code.add(r)}}!function(t){function e(e,r,n){t.bindUniforms(e,r,n.slicePlane,n.origin)}function r(t,e,r,o){e.slicePlaneEnabled&&(Object(n["k"])(r)?(o?(Object(s["k"])(a,r.origin,o),t.setUniform3fv("slicePlaneOrigin",a)):t.setUniform3fv("slicePlaneOrigin",r.origin),t.setUniform3fv("slicePlaneBasis1",r.basis1),t.setUniform3fv("slicePlaneBasis2",r.basis2)):(t.setUniform3fv("slicePlaneBasis1",i["b"]),t.setUniform3fv("slicePlaneBasis2",i["b"]),t.setUniform3fv("slicePlaneOrigin",i["b"])))}t.bindUniformsWithOrigin=e,t.bindUniforms=r}(c||(c={}));const a=Object(i["e"])()},d5f7:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return a}));var n=r("fa1e"),i=r("7ce4"),s=r("a1ff"),o=r("0fa6"),c=r("7c33");function a(t,e=c["a"],r=n["a"],s=-1,a=1){let u=null;switch(e){case c["b"]:u=new Float32Array([s,s,0,0,a,s,1,0,s,a,0,1,a,a,1,1]);break;case c["a"]:default:u=new Float32Array([s,s,a,s,s,a,a,a])}return new o["a"](t,r,{geometry:e},{geometry:i["a"].createVertex(t,35044,u)})}const u=4;function l(t,e=u){return new s["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:e,height:e})}function f(t,e,r=u){const n=new Uint8Array(r*r*4);for(let i=0;i<n.length;i+=4)n[i+0]=255*e[0],n[i+1]=255*e[1],n[i+2]=255*e[2],n[i+3]=255*e[3];return new s["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:r,height:r},n)}function d(t){return new s["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},d7f7:function(t,e,r){"use strict";var n=r("70a2");class i extends n["a"]{constructor(t){super(),this.material=t.material,this.techniqueRep=t.techniqueRep,this.output=t.output}getTechnique(){return this.technique}getPipelineState(t,e){return this.getTechnique().pipeline}ensureResources(t){return 2}ensureParameters(t){}}e["a"]=i},da1c:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return h}));var n=r("38a4");function i(t,e){return new b(t,p,e)}function s(t,e){const{curvatureDependent:r,scaleStart:n,scaleFallOffRange:i}=p;return new b(t,{curvatureDependent:{min:{curvature:r.min.curvature,tiltAngle:r.min.tiltAngle,scaleFallOffFactor:m.curvatureDependent.min.scaleFallOffFactor},max:{curvature:r.max.curvature,tiltAngle:r.max.tiltAngle,scaleFallOffFactor:m.curvatureDependent.max.scaleFallOffFactor}},scaleStart:n,scaleFallOffRange:i,minPixelSize:m.minPixelSize},e)}function o(t){return Math.abs(t*t*t)}function c(t,e,r){const n=r.parameters,i=r.paddingPixelsOverride;return _.scale=Math.min(n.divisor/(e-n.offset),1),_.factor=o(t),_.minPixelSize=n.minPixelSize,_.paddingPixels=i,_}function a(t,e){return 0===t?e.minPixelSize:e.minPixelSize*(1+2*e.paddingPixels/t)}function u(t,e){return Math.max(Object(n["l"])(t*e.scale,t,e.factor),a(t,e))}function l(t,e,r){const n=c(t,e,r);return n.minPixelSize=0,n.paddingPixels=0,u(1,n)}function f(t,e,r,n){n.scale=l(t,e,r),n.factor=0,n.minPixelSize=r.parameters.minPixelSize,n.paddingPixels=r.paddingPixelsOverride}function d(t,e,r=[0,0]){const n=Math.min(Math.max(e.scale,a(t[1],e)/t[1]),1);return r[0]=t[0]*n,r[1]=t[1]*n,r}function h(t,e,r,n){return u(t,c(e,r,n))}class b{constructor(t,e,r,n=g(),i){this.viewingMode=t,this.description=e,this.ellipsoidRadius=r,this.parameters=n,this._paddingPixelsOverride=i,2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}get paddingPixelsOverride(){return this._paddingPixelsOverride||this.parameters.paddingPixels}update(t){return(!this.parameters||this.parameters.camera.fovY!==t.fovY||this.parameters.camera.distance!==t.distance)&&(this.calculateParameters(t,this.ellipsoidRadius,this.parameters),!0)}overridePadding(t){return t!==this.paddingPixelsOverride?new b(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,t):this}calculateParameters(t,e,r){const{scaleStart:n,scaleFallOffRange:i,minPixelSize:s}=this.description,{fovY:o,distance:c}=t,a=this.calculateCurvatureDependentParameters(t,e),u=this.coverageCompensation(t,e,a),{tiltAngle:l,scaleFallOffFactor:f}=a,d=Math.sin(l)*c,h=.5*Math.PI-l-o*(.5-n*u),b=d/Math.cos(h),p=h+o*i*u,m=(b-f*(d/Math.cos(p)))/(1-f);return r.camera.fovY=t.fovY,r.camera.distance=t.distance,r.offset=m,r.divisor=b-m,r.minPixelSize=s,r}calculateCurvatureDependentParametersLocal(t,e,r=O){return r.tiltAngle=this.description.curvatureDependent.min.tiltAngle,r.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor,r}calculateCurvatureDependentParametersGlobal(t,e,r=O){const i=this.description.curvatureDependent,s=1+t.distance/e,o=Math.sqrt(s*s-1),[c,a]=[i.min.curvature,i.max.curvature],u=Object(n["d"])((o-c)/(a-c),0,1),[l,f]=[i.min,i.max];return r.tiltAngle=Object(n["l"])(l.tiltAngle,f.tiltAngle,u),r.scaleFallOffFactor=Object(n["l"])(l.scaleFallOffFactor,f.scaleFallOffFactor,u),r}surfaceCoverageCompensationLocal(t,e,r){return(t.fovY-r.tiltAngle)/t.fovY}surfaceCoverageCompensationGlobal(t,e,r){const n=e*e,i=r.tiltAngle+.5*Math.PI,{fovY:s,distance:o}=t,c=o*o+n-2*Math.cos(i)*o*e,a=Math.sqrt(c),u=Math.sqrt(c-n);return(Math.acos(u/a)-Math.asin(e/(a/Math.sin(i)))+.5*s)/s}}const p={curvatureDependent:{min:{curvature:Object(n["f"])(10),tiltAngle:Object(n["f"])(12),scaleFallOffFactor:.5},max:{curvature:Object(n["f"])(70),tiltAngle:Object(n["f"])(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},m={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};function g(){return{camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0}}const _={scale:0,factor:0,minPixelSize:0,paddingPixels:0},O={tiltAngle:0,scaleFallOffFactor:0}},da35:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s}));var n=r("38a4");class i{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map(()=>0)}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const r of t)e[r]=this[r];return e}}function s(t={}){return(e,r)=>{var i,s;e._parameterNames=null!=(i=e._parameterNames)?i:[],e._parameterNames.push(r);const o=e._parameterNames.length-1,c=t.count||2,a=Math.ceil(Object(n["m"])(c)),u=null!=(s=e._parameterBits)?s:[0];let l=0;for(;u[l]+a>16;)l++,l>=u.length&&u.push(0);e._parameterBits=u;const f=u[l],d=(1<<a)-1<<f;u[l]+=a,Object.defineProperty(e,r,{get(){return this[o]},set(t){if(this[o]!==t&&(this[o]=t,this._keyDirty=!0,this._parameterBits[l]=this._parameterBits[l]&~d|+t<<f&d,"number"!=typeof t&&"boolean"!=typeof t))throw"Configuration value for "+r+" must be boolean or number, got "+typeof t}})}}},dae5:function(t,e,r){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function s(t,e,r,n,i,s,o,c,a){return[t,e,r,n,i,s,o,c,a]}function o(t,e){return new Float64Array(t,e,9)}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:o})},ebd5:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("3886");const i=.1,s=.001;function o(t,e){const r=t.fragment;switch(e.alphaDiscardMode){case 0:r.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < ${n["a"].float(s)}) { discard; } }
      `);break;case 1:r.code.add(n["a"]`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:r.uniforms.add("textureAlphaCutoff","float"),r.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:t.fragment.uniforms.add("textureAlphaCutoff","float"),t.fragment.code.add(n["a"]`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}}},f091:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return g})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return p}));var n=r("b2b2"),i=r("2ab7"),s=r("0b2d"),o=r("dae5"),c=r("afe1"),a=r("b139"),u=r("02f1"),l=r("0fc4");class f{constructor(t,e,r){this.itemByteSize=t,this.itemCreate=e,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=i["a"].before(()=>this.reset())}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n["q"])(this.tickHandle)),this.itemsPtr=0,this.items=Object(n["q"])(this.items),this.buffers=Object(n["q"])(this.buffers)}get(){0===this.itemsPtr&&Object(i["a"])(()=>{});const t=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=t;){const t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let e=0;e<this.itemsPerBuffer;++e)this.items.push(this.itemCreate(t,e*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){const t=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>t;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(t=d){return new f(16,u["d"],t)}static createVec3f64(t=d){return new f(24,s["c"],t)}static createVec4f64(t=d){return new f(32,l["e"],t)}static createMat3f64(t=d){return new f(72,o["b"],t)}static createMat4f64(t=d){return new f(128,c["d"],t)}static createQuatf64(t=d){return new f(32,a["b"],t)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const d=4096,h=f.createVec2f64(),b=f.createVec3f64(),p=f.createVec4f64(),m=(f.createMat3f64(),f.createMat4f64()),g=f.createQuatf64()},f895:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return m})),r.d(e,"c",(function(){return x})),r.d(e,"d",(function(){return A})),r.d(e,"e",(function(){return H}));r("c120");var n=r("b2b2"),i=r("e92d"),s=r("38a4"),o=r("0b2d"),c=r("e431"),a=r("680b"),u=r("d791"),l=r("0fc4"),f=r("7577"),d=r("f091"),h=r("2047"),b=r("4054");const p=i["a"].getLogger("esri.views.3d.support.geometryUtils.sphere");function m(){return Object(l["c"])()}function g(t,e=m()){return Object(f["c"])(e,t)}function _(t,e){return Object(l["d"])(t[0],t[1],t[2],e)}function O(t){return t}function v(t){t[0]=t[1]=t[2]=t[3]=0}function y(t){return t}function T(t){return Array.isArray(t)?t[3]:t}function x(t){return Array.isArray(t)?t:k}function j(t,e,r,n){return Object(l["d"])(t,e,r,n)}function M(t,e,r){return t!==r&&Object(c["l"])(r,t),r[3]=t[3]+e,r}function S(t,e,r){return p.error("sphere.setExtent is not yet supported"),t===r?r:g(t,r)}function A(t,e,r){if(Object(n["j"])(e))return!1;const i=Object(c["k"])(d["d"].get(),e.origin,x(t)),s=Object(c["i"])(e.direction,e.direction),o=2*Object(c["i"])(e.direction,i),a=o*o-4*s*(Object(c["i"])(i,i)-t[3]*t[3]);if(a<0)return!1;const u=Math.sqrt(a);let l=(-o-u)/(2*s);const f=(-o+u)/(2*s);return(l<0||f<l&&f>0)&&(l=f),!(l<0)&&(r&&Object(c["g"])(r,e.origin,Object(c["f"])(d["d"].get(),e.direction,l)),!0)}function E(t,e,r,n){return A(t,Object(b["g"])(e,r,U),n)}function w(t,e){return A(t,e,null)}function F(t,e,r){if(A(t,e,r))return r;const n=P(t,e,d["d"].get());return Object(c["g"])(r,e.origin,Object(c["f"])(d["d"].get(),e.direction,Object(c["p"])(e.origin,n)/Object(c["q"])(e.direction))),r}function P(t,e,r){const n=d["d"].get(),i=d["a"].get();Object(c["h"])(n,e.origin,e.direction);const s=T(t);Object(c["h"])(r,n,e.origin),Object(c["f"])(r,r,1/Object(c["q"])(r)*s);const o=D(t,e.origin),a=Object(h["a"])(e.origin,r);return Object(u["i"])(i),Object(u["r"])(i,i,a+o,n),Object(c["n"])(r,r,i),r}function B(t,e,r){return A(t,e,r)?r:(Object(b["h"])(e,x(t),r),I(t,r,r))}function I(t,e,r){const n=Object(c["k"])(d["d"].get(),e,x(t)),i=Object(c["f"])(d["d"].get(),n,t[3]/Object(c["q"])(n));return Object(c["g"])(r,i,x(t))}function C(t,e){const r=Object(c["k"])(d["d"].get(),e,x(t)),n=Object(c["t"])(r),i=t[3]*t[3];return Math.sqrt(Math.abs(n-i))}function D(t,e){const r=Object(c["k"])(d["d"].get(),e,x(t)),n=Object(c["q"])(r),i=T(t),o=i+Math.abs(i-n);return Object(s["b"])(i/o)}const R=Object(o["e"])();function L(t,e,r,n){const i=Object(c["k"])(R,e,x(t));switch(r){case 0:{const t=Object(a["d"])(i,R)[2];return Object(c["x"])(n,-Math.sin(t),Math.cos(t),0)}case 1:{const t=Object(a["d"])(i,R),e=t[1],r=t[2],s=Math.sin(e);return Object(c["x"])(n,-s*Math.cos(r),-s*Math.sin(r),Math.cos(e))}case 2:return Object(c["s"])(n,i);default:return}}function N(t,e){const r=Object(c["k"])(V,e,x(t));return Object(c["q"])(r)-t[3]}function z(t,e,r,n){const i=N(t,e),s=L(t,e,2,V),o=Object(c["f"])(V,s,r-i);return Object(c["g"])(n,e,o),n}const U=Object(b["c"])(),k=Object(o["e"])(),V=Object(o["e"])();Object.freeze(k);var H=Object.freeze({__proto__:null,create:m,copy:g,fromCenterAndRadius:_,wrap:O,clear:v,fromRadius:y,getRadius:T,getCenter:x,fromValues:j,elevate:M,setExtent:S,intersectRay:A,intersectScreen:E,intersectsRay:w,intersectRayClosestSilhouette:F,closestPointOnSilhouette:P,closestPoint:B,projectPoint:I,distanceToSilhouette:C,angleToSilhouette:D,axisAt:L,altitudeAt:N,setAltitudeAt:z})},fa1e:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},fc00:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("55e6"),i=r("82b9");class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const r of t.fieldNames){const e=t.fields.get(r);this[r]=new e.constructor(this.buffer,e.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const r=this[t];return r&&r.elementCount===e.ElementCount&&r.elementType===e.ElementType?r:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(t.buffer,e*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(t.buffer,e*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,e){return this.appendField(t,n["m"],e),this}vec2f64(t,e){return this.appendField(t,n["n"],e),this}vec3f(t,e){return this.appendField(t,n["u"],e),this}vec3f64(t,e){return this.appendField(t,n["v"],e),this}vec4f(t,e){return this.appendField(t,n["C"],e),this}vec4f64(t,e){return this.appendField(t,n["D"],e),this}mat3f(t,e){return this.appendField(t,n["f"],e),this}mat3f64(t,e){return this.appendField(t,n["g"],e),this}mat4f(t,e){return this.appendField(t,n["h"],e),this}mat4f64(t,e){return this.appendField(t,n["i"],e),this}vec4u8(t,e){return this.appendField(t,n["J"],e),this}f32(t,e){return this.appendField(t,n["a"],e),this}f64(t,e){return this.appendField(t,n["b"],e),this}u8(t,e){return this.appendField(t,n["l"],e),this}u16(t,e){return this.appendField(t,n["j"],e),this}i8(t,e){return this.appendField(t,n["e"],e),this}vec2i8(t,e){return this.appendField(t,n["q"],e),this}vec2i16(t,e){return this.appendField(t,n["o"],e),this}vec2u8(t,e){return this.appendField(t,n["t"],e),this}vec4u16(t,e){return this.appendField(t,n["H"],e),this}u32(t,e){return this.appendField(t,n["k"],e),this}appendField(t,e,r){const n=e.ElementCount*Object(i["a"])(e.ElementType),s=this.stride;this.fields.set(t,{size:n,constructor:e,offset:s,optional:r}),this.stride+=n,this.fieldNames.push(t)}alignTo(t){return this.stride=Math.floor((this.stride+t-1)/t)*t,this}hasField(t){return this.fieldNames.indexOf(t)>=0}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new o;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((e,r)=>t.fields.set(r,e)),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}function c(){return new o}}}]);