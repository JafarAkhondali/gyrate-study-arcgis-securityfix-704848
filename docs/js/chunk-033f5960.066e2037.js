(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-033f5960","chunk-1900908c","chunk-2d0d6f6b"],{"008c":function(t,e,n){"use strict";n.d(e,"a",(function(){return V})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return E})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return I}));var r=n("b2b2"),i=n("a9ab");const a=(t,e,n)=>[e,n],o=(t,e,n)=>[e,n,t[2]],s=(t,e,n)=>[e,n,t[2],t[3]];function c(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:Object(r["l"])(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function l({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function u({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function h(t,e,n){const r=[];let i,a,o,s;for(let c=0;c<n.length;c++){const h=n[c];c>0?(o=l(t,h[0]),s=u(t,h[1]),o===i&&s===a||(r.push(e(h,o-i,s-a)),i=o,a=s)):(i=l(t,h[0]),a=u(t,h[1]),r.push(e(h,i,a)))}return r.length>0?r:null}function p(t,e,n,r){return h(t,n?r?s:o:r?o:a,e)}function d(t,e,n,r){const i=[],c=n?r?s:o:r?o:a;for(let a=0;a<e.length;a++){const n=h(t,c,e[a]);n&&n.length>=3&&i.push(n)}return i.length?i:null}function f(t,e,n,r){const i=[],c=n?r?s:o:r?o:a;for(let a=0;a<e.length;a++){const n=h(t,c,e[a]);n&&n.length>=2&&i.push(n)}return i.length?i:null}function m({scale:t,translate:e},n){return n*t[0]+e[0]}function b({scale:t,translate:e},n){return e[1]-n*t[1]}function g(t,e,n){const r=new Array(n.length);if(!n.length)return r;const[i,a]=t.scale;let o=m(t,n[0][0]),s=b(t,n[0][1]);r[0]=e(n[0],o,s);for(let c=1;c<n.length;c++){const t=n[c];o+=t[0]*i,s-=t[1]*a,r[c]=e(t,o,s)}return r}function y(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=g(t,e,n[i]);return r}function O(t,e,n,r){return g(t,n?r?s:o:r?o:a,e)}function v(t,e,n,r){return y(t,n?r?s:o:r?o:a,e)}function j(t,e,n,r){return y(t,n?r?s:o:r?o:a,e)}function x(t,e,n,r,i){return e.xmin=l(t,n.xmin),e.ymin=u(t,n.ymin),e.xmax=l(t,n.xmax),e.ymax=u(t,n.ymax),e!==n&&(r&&(e.zmin=n.zmin,e.zmax=n.zmax),i&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}function _(t,e,n,r,i){return e.points=p(t,n.points,r,i),e}function w(t,e,n,r,i){return e.x=l(t,n.x),e.y=u(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function M(t,e,n,r,i){const a=d(t,n.rings,r,i);return a?(e.rings=a,e):null}function S(t,e,n,r,i){const a=f(t,n.paths,r,i);return a?(e.paths=a,e):null}function V(t,e){return t&&e?Object(i["f"])(e)?w(t,{},e,!1,!1):Object(i["h"])(e)?S(t,{},e,!1,!1):Object(i["g"])(e)?M(t,{},e,!1,!1):Object(i["e"])(e)?_(t,{},e,!1,!1):Object(i["d"])(e)?x(t,{},e,!1,!1):null:null}function T(t,e,n,i,a){return Object(r["l"])(n)&&(e.points=O(t,n.points,i,a)),e}function E(t,e,n,i,a){return Object(r["k"])(n)||(e.x=m(t,n.x),e.y=b(t,n.y),e!==n&&(i&&(e.z=n.z),a&&(e.m=n.m))),e}function k(t,e,n,i,a){return Object(r["l"])(n)&&(e.rings=j(t,n.rings,i,a)),e}function I(t,e,n,i,a){return Object(r["l"])(n)&&(e.paths=v(t,n.paths,i,a)),e}},"04f0":function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return z})),n.d(e,"f",(function(){return x})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return Z})),n.d(e,"i",(function(){return u}));var r=n("dae5"),i=n("b139"),a=n("0b2d"),o=n("4212"),s=n("e431"),c=n("7577");function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function h(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>o["a"]?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function p(t,e,n){const r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],c=n[1],l=n[2],u=n[3];return t[0]=r*u+o*s+i*l-a*c,t[1]=i*u+o*c+a*s-r*l,t[2]=a*u+o*l+r*c-i*s,t[3]=o*u-r*s-i*c-a*l,t}function d(t,e,n){n*=.5;const r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*s,t[1]=i*c+a*s,t[2]=a*c-i*s,t[3]=o*c-r*s,t}function f(t,e,n){n*=.5;const r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c-a*s,t[1]=i*c+o*s,t[2]=a*c+r*s,t[3]=o*c-i*s,t}function m(t,e,n){n*=.5;const r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*s,t[1]=i*c-r*s,t[2]=a*c+o*s,t[3]=o*c-a*s,t}function b(t,e){const n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function g(t,e,n,r){const i=e[0],a=e[1],s=e[2],c=e[3];let l,u,h,p,d,f=n[0],m=n[1],b=n[2],g=n[3];return u=i*f+a*m+s*b+c*g,u<0&&(u=-u,f=-f,m=-m,b=-b,g=-g),1-u>o["a"]?(l=Math.acos(u),h=Math.sin(l),p=Math.sin((1-r)*l)/h,d=Math.sin(r*l)/h):(p=1-r,d=r),t[0]=p*i+d*f,t[1]=p*a+d*m,t[2]=p*s+d*b,t[3]=p*c+d*g,t}function y(t){const e=Object(o["b"])(),n=Object(o["b"])(),r=Object(o["b"])(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function O(t,e){const n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function j(t,e){const n=e[0]+e[4]+e[8];let r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const i=(n+1)%3,a=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*a+a]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+a]-e[3*a+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[a]=(e[3*a+n]+e[3*n+a])*r}return t}function x(t,e,n,r){const i=.5*Math.PI/180;e*=i,n*=i,r*=i;const a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return t[0]=a*c*u-o*s*l,t[1]=o*s*u+a*c*l,t[2]=o*c*l-a*s*u,t[3]=o*c*u+a*s*l,t}function _(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const w=c["c"],M=c["l"],S=c["a"],V=p,T=c["b"],E=c["d"],k=c["j"],I=c["e"],R=I,P=c["f"],G=P,C=c["k"],z=c["g"],A=c["h"];function Z(t,e,n){const r=Object(s["k"])(e,n);return r<-.999999?(Object(s["j"])(L,F,e),Object(s["B"])(L)<1e-6&&Object(s["j"])(L,D,e),Object(s["u"])(L,L),u(t,L,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Object(s["j"])(L,e,n),t[0]=L[0],t[1]=L[1],t[2]=L[2],t[3]=1+r,C(t,t))}const L=Object(a["f"])(),F=Object(a["h"])(1,0,0),D=Object(a["h"])(0,1,0);function H(t,e,n,r,i,a){return g(U,e,i,a),g(q,n,r,a),g(t,U,q,2*a*(1-a)),t}const U=Object(i["b"])(),q=Object(i["b"])();function N(t,e,n,r){const i=W;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-e[0],i[5]=-e[1],i[8]=-e[2],C(t,j(t,i))}const W=Object(r["b"])();Object.freeze({__proto__:null,identity:l,setAxisAngle:u,getAxisAngle:h,multiply:p,rotateX:d,rotateY:f,rotateZ:m,calculateW:b,slerp:g,random:y,invert:O,conjugate:v,fromMat3:j,fromEuler:x,str:_,copy:w,set:M,add:S,mul:V,scale:T,dot:E,lerp:k,length:I,len:R,squaredLength:P,sqrLen:G,normalize:C,exactEquals:z,equals:A,rotationTo:Z,sqlerp:H,setAxes:N})},"0fc4":function(t,e,n){"use strict";function r(){return[0,0,0,0]}function i(t){return[t[0],t[1],t[2],t[3]]}function a(t,e,n,r){return[t,e,n,r]}function o(t){const e=r(),n=Math.min(4,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function s(t,e){return new Float64Array(t,e,4)}function c(){return r()}function l(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function h(){return a(0,1,0,0)}function p(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a}));const f=c(),m=l(),b=u(),g=h(),y=p(),O=d();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:h,unitZ:p,unitW:d,ZEROS:f,ONES:m,UNIT_X:b,UNIT_Y:g,UNIT_Z:y,UNIT_W:O})},1381:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));n("e06a");var r=n("8d60"),i=(n("1fd7"),n("c649")),a=n("a915"),o=n("3349"),s=n("02f1"),c=n("0b2d"),l=n("7779"),u=n("c9fb"),h=n("65a7"),p=n("4dc9"),d=n("db52"),f=n("4cac"),m=n("4ae5"),b=n("521c");class g extends h["a"]{constructor(t){super(),this.graphicsLayer=t}visualizeIntersectionPoint(t,e){return this._visualizeSnappingIndicator(new m["a"]({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:e.coordinateHelper.spatialReference}),v)}visualizePoint(t,e){return this._visualizeSnappingIndicator(new m["a"]({x:t.point[0],y:t.point[1],spatialReference:e.coordinateHelper.spatialReference}),j)}visualizeLine(t,e){return this._visualizeSnappingIndicator(new b["a"]({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.coordinateHelper.spatialReference}),x)}visualizeParallelSign(t,e){return this._visualizeSnappingIndicator(new b["a"]({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.coordinateHelper.spatialReference}),_)}visualizeRightAngleQuad(t,e){return this._visualizeSnappingIndicator(new b["a"]({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:e.coordinateHelper.spatialReference}),V(t))}_visualizeSnappingIndicator(t,e){const n=new r["a"]({geometry:t,symbol:e});return this.graphicsLayer.add(n),Object(i["c"])(()=>{this.graphicsLayer.remove(n)})}}const y=l["a"].main.toArray(),O=[...l["a"].main.toRgb(),100],v=new p["a"]({outline:new d["a"]({width:1.5,color:y}),size:15,color:[0,0,0,0]}),j=new p["a"]({outline:{width:.5,color:[0,0,0,1]},size:10,color:y}),x=new f["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(a["i"])(u["a"].lineHintWidthTarget),color:y}]}}}),_=new f["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),w=t=>new f["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(a["i"])(u["a"].rightAngleHintSize),rotation:t,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(a["i"])(u["a"].rightAngleHintOutlineSize),color:y},{type:"CIMSolidFill",enable:!0,color:O}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),M=w(45),S=w(225),V=(()=>{const t=Object(s["b"])(),e=Object(s["b"])(),n=Object(c["f"])();return r=>(Object(o["f"])(t,r.centerVertex,r.previousVertex),Object(o["f"])(e,r.nextVertex,r.previousVertex),Object(o["j"])(n,t,e),n[2]<0?M:S)})()},1803:function(t,e,n){"use strict";n.r(e),n.d(e,"DrawGraphicTool2D",(function(){return v}));var r=n("a4ee"),i=(n("e06a"),n("8d60")),a=n("c649"),o=n("b2b2"),s=n("59b2"),c=(n("b50f"),n("c120"),n("cea0"),n("d386")),l=n("1381"),u=(n("1fd7"),n("4cac")),h=n("4dc9");const p=new u["a"]({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),d=new h["a"]({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),f=new h["a"]({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var m=n("ae3c"),b=n("e7e3"),g=n("5bab"),y=n("4ae5"),O=n("57dc");let v=class extends m["a"]{constructor(t){super(t),this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:Object(o["v"])(t.activeLineSymbol,p),regularVertices:Object(o["v"])(t.regularVerticesSymbol,d),activeVertex:Object(o["v"])(t.activeVertexSymbol,f),fill:Object(o["u"])(t.activeFillSymbol)}}initializeGraphic(t){return Object(o["l"])(this._visualElementSymbols.fill)&&(t.symbol=this._visualElementSymbols.fill),null}makeDrawOperation(){const t=this.view;return new b["a"]({view:t,manipulators:this.manipulators,geometryType:Object(m["b"])(this.geometryType),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new g["b"](t),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new l["a"](this.internalGraphicsLayer)})}onActiveVertexChanged(t){if("point"===this.geometryType)return null;const[e,n]=t,r=new y["a"]({x:e,y:n,spatialReference:this.drawOperation.spatialReference});return Object(o["l"])(this._visualElementGraphics.activeVertex)?(this._visualElementGraphics.activeVertex.geometry=r,null):(this._visualElementGraphics.activeVertex=new i["a"]({geometry:r,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(o["l"])(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=Object(o["e"])(this._visualElementGraphics.activeVertex))}))}onOutlineChanged(t){const e=t.clone();if("polyline"===e.type){const t=e.paths[e.paths.length-1];t.splice(0,t.length-2)}return Object(o["l"])(this._visualElementGraphics.outline)?(this._visualElementGraphics.outline.geometry=e,null):(this._visualElementGraphics.outline=new i["a"]({geometry:e,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.outline),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(o["l"])(this._visualElementGraphics.outline)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=Object(o["e"])(this._visualElementGraphics.outline))}))}onRegularVerticesChanged(t){const e=new O["a"]({points:t,spatialReference:this.drawOperation.spatialReference});return Object(o["l"])(this._visualElementGraphics.regularVertices)?(this._visualElementGraphics.regularVertices.geometry=e,null):(this._visualElementGraphics.regularVertices=new i["a"]({geometry:e,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(j),Object(a["c"])(()=>{Object(o["l"])(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=Object(o["e"])(this._visualElementGraphics.regularVertices))}))}};function j(t,e){var n,r,i,a;return(null!=(n=null==(r=t.attributes)?void 0:r.displayOrder)?n:-1/0)-(null!=(i=null==(a=e.attributes)?void 0:a.displayOrder)?i:-1/0)}Object(r["a"])([Object(s["b"])()],v.prototype,"activeFillSymbol",void 0),Object(r["a"])([Object(s["b"])({readOnly:!0})],v.prototype,"type",void 0),Object(r["a"])([Object(s["b"])({constructOnly:!0,nonNullable:!0})],v.prototype,"view",void 0),v=Object(r["a"])([Object(c["a"])("esri.views.2d.interactive.draw.DrawGraphicTool2D")],v)},"1a54":function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return S})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return O})),n.d(e,"k",(function(){return x}));var r=n("f0b9"),i=(n("c120"),n("b2b2")),a=n("a21b"),o=n("f2e0"),s=n("5996"),c=n("4261"),l=n("9180"),u=n("008c"),h=n("74e2"),p=n("a1f3");n("3563");class d{constructor(t,e,n){this.uid=t,this.geometry=e,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}}function f(t){return Object(i["l"])(t.geometry)}class m{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function b(t){const e=h["a"].fromJSON(t.geometryType),n=s["a"].fromJSON(t.spatialReference),r=t.transform,a=t.features.map(a=>{const o=g(a,e,n,t.objectIdFieldName),s=o.geometry;if(Object(i["l"])(s)&&r)switch(s.type){case"point":o.geometry=Object(u["e"])(r,s,s,s.hasZ,s.hasM);break;case"multipoint":o.geometry=Object(u["d"])(r,s,s,s.hasZ,s.hasM);break;case"polygon":o.geometry=Object(u["f"])(r,s,s,s.hasZ,s.hasM);break;case"polyline":o.geometry=Object(u["g"])(r,s,s,s.hasZ,s.hasM);break;case"extent":case"mesh":o.geometry=s}return o});return{geometryType:e,features:a,spatialReference:n,fields:t.fields?t.fields.map(t=>p["a"].fromJSON(t)):null,objectIdFieldName:t.objectIdFieldName,globalIdFieldName:t.globalIdFieldName,geohashFieldName:t.geohashFieldName,geometryProperties:t.geometryProperties,hasZ:t.hasZ,hasM:t.hasM,exceededTransferLimit:t.exceededTransferLimit,transform:null}}function g(t,e,n,r){return{uid:Object(o["b"])(),objectId:r&&t.attributes?t.attributes[r]:null,attributes:t.attributes,geometry:y(t.geometry,e,n),visible:!0}}function y(t,e,n){if(Object(i["k"])(t))return null;switch(e){case"point":{const e=t;return{x:e.x,y:e.y,z:e.z,m:e.m,hasZ:null!=e.z,hasM:null!=e.m,type:"point",spatialReference:n}}case"polyline":{const e=t;return{paths:e.paths,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polyline",spatialReference:n}}case"polygon":{const e=t;return{rings:e.rings,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polygon",spatialReference:n}}case"multipoint":{const e=t;return{points:e.points,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"multipoint",spatialReference:n}}}}function O(t,e,n,r){return{x:t,y:e,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}function v(t){if(Object(i["k"])(t))return 0;let e=32;switch(t.type){case"point":e+=42;break;case"polyline":case"polygon":{let n=0;const r=2+(t.hasZ?1:0)+(t.hasM?1:0),i="polyline"===t.type?t.paths:t.rings;for(const t of i)n+=t.length;e+=8*n*r+64,e+=128*n,e+=34,e+=32*(i.length+1);break}case"multipoint":{const n=2+(t.hasZ?1:0)+(t.hasM?1:0),r=t.points.length;e+=8*r*n+64,e+=128*r,e+=34,e+=32;break}case"extent":e+=98,t.hasM&&(e+=32),t.hasZ&&(e+=32);break;case"mesh":e+=Object(a["a"])(t.vertexAttributes.position),e+=Object(a["a"])(t.vertexAttributes.normal),e+=Object(a["a"])(t.vertexAttributes.uv),e+=Object(a["a"])(t.vertexAttributes.tangent)}return e}function j(t){let e=32;return e+=Object(r["a"])(t.attributes),e+=3,e+=8+v(t.geometry),e}function x(t){if(Object(i["k"])(t))return 0;switch(t.type){case"point":return 1;case"polyline":{let e=0;for(const n of t.paths)e+=n.length;return e}case"polygon":{let e=0;for(const n of t.rings)e+=n.length;return e}case"multipoint":return t.points.length;case"extent":return 2;case"mesh":{const e=t.vertexAttributes&&t.vertexAttributes.position;return e?e.length/3:0}default:return}}function _(t){if(Object(i["k"])(t))return!1;switch(t.type){case"extent":case"point":return!0;case"polyline":for(const e of t.paths)if(e.length>0)return!0;return!1;case"polygon":for(const e of t.rings)if(e.length>0)return!0;return!1;case"multipoint":return t.points.length>0;case"mesh":return!t.loaded||t.vertexAttributes.position.length>0}}function w(t,e){switch(Object(c["k"])(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[3]=t.x,e[1]=e[4]=t.y,t.hasZ&&(e[2]=e[5]=t.z);break;case"polyline":for(let n=0;n<t.paths.length;n++)Object(c["o"])(e,t.paths[n],t.hasZ);break;case"polygon":for(let n=0;n<t.rings.length;n++)Object(c["o"])(e,t.rings[n],t.hasZ);break;case"multipoint":Object(c["o"])(e,t.points,t.hasZ);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[3]=t.xmax,e[4]=t.ymax,null!=t.zmin&&(e[2]=t.zmin),null!=t.zmax&&(e[5]=t.zmax)}}function M(t,e){switch(Object(l["o"])(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[2]=t.x,e[1]=e[3]=t.y;break;case"polyline":for(let n=0;n<t.paths.length;n++)Object(l["s"])(e,t.paths[n]);break;case"polygon":for(let n=0;n<t.rings.length;n++)Object(l["s"])(e,t.rings[n]);break;case"multipoint":Object(l["s"])(e,t.points);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax}}function S(t,e){return null!=t.objectId?t.objectId:t.attributes&&e?t.attributes[e]:null}Object(c["h"])(),Object(l["m"])()},"1f1c":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}},2119:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("2ab7");class i{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&Object(r["a"])(()=>this.reset()),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*a);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,a));t++)this._items.push(this.allocator())}}const a=1024},3563:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return o}));n("c120");var r=n("b2b2");function i(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==i[t])return!1}return!0}function a(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}function o(t,e){return!!h(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function s(t,e){return t.hasZ===e.hasZ&&t.hasM===e.hasM&&!!h(t.spatialReference,e.spatialReference)&&a(t.paths,e.paths)}function c(t,e){return t.hasZ===e.hasZ&&t.hasM===e.hasM&&!!h(t.spatialReference,e.spatialReference)&&a(t.rings,e.rings)}function l(t,e){return t.hasZ===e.hasZ&&t.hasM===e.hasM&&!!h(t.spatialReference,e.spatialReference)&&i(t.points,e.points)}function u(t,e){return t.hasZ===e.hasZ&&t.hasM===e.hasM&&!!h(t.spatialReference,e.spatialReference)&&t.xmin===e.xmin&&t.ymin===e.ymin&&t.zmin===e.zmin&&t.xmax===e.xmax&&t.ymax===e.ymax&&t.zmax===e.zmax}function h(t,e){return t===e||t&&e&&t.equals(e)}function p(t,e){if(t===e)return!0;if(Object(r["k"])(t)||Object(r["k"])(e))return!1;if(t.type!==e.type)return!1;switch(t.type){case"point":return o(t,e);case"extent":return u(t,e);case"polyline":return s(t,e);case"polygon":return c(t,e);case"multipoint":return l(t,e);case"mesh":return!1;default:return}}function d(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(t[i]!==e[i])return!1;return!0}function f(t,e){return t===e||null!=t&&null!=e&&t.objectId===e.objectId&&!!p(t.geometry,e.geometry)&&!!d(t.attributes,e.attributes)}},4772:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("a4ee"),i=n("fc29"),a=n("e92d"),o=n("b2b2"),s=n("f4cc"),c=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),u=n("7aa6"),h=n("2c4f");class p{constructor(){this._isToolEditable=!0,this._manipulators=new h["a"],this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,e=0){return this.addMany([t],e)[0]}addMany(t,e=0){return t.map(t=>{const n=this._nextManipulatorId++,r={id:n,manipulator:t,visibilityPredicate:e,attached:!1};return this._manipulators.add(r),this._attached&&this._updateManipulatorAttachment(r),n})}remove(t){if("number"==typeof t){const e=t;for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.getItemAt(t).id===e){const e=this._manipulators.splice(t,1)[0];return this._detachManipulator(e),e.id}return null}const e=t;for(let n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).manipulator===e){const t=this._manipulators.splice(n,1)[0];return this._detachManipulator(t),t.id}return null}removeAll(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(t=>{this._updateManipulatorAttachment(t)}),this._attached=!0}detach(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._attached=!1}destroy(){this._manipulators.forEach(({manipulator:t})=>{t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,t=>{e(t)})}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach(e=>t.push(e.manipulator)),t}intersect(t,e){let n=null,r=Number.MAX_VALUE;return this._manipulators.forEach(({id:i,manipulator:a,attached:s})=>{if(!s||!a.interactive)return;const c=a.intersectionDistance(t,e);Object(o["l"])(c)&&c<r&&(r=c,n={id:i,manipulator:a})}),n}findById(t){if(Object(o["k"])(t))return null;for(const e of this._manipulators.items)if(t===e.id)return e.manipulator;return null}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return 2===t.visibilityPredicate||(this._isToolEditable?0===t.visibilityPredicate:1===t.visibilityPredicate)}}const d=a["a"].getLogger("esri.views.interactive.InteractiveToolBase");let f=class extends i["a"]{constructor(t){super(t),this.toolState="pending",this.completed=!1,this.manipulators=new p,this.updating=!1,this.automaticManipulatorSelection=!0,this._editableFlags=new Map([[1,!0],[0,!0]]),this._creationStartedResolver=Object(s["g"])(),this._creationFinishedResolver=Object(s["g"])()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._set("visible",t),t||this.active&&(this.view.activeTool=null),this.attached&&(t?this._show():this._hide())}get editable(){return this.getEditableFlag(0)}set editable(t){this.setEditableFlag(0,t)}get attached(){return this._get("attached")}get created(){return"created"===this.toolState}get cursor(){return null}attach(){this.attached?d.warn("Tool is already attached. Ignoring attach request."):(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}detach(){this.attached?(this.visible&&this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1)):d.error("Tool isn't currently attached. Ignoring detach request.")}activate(){Object(o["k"])(this.view)?d.error("Can't activate tool if view is not defined."):this.active?d.warn("Tool is already active, ignoring activation request."):(Object(u["b"])(this.view)&&this.view.focus(),this.onActivate())}deactivate(){this.active?this.onDeactivate():d.warn("Tool is not active, ignoring deactivation request.")}handleInputEvent(t){this.attached?this.onInputEvent(t):d.warn("handleInputEvent() called on detached tool")}handleInputEventAfter(t){this.attached?this.onInputEventAfter(t):d.warn("handleInputEventAfter() called on detached tool")}destroy(){this.manipulators.destroy(),this._set("view",null),this._set("completed",!1)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),0===t&&this.notifyChange("editable"),this.onEditableChange()}getEditableFlag(t){return this._editableFlags.get(t)}whenCreationStarted(){return this._creationStartedResolver.promise}whenCreated(){return this._creationFinishedResolver.promise}rejectCreation(t){"pending"!==this.toolState&&"creating"!==this.toolState||this._creationStartedResolver.resolve(this),this._creationFinishedResolver.reject(t)}onActivate(){}onDeactivate(){}onAttach(){}onDetach(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(0)&&this.getEditableFlag(1)}startToolCreation(){if("pending"===this.toolState)return this._creationStartedResolver.resolve(this),void(this.toolState="creating");throw new Error("Unexpected tool state "+this.toolState)}finishToolCreation(){switch(this.toolState){case"pending":this.startToolCreation();case"creating":this.created||this._creationFinishedResolver.resolve(this),this.toolState="created";break;case"created":break;default:throw new Error("Unexpected tool state "+this.toolState)}}complete(){this.finishToolCreation(),this._set("completed",!0)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}};Object(r["a"])([Object(c["b"])()],f.prototype,"toolState",void 0),Object(r["a"])([Object(c["b"])({constructOnly:!0})],f.prototype,"view",void 0),Object(r["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"active",null),Object(r["a"])([Object(c["b"])({value:!0})],f.prototype,"visible",null),Object(r["a"])([Object(c["b"])({value:!0})],f.prototype,"editable",null),Object(r["a"])([Object(c["b"])({value:!1,readOnly:!0})],f.prototype,"attached",null),Object(r["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"created",null),Object(r["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"completed",void 0),Object(r["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"manipulators",void 0),Object(r["a"])([Object(c["b"])({readOnly:!0})],f.prototype,"updating",void 0),Object(r["a"])([Object(c["b"])()],f.prototype,"cursor",null),Object(r["a"])([Object(c["b"])()],f.prototype,"automaticManipulatorSelection",void 0),f=Object(r["a"])([Object(l["a"])("esri.views.interactive.InteractiveToolBase")],f)},"5bab":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c}));var r=n("b2b2"),i=n("a915"),a=n("1a54"),o=n("f408");class s{constructor(t,e,n,r=null){this.elevationInfo=t,this.defaultZ=e,this.view=n,this.excludeGraphics=r}screenToMap(t){if(Object(r["l"])(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i["g"])(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const e=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i["g"])(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return Object(r["l"])(e)&&(e.z=void 0),e}mapToScreen(t){const e=Object(a["j"])(t.x,t.y,Object(o["a"])(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(e)}}class c{constructor(t,e,n=[]){this.view=t,this.elevationInfo=e,this.exclude=n}screenToMap(t){const e=this.view.toMap(t,{exclude:this.exclude});return Object(r["l"])(e)&&(e.z=Object(o["g"])(e,this.view,this.elevationInfo)),e}mapToScreen(t){let e=t;return Object(r["l"])(this.elevationInfo)&&(e=Object(a["j"])(t.x,t.y,Object(o["a"])(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}}class l{constructor(t){this.view=t,this.screenToMap=e=>t.toMap(e),this.mapToScreen=e=>t.toScreen(e)}}},"65a7":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("c649"),i=n("e753"),a=n("e6b5"),o=n("d232"),s=n("b63c"),c=n("5715");class l{draw(t,e){const n=this.getUniqueHints(t),l=[];for(const r of n)r instanceof i["a"]&&l.push(this.visualizeIntersectionPoint(r,e)),r instanceof a["a"]&&l.push(this.visualizeLine(r,e)),r instanceof o["a"]&&l.push(this.visualizeParallelSign(r,e)),r instanceof c["a"]&&l.push(this.visualizeRightAngleQuad(r,e)),r instanceof s["a"]&&l.push(this.visualizePoint(r,e));return Object(r["b"])(l)}getUniqueHints(t){const e=[];for(const n of t){let t=!0;for(const r of e)if(n.equals(r)){t=!1;break}t&&e.push(n)}return e}}},7289:function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return M})),n.d(e,"l",(function(){return V})),n.d(e,"m",(function(){return T})),n.d(e,"n",(function(){return S})),n.d(e,"o",(function(){return k})),n.d(e,"p",(function(){return E})),n.d(e,"q",(function(){return _})),n.d(e,"r",(function(){return A})),n.d(e,"s",(function(){return P})),n.d(e,"t",(function(){return G})),n.d(e,"u",(function(){return x})),n.d(e,"v",(function(){return C})),n.d(e,"w",(function(){return l}));var r=n("38a4"),i=n("b2b2"),a=n("e431"),o=n("0b2d"),s=(n("f895"),n("7361"));function c(t=Z){return[t[0],t[1],t[2],t[3]]}function l(t,e,n,r){return h(t,e,n,r,s["e"].get())}function u(t,e=c()){return h(t[0],t[1],t[2],t[3],e)}function h(t,e,n,r,i=c()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function p(t,e,n){return Object(a["n"])(n,t),n[3]=e,n}function d(t,e,n){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function f(t,e,n,r=c()){const i=n[0]-e[0],a=n[1]-e[1],o=n[2]-e[2],s=t[0]-e[0],l=t[1]-e[1],u=t[2]-e[2],h=a*u-o*l,p=o*s-i*u,d=i*l-a*s,f=h*h+p*p+d*d,m=Math.abs(f-1)>1e-5&&f>1e-12?1/Math.sqrt(f):1;r[0]=h*m,r[1]=p*m,r[2]=d*m,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2])}function m(t,e,n,r,i){if(t.count<3)return!1;t.getVec(n,g);let o=r,s=!1;for(;o<t.count-1&&!s;)t.getVec(o,y),o++,s=!Object(a["r"])(g,y);if(!s)return!1;for(o=Math.max(o,i),s=!1;o<t.count&&!s;)t.getVec(o,O),o++,Object(a["m"])(v,g,y),Object(a["u"])(v,v),Object(a["m"])(j,y,O),Object(a["u"])(j,j),s=!Object(a["r"])(g,O)&&!Object(a["r"])(y,O)&&Math.abs(Object(a["k"])(v,j))<b;return s?(f(g,y,O,e),!0):(0!==n||1!==r||2!==i)&&m(t,e,0,1,2)}const b=.99619469809,g=Object(o["f"])(),y=Object(o["f"])(),O=Object(o["f"])(),v=Object(o["f"])(),j=Object(o["f"])();function x(t,e,n){return t!==n&&u(t,n),n[3]=-Object(a["k"])(A(n),e),n}function _(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function w(t,e,n,r){return Object(a["j"])(O,e,t),d(n,O,r)}function M(t,e,n,r){return z(t,e,Object(a["m"])(s["d"].get(),n,e),L,r)}function S(t,e,n){return!!Object(i["l"])(e)&&z(t,e.origin,e.direction,F,n)}function V(t,e,n){return z(t,e.origin,e.vector,0,n)}function T(t,e,n){return z(t,e.origin,e.vector,1,n)}function E(t,e){return C(t,e)>=0}function k(t,e){const n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5];return t[0]*(t[0]>0?n:a)+t[1]*(t[1]>0?r:o)+t[2]*(t[2]>0?i:s)+t[3]>=0}function I(t,e){const n=Object(a["k"])(A(t),e.ray.direction),r=-C(t,e.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;const i=r/n;return n>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function R(t,e){const n=Object(a["k"])(A(t),e.ray.direction),r=-C(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const i=r/n;return n>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function P(t,e,n){const r=Object(a["h"])(s["d"].get(),A(t),-t[3]),i=G(t,Object(a["m"])(s["d"].get(),e,r),s["d"].get());return Object(a["i"])(n,i,r),n}function G(t,e,n){const r=Object(a["h"])(s["d"].get(),A(t),Object(a["k"])(A(t),e));return Object(a["m"])(n,e,r),n}function C(t,e){return Object(a["k"])(A(t),e)+t[3]}function z(t,e,n,i,o){const s=Object(a["k"])(A(t),n);if(0===s)return!1;let c=-(Object(a["k"])(A(t),e)+t[3])/s;return 1&i&&(c=Object(r["f"])(c,0,1)),!(!(4&i)&&c<0||!(8&i)&&c>1)&&(Object(a["i"])(o,e,Object(a["h"])(o,n,c)),!0)}function A(t){return t}const Z=[0,0,1,0],L=12,F=8},7361:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return f}));var r=n("2ab7"),i=n("dae5"),a=n("afe1"),o=n("b139"),s=n("02f1"),c=n("0b2d"),l=n("0fc4");class u{constructor(t,e,n){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}get(){0===this._itemsPtr&&Object(r["a"])(()=>this.reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=h){return new u(16,s["d"],t)}static createVec3f64(t=h){return new u(24,c["e"],t)}static createVec4f64(t=h){return new u(32,l["c"],t)}static createMat3f64(t=h){return new u(72,i["a"],t)}static createMat4f64(t=h){return new u(128,a["b"],t)}static createQuatf64(t=h){return new u(32,o["d"],t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const h=4096,p=u.createVec2f64(),d=u.createVec3f64(),f=u.createVec4f64(),m=(u.createMat3f64(),u.createMat4f64()),b=u.createQuatf64()},7590:function(t,e,n){"use strict";n.r(e),n.d(e,"hydratedAdapter",(function(){return c}));var r=n("3af1"),i=n("57dc"),a=n("4ae5"),o=n("1219"),s=n("521c");const c={convertToGEGeometry:l,exportPoint:u,exportPolygon:h,exportPolyline:p,exportMultipoint:d,exportExtent:f};function l(t,e){if(null==e)return null;let n="cache"in e?e.cache._geVersion:void 0;return null==n&&(n=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=n)),n}function u(t,e,n){const r=t.hasZ(e),i=t.hasM(e),o=new a["a"]({x:t.getPointX(e),y:t.getPointY(e),spatialReference:n});return r&&(o.z=t.getPointZ(e)),i&&(o.m=t.getPointM(e)),o.cache._geVersion=e,o}function h(t,e,n){const r=new o["a"]({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:n});return r.cache._geVersion=e,r}function p(t,e,n){const r=new s["a"]({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:n});return r.cache._geVersion=e,r}function d(t,e,n){const r=new i["a"]({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:n});return r.cache._geVersion=e,r}function f(t,e,n){const i=t.hasZ(e),a=t.hasM(e),o=new r["a"]({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:n});if(i){const n=t.getZExtent(e);o.zmin=n.vmin,o.zmax=n.vmax}if(a){const n=t.getMExtent(e);o.mmin=n.vmin,o.mmax=n.vmax}return o.cache._geVersion=e,o}},7779:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return p}));var r=n("9ef0");const i={main:new r["a"]([255,127,0]),selected:new r["a"]([255,255,255]),outline:new r["a"]([0,0,0,.5]),selectedOutline:new r["a"]([255,255,255]),hoverOutline:new r["a"]([255,255,255]),secondary:new r["a"]([255,255,255]),secondaryOutline:new r["a"]([100,100,100]),transparent:new r["a"]([0,0,0,0])};function a(t,e){if(e)for(const n in e)t[n]=e[n]}class o{constructor(t){this.size=8,this.hoverSize=10,this.color=i.main,this.hoverColor=i.main,this.outlineColor=i.outline,this.hoverOutlineColor=i.hoverOutline,a(this,t)}}class s{constructor(t){this.color=i.secondary,this.hoverColor=i.main,a(this,t)}}class c{constructor(t){this.color=i.transparent,this.hoverColor=i.transparent,this.outlineColor=i.main,this.hoverOutlineColor=i.main,this.stagedColor=i.transparent,this.stagedOutlineColor=i.secondary,a(this,t)}}class l{constructor(t){this.vertex=new o,this.midpoint=new o({color:i.secondary,outlineColor:i.secondaryOutline,size:6}),this.selected=new o({color:i.selected,hoverColor:i.selected,hoverOutlineColor:i.hoverOutline}),a(this,t)}}class u{constructor(t){this.center=new o({color:i.secondaryOutline}),this.fill=new c,this.line=new s,this.vertex=new o({color:i.selected,outlineColor:i.main,hoverColor:i.selected,hoverOutlineColor:i.secondaryOutline}),a(this,t)}}class h{constructor(t){this.reshapeGraphics=new l,this.transformGraphics=new u,a(this,t)}}const p=new h},"8a19":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("b2b2"),i=n("f4cc"),a=n("3563"),o=n("c20d"),s=n("1f1c"),c=n("9305");class l{constructor(){this.next=new o["a"]}createSnapDragEventPipelineStep({predicate:t=(()=>!0),cancel:e,snappingManager:n,snappingContext:l,updatingHandles:u}){if(Object(r["k"])(n))return t=>t;let h=null,p=null;const d=()=>{h=Object(r["a"])(h),n.doneSnapping(),Object(r["l"])(p)&&p.frameTask.remove(),p=null};return e.next(t=>(d(),t)),this.next=new o["a"],e=>{if(!t(e))return e;if(h=Object(r["a"])(h),"start"===e.action){const t="3d"===n.view.type?n.view.resourceController.scheduler.registerTask(c["b"].SNAPPING):c["a"];p={context:new s["a"]({editGeometryOperations:l.editGeometryOperations,elevationInfo:l.elevationInfo,pointer:l.pointer,vertexHandle:Object(r["l"])(e.info)?e.info.handle:null,excludeFeature:l.excludeFeature,visualizer:l.visualizer}),originalPos:Object(r["l"])(e.snapOrigin)?l.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:t}}if(Object(r["l"])(p)){const t=p.context.coordinateHelper.vectorToDehydratedPoint(p.context.coordinateHelper.arrayToVector([p.originalPos.x,p.originalPos.y,p.originalPos.z]));t.x+=e.mapEnd.x-e.mapStart.x,t.y+=e.mapEnd.y-e.mapStart.y;const r=e.mapStart.x-p.originalPos.x,o=e.mapStart.y-p.originalPos.y,s={...e,action:"udpate"},c=p.context,l=n.update(t,p.context);if(e.mapEnd.x=l.x+r,e.mapEnd.y=l.y+o,"end"!==e.action){const e=p.frameTask;h=Object(i["h"])(async i=>{const u=await e.schedule(()=>n.snap(t,c,i),i);if(u.valid){const t=await e.schedule(()=>u.apply(),i);Object(a["b"])(t,l)||(s.mapEnd.x=t.x+r,s.mapEnd.y=t.y+o,this.next.execute(s))}}),u.addPromise(h.promise)}}return"end"===e.action&&d(),e}}}},a1b1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}));var r=n("38a4"),i=n("e431"),a=n("0b2d");function o(t,e,n){const r=Object(i["k"])(t,e)/Object(i["k"])(t,t);return Object(i["h"])(n,t,r)}function s(t,e){return Object(i["k"])(t,e)/Object(i["s"])(t)}function c(t,e){const n=Object(i["k"])(t,e)/(Object(i["s"])(t)*Object(i["s"])(e));return-Object(r["b"])(n)}function l(t,e,n){Object(i["u"])(u,t),Object(i["u"])(h,e);const a=Object(i["k"])(u,h),o=Object(r["b"])(a),s=Object(i["j"])(u,u,h);return Object(i["k"])(s,n)<0?2*Math.PI-o:o}const u=Object(a["f"])(),h=Object(a["f"])()},ae3c:function(t,e,n){"use strict";n.d(e,"a",(function(){return q})),n.d(e,"b",(function(){return B}));var r=n("a4ee"),i=n("8d60"),a=(n("c120"),n("ce6d")),o=n("9096"),s=n("c649"),c=n("b2b2"),l=n("59b2"),u=n("b50f"),h=(n("cea0"),n("d386")),p=n("ce0b"),d=(n("e06a"),n("7ffa")),f=n("8048"),m=n("b48e"),b=n("ea51"),g=n("32ed"),y=n("7f83"),O=n("a29a"),v=n("f7eb"),j=n("04f0"),x=n("b139"),_=n("e431"),w=n("0b2d"),M=n("4ae5");function S(t,e,n=null){return Object(c["l"])(n)?[t,e,n]:[t,e]}function V(t,e,n=null){return Object(c["l"])(n)?{x:t,y:e,z:n}:{x:t,y:e}}class T{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return Object(c["h"])(t.map(t=>this.mapToLocal(t)))}get doUnnormalization(){return!1}}class E extends T{constructor(t,e,n=null){super(e),this.defaultZ=n,this.transform=Object(v["b"])(),this.transformInv=Object(v["b"])(),this.transform=Object(v["a"])(t),Object(O["a"])(this.transformInv,this.transform)}makeMapPoint(t,e){return S(t,e,this.defaultZ)}mapToLocal(t){return V(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return S(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class k extends T{constructor(t,e){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=Object(w["f"])(),this.tangentFrameUpWS=Object(w["f"])(),this.tangentFrameRightWS=Object(w["f"])(),this.tangentFrameForwardWS=Object(w["f"])(),this.localFrameRightWS=Object(w["f"])(),this.localFrameUpWS=Object(w["f"])(),this.worldToLocalTransform=Object(x["b"])(),this.localToWorldTransform=Object(x["b"])(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=e,this.defaultZ=e.hasZ?e.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);const r=Object(w["f"])();Object(_["h"])(r,this.tangentFrameForwardWS,Object(_["k"])(n,this.tangentFrameForwardWS)),Object(_["m"])(this.localFrameRightWS,n,r),Object(_["u"])(this.localFrameRightWS,this.localFrameRightWS),Object(_["j"])(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(j["h"])(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(j["d"])(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,e){return S(t,e,this.defaultZ)}mapToLocal(t){const e=Object(w["f"])();this.view.renderCoordsHelper.toRenderCoords(new M["a"]({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),Object(_["x"])(e,e,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(c["l"])(n)?V(n.x/this.scale,n.y/this.scale):null}localToMap(t){const e=Object(w["f"])();this.view.renderCoordsHelper.toRenderCoords(new M["a"]({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),Object(_["x"])(e,e,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return Object(c["l"])(n)?S(n.x,n.y,this.defaultZ):null}}function I(t,e){if("2d"===t.type)return new E(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){const n=e.length>2?new M["a"]({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new M["a"]({x:e[0],y:e[1],spatialReference:t.spatialReference});return new k(t,n)}return null}var R=n("57dc"),P=n("521c"),G=n("1219");function C(t,e){const n=new M["a"]({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(n.z=t[2]),n}function z(t,e){return new R["a"]({points:t,spatialReference:e})}function A(t,e,n){const r=new P["a"]({paths:t,spatialReference:e});return n&&Object(g["i"])(r),r}function Z(t,e,n,r=!0){const i=Object(d["a"])(t);i.forEach(t=>{const e=t[0],n=t[t.length-1];Object(u["e"])(e,n)&&1!==t.length||t.push(t[0])});let a=new G["a"]({rings:i,spatialReference:e});return a.rings.forEach(t=>{Object(g["g"])(t,!1,!1)||t.reverse()}),n&&Object(g["i"])(a),r&&a.isSelfIntersecting&&Object(y["l"])(e)&&(a=Object(b["simplify"])(a)),a}function L(t,e,n){const r=e.mapToLocalMultiple(t),i=[],a={x:r[0].x,y:r[0].y},o={x:r[1].x,y:r[1].y},s=Math.round(o.x-a.x),l=Math.round(o.y-a.y),u=Math.max(Math.abs(s),Math.abs(l));if(n){const t={x:a.x+u,y:a.y+u},e={x:a.x-u,y:a.y-u};i.push(V(t.x,e.y),V(e.x,e.y),V(e.x,t.y),V(t.x,t.y))}else{const t={x:s>0?a.x+u:a.x-u,y:l>0?a.y+u:a.y-u};i.push(V(a.x,a.y),V(t.x,a.y),V(t.x,t.y),V(a.x,t.y))}return Z([Object(c["h"])(i.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!0)}function F(t,e,n){let r=e.mapToLocalMultiple(t);if(1===r.length){const t=48,e=r[0];r=[V(e.x-t,e.y+t),V(e.x+t,e.y-t),V(e.x+t,e.y-t),V(e.x-t,e.y+t)]}const i=[],a={x:r[0].x,y:r[0].y},o={x:r[1].x,y:r[1].y};if(n){const t=Math.round(o.x-a.x),e=Math.round(o.y-a.y);i.push(V(a.x-t,a.y-e),V(o.x,a.y-e),V(o.x,o.y),V(a.x-t,o.y))}else i.push(V(a.x,a.y),V(o.x,a.y),V(o.x,o.y),V(a.x,o.y));return Z([Object(c["h"])(i.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!0)}function D(t,e,n,r){const i=e.mapToLocalMultiple(t);let a=null,o=null;if(n)a=i[0],o=i[1];else{const t=i[0],e=i[1],n=Math.round(e.x-t.x),r=Math.round(e.y-t.y),s=Math.max(Math.abs(n),Math.abs(r));a=V(n>0?t.x+s/2:t.x-s/2,r>0?t.y+s/2:t.y-s/2),o=V(Math.abs(n)>Math.abs(r)?a.x-s/2:a.x,Math.abs(n)>Math.abs(r)?a.y:a.y-s/2)}const s=e.localToMap(a),l=e.localToMap(o);if(Object(c["k"])(s)||Object(c["k"])(l))return null;e.doUnnormalization&&Object(g["j"])([[s,l]],e.spatialReference);const u=C(s,e.spatialReference),h=C(l,e.spatialReference),p=Object(f["f"])(e.spatialReference);let d=0;if(Object(y["l"])(e.spatialReference))d=p*Object(b["distance"])(u,h,null);else{const t=a.x-o.x,e=a.y-o.y;d=p*Math.sqrt(t*t+e*e)*(r||1)}const O=new m["a"]({center:u,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return Z(O.rings,O.spatialReference,!1)}function H(t,e,n){const r=e.mapToLocalMultiple(t),i=r[0],a=r[1],o=Math.round(a.x-i.x),s=Math.round(a.y-i.y),l=V(n?i.x:i.x+o/2,n?i.y:i.y+s/2),u=n?o:o/2,h=n?s:s/2,p=60,d=[],f=2*Math.PI/p;for(let c=0;c<p;c++){const t=Math.cos(c*f),e=Math.sin(c*f),n=V(u*t+l.x,h*e+l.y);d.push(n)}return d.push(d[0]),Z([Object(c["h"])(d.map(t=>e.localToMap(t)))],e.spatialReference,e.doUnnormalization,!1)}var U=n("4772");let q=class extends(Object(o["b"])(a["a"].EventedMixin(U["a"]))){constructor(t){super(t),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new p["a"]({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",t=>this.onVertexAdd(t)),this.drawOperation.on("vertex-remove",t=>this.onVertexRemove(t)),this.drawOperation.on("vertex-update",t=>this.onVertexUpdate(t)),this.drawOperation.on("cursor-update",t=>this.onCursorUpdate(t)),this.drawOperation.on("complete",t=>this.onComplete(t))]),this.complete()}destroy(){this.drawOperation=Object(c["e"])(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=Object(c["e"])(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),Object(c["l"])(this._graphic)&&(this._graphic.symbol=t)}get updating(){var t,e;return null!=(t=null==(e=this.drawOperation)?void 0:e.updating)&&t}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(t){this._graphic=new i["a"]({geometry:t,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(Object(s["c"])(()=>{Object(c["l"])(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=Object(c["e"])(this._graphic))}),N)}_destroyAllVisualisations(){this.handles.remove(W.outline),this.handles.remove(W.regularVertices),this.handles.remove(W.activeVertex),this.handles.remove(N)}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const e=this.drawOperation.stagedVertex,n=this.drawOperation.committedVertices,r=n.slice();Object(c["l"])(e)&&r.push(this.drawOperation.coordinateHelper.pointToArray(e));const i=Object(c["l"])(e)?this.drawOperation.coordinateHelper.pointToArray(e):n.splice(-1)[0],a={regularVertices:null,activeVertex:null,full:null,outline:null},o=r.length,s=this.drawOperation.spatialReference,l="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":a.regularVertices=n,a.activeVertex=i,a.full=this.drawOperation.coordinateHelper.arrayToPoint(r[0]);break;case"multipoint":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=z(r,s));break;case"polyline":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=A([r],s,l));break;case"polygon":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=Z([r],s,l,!0));break;case"circle":if(o>0){const e=I(this.view,r[0]);if(1===o&&t.operationComplete){const t=r[0],n=e.makeMapPoint(t[0]+Y*this.view.resolution,t[1]);a.full=D([t,n],e,!0)}else 2===o&&(a.full=this.forceUniformSize?D(r,e,this.centered):H(r,e,this.centered))}break;case"rectangle":if(o>0){const e=I(this.view,r[0]);if(1===o&&t.operationComplete){const t=r[0],n=e.makeMapPoint(t[0]+Y*this.view.resolution,t[1]);a.full=L([t,n],e,!0)}else 2===o&&(a.full=this.forceUniformSize?L(r,e,this.centered):F(r,e,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":o>1&&(a.outline=A([r],s,l));break;case"circle":case"rectangle":Object(c["l"])(a.full)&&"polygon"===a.full.type&&(a.outline=Z(a.full.rings,s,l))}return a}initializeGraphic(t){return null}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});Object(c["l"])(t)&&(e=new i["a"]({geometry:t.full,symbol:this.graphicSymbol,sourceLayer:this.internalGraphicsLayer,...this.graphicProperties}))}this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(t){this._updateGraphic(),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();Object(c["k"])(t)?this._destroyAllVisualisations():(Object(c["l"])(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),W.outline):this.handles.remove(W.outline),Object(c["l"])(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),W.regularVertices):this.handles.remove(W.regularVertices),Object(c["l"])(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),W.activeVertex):this.handles.remove(W.activeVertex),Object(c["l"])(t.full)?Object(c["k"])(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(N))}};Object(r["a"])([Object(l["b"])({value:!0})],q.prototype,"centered",null),Object(r["a"])([Object(l["b"])({nonNullable:!0})],q.prototype,"defaultZ",void 0),Object(r["a"])([Object(l["b"])()],q.prototype,"drawOperation",void 0),Object(r["a"])([Object(l["b"])({value:!0})],q.prototype,"enabled",null),Object(r["a"])([Object(l["b"])({value:!0})],q.prototype,"forceUniformSize",null),Object(r["a"])([Object(l["b"])({constructOnly:!0})],q.prototype,"geometryType",void 0),Object(r["a"])([Object(l["b"])()],q.prototype,"graphic",null),Object(r["a"])([Object(l["b"])({constructOnly:!0})],q.prototype,"graphicProperties",void 0),Object(r["a"])([Object(l["b"])()],q.prototype,"graphicSymbol",null),Object(r["a"])([Object(l["b"])({constructOnly:!0})],q.prototype,"hasZ",void 0),Object(r["a"])([Object(l["b"])({constructOnly:!0})],q.prototype,"mode",void 0),Object(r["a"])([Object(l["b"])()],q.prototype,"snappingManager",void 0),Object(r["a"])([Object(l["b"])()],q.prototype,"snapToScene",void 0),Object(r["a"])([Object(l["b"])({readOnly:!0})],q.prototype,"type",void 0),Object(r["a"])([Object(l["b"])({readOnly:!0})],q.prototype,"updating",null),Object(r["a"])([Object(l["b"])({constructOnly:!0,nonNullable:!0})],q.prototype,"view",void 0),q=Object(r["a"])([Object(h["a"])("esri.views.draw.DrawGraphicTool")],q);const N="create-operation-graphic",W={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function B(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";default:return null}}const Y=48},afe1:function(t,e,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function a(t,e,n,r,i,a,o,s,c,l,u,h,p,d,f,m){return[t,e,n,r,i,a,o,s,c,l,u,h,p,d,f,m]}function o(t,e){return new Float64Array(t,e,16)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return a}));const s=r();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:o,IDENTITY:s})},b139:function(t,e,n){"use strict";function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function a(t,e,n,r){return[t,e,n,r]}function o(t,e){return new Float64Array(t,e,4)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o}));const s=r();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:o,IDENTITY:s})},b63c:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("6706"),i=n("7dcb");class a extends i["a"]{constructor(t){super(),this.point=t}equals(t){return t instanceof a&&Object(r["d"])(this.point,t.point)}}},c20d:function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return x}));n("c649");var r=n("7ffa"),i=n("38a4"),a=n("b2b2"),o=n("a915"),s=n("0b2d"),c=n("8188"),l=n("cdc1");function u(t,e){let n=null,r=null;return i=>{if("cancel"===i.action)return void(Object(a["l"])(r)&&(r.execute({action:"cancel"}),n=null,r=null));const o={action:i.action,screenStart:i.start,screenEnd:i.screenPoint};"start"===i.action&&Object(a["k"])(n)&&(n=new S,r=new S,e(t,n,r,i.pointerType,o)),Object(a["l"])(n)&&n.execute(o),"end"===i.action&&Object(a["l"])(n)&&(n=null,r=null)}}function h(t,e){return t.events.on("drag",u(t,e))}function p(t,e){const n=[t.x,t.y,t.z],r=e,i=[Math.cos(r),Math.sin(r)],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(0===a)return null;i[0]/=a,i[1]/=a;const o=t=>{const e=(t.x-n[0])*i[0]+(t.y-n[1])*i[1];t.x=n[0]+e*i[0],t.y=n[1]+e*i[1]};return t=>(o(t.mapStart),o(t.mapEnd),t)}function d(t,e){let n=null;return r=>{if("start"===r.action&&(n=m(t,r.mapStart.spatialReference,e)),Object(a["k"])(n))return null;const i=r.mapEnd.x-r.mapStart.x,o=r.mapEnd.y-r.mapStart.y,s=r.mapEnd.z-r.mapStart.z;return n.move(i,o,s),{...r,translationX:i,translationY:o,translationZ:s}}}function f(t,e){return Object(a["k"])(t)?null:t.spatialReference.equals(e)?t.clone():Object(c["m"])(t,e)}function m(t,e,n){const r=t.geometry;if(Object(a["k"])(r))return null;if("mesh"===r.type)return b(t,r,e,n);const i=f(r,e),o=r.spatialReference;return Object(a["k"])(i)?null:{move:(e,n,r)=>{const a=Object(l["d"])(i.clone(),e,n,r);a.spatialReference.equals(o)?t.geometry=a:t.geometry=Object(c["m"])(a,o)}}}function b(t,e,n,r){if(Object(a["l"])(e.transform))return g(t,e,e.transform,n);if(!e.spatialReference.equals(n))return null;let i=0,o=0,s=0;return{move:(n,a,c)=>{const l=n-i,u=a-o,h=c-s;if(l||u||h){const p=e.origin.clone().offset(l,u,h);e.centerAt(p,{geographic:1===r}),t.notifyGeometryChanged(),i=n,o=a,s=c}}}}function g(t,e,n,r){const i=f(n.getOriginPoint(e.spatialReference),r),o=e.spatialReference;return Object(a["k"])(i)?null:{move:(e,r,u)=>{const h=Object(l["d"])(i.clone(),e,r,u);if(h.spatialReference.equals(o))n.origin=Object(s["h"])(h.x,h.y,h.z);else{const t=Object(c["m"])(h,o);Object(a["l"])(t)&&(n.origin=Object(s["h"])(t.x,t.y,t.z))}t.notifyGeometryChanged()}}}function y(t,e){const n=t.map(t=>Object(a["u"])(d(t,e))).filter(t=>Object(a["l"])(t));return t=>{const e=t.mapEnd.x-t.mapStart.x,r=t.mapEnd.y-t.mapStart.y,i=t.mapEnd.z-t.mapStart.z;return n.forEach(e=>e(t)),{...t,translationX:e,translationY:r,translationZ:i}}}function O(t,e){const n=new Map;for(const i of e)n.set(i,Object(r["a"])(t[i]));return e=>(n.forEach((e,n)=>{t[n]=e}),e)}function v(t){return Object(a["l"])(t.geometry)&&"mesh"===t.geometry.type?j(t,t.geometry):O(t,["geometry"])}function j(t,e){const n=Object(a["l"])(e.transform)?e.transform.clone():null,r=e.vertexAttributes.clonePositional();return i=>(e.transform=n,e.vertexAttributes=r,t.notifyGeometryChanged(),i)}function x(t){const e=t.map(t=>Object(a["u"])(v(t))).filter(t=>Object(a["l"])(t));return t=>(e.forEach(e=>e(t)),t)}function _(){let t=0,e=0,n=0;return r=>{"start"===r.action&&(t=r.mapStart.x,e=r.mapStart.y,n=r.mapStart.z);const i=r.mapEnd.x-t,a=r.mapEnd.y-e,o=r.mapEnd.z-n;return t=r.mapEnd.x,e=r.mapEnd.y,n=r.mapEnd.z,{...r,mapDeltaX:i,mapDeltaY:a,mapDeltaZ:o,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function w(){let t=0,e=0;return n=>{"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);const r=n.screenEnd.x-t,i=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:r,screenDeltaY:i}}}function M(t,e){let n=null,r=0,a=0;return s=>{if("start"===s.action&&(n=t.toScreen(e),n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(r=s.screenStart.x-n.x,a=s.screenStart.y-n.y)),null==n)return null;const c=Object(i["f"])(s.screenEnd.x-r,0,t.width),l=Object(i["f"])(s.screenEnd.y-a,0,t.height),u=Object(o["f"])(c,l);return s.screenStart=n,s.screenEnd=u,s}}class S{constructor(){this.execute=()=>{}}next(t,e=new S){return Object(a["l"])(t)&&(this.execute=n=>{const r=t(n);Object(a["l"])(r)&&e.execute(r)}),e}}},cdc1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return l}));var r=n("38a4"),i=n("9180"),a=n("28b1"),o=n("32ed");function s(t,e,n,r){if(null==r||t.hasZ||(r=void 0),"point"===t.type)return t.x+=e,t.y+=n,t.hasZ&&null!=r&&(t.z+=r),t;if("multipoint"===t.type){const i=t.points;for(let t=0;t<i.length;t++)i[t]=p(i[t],e,n,r);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=n,t.ymax+=n,null!=r&&(t.zmin+=r,t.zmax+=r),t;const i=Object(o["b"])(t),a="polyline"===t.type?t.paths:t.rings;for(let o=0;o<i.length;o++){const t=i[o];for(let i=0;i<t.length;i++)t[i]=p(t[i],e,n,r)}return"paths"in t?t.paths=a:t.rings=a,t}function c(t,e,n,r,i){const a=t.clone(),c=r.resolution;if("point"===a.type){if(i)s(a,e*c,-n*c);else{const t=r.state.transform,i=r.state.inverseTransform,o=t[0]*a.x+t[2]*a.y+t[4],s=t[1]*a.x+t[3]*a.y+t[5];a.x=i[0]*(o+e)+i[2]*(s+n)+i[4],a.y=i[1]*(o+e)+i[3]*(s+n)+i[5]}return a}if("multipoint"===a.type){if(i)s(a,e*c,-n*c);else{const t=a.points,i=r.state.transform,o=r.state.inverseTransform;for(let r=0;r<t.length;r++){const a=t[r],s=i[0]*a[0]+i[2]*a[1]+i[4],c=i[1]*a[0]+i[3]*a[1]+i[5],l=o[0]*(s+e)+o[2]*(c+n)+o[4],u=o[1]*(s+e)+o[3]*(c+n)+o[5];t[r]=d(a,l,u,void 0)}}return a}if("extent"===a.type){if(i)s(a,e*c,-n*c);else{const t=r.state.transform,i=r.state.inverseTransform,o=t[0]*a.xmin+t[2]*a.ymin+t[4],s=t[1]*a.xmin+t[3]*a.ymin+t[5],c=t[0]*a.xmax+t[2]*a.ymax+t[4],l=t[1]*a.xmax+t[3]*a.ymax+t[5];a.xmin=i[0]*(o+e)+i[2]*(s+n)+i[4],a.ymin=i[1]*(o+e)+i[3]*(s+n)+i[5],a.xmax=i[0]*(c+e)+i[2]*(l+n)+i[4],a.ymax=i[1]*(c+e)+i[3]*(l+n)+i[5]}return a}if(i)s(a,e*c,-n*c);else{const t=Object(o["b"])(a),i="polyline"===a.type?a.paths:a.rings,s=r.state.transform,c=r.state.inverseTransform;for(let r=0;r<t.length;r++){const i=t[r];for(let t=0;t<i.length;t++){const r=i[t],a=s[0]*r[0]+s[2]*r[1]+s[4],o=s[1]*r[0]+s[3]*r[1]+s[5],l=c[0]*(a+e)+c[2]*(o+n)+c[4],u=c[1]*(a+e)+c[3]*(o+n)+c[5];i[t]=d(r,l,u,void 0)}}"paths"in a?a.paths=i:a.rings=i}return a}function l(t,e,n,r){if("point"===t.type){const{x:i,y:a}=t,o=r?r[0]:i,s=r?r[1]:a,c=t.clone(),l=(i-o)*e+o,u=(a-s)*n+s;return c.x=l,c.y=u,c}if("multipoint"===t.type){const s=Object(o["b"])(t),c=Object(i["m"])(),[l,u,h,p]=Object(a["d"])(c,[s]),f=r?r[0]:(l+h)/2,m=r?r[1]:(p+u)/2,b=t.clone(),g=b.points;for(let t=0;t<g.length;t++){const r=g[t],[i,a]=r,o=(i-f)*e+f,s=(a-m)*n+m;g[t]=d(r,o,s,void 0)}return b}if("extent"===t.type){const{xmin:i,xmax:a,ymin:o,ymax:s}=t,c=r?r[0]:(i+a)/2,l=r?r[1]:(s+o)/2,u=t.clone();if(u.xmin=(i-c)*e+c,u.ymax=(s-l)*n+l,u.xmax=(a-c)*e+c,u.ymin=(o-l)*n+l,u.xmin>u.xmax){const t=u.xmin,e=u.xmax;u.xmin=e,u.xmax=t}if(u.ymin>u.ymax){const t=u.ymin,e=u.ymax;u.ymin=e,u.ymax=t}return u}const s=Object(o["b"])(t),c=Object(i["m"])(),[l,u,h,p]=Object(a["d"])(c,s),f=r?r[0]:(l+h)/2,m=r?r[1]:(p+u)/2,b=t.clone(),g="polyline"===b.type?b.paths:b.rings;for(let i=0;i<s.length;i++){const t=s[i];for(let r=0;r<t.length;r++){const a=t[r],[o,s]=a,c=(o-f)*e+f,l=(s-m)*n+m;g[i][r]=d(a,c,l,void 0)}}return"paths"in b?b.paths=g:b.rings=g,b}function u(t,e,n,r,i,a){const o=Math.sqrt((n-t)*(n-t)+(r-e)*(r-e));return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e))/o}function h(t,e,n){const i=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x),a=Math.atan2(Math.sin(i),Math.cos(i));return Object(r["p"])(a)}function p(t,e,n,r){return d(t,t[0]+e,t[1]+n,null!=t[2]&&null!=r?t[2]+r:void 0)}function d(t,e,n,r){const i=[e,n];return t.length>2&&i.push(null!=r?r:t[2]),t.length>3&&i.push(t[3]),i}},d18f:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return u}));var r=n("b50f"),i=n("2119"),a=n("e431"),o=n("0b2d"),s=n("7361");function c(t){return t?{origin:Object(o["d"])(t.origin),direction:Object(o["d"])(t.direction)}:{origin:Object(o["f"])(),direction:Object(o["f"])()}}function l(t,e){return Object(r["e"])(t.origin,e.origin)&&Object(r["e"])(t.direction,e.direction)}function u(t,e){const n=g.get();return n.origin=t,n.direction=e,n}function h(t,e=c()){return d(t.origin,t.direction,e)}function p(t,e,n=c()){return Object(a["n"])(n.origin,t),Object(a["m"])(n.direction,e,t),n}function d(t,e,n=c()){return Object(a["n"])(n.origin,t),Object(a["n"])(n.direction,e),n}function f(t,e){const n=Object(a["j"])(s["d"].get(),Object(a["u"])(s["d"].get(),t.direction),Object(a["m"])(s["d"].get(),e,t.origin));return Object(a["k"])(n,n)}function m(t,e,n){const r=Object(a["k"])(t.direction,Object(a["m"])(n,e,t.origin));return Object(a["i"])(n,t.origin,Object(a["h"])(n,t.direction,r)),n}function b(){return{origin:null,direction:null}}const g=new i["a"](b)},dae5:function(t,e,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function a(t,e,n,r,i,a,o,s,c){return[t,e,n,r,i,a,o,s,c]}function o(t,e){return new Float64Array(t,e,9)}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:o})},e7e3:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n("a4ee"),i=n("ce6d"),a=n("9096"),o=n("7ffa"),s=n("b2b2"),c=n("f4cc"),l=n("a915"),u=n("59b2"),h=(n("cea0"),n("d386")),p=n("3563");class d{constructor({grabbableForEvent:t}){this.events=new i["a"],this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,e){return 0}attach(){}detach(){}}const f="click";var m=n("8b1a"),b=n("c20d"),g=n("6ae9"),y=n("2c8f"),O=n("1f1c"),v=n("8a19"),j=n("9305");let x=class extends(i["a"].EventedMixin(a["a"])){constructor(t){super(t),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new v["a"],this._snappingTask=null,this._stagedVertex=null,this.snapToSceneEnabled=null,Object(s["k"])(t.elevationInfo)&&(this.elevationInfo={mode:t.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){var t,e;this.coordinateHelper=Object(m["a"])(this.hasZ,this.hasM,this.view.spatialReference);const n="3d"===this.view.type?null==(t=this.view)||null==(e=t.resourceController)?void 0:e.scheduler:null;this._frameTask=n?n.registerTask(j["b"].SNAPPING):j["a"];const r="viewingMode"in this.view.state?this.view.state.viewingMode:2,i="segment"===this.geometryType||"multipoint"===this.geometryType?"polyline":this.geometryType;this._editGeometryOperations=new y["a"](new g["c"](i,this.coordinateHelper,r)),this._activeComponent=new g["a"](this.spatialReference,r),this._editGeometryOperations.data.components.push(this._activeComponent),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],t=>{const e=t.vertices.map(t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)})),n=e.map(t=>t.coordinates);switch(t.type){case"vertex-add":this.emit(t.type,{...t,added:n,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:n,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:n,vertices:e})}})),this._manipulator=new d({grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",t=>this._onImmediateClick(t)),this._manipulator.events.on("immediate-double-click",t=>this._onImmediateDoubleClick(t))])}destroy(){this._editGeometryOperations=Object(s["e"])(this._editGeometryOperations),this._frameTask=Object(s["t"])(this._frameTask)}get _snappingEnabled(){return Object(s["l"])(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(t=>this.coordinateHelper.vectorToArray(t.pos))}set drawingMode(t){this._set("drawingMode",null!=t?t:f)}get hasStagedVertex(){return Object(s["l"])(this._stagedVertex)}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return Object(s["l"])(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get spatialReference(){return this.view.spatialReference}get stagedVertex(){return this._stagedVertex}set stagedVertex(t){if(Object(s["k"])(t))this.discardStagedVertex();else if(!Object(s["l"])(this._stagedVertex)||!Object(p["b"])(this._stagedVertex,t)){if(Object(s["k"])(this._stagedVertex))this._stagedVertex=Object(o["a"])(t);else{if(Object(p["b"])(this._stagedVertex,t))return;this._stagedVertex.x=t.x,this._stagedVertex.y=t.y,this._stagedVertex.z=t.z,this._stagedVertex.m=t.m,this._stagedVertex.hasZ=t.hasZ,this._stagedVertex.hasM=t.hasM,this._stagedVertex.spatialReference=t.spatialReference}this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(t)}],operation:"apply",type:"vertex-update"})}}get updating(){return this.updatingHandles.updating}get vertices(){const t=this.committedVertices;return Object(s["l"])(this._stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this._stagedVertex)),t}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingTask=Object(s["a"])(this._snappingTask),Object(s["l"])(this._stagedVertex)){const t=this._stagedVertex;this._stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}complete(t){const e=t&&t.aborted||!1;Object(s["a"])(this._snappingTask),Object(s["l"])(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.discardStagedVertex();const n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t})),aborted:e,type:"complete"})}discardStagedVertex(){this._stagedVertex=null}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){Object(s["l"])(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(t){const e=this._activeComponent;if("polygon"===this.geometryType&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}_createManipulatorDragPipeline(t){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return Object(b["e"])(t,(t,e,n,r)=>{const i="touch"===r&&this._snappingEnabled;!this.isCompleted&&i&&(e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(this.stagedVertex=t.mapStart,("segment"===this.geometryType||i&&0===this.numVertices)&&this.commitStagedVertex()),t)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>i,cancel:n,snappingManager:this.snappingManager,snappingContext:new O["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:r,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(t=>(i&&(this.stagedVertex=t.mapEnd,"end"===t.action&&this.commitStagedVertex()),t)).next(t=>("end"===t.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t)),n.next(()=>{i&&Object(s["l"])(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(t){return Object(b["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(s["k"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t})})}_createManipulatorDragPipelineHybrid(t){return Object(b["e"])(t,(t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next(t=>("start"===t.action&&(Object(s["k"])(this.stagedVertex)&&(this.stagedVertex=t.mapStart),this.commitStagedVertex()),t)).next(t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t})})}_getDrawSurface(){if(Object(s["k"])(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let t=this.defaultZ,e=!1;Object(s["l"])(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(e=!0),Object(s["l"])(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),Object(s["l"])(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(e=!1);const n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}_mapToScreen(t){return this._getDrawSurface().mapToScreen(t)}_onHold(t){Object(s["a"])(this._snappingTask),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging)return;const e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if(Object(s["l"])(n))return t.stopPropagation(),this.discardStagedVertex(),void this.complete();const r=this._screenToMap(t.screenPoint);if(Object(s["l"])(r))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingTask=Object(s["a"])(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),("point"===this.geometryType||"segment"===this.geometryType&&2===e.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===e.vertices.length)&&this.complete()}t.stopPropagation()}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){if(Object(s["a"])(this._snappingTask),this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return;const e=Object(l["f"])(t.x,t.y),n=this._closeOnClickVertexIndex(e);if(Object(s["l"])(n)){this.discardStagedVertex();const t={componentIndex:0,vertexIndex:n,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[n].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}else{const n=this._screenToMap(e);if(this._manipulator.cursor=Object(s["l"])(n)?"crosshair":null,Object(s["l"])(n))if(Object(s["l"])(this.snappingManager)){const e=this.snappingManager,r=new O["a"]({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer});this.stagedVertex=e.update(n,r),this._snappingTask=Object(c["h"])(async t=>{const i=await this._frameTask.schedule(()=>e.snap(n,r,t),t);i.valid&&await this._frameTask.schedule(()=>{this.stagedVertex=i.apply()},t)}),this.updatingHandles.addPromise(this._snappingTask.promise)}else this.stagedVertex=n}t.stopPropagation()}_screenToMap(t){return this._getDrawSurface().screenToMap(t)}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),Object(s["k"])(t))return null;const n=this._screenToMap(e.screenEnd);return Object(s["l"])(n)?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const n=25,r=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!Object(s["l"])(r)&&_(r,e,n)}};function _(t,e,n){const r=t.x-e.x,i=t.y-e.y;return r*r+i*i<=n}Object(r["a"])([Object(u["b"])()],x.prototype,"defaultZ",void 0),Object(r["a"])([Object(u["b"])({value:f})],x.prototype,"drawingMode",null),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"elevationDrawSurface",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"elevationInfo",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"geometryType",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"hasM",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"hasZ",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"manipulators",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"drawSurface",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"snappingManager",void 0),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"snappingVisualizer",void 0),Object(r["a"])([Object(u["b"])()],x.prototype,"snapToSceneEnabled",void 0),Object(r["a"])([Object(u["b"])({readOnly:!0})],x.prototype,"updating",null),Object(r["a"])([Object(u["b"])({constructOnly:!0})],x.prototype,"view",void 0),x=Object(r["a"])([Object(h["a"])("esri.views.draw.DrawOperation")],x)},ea51:function(t,e,n){"use strict";n.r(e),n.d(e,"buffer",(function(){return V})),n.d(e,"clip",(function(){return s})),n.d(e,"contains",(function(){return l})),n.d(e,"convexHull",(function(){return j})),n.d(e,"crosses",(function(){return u})),n.d(e,"cut",(function(){return c})),n.d(e,"densify",(function(){return A})),n.d(e,"difference",(function(){return x})),n.d(e,"disjoint",(function(){return b})),n.d(e,"distance",(function(){return h})),n.d(e,"equals",(function(){return p})),n.d(e,"extendedSpatialReferenceInfo",(function(){return o})),n.d(e,"flipHorizontal",(function(){return G})),n.d(e,"flipVertical",(function(){return C})),n.d(e,"generalize",(function(){return z})),n.d(e,"geodesicArea",(function(){return D})),n.d(e,"geodesicBuffer",(function(){return T})),n.d(e,"geodesicDensify",(function(){return Z})),n.d(e,"geodesicLength",(function(){return H})),n.d(e,"intersect",(function(){return w})),n.d(e,"intersects",(function(){return d})),n.d(e,"isSimple",(function(){return O})),n.d(e,"nearestCoordinate",(function(){return E})),n.d(e,"nearestVertex",(function(){return k})),n.d(e,"nearestVertices",(function(){return I})),n.d(e,"offset",(function(){return S})),n.d(e,"overlaps",(function(){return g})),n.d(e,"planarArea",(function(){return L})),n.d(e,"planarLength",(function(){return F})),n.d(e,"relate",(function(){return y})),n.d(e,"rotate",(function(){return P})),n.d(e,"simplify",(function(){return v})),n.d(e,"symmetricDifference",(function(){return _})),n.d(e,"touches",(function(){return f})),n.d(e,"union",(function(){return M})),n.d(e,"within",(function(){return m}));var r=n("f606"),i=n("7590");function a(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function o(t){return r["G"].extendedSpatialReferenceInfo(t)}function s(t,e){return r["G"].clip(i["hydratedAdapter"],a(t),t,e)}function c(t,e){return r["G"].cut(i["hydratedAdapter"],a(t),t,e)}function l(t,e){return r["G"].contains(i["hydratedAdapter"],a(t),t,e)}function u(t,e){return r["G"].crosses(i["hydratedAdapter"],a(t),t,e)}function h(t,e,n){return r["G"].distance(i["hydratedAdapter"],a(t),t,e,n)}function p(t,e){return r["G"].equals(i["hydratedAdapter"],a(t),t,e)}function d(t,e){return r["G"].intersects(i["hydratedAdapter"],a(t),t,e)}function f(t,e){return r["G"].touches(i["hydratedAdapter"],a(t),t,e)}function m(t,e){return r["G"].within(i["hydratedAdapter"],a(t),t,e)}function b(t,e){return r["G"].disjoint(i["hydratedAdapter"],a(t),t,e)}function g(t,e){return r["G"].overlaps(i["hydratedAdapter"],a(t),t,e)}function y(t,e,n){return r["G"].relate(i["hydratedAdapter"],a(t),t,e,n)}function O(t){return r["G"].isSimple(i["hydratedAdapter"],a(t),t)}function v(t){return r["G"].simplify(i["hydratedAdapter"],a(t),t)}function j(t,e=!1){return r["G"].convexHull(i["hydratedAdapter"],a(t),t,e)}function x(t,e){return r["G"].difference(i["hydratedAdapter"],a(t),t,e)}function _(t,e){return r["G"].symmetricDifference(i["hydratedAdapter"],a(t),t,e)}function w(t,e){return r["G"].intersect(i["hydratedAdapter"],a(t),t,e)}function M(t,e=null){return r["G"].union(i["hydratedAdapter"],a(t),t,e)}function S(t,e,n,o,s,c){return r["G"].offset(i["hydratedAdapter"],a(t),t,e,n,o,s,c)}function V(t,e,n,o=!1){return r["G"].buffer(i["hydratedAdapter"],a(t),t,e,n,o)}function T(t,e,n,o,s,c){return r["G"].geodesicBuffer(i["hydratedAdapter"],a(t),t,e,n,o,s,c)}function E(t,e,n=!0){return r["G"].nearestCoordinate(i["hydratedAdapter"],a(t),t,e,n)}function k(t,e){return r["G"].nearestVertex(i["hydratedAdapter"],a(t),t,e)}function I(t,e,n,o){return r["G"].nearestVertices(i["hydratedAdapter"],a(t),t,e,n,o)}function R(t){return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?t.extent.center:null}function P(t,e,n){var i;if(null==t)throw new Error("Illegal Argument Exception");const a=t.spatialReference;if(null==(n=null!=(i=n)?i:R(t)))throw new Error("Illegal Argument Exception");const o=t.constructor.fromJSON(r["G"].rotate(t,e,n));return o.spatialReference=a,o}function G(t,e){var n;if(null==t)throw new Error("Illegal Argument Exception");const i=t.spatialReference;if(null==(e=null!=(n=e)?n:R(t)))throw new Error("Illegal Argument Exception");const a=t.constructor.fromJSON(r["G"].flipHorizontal(t,e));return a.spatialReference=i,a}function C(t,e){var n;if(null==t)throw new Error("Illegal Argument Exception");const i=t.spatialReference;if(null==(e=null!=(n=e)?n:R(t)))throw new Error("Illegal Argument Exception");const a=t.constructor.fromJSON(r["G"].flipVertical(t,e));return a.spatialReference=i,a}function z(t,e,n,o){return r["G"].generalize(i["hydratedAdapter"],a(t),t,e,n,o)}function A(t,e,n){return r["G"].densify(i["hydratedAdapter"],a(t),t,e,n)}function Z(t,e,n,o=0){return r["G"].geodesicDensify(i["hydratedAdapter"],a(t),t,e,n,o)}function L(t,e){return r["G"].planarArea(i["hydratedAdapter"],a(t),t,e)}function F(t,e){return r["G"].planarLength(i["hydratedAdapter"],a(t),t,e)}function D(t,e,n){return r["G"].geodesicArea(i["hydratedAdapter"],a(t),t,e,n)}function H(t,e,n){return r["G"].geodesicLength(i["hydratedAdapter"],a(t),t,e,n)}},f0b9:function(t,e,n){"use strict";function r(t){return 32+t.length}function i(){return 16}function a(t){if(!t)return 0;let e=32;for(const n in t)if(t.hasOwnProperty(n)){const a=t[n];switch(typeof a){case"string":e+=r(a);break;case"number":e+=i();break;case"boolean":e+=4}}return e}function o(t,e){return 32+t.length*e}n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r}))},f895:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return P})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return _})),n.d(e,"g",(function(){return x})),n.d(e,"h",(function(){return k})),n.d(e,"i",(function(){return T})),n.d(e,"j",(function(){return v})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return j})),n.d(e,"m",(function(){return D})),n.d(e,"n",(function(){return y}));n("c120");var r=n("e92d"),i=n("38a4"),a=n("b2b2"),o=n("d791"),s=n("e431"),c=n("0b2d"),l=n("7577"),u=n("0fc4"),h=n("d18f"),p=n("a1b1"),d=n("7361");const f=r["a"].getLogger("esri.geometry.support.sphere");function m(){return Object(u["e"])()}function b(t,e=m()){return Object(l["c"])(e,t)}function g(t,e){return Object(u["g"])(t[0],t[1],t[2],e)}function y(t){return t}function O(t){t[0]=t[1]=t[2]=t[3]=0}function v(t){return t}function j(t){return Array.isArray(t)?t[3]:t}function x(t){return Array.isArray(t)?t:L}function _(t,e,n,r){return Object(u["g"])(t,e,n,r)}function w(t,e,n){return t!==n&&Object(s["n"])(n,t),n[3]=t[3]+e,n}function M(t,e,n){return f.error("sphere.setExtent is not yet supported"),t===n?n:b(t,n)}function S(t,e,n){if(Object(a["k"])(e))return!1;const{origin:r,direction:i}=e,o=V;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],c=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),l=c*c-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(l<0)return!1;const u=Math.sqrt(l);let h=(-c-u)/(2*s);const p=(-c+u)/(2*s);return(h<0||p<h&&p>0)&&(h=p),!(h<0)&&(n&&(n[0]=r[0]+i[0]*h,n[1]=r[1]+i[1]*h,n[2]=r[2]+i[2]*h),!0)}const V=Object(c["f"])();function T(t,e){return S(t,e,null)}function E(t,e,n){if(S(t,e,n))return n;const r=k(t,e,d["d"].get());return Object(s["i"])(n,e.origin,Object(s["h"])(d["d"].get(),e.direction,Object(s["p"])(e.origin,r)/Object(s["s"])(e.direction))),n}function k(t,e,n){const r=d["d"].get(),i=d["a"].get();Object(s["j"])(r,e.origin,e.direction);const a=j(t);Object(s["j"])(n,r,e.origin),Object(s["h"])(n,n,1/Object(s["s"])(n)*a);const c=G(t,e.origin),l=Object(p["a"])(e.origin,n);return Object(o["j"])(i),Object(o["f"])(i,i,l+c,r),Object(s["t"])(n,n,i),n}function I(t,e,n){return S(t,e,n)?n:(Object(h["a"])(e,x(t),n),R(t,n,n))}function R(t,e,n){const r=Object(s["m"])(d["d"].get(),e,x(t)),i=Object(s["h"])(d["d"].get(),r,t[3]/Object(s["s"])(r));return Object(s["i"])(n,i,x(t))}function P(t,e){const n=Object(s["m"])(d["d"].get(),e,x(t)),r=Object(s["w"])(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))}function G(t,e){const n=Object(s["m"])(d["d"].get(),e,x(t)),r=Object(s["s"])(n),a=j(t),o=a+Math.abs(a-r);return Object(i["b"])(a/o)}const C=Object(c["f"])();function z(t,e,n,r){const a=Object(s["m"])(C,e,x(t));switch(n){case 0:{const t=Object(i["e"])(a,C)[2];return Object(s["z"])(r,-Math.sin(t),Math.cos(t),0)}case 1:{const t=Object(i["e"])(a,C),e=t[1],n=t[2],o=Math.sin(e);return Object(s["z"])(r,-o*Math.cos(n),-o*Math.sin(n),Math.cos(e))}case 2:return Object(s["u"])(r,a);default:return}}function A(t,e){const n=Object(s["m"])(F,e,x(t));return Object(s["s"])(n)-t[3]}function Z(t,e,n,r){const i=A(t,e),a=z(t,e,2,F),o=Object(s["h"])(F,a,n-i);return Object(s["i"])(r,e,o)}const L=Object(c["f"])(),F=Object(c["f"])(),D=Object.freeze({__proto__:null,create:m,copy:b,fromCenterAndRadius:g,wrap:y,clear:O,fromRadius:v,getRadius:j,getCenter:x,fromValues:_,elevate:w,setExtent:M,intersectRay:S,intersectsRay:T,intersectRayClosestSilhouette:E,closestPointOnSilhouette:k,closestPoint:I,projectPoint:R,distanceToSilhouette:P,angleToSilhouette:G,axisAt:z,altitudeAt:A,setAltitudeAt:Z})}}]);