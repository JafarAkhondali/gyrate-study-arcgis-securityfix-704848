(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0477a460"],{"2ab3":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var s=i("3886"),r=i("690a");function n(){const e=new r["a"];e.vertex.uniforms.add("proj","mat4").add("view","mat4").add("width","float"),e.attributes.add("position","vec3"),e.attributes.add("normal","vec3"),e.attributes.add("uv0","vec2"),e.attributes.add("auxpos1","float"),e.varyings.add("vtc","vec2"),e.varyings.add("vlength","float"),e.varyings.add("vradius","float"),e.vertex.code.add(s["a"]`
    void main(void) {
      vec3 bitangent = normal;

      vtc = uv0;
      vlength = auxpos1;
      vradius = 0.5 * width;

      vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);
      gl_Position = proj * pos;
    }
  `),e.fragment.uniforms.add("outlineSize","float").add("outlineColor","vec4").add("stripeLength","float").add("stripeEvenColor","vec4").add("stripeOddColor","vec4");const t=1/Math.sqrt(2);return e.fragment.code.add(s["a"]`
    const float INV_SQRT2 = ${s["a"].float(t)};

    vec4 arrowColor(vec2 tc, float len) {
      float d = INV_SQRT2 * (tc.x - abs(tc.y));
      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));
      d = min(d, 1.0 - abs(tc.y));

      if (d < 0.0) {
        return vec4(0.0);
      } else if (d < outlineSize) {
        return outlineColor;
      } else {
        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;
      }
    }

    void main(void) {
      vec2 ntc = vec2(vtc.x / vradius, vtc.y);
      vec4 color = arrowColor(ntc, vlength / vradius);
      if (color.a == 0.0) {
        discard;
      }
      gl_FragColor = color;
    }
  `),e}var a=Object.freeze({__proto__:null,build:n})},"94e6":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("b2b2"),r=i("0b2d"),n=i("e431"),a=i("d791"),o=i("afe1"),l=i("7577"),h=i("5ef2"),c=i("86ba"),d=i("d408"),u=i("5fae");class p extends u["a"]{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=Object(h["c"])(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,i=Object(r["e"])(),s=Object(r["e"])(),a=100,o=[];Object(n["x"])(i,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),Object(n["x"])(i,e[2],e[1],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),Object(n["x"])(i,e[2],e[3],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),Object(n["x"])(i,e[0],e[3],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),Object(n["x"])(i,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),Object(n["x"])(i,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(i,t,s),o.push([s[0],s[1],s[2]]),this.geometry=[o]}setGeometryFromFrustum(e){const t=[];e.lines.forEach(e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])}),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;Object(a["i"])(b),Object(a["t"])(b,b,t),this.transform=b;const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e,t=r["b"]){Object(a["i"])(b),Object(a["t"])(b,b,t),this.transform=b,this.geometry=e.map(e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){Object(l["g"])(e,this._color)||(Object(l["c"])(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){Object(s["k"])(e)?!Object(s["j"])(this._innerColor)&&Object(l["g"])(e,this._innerColor)||(this._innerColor=Object(l["c"])(Object(h["b"])(),e),this._updateMaterial()):Object(s["k"])(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=Object(s["k"])(e)!==Object(s["k"])(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){(Object(s["j"])(e)||Object(s["j"])(this._stippleOffColor)||!Object(l["g"])(e,this._stippleOffColor))&&(this._stippleOffColor=Object(s["k"])(e)?Object(h["a"])(e):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new c["a"](this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let i=0;i<t.length;++i){const s=Object(d["a"])(t[i]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(Object(s["j"])(e)||0===e.length)return[];const t=[];return e.forEach(e=>{const i=e.length,s=new Float64Array(3*i);e.forEach((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]});const r={attributeData:{position:s},removeDuplicateStartEnd:0};t.push(r)}),t}}const b=Object(o["b"])()},ecae:function(e,t,i){"use strict";i.r(t),i.d(t,"DirectLineMeasurement3DView",(function(){return Qe}));var s=i("a4ee"),r=(i("c120"),i("b2b2")),n=(i("e92d"),i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("fc29")),l=i("2035"),h=i("38a4"),c=i("a915"),d=i("6323"),u=(i("1b8f"),i("0b2d")),p=i("e431"),b=i("af40"),g=i("3795"),_=i("f694"),m=i("8048"),v=i("6aa9");function O(e,t,i,s=2,r="abbr"){return Object(v["b"])(e,t.toUnit(i).value,i,s,r)}function f(e,t,i=2,s="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(v["h"])(e,t.value,t.unit,i,s)}function j(e,t,i=2,s="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(v["i"])(e,t.value,t.unit,i,s)}function w(e,t,i=2,s="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(v["e"])(e,t.value,t.unit,i,s)}function y(e,t,i=2,s="abbr"){if("length"!==t.measure)throw new Error("quantity is not a length");return Object(v["f"])(e,t.value,t.unit,i,s)}function x(e){if("angle"!==e.measure)throw new Error("quantity is not an angle");return Object(v["a"])(e.value,e.unit)}var L=i("3349"),S=i("5ef2"),C=i("3544"),P=i("45a1");i("7ffa"),i("d791");Object(u["e"])();function z(e,t,i,s){s.projectToRenderScreen(e,E),s.projectToRenderScreen(t,R),Object(L["d"])(i,D,M),Object(L["e"])(i,i)}Object(u["e"])(),Object(c["e"])();const E=Object(c["e"])(),M=E,R=Object(c["e"])(),D=R;Object(c["g"])(),Object(c["g"])(),Object(c["g"])();var k=i("f53a");i("e6c2");let A=e=>({vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}),T=(e,t,i)=>{for(let s=0,r=t.length;s<r;s++){let r=t[s];Array.isArray(r)?T(e,r,i):null!=r&&!1!==r&&("string"==typeof r&&(r=A(r)),i.push(r))}};function V(e,t,i){if(Array.isArray(t))i=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||i&&("string"==typeof i||i.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let s,r;return i&&1===i.length&&"string"==typeof i[0]?s=i[0]:i&&(r=[],T(e,i,r),0===r.length&&(r=void 0)),{vnodeSelector:e,properties:t,children:r,text:""===s?void 0:s,domNode:null}}i("69e9");let I=class extends o["a"]{constructor(e){super(e),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(e){this._set("startX",e[0]),this._set("startY",e[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(e){this._set("endX",e[0]),this._set("endY",e[1])}get strokeStyle(){const e=this.color;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get lineCap(){return"round"}render(){const{height:e,left:t,top:i,width:s,x1:r,x2:n,y1:a,y2:o}=this.calculateCoordinates(G),l=`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`;return V("div",{classes:{"esri-line-overlay-item":!0},styles:{left:t+"px",top:i+"px",width:s+"px",height:e+"px",visibility:this.visible?"visible":"hidden"}},[V("svg",{width:s,height:e},[V("line",{x1:r,y1:a,x2:n,y2:o,style:l})])])}renderCanvas(e){if(!this.visible)return;e.strokeStyle=this.strokeStyle,e.lineWidth=this.width,e.lineCap=this.lineCap;const t=this.calculateCoordinates(G);e.beginPath(),e.moveTo(t.left+t.x1,t.top+t.y1),e.lineTo(t.left+t.x2,t.top+t.y2),e.stroke()}calculateCoordinates(e){const t=Math.min(this.startX,this.endX),i=Math.max(this.startX,this.endX),s=Math.min(this.startY,this.endY),r=Math.max(this.startY,this.endY),n=this.width;return e.left=t-n,e.top=s-n,e.width=i-t+2*n,e.height=Math.max(20,r-s+2*n),e.x1=this.startX-t+n,e.y1=this.startY-s+n,e.x2=this.endX-t+n,e.y2=this.endY-s+n,e}};Object(s["a"])([Object(n["b"])()],I.prototype,"startX",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"startY",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"endX",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"endY",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"startPosition",null),Object(s["a"])([Object(n["b"])()],I.prototype,"endPosition",null),Object(s["a"])([Object(n["b"])()],I.prototype,"width",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"color",void 0),Object(s["a"])([Object(n["b"])()],I.prototype,"visible",void 0),Object(s["a"])([Object(n["b"])({readOnly:!0})],I.prototype,"strokeStyle",null),I=Object(s["a"])([Object(a["a"])("esri.views.overlay.LineOverlayItem")],I);const G={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var H=I,W=H;const F={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let q=class extends o["a"]{constructor(e){super(e),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.backgroundColor="rgba(0, 0, 0, 0.6)",this.textColor="white",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(e){this._set("x",e[0]),this._set("y",e[1])}get padding(){return.5*this.fontSize}render(){return V("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+"px",borderRadius:this.padding+"px",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(e){if(!this.visible)return;const t=e.font.replace(/^(.*?)px/,"");e.font=`${this.fontSize}px ${t}`;const i=this.padding,s=this.padding,r=e.measureText(this.text).width,n=this.fontSize,a=$[this.anchor];e.textAlign="center",e.textBaseline="middle";const o=r+2*i,l=n+2*i,h=this.x+a.x*o,c=this.y+a.y*l;this.roundedRect(e,h,c,o,l,s),e.fillStyle=this.backgroundColor,e.fill();const d=this.x+(a.x+.5)*o,u=this.y+(a.y+.5)*l;this._renderTextShadow(e,this.text,d,u),e.fillStyle=this.textColor,e.fillText(this.text,d,u)}_renderTextShadow(e,t,i,s){e.lineJoin="miter",e.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/B.length})`;const r=this.textShadowSize;for(const[n,a]of B)e.fillText(t,i+r*n,s+r*a)}roundedRect(e,t,i,s,r,n){e.beginPath(),e.moveTo(t,i+n),e.arcTo(t,i,t+n,i,n),e.lineTo(t+s-n,i),e.arcTo(t+s,i,t+s,i+n,n),e.lineTo(t+s,i+r-n),e.arcTo(t+s,i+r,t+s-n,i+r,n),e.lineTo(t+n,i+r),e.arcTo(t,i+r,t,i+r-n,n),e.closePath()}_cssClasses(){const e={"esri-text-overlay-item":!0};for(const t in F)e[F[t]]=this.anchor===t;return e}};Object(s["a"])([Object(n["b"])()],q.prototype,"x",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"y",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"position",null),Object(s["a"])([Object(n["b"])()],q.prototype,"text",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"fontSize",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"anchor",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"visible",void 0),Object(s["a"])([Object(n["b"])()],q.prototype,"padding",null),q=Object(s["a"])([Object(a["a"])("esri.views.overlay.TextOverlayItem")],q);const $={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},B=[];{const e=16;for(let t=0;t<360;t+=360/e)B.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)])}var U=q,X=U;class Y extends k["a"]{constructor(e){super(e.view),this._handles=new b["a"],this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor="right",this.applyProps(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(e){this._text=e,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(e){this._distance!==e&&(this._distance=e,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(e){this._anchor!==e&&(this._anchor=e,this._updateLabelPosition())}overlaps(e){return this.textItem.visible&&e.textItem.visible&&this.view.overlay.overlaps(this._textItem,e.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,Object(r["k"])(this.geometry)&&this.view._stage)switch(this.geometry.type){case"point":this._computeLabelPositionFromPoint(this.geometry,ne)&&(this._textItem.position=[ne[0],ne[1]],this._textItem.anchor="center",this._showText=!0);break;case"corner":this._computeLabelPositionFromCorner(this.geometry,this._distance,ne,ae)&&(this._showCallout=this._updatePosition(ne,ae),this._showText=!0);break;case"segment":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,ne,ae)&&(this._showText=!0,this._showCallout=this._updatePosition(ne,ae))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(e,t){this.view.renderCoordsHelper.toRenderCoords(e,se);const i=this.view._stage.camera;return i.projectToRenderScreen(se,re),!(re[2]<0||re[2]>1)&&(i.renderToScreen(re,t),!0)}_computeLabelPositionFromCorner(e,t,i,s){if(!e)return!1;const r=this.view._stage.camera;return Q(e.left,1,r,ee),Object(L["n"])(ee,ee),Q(e.right,0,r,te),Object(L["h"])(ie,ee,te),Object(L["n"])(ie,ie),Object(L["e"])(ie,ie),r.projectToRenderScreen(e.left.endRenderSpace,re),!(re[2]<0||re[2]>1)&&(r.renderToScreen(re,i),Object(L["a"])(ie,ie,t*r.pixelRatio),Object(L["h"])(ie,ie,re),r.renderToScreen(ie,s),!0)}_computeLabelPositionFromSegment(e,t,i,s,r){if(!e)return!1;const n=e.segment,a=this.view._stage.camera;z(n.startRenderSpace,n.endRenderSpace,ee,a),Object(L["s"])(ie,-ee[1],ee[0]);let o=!1;switch(i){case"top":o=ie[1]<0;break;case"bottom":o=ie[1]>0;break;case"left":o=ie[0]>0;break;case"right":o=ie[0]<0}if(o&&Object(L["n"])(ie,ie),0===Object(L["l"])(ie))switch(i){case"top":ie[1]=1;break;case"bottom":ie[1]=-1;break;case"left":ie[0]=-1;break;case"right":ie[0]=1}return n.eval(de[e.sampleLocation],se),a.projectToRenderScreen(se,re),!(re[2]<0||re[2]>1)&&(a.renderToScreen(re,s),Object(L["a"])(ie,ie,t*a.pixelRatio),Object(L["h"])(ie,ie,re),a.renderToScreen(ie,r),!0)}_updatePosition(e,t){if(t){const i=t[0]-e[0],s=t[1]-e[1];return this._textItem.position=[t[0],t[1]],this._textItem.anchor=Math.abs(i)>Math.abs(s)?i>0?"left":"right":s>0?"top":"bottom",this._calloutItem.startPosition=[e[0],e[1]],this._calloutItem.endPosition=[t[0],t[1]],!0}return this._textItem.position=[e[0],e[1]],this._textItem.anchor="center",!1}createResources(){this._textItem=new X({visible:!0}),this._textItem.text=Object(r["t"])(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new W({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch("camera",()=>{this._updateLabelPosition()}))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(e){this._textItem.visible=this._showText&&e,this._calloutItem.visible=this._showCallout&&e}}function Q(e,t,i,s){e.eval(t,J,Z),Object(p["g"])(K,J,Z),i.projectToRenderScreen(J,oe),i.projectToRenderScreen(K,he),Object(L["d"])(s,ce,le),Object(L["e"])(s,s)}function N(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}}const J=Object(u["e"])(),K=Object(u["e"])(),Z=Object(u["e"])(),ee=Object(c["d"])(),te=Object(c["d"])(),ie=Object(c["d"])(),se=Object(u["e"])(),re=Object(c["e"])(),ne=Object(c["g"])(),ae=Object(c["g"])(),oe=Object(c["e"])(),le=oe,he=Object(c["e"])(),ce=he,de={start:0,center:.5,end:1};var ue=i("94e6"),pe=i("680b"),be=i("8188"),ge=i("f091");class _e{constructor(e=Object(u["e"])(),t=Object(u["e"])()){this.startRenderSpace=e,this.endRenderSpace=t,this.type="euclidean"}eval(e,t,i){return Object(p["j"])(t,this.startRenderSpace,this.endRenderSpace,e),i&&(Object(p["k"])(i,this.endRenderSpace,this.startRenderSpace),Object(p["s"])(i,i)),t}createRenderGeometry(e,t){const i=[],s=[],r=(t,r)=>{const n=Oe;Object(p["k"])(n,t,e),i.push([n[0],n[1],n[2]]),s.push([r[0],r[1],r[2]])},n=t.worldUpAtPosition(this.eval(.5,ve),ge["d"].get());return r(this.startRenderSpace,n),r(this.endRenderSpace,n),{points:i,normals:s}}}class me{constructor(e,t,i){this.startRenderSpace=e,this.endRenderSpace=t,this.renderSpatialReference=i,this.type="geodesic",this._start=Object(u["e"])(),this._end=Object(u["e"])(),this._pcpf=Object(_["g"])(i),this._project=Object(be["b"])(i,this._pcpf),this._projectIn(e,this._start),this._projectIn(t,this._end)}_projectIn(e,t){this._project?Object(be["y"])(e,this.renderSpatialReference,t,this._pcpf):Object(p["l"])(t,e)}eval(e,t,i){if(this._project)if(i){const s=Oe;Object(pe["m"])(this._start,this._end,e,t,s),Object(p["g"])(fe,t,s),Object(be["y"])(t,this._pcpf,t,this.renderSpatialReference),Object(be["y"])(fe,this._pcpf,fe,this.renderSpatialReference),Object(p["k"])(i,fe,t),Object(p["s"])(i,i)}else Object(pe["l"])(this._start,this._end,e,t),Object(be["y"])(t,this._pcpf,t,this.renderSpatialReference);else Object(p["j"])(t,this._start,this._end,e),i&&(Object(p["k"])(i,this._end,this._start),Object(p["s"])(i,i));return t}createRenderGeometry(e,t){const i=[],s=[],r=(t,r)=>{const n=fe;Object(p["k"])(n,t,e),i.push([n[0],n[1],n[2]]),s.push([r[0],r[1],r[2]])},n=128;for(let a=0;a<n;++a){const e=a/(n-1),i=ve,s=Oe;this.eval(e,i),t.worldUpAtPosition(i,s),r(i,s)}return{points:i,normals:s}}}const ve=Object(u["e"])(),Oe=Object(u["e"])(),fe=Object(u["e"])();var je=i("afe1"),we=i("caf7"),ye=i("5fae"),xe=i("fc00"),Le=i("d7f7"),Se=i("35b3"),Ce=i("c3a4"),Pe=i("ca98"),ze=i("da35"),Ee=i("fa1e"),Me=i("8e37"),Re=i("189c"),De=i("8e97"),ke=i("2ab3");class Ae extends Pe["a"]{constructor(e,t){super(e,t)}initializeProgram(e){const t=Ae.shader.get().build();return new Me["a"](e.rctx,t.generateSource("vertex"),t.generateSource("fragment"),Ee["a"])}bindPass(e,t,i){De["a"].bindProjectionMatrix(this.program,i.camera.projectionMatrix),this.program.setUniform1f("width",t.width),this.program.setUniform1f("outlineSize",t.outlineSize),this.program.setUniform4fv("outlineColor",t.outlineColor),this.program.setUniform1f("stripeLength",t.stripeLength),this.program.setUniform4fv("stripeEvenColor",t.stripeEvenColor),this.program.setUniform4fv("stripeOddColor",t.stripeOddColor)}bindDraw(e){De["a"].bindView(this.program,e)}initializePipeline(){return Object(Re["e"])({polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:Re["d"],colorWrite:Re["c"]})}get primitiveType(){return 5}}Ae.shader=new Ce["a"](ke["a"],()=>i.e("chunk-2d213e8d").then(i.bind(null,"af4f")));class Te extends ze["a"]{constructor(){super(...arguments),this.polygonOffsetEnabled=!1}}Object(s["a"])([Object(ze["b"])()],Te.prototype,"polygonOffsetEnabled",void 0);class Ve extends Se["a"]{constructor(e){super(e,Ge),this.techniqueConfig=new Te}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new Ue}getGLMaterial(e){return 0===e.output?new Ie(e):void 0}}class Ie extends Le["a"]{constructor(e){super(e),this.updateParameters()}updateParameters(){this.technique=this.techniqueRep.acquireAndReleaseExisting(Ae,this.material.getTechniqueConfig(),this.technique)}beginSlot(e){return 3===e}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const Ge={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...Se["b"]},He=Object(xe["a"])().vec3f("position").vec3f("normal").vec2f("uv0").f32("auxpos1"),We=Object(u["e"])(),Fe=Object(u["e"])(),qe=Object(u["e"])(),$e=Object(u["e"])(),Be=Object(u["e"])();class Ue{constructor(){this.vertexBufferLayout=He}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get("position").length/2+1)}write(e,t,i,s){const r=t.vertexAttributes.get("position").data,n=t.vertexAttributes.get("normal").data,a=r.length/3,o=t&&t.indices&&t.indices.get("position");o&&o.length!==2*(a-1)&&console.warn("MeasurementArrowMaterial does not support indices");const l=We,h=Fe,c=qe,d=$e,u=Be,b=e.transformation,g=e.invTranspTransformation,_=i.position,m=i.normal,v=i.uv0;let O=0;for(let j=0;j<a;++j){const e=3*j;if(Object(p["x"])(l,r[e],r[e+1],r[e+2]),j<a-1){const e=3*(j+1);Object(p["x"])(h,r[e],r[e+1],r[e+2]),Object(p["x"])(u,n[e],n[e+1],n[e+2]),Object(p["s"])(u,u),Object(p["k"])(c,h,l),Object(p["s"])(c,c),Object(p["h"])(d,u,c),Object(p["s"])(d,d)}const t=Object(p["p"])(l,h);b&&g&&(Object(p["n"])(l,l,b),Object(p["n"])(h,h,b),Object(p["n"])(d,d,g));const i=s+2*j,o=i+1;_.setVec(i,l),_.setVec(o,l),m.setVec(i,d),m.setVec(o,d),v.set(i,0,O),v.set(i,1,-1),v.set(o,0,O),v.set(o,1,1),j<a-1&&(O+=t)}const f=i.auxpos1;for(let p=0;p<2*a;++p)f.set(s+p,O)}}class Xe extends ye["a"]{constructor(e){super(e),this._parameters=Ye,this._handles=null,this._origin=Object(u["e"])(),this._originTransform=Object(je["b"])(),this._arrowCenter=Object(u["e"])(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial.setParameterValues({stripeEvenColor:e})}}createExternalResources(){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial=new Ve({outlineColor:this._parameters.arrowOutlineColor,stripeEvenColor:e,stripeOddColor:this._parameters.arrowStripeOddColor,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new b["a"],this._handles.add(this.view.state.watch("camera",()=>{this.viewChanged()}))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(Object(r["j"])(this._geometry)||Object(r["j"])(this._geometry.startRenderSpace)||Object(r["j"])(this._geometry.endRenderSpace))return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);e.addGeometry(t,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,t,i,s){const r=this.view.renderCoordsHelper,n=[],a=[],o=(e,t)=>{const s=ge["d"].get();Object(p["k"])(s,e,i),n.push(s),a.push(t)};if("euclidean"===s.type){s.eval(.5,this._arrowCenter);const i=ge["d"].get();r.worldUpAtPosition(this._arrowCenter,i),o(e,i),o(t,i)}else{s.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let t=0;t<e;++t){const i=t/(e-1),n=ge["d"].get(),a=ge["d"].get();s.eval(i,n),r.worldUpAtPosition(n,a),o(n,a)}}return we["a"].createPolylineGeometry(n,a)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&Object(r["k"])(this._geometry)){const e=this.view._stage.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}}const Ye={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128};let Qe=class extends o["a"]{constructor(e){super(e),this._params={...tt},this._handles=new b["a"],this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._segmentLabelDisplayedMeasurement="euclidean",this._startPosition=Object(u["e"])(),this._endPosition=Object(u["e"])(),this._cornerPosition=Object(u["e"])(),this._startPositionAtSeaLevel=Object(u["e"])(),this._endPositionAtSeaLevel=Object(u["e"])(),this._viewMode="none",this._geometryDirty=!0,this.state="pending",this.messages=null,this._visualizedMeasurement="auto",this._actualVisualizedMeasurement="euclidean",this._visualElementOrientation="auto",this._triangleOrientationOverride=null,this._triangleCollapseRatioThreshold=.03,this._geodesicDistanceThreshold=1e5}initialize(){this._handles.add(Object(g["k"])(this.view,"ready",()=>this._initialize(),!0))}_initialize(){switch(this.state){case"ready":throw new Error("invalid state");case"destroyed":return}this._segmentVisualElement=new Xe({attached:!0,view:this.view,geometry:null,renderOccluded:4}),this._triangleVisualElement=new ue["a"]({attached:!0,view:this.view,width:this._params.triangleLineWidth,color:this._params.triangleColor,renderOccluded:4}),this._rightAngleQuad=new P["a"]({attached:!0,view:this.view,color:et,renderOccluded:4}),this._projectedGeodesicLine=new ue["a"]({attached:!0,view:this.view,width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:Object(C["c"])(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicStartHint=new ue["a"]({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:Object(C["c"])(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicEndHint=new ue["a"]({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:Object(C["c"])(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._segmentLabel=new Y({attached:!0,view:this.view,fontSize:this._params.direcLabelFontSize}),this._verticalLabel=new Y({attached:!0,view:this.view,fontSize:this._params.verticalLabelFontSize}),this._horizontalLabel=new Y({attached:!0,view:this.view,fontSize:this._params.horizontalLabelFontSize}),this._handles.add([this.dataObject.watch("visible",()=>this._update(!1),!0),this.dataObject.watch("startPoint",()=>this._update(),!0),this.dataObject.watch("endPoint",()=>this._update(),!0),this.dataObject.watch("measurement",()=>this._update(),!0),this.dataObject.watch("settings.unit",()=>{this._updateLabels(),this._updateSegmentStripeLength()},!0),this.view.state.watch("camera",()=>this._update(),!0),Object(l["c"])(async()=>this._updateMessageBundle())]),this._set("state","ready"),this._updateMessageBundle(),this._update()}async whenReady(){return Object(g["k"])(this,"ready").then(()=>{})}get ready(){return"ready"===this.state}get viewMode(){return this._viewMode}get visualizedMeasurement(){return this._visualizedMeasurement}set visualizedMeasurement(e){e!==this._visualizedMeasurement&&(this._visualizedMeasurement=e,this._update())}get actualVisualizedMeasurement(){return this._actualVisualizedMeasurement}get visualElementsOrientation(){return this._visualElementOrientation}set visualElementsOrientation(e){e!==this._visualElementOrientation&&(this._visualElementOrientation=e,this._update())}get allowVisualElementsOrientationChange(){return Object(r["j"])(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){Object(r["j"])(this._triangleOrientationOverride)!==e&&(Object(r["j"])(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():(this._triangleOrientationOverride=null,this._update()))}get triangleCollapseRatioThreshold(){return this._triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._triangleCollapseRatioThreshold=e,this._update()}get geodesicDistanceThreshold(){return this._geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this._geodesicDistanceThreshold=e,this._update()}get segmentLabel(){return this._segmentLabel}get horizontalLabel(){return this._horizontalLabel}get verticalLabel(){return this._verticalLabel}get testData(){let e=null;const t="geodesic"===this.actualVisualizedMeasurement;return e={direct:t?this.horizontalLabel:this.segmentLabel,horizontal:t?this.segmentLabel:this.horizontalLabel,vertical:this.verticalLabel},{labels:e,stripeLength:this._segmentVisualElement.stripeLength}}_update(e=!0){switch(this.state){case"destroyed":case"pending":return}const t=this.dataObject.visible;switch(this._geometryDirty=e,this._geometryDirty&&t&&(this._updateGeometryAndViewMode(),this._geometryDirty=!1),this._viewMode){case"none":this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case"segment":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case"segment-and-triangle":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=t,this._rightAngleQuad.visible=t,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case"segment-and-projection":this._segmentVisualElement.visible=t,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}this._updateLabels()}destroy(){switch(this.state){case"destroyed":case"pending":return}this._handles.destroy(),this._segmentVisualElement.destroy(),this._segmentVisualElement=null,this._triangleVisualElement.destroy(),this._triangleVisualElement=null,this._rightAngleQuad.destroy(),this._rightAngleQuad=null,this._projectedGeodesicLine.destroy(),this._projectedGeodesicLine=null,this._geodesicStartHint.destroy(),this._geodesicStartHint=null,this._geodesicEndHint.destroy(),this._geodesicEndHint=null,this._segmentLabel.destroy(),this._segmentLabel=null,this._verticalLabel.destroy(),this._verticalLabel=null,this._horizontalLabel.destroy(),this._horizontalLabel=null,this.set("view",null),this._set("state","destroyed")}_updateGeometryAndViewMode(){const e=this.view,t=e.renderCoordsHelper;if(Object(r["j"])(this.dataObject.startPoint)||Object(r["j"])(this.dataObject.endPoint)||this.dataObject.startPoint.equals(this.dataObject.endPoint))return this._viewMode="none",void(this._actualVisualizedMeasurement="auto"===this._visualizedMeasurement?"euclidean":this._visualizedMeasurement);t.toRenderCoords(this.dataObject.startPoint,this._startPosition),t.toRenderCoords(this.dataObject.endPoint,this._endPosition);const i=this._getActualVisualElementsOrientation(),s=this._updateActualVisualizedMeasurement();this._viewMode=this._computeViewMode(s);let n=this._startPosition,a=this._endPosition;const o="above-segment"===i?1:-1,l=o*(t.getAltitude(a)-t.getAltitude(n));l<0&&(n=this._endPosition,a=this._startPosition);const h="geodesic"===s?new me(this._startPosition,this._endPosition,t.spatialReference):new _e(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=s,this._viewMode){case"segment":this._segmentLabel.anchor="above-segment"===i?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:h,sampleLocation:"center"};break;case"segment-and-triangle":{const s=this._cornerPosition;t.worldUpAtPosition(n,s),Object(p["f"])(s,s,o*Math.abs(l)),Object(p["g"])(s,s,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[s[0],s[1],s[2]],[a[0],a[1],a[2]]]],this._rightAngleQuad.geometry={previous:n,center:s,next:a};const r=new _e(n,s),c=new _e(s,a),d=Ke(n,a,s,i,e.state.camera);this._segmentLabel.geometry={type:"segment",segment:h,sampleLocation:"center"},this._segmentLabel.anchor=d.segment,this._verticalLabel.geometry={type:"segment",segment:r,sampleLocation:"center"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:"segment",segment:c,sampleLocation:"center"},this._horizontalLabel.anchor=d.horizontal;break}case"segment-and-projection":{Object(p["l"])(this._startPositionAtSeaLevel,this._startPosition),Object(p["l"])(this._endPositionAtSeaLevel,this._endPosition),t.setAltitude(0,this._startPositionAtSeaLevel),t.setAltitude(0,this._endPositionAtSeaLevel);const e=new me(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,t.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(e),this._geodesicStartHint.setGeometryFromSegment(new _e(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new _e(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:"segment",segment:e,sampleLocation:"center"},this._segmentLabel.anchor="above-segment"===i?"top":"bottom";break}}}_updateLabels(){switch(this.state){case"pending":case"destroyed":return}const e=this.messages,t=this.dataObject.measurement;if(Object(r["j"])(t)||!e)return this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,void(this._verticalLabel.visible=!1);const i={verticalDistance:"",horizontalDistance:"",euclideanDistance:"",geodesicDistance:""},s=t.directDistance,n=t.horizontalDistance,a=t.verticalDistance,o=t.geodesicDistance,l=t.geodesicAngle;switch(this.dataObject.settings.unit){case"metric":i.euclideanDistance=s&&f(e,s),i.horizontalDistance=n&&f(e,n),i.verticalDistance=a&&j(e,a),i.geodesicDistance=o&&f(e,o);break;case"imperial":i.euclideanDistance=s&&w(e,s),i.horizontalDistance=n&&w(e,n),i.verticalDistance=a&&y(e,a),i.geodesicDistance=o&&w(e,o);break;case"degrees":{const t=l&&O(e,l,"degrees");i.euclideanDistance=t,i.horizontalDistance=t,i.geodesicDistance=t;break}case"degrees-minutes-seconds":i.horizontalDistance=l&&x(l);break;default:{const t=this.dataObject.settings.unit;i.euclideanDistance=s&&O(e,s,t),i.horizontalDistance=n&&O(e,n,t),i.verticalDistance=a&&O(e,a,t),i.geodesicDistance=o&&O(e,o,t);break}}this._segmentLabel.text="euclidean"===this._segmentLabelDisplayedMeasurement?i.euclideanDistance:i.geodesicDistance,this._horizontalLabel.text=i.horizontalDistance,this._verticalLabel.text=i.verticalDistance;const h=this.dataObject.visible;switch(this._viewMode){case"none":this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case"segment":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case"segment-and-triangle":this._segmentLabel.visible=h,this._horizontalLabel.visible=h,this._verticalLabel.visible=h;break;case"segment-and-projection":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1}this.notifyChange("segmentLabel"),this.notifyChange("horizontalLabel"),this.notifyChange("verticalLabel")}_updateSegmentStripeLength(){const e=Ze(this.view,this.dataObject);Object(r["k"])(e)?(this._segmentVisualElement.stripeLength=e,this._segmentVisualElement.stripesEnabled=!0):this._segmentVisualElement.stripesEnabled=!1}_computeViewMode(e){const t=this.dataObject,i=t.measurement;if("geodesic"===e){if(!Ne(t,this.geodesicDistanceThreshold))return"segment";if(Je(this.view,this._startPosition)||Je(this.view,this._endPosition))return"segment-and-projection"}return Object(r["j"])(i)||Math.min(i.verticalDistance.value/i.horizontalDistance.value,i.horizontalDistance.value/i.verticalDistance.value)<this.triangleCollapseRatioThreshold?"segment":"segment-and-triangle"}_getActualVisualElementsOrientation(){return Object(r["k"])(this._triangleOrientationOverride)?this._triangleOrientationOverride:"auto"===this.visualElementsOrientation?this.view.state.camera.aboveGround?"above-segment":"below-segment":this.visualElementsOrientation}_updateActualVisualizedMeasurement(){if("auto"===this._visualizedMeasurement){this._actualVisualizedMeasurement="euclidean";const e=this.dataObject.settings.unit;"degrees"!==e&&"degrees-minutes-seconds"!==e||(this._actualVisualizedMeasurement="geodesic"),Ne(this.dataObject,this.geodesicDistanceThreshold)&&(this._actualVisualizedMeasurement="geodesic")}else this._actualVisualizedMeasurement=this._visualizedMeasurement;return this._actualVisualizedMeasurement}_updateMessageBundle(){Object(d["a"])("esri/core/t9n/Units").then(e=>{this.messages=e,this.view&&this._updateLabels()})}};function Ne(e,t){return Object(r["k"])(e.measurement)&&e.measurement.horizontalDistance&&e.measurement.horizontalDistance.value>t}function Je(e,t){if(!e.state)return!1;const i=e.state.camera,s=e.renderCoordsHelper,r=i.computeScreenPixelSizeAt(t);return s.getAltitude(t)/r>=10}function Ke(e,t,i,s,r){const n=st,a=rt;r.projectToRenderScreen(i,n),r.projectToRenderScreen(t,a);const o={segment:"bottom",horizontal:"top",vertical:n[0]<a[0]?"left":"right"};{const s=nt,n=at;if(z(e,i,s,r),z(e,t,n,r),Object(L["g"])(s,n)>=it)o.segment=Object(h["s"])(s[1])===Object(h["s"])(n[1])?N(o.vertical):o.vertical;else{const e=ot;z(i,t,e,r),Object(L["g"])(e,n)>=it&&(o.segment=Object(h["s"])(e[0])===Object(h["s"])(n[0])?N(o.horizontal):o.horizontal)}}if("below-segment"===s){const e=e=>"top"===e?"bottom":"top";o.segment=e(o.segment),o.horizontal=e(o.horizontal),o.vertical=e(o.vertical)}return o}function Ze(e,t){let i=null;if(Object(r["k"])(t.measurement)){const e=t.measurement.directDistance;switch(t.settings.unit){case"metric":i=e&&e.toUnit("meters");break;case"imperial":i=e&&e.toUnit(Object(m["o"])(e.value,e.unit));break;case"degrees":case"degrees-minutes-seconds":{const e=t.measurement.geodesicAngle;i=e&&e.toUnit("degrees");break}default:i=e&&e.toUnit(t.settings.unit)}}if(i){let t=1;return t=Object(h["n"])(i.value/30),t*="degrees"===i.unit?Object(_["e"])(e.spatialReference).metersPerDegree:Object(m["c"])(1,i.unit,"meters"),t}return null}Object(s["a"])([Object(n["b"])({readOnly:!0})],Qe.prototype,"state",void 0),Object(s["a"])([Object(n["b"])()],Qe.prototype,"ready",null),Object(s["a"])([Object(n["b"])()],Qe.prototype,"messages",void 0),Object(s["a"])([Object(n["b"])()],Qe.prototype,"view",void 0),Object(s["a"])([Object(n["b"])()],Qe.prototype,"dataObject",void 0),Object(s["a"])([Object(n["b"])()],Qe.prototype,"viewMode",null),Object(s["a"])([Object(n["b"])()],Qe.prototype,"segmentLabel",null),Object(s["a"])([Object(n["b"])()],Qe.prototype,"horizontalLabel",null),Object(s["a"])([Object(n["b"])()],Qe.prototype,"verticalLabel",null),Qe=Object(s["a"])([Object(a["a"])("esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DView")],Qe);const et=Object(S["c"])(1,.5,0,.75),tt={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:et,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:et,guideLineWidth:2,guideLineColor:et,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},it=Math.cos(Object(h["f"])(12)),st=Object(c["e"])(),rt=Object(c["e"])(),nt=Object(c["d"])(),at=Object(c["d"])(),ot=Object(c["d"])()}}]);
//# sourceMappingURL=chunk-0477a460.898d9c14.js.map