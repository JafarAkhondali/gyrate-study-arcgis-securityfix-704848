{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","webpack:///./node_modules/@arcgis/core/views/layers/LayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Path.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/BaseDynamicLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/viewStateUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/Bitmap.js"],"names":["t","this","children","some","e","blendFunction","s","registerRenderPass","name","brushes","bitmap","target","drawPhase","MAP","super","prepareRenderPasses","p","EventedMixin","layer","parent","when","catch","r","id","title","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","prototype","readOnly","type","Boolean","d","arguments","left","right","top","bottom","_get","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","n","geometry","clone","types","read","l","path","ofType","rect","i","a","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","detach","remove","minScale","maxScale","o","isFulfilled","isResolved","_set","update","isVisibleAtScale","scale","pixelBlock","originalPixelBlock","width","height","filter","getAsRGBA","h","createImageData","data","set","putImageData","renderedRasterPixels","Uint8Array","buffer","BYTES_PER_ELEMENT","x","coords","lengths","length","push","f","slice","_cache","vertices","indices","primitiveType","isMapSpace","fromScreenExtent","xmin","ymin","xmax","ymax","Uint32Array","Math","floor","fromPolygon","fromMapExtent","fromRect","m","u","toScreen","indexBuffer","dispose","vertexBuffers","createIndex","Object","keys","reduce","createVertex","parseFloat","_clip","stage","_handle","watch","_invalidate","mesh","destroy","vao","_destroyGL","size","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","requestRender","max","_createScreenRect","fromPath","fromGeometry","constructor","_clips","forEach","_updateClippingInfo","createRenderParams","painter","globalOpacity","profiler","LABEL","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","state","renderChildren","compositeLayer","recordContainerEnd","_renderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","clip","LABEL_ALPHA","DEBUG","HIGHLIGHT","setTransform","onAttach","onDetach","items","map","fromClipArea","strategy","_bitmapContainer","addChild","fetchSource","fetchBitmapData","bind","removeChild","removeAllChildren","fetchImage","timestamp","refreshTimestamp","PI","rotation","abs","cos","sin","round","g","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","hidpi","_imagePromise","spatialReference","pixelRatio","stationary","valid","_singleExport","min","worldScreenWidth","_tiledExport","async","includes","fadeOut","fadeIn","console","invalidateTexture","Promise","resolve","signal","resolution","center","_export","create","scales","getTileCoverage","getTileBounds","all","S","document","createElement","getContext","pixelFormat","internalFormat","dataType","wrapMode","_","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","_source","_width","transforms","dvs","source","_texture","sourceWidth","sourceHeight","HTMLImageElement","naturalHeight","naturalWidth","updateTexture","toScreenNoRotation","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","resize","getRenderedRasterPixels","setData"],"mappings":"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","file":"js/chunk-76ed6005.68dce5ba.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./webgl/enums.js\";import{brushes as r}from\"./brushes.js\";import s from\"./webgl/WGLContainer.js\";class t extends s{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.blendFunction))}prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[r.bitmap],target:()=>this.children,drawPhase:e.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import r from\"../../../../core/Error.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{convertFromNestedArray as n,convertFromPolygon as s}from\"../../../../layers/graphics/featureConversionUtils.js\";import{a as c}from\"../../../../chunks/vec2f64.js\";import{earcut as i}from\"../../../../core/libs/earcut/earcut.js\";import{s as a}from\"../../../../chunks/vec2.js\";import f from\"../../../webgl/BufferObject.js\";import{i1616to32 as h}from\"./number.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new r(\"Cannot get DataType of array\")}},y=(e,t,r,o)=>{let n=0;for(let s=1;s<r;s++){const r=e[2*(t+s-1)],o=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-r)*(e[2*(t+s)+1]+o)}return o?n>0:n<0},x=({coords:e,lengths:t},r)=>{const o=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const c=s,a=[];for(;n<t.length-1&&y(e,s+t[n],t[n+1],r);n+=1,s+=t[n])a.push(s+t[n]-c);const f=e.slice(2*c,2*(s+t[n])),h=i(f,a,2);for(const e of h)o.push(e+c)}return o};class g{constructor(e,t,r,o=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=o}static fromRect({x:e,y:t,width:r,height:o}){const n=e,s=t,c=n+r,i=s+o;return g.fromScreenExtent({xmin:n,ymin:s,xmax:c,ymax:i})}static fromPath(e){const t=n(new o,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),c=new Uint32Array(r.length/2);for(let o=0;o<c.length;o++)c[o]=h(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:c},s,4)}static fromGeometry(e,t){const o=t.geometry.type;switch(o){case\"polygon\":return g.fromPolygon(e,t.geometry);case\"extent\":return g.fromMapExtent(e,t.geometry);default:return m.error(new r(\"mapview-bad-type\",`Unable to create a mesh from type ${o}`,t)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=s(new o,t,!1,!1),n=r.coords,i=new Uint32Array(x(r,!1)),f=new Uint32Array(n.length/2),m=c(),u=c();for(let o=0;o<f.length;o++)a(m,n[2*o],n[2*o+1]),e.toScreen(u,m),f[o]=h(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:f},i,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:o}){const n={geometry:new Uint32Array([h(e,r),h(t,r),h(e,o),h(e,o),h(t,r),h(t,o)])},s=new Uint32Array([0,1,2,3,4,5]);return new g(n,s,4)}static fromMapExtent(e,t){const[r,o]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([h(r,o),h(n,o),h(r,s),h(r,s),h(n,o),h(n,s)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){e(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const t in this._cache.vertexBuffers)e(this._cache.vertexBuffers[t])&&this._cache.vertexBuffers[t].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=f.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,o)=>({...r,[o]:f.createVertex(e,t,this.vertices[o])})),{})),this._cache.vertexBuffers}}export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../../core/maybe.js\";import r from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import i from\"../../../webgl/VertexArrayObject.js\";import{DisplayObject as h}from\"../DisplayObject.js\";import o from\"./Mesh2D.js\";const a=r.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),c=t=>parseFloat(t)/100;class n extends h{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new n(t,e)}_destroyGL(){t(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),t(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,r,s,h){const[o,a]=r.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===a||(this._lastWidth=o,this._lastHeight=a,this._destroyGL()),e(this._cache.vao)){const e=this._createMesh(r,this._clip),o=e.getIndexBuffer(t),a=e.getVertexBuffers(t);this._cache.mesh=e,this._cache.vao=new i(t,s,h,a,o)}return this._cache.vao}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?c(e.left)*r:e.left,h=\"string\"==typeof e.right?c(e.right)*r:e.right,o=\"string\"==typeof e.top?c(e.top)*s:e.top,a=\"string\"==typeof e.bottom?c(e.bottom)*s:e.bottom,n=i,p=o;return{x:n,y:p,width:Math.max(r-h-n,0),height:Math.max(s-a-p,0)}}_createMesh(t,e){switch(e.type){case\"rect\":return o.fromRect(this._createScreenRect(t,e));case\"path\":return o.fromPath(e);case\"geometry\":return o.fromGeometry(t,e);default:return a.error(new s(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),o.fromRect({x:0,y:0,width:1,height:1})}}}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{WGLDrawPhase as s}from\"./enums.js\";import{Container as t}from\"../Container.js\";import{brushes as i}from\"../brushes.js\";import n from\"./ClippingInfo.js\";class o extends t{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}doRender(e){const r=this.createRenderParams(e),{painter:t,globalOpacity:i,profiler:n,drawPhase:o}=r,a=o===s.LABEL?1:i*this.computedOpacity;n.recordContainerStart(this.name),t.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),t.compositeLayer(r,a),n.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO}}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[i.clip],target:()=>this._clippingInfos,drawPhase:s.MAP|s.LABEL|s.LABEL_ALPHA|s.DEBUG|s.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import e from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{RefreshableLayerView as o}from\"../../layers/RefreshableLayerView.js\";import a from\"../../layers/LayerView.js\";import{BitmapContainer as p}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as n}from\"./LayerView2D.js\";import m from\"./support/ExportStrategy.js\";const h=e.getLogger(\"esri.views.2d.layers.BaseDynamicLayerView2D\");let c=class extends(o(n(a))){hitTest(){return null}update(t){this.strategy.update(t).catch((t=>{i(t)||h.error(t)})),this.notifyChange(\"updating\")}attach(){this._bitmapContainer=new p,this.container.addChild(this._bitmapContainer),this.strategy=new m({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}detach(){this.strategy.destroy(),this.strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}fetchBitmapData(t,e,r){return this.layer.fetchImage(t,e,r,{timestamp:this.refreshTimestamp})}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}};t([r()],c.prototype,\"strategy\",void 0),t([r()],c.prototype,\"updating\",void 0),c=t([s(\"esri.views.2d.layers.BaseDynamicLayerView2D\")],c);var d=c;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,n,o){const{resolution:r,size:u}=o;return t[0]=r*(Math.round(n[0]/r)+u[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+u[1]%2*.5),t}function r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}function a(t,n){const[o,r,u,a]=t,[s,c,i,e]=n;return!(o>i||u<s||r>e||a<c)}export{a as bboxIntersects,u as getBBox,r as getOuterSize,o as snapToPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{debounce as o}from\"../../../../core/promiseUtils.js\";import r from\"../../../../core/Accessor.js\";import{getInfo as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import a from\"../../../../geometry/Extent.js\";import{create as p}from\"../../../../geometry/support/aaBoundingRect.js\";import n from\"../../../../layers/support/TileInfo.js\";import m from\"../../tiling/TileKey.js\";import l from\"../../tiling/TileInfoView.js\";import{getOuterSize as h,getBBox as d}from\"../../viewStateUtils.js\";import{Bitmap as c}from\"../../engine/Bitmap.js\";const u=p(),g=[0,0],f=new m(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends r{constructor(t){super(t),this._imagePromise=null,this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=o((async(t,e)=>{const i=t.state,o=s(i.spatialReference),r=this.hidpi?t.pixelRatio:1;if(!t.stationary||this.destroyed)return null;this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):h(g,i);const a=Math.floor(g[0]*r)>this.imageMaxWidth||Math.floor(g[1]*r)>this.imageMaxHeight,p=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),n=!this.imageNormalizationSupported&&p,m=!a&&!n,l=this.imageRotationSupported?i.rotation:0;if(m)this._imagePromise=this._singleExport(i,g,l,r,e);else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);n&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,l,r,e)}return this._imagePromise.then((async t=>{if(this._imagePromise=null,!this.destroyed){for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{e.remove()}));for(const e of t)this.container.addChild(e),e.fadeIn()}})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e)?console.error(\"ExportStrategy.updateExports doesn't support promise yet\"):(e.invalidateTexture(),e.requestRender())}}_export(t,e,i,o,r,s){return Promise.resolve().then((()=>this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}))).then((i=>{const s=new c(i,\"additive\");return s.x=t.xmin,s.y=t.ymax,s.resolution=t.width/e,s.rotation=o,s.pixelRatio=r,s}))}_singleExport(t,e,i,o,r){d(u,t.center,t.resolution,e);const s=new a(u[0],u[1],u[2],u[3],t.spatialReference);return this._export(s,e[0],e[1],i,o,r).then((t=>[t]))}_tiledExport(t,e,i,o,r){const s=n.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new l(s),m=p.getTileCoverage(t);if(!m)return null;const h=[];return m.forEach(((s,n,m,l)=>{f.set(s,n,m,l),p.getTileBounds(u,f);const d=new a(u[0],u[1],u[2],u[3],t.spatialReference);h.push(this._export(d,e,e,i,o,r))})),Promise.all(h)}};t([e()],y.prototype,\"_imagePromise\",void 0),t([e()],y.prototype,\"container\",void 0),t([e()],y.prototype,\"fetchSource\",void 0),t([e()],y.prototype,\"hidpi\",void 0),t([e()],y.prototype,\"imageMaxWidth\",void 0),t([e()],y.prototype,\"imageMaxHeight\",void 0),t([e()],y.prototype,\"imageRotationSupported\",void 0),t([e()],y.prototype,\"imageNormalizationSupported\",void 0),t([e()],y.prototype,\"requestUpdate\",void 0),t([e()],y.prototype,\"updating\",null),y=t([i(\"esri.views.2d.layers.support.ExportStrategy\")],y);var S=y;export default S;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,a as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/checkWebGLError.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t){return t&&\"render\"in t}function c(t){return t&&!(\"render\"in t)}function l(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class _ extends u{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{_ as Bitmap};\n"],"sourceRoot":""}