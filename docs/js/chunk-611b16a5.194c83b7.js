(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-611b16a5","chunk-2d0cc20b"],{"365a":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i=r("a4ee"),n=r("fc29"),s=r("ce6d"),a=r("9096"),o=r("a5d8"),c=r("e92d"),l=r("b2b2"),h=r("fab3"),u=r("59b2"),d=(r("b50f"),r("c120"),r("cea0"),r("d386"));let p=class extends(Object(a["b"])(Object(o["a"])(Object(h["b"])(s["a"].EventedMixin(n["a"]))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";throw c["a"].getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}})}get fullOpacity(){return Object(l["v"])(this.get("layer.opacity"),1)*Object(l["v"])(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(i["a"])([Object(u["b"])()],p.prototype,"fullOpacity",null),Object(i["a"])([Object(u["b"])()],p.prototype,"layer",void 0),Object(i["a"])([Object(u["b"])()],p.prototype,"parent",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"suspended",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"suspendInfo",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"legendEnabled",null),Object(i["a"])([Object(u["b"])({type:Boolean,readOnly:!0})],p.prototype,"updating",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"updatingProgress",null),Object(i["a"])([Object(u["b"])()],p.prototype,"visible",null),p=Object(i["a"])([Object(d["a"])("esri.views.layers.LayerView")],p);const f=p},"4d38":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var i=r("a4ee"),n=r("2c4f"),s=r("7d7d"),a=r("59b2"),o=(r("b50f"),r("c120"),r("cea0"),r("d386")),c=r("365a");let l=class extends c["a"]{constructor(e){super(e),this.type="group",this.layerViews=new n["a"]}initialize(){this.handles.add([this.layerViews.on("change",e=>this._layerViewsChangeHandler(e)),this.layerViews.on("after-changes",()=>this._layerViewsAfterChangesHandler()),this.layer.watch("visibilityMode",()=>this._visibilityModeHandler(),!0),this.watch("visible",()=>this._visibleHandler(),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set("layerViews",Object(s["b"])(e,this._get("layerViews")))}isUpdating(){return this.layerViews.some(e=>e.updating)}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((e,t)=>e+t.updatingProgress,0)/this.layerViews.length}_hasLayerViewVisibleOverrides(){return this.layerViews.some(e=>e._isOverridden("visible"))}_findLayerViewForLayer(e){return e&&this.layerViews.find(t=>t.layer===e)}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find(e=>{const t=this._findLayerViewForLayer(e);return t&&t.visible});return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach(t=>{t.visible=t===e}))}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(e=>e.watch("visible",t=>this._layerViewVisibleHandler(t,e),!0)).toArray(),"grouplayerview:visible");const t=e.added[e.added.length-1];let r=null;t&&t.visible&&(r=t),this._enforceVisibility(r)}_layerViewsAfterChangesHandler(){this.handles.remove("grouplayerview:updating"),this.handles.add(this.layerViews.map(e=>e.watch("updating",()=>this._updateUpdating(),!0)).toArray(),"grouplayerview:updating"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":{const e=this.visible;this.layerViews.forEach(t=>{t.visible=e});break}case"exclusive":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,t){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(t.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&t)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange("updating")}};Object(i["a"])([Object(a["b"])({cast:s["a"]})],l.prototype,"layerViews",null),Object(i["a"])([Object(a["b"])()],l.prototype,"view",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0})],l.prototype,"updatingProgress",null),l=Object(i["a"])([Object(o["a"])("esri.views.layers.GroupLayerView")],l);const h=l},"566d":function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));var i=r("a4ee"),n=r("2c4f"),s=r("7d7d"),a=r("3795"),o=r("59b2"),c=(r("b50f"),r("c120"),r("cea0"),r("d386")),l=r("00c0"),h=r("6a0e");r("e92d"),r("2dd4");let u=class extends h["a"]{};u=Object(i["a"])([Object(c["a"])("esri.views.layers.support.ClipArea")],u);const d=u;var p;let f=p=class extends d{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new p({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};Object(i["a"])([Object(o["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),Object(i["a"])([Object(o["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),Object(i["a"])([Object(o["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),Object(i["a"])([Object(o["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],f.prototype,"version",null),f=p=Object(i["a"])([Object(c["a"])("esri.views.layers.support.ClipRect")],f);const y=f;r("e06a");var b,v=r("3760"),x=r("a9ab"),g=r("3af1"),m=r("1219");const w={base:v["a"],key:"type",typeMap:{extent:g["a"],polygon:m["a"]}};let O=b=class extends d{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new b({geometry:this.geometry.clone()})}};Object(i["a"])([Object(o["b"])({types:w,json:{read:x["a"],write:!0}})],O.prototype,"geometry",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],O.prototype,"version",null),O=b=Object(i["a"])([Object(c["a"])("esri.views.layers.support.Geometry")],O);const _=O;let j=class extends d{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(i["a"])([Object(o["b"])({type:[[[Number]]],json:{write:!0}})],j.prototype,"path",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],j.prototype,"version",null),j=Object(i["a"])([Object(c["a"])("esri.views.layers.support.Path")],j);const V=j,M=n["a"].ofType({key:"type",base:d,typeMap:{rect:y,path:V,geometry:_}}),R=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new M,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new l["a"]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(a["a"])(this,"suspended",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(a["a"])(this,["layer.opacity","container"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(a["a"])(this,["layer.blendMode"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(a["a"])(this,["layer.effect"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(e){let t=!0;const r=this.layer,i=r.minScale,n=r.maxScale;if(null!=i&&null!=n){let r=!i,s=!n;!r&&e<=i&&(r=!0),!s&&e>=n&&(s=!0),t=r&&s}return t}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(i["a"])([Object(o["b"])({type:M,set(e){const t=Object(s["b"])(e,this._get("clips"),M);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"moving",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"attached",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"container",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"suspended",void 0),Object(i["a"])([Object(o["b"])({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"updateRequested",void 0),Object(i["a"])([Object(o["b"])()],t.prototype,"updating",null),Object(i["a"])([Object(o["b"])()],t.prototype,"view",void 0),t=Object(i["a"])([Object(c["a"])("esri.views.2d.layers.LayerView2D")],t),t}},"5ef2":function(e,t,r){"use strict";function i(){return new Float32Array(4)}function n(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(e,t,r,i){const n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function a(e,t){return new Float32Array(e,t,4)}function o(){return i()}function c(){return s(1,1,1,1)}function l(){return s(1,0,0,0)}function h(){return s(0,1,0,0)}function u(){return s(0,0,1,0)}function d(){return s(0,0,0,1)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s}));const p=o(),f=c(),y=l(),b=h(),v=u(),x=d();Object.freeze({__proto__:null,create:i,clone:n,fromValues:s,createView:a,zeros:o,ones:c,unitX:l,unitY:h,unitZ:u,unitW:d,ZEROS:p,ONES:f,UNIT_X:y,UNIT_Y:b,UNIT_Z:v,UNIT_W:x})},9812:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i,n,s,a={exports:{}};i=a,n=function(){function e(e,r,n){n=n||2;var s,a,o,l,h,u,d,p=r&&r.length,f=p?r[0]*n:e.length,y=t(e,0,f,n,!0),b=[];if(!y||y.next===y.prev)return b;if(p&&(y=c(e,r,y,n)),e.length>80*n){s=o=e[0],a=l=e[1];for(var v=n;v<f;v+=n)(h=e[v])<s&&(s=h),(u=e[v+1])<a&&(a=u),h>o&&(o=h),u>l&&(l=u);d=0!==(d=Math.max(o-s,l-a))?1/d:0}return i(y,b,n,s,a,d),b}function t(e,t,r,i,n){var s,a;if(n===L(e,t,r,i)>0)for(s=t;s<r;s+=i)a=T(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=T(s,e[s],e[s+1],a);if(a&&w(a,a.next)){var o=a.next;A(a),a=o}return a}function r(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!w(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{var n=i.prev;if(A(i),(i=t=n)===i.next)break;r=!0}}while(r||i!==t);return t}function i(e,t,c,l,h,u,d){if(e){!d&&u&&f(e,l,h,u);for(var p,y,b=e;e.prev!==e.next;)if(p=e.prev,y=e.next,u?s(e,l,h,u):n(e))t.push(p.i/c),t.push(e.i/c),t.push(y.i/c),A(e),e=y.next,b=y.next;else if((e=y)===b){d?1===d?i(e=a(r(e),t,c),t,c,l,h,u,2):2===d&&o(e,t,c,l,h,u):i(r(e),t,c,l,h,u,1);break}}}function n(e){var t=e.prev,r=e,i=e.next;if(m(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(x(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&m(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function s(e,t,r,i){var n=e.prev,s=e,a=e.next;if(m(n,s,a)>=0)return!1;for(var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,c=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,l=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,h=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,u=b(o,c,t,r,i),d=b(l,h,t,r,i),p=e.prevZ,f=e.nextZ;p&&p.z>=u&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&x(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&x(n.x,n.y,s.x,s.y,a.x,a.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&x(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&x(n.x,n.y,s.x,s.y,a.x,a.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function a(e,t,i){var n=e;do{var s=n.prev,a=n.next.next;!w(s,a)&&O(s,n,n.next,a)&&M(s,a)&&M(a,s)&&(t.push(s.i/i),t.push(n.i/i),t.push(a.i/i),A(n),A(n.next),n=e=a),n=n.next}while(n!==e);return r(n)}function o(e,t,n,s,a,o){var c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&g(c,l)){var h=U(c,l);return c=r(c,c.next),h=r(h,h.next),i(c,t,n,s,a,o),void i(h,t,n,s,a,o)}l=l.next}c=c.next}while(c!==e)}function c(e,i,n,s){var a,o,c,h=[];for(a=0,o=i.length;a<o;a++)(c=t(e,i[a]*s,a<o-1?i[a+1]*s:e.length,s,!1))===c.next&&(c.steiner=!0),h.push(v(c));for(h.sort(l),a=0;a<h.length;a++)n=r(n=u(h[a],n),n.next);return n}function l(e,t){return e.x-t.x}function h(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function u(e,t){var i=d(e,t);if(!i)return t;var n=U(i,e),s=r(i,i.next);let a=h(n);return r(a,a.next),s=h(s),h(t===i?s:t)}function d(e,t){var r,i=t,n=e.x,s=e.y,a=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var o=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a){if(a=o,o===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===a)return r;var c,l=r,h=r.x,u=r.y,d=1/0;i=r;do{n>=i.x&&i.x>=h&&n!==i.x&&x(s<u?n:a,s,h,u,s<u?a:n,s,i.x,i.y)&&(c=Math.abs(s-i.y)/(n-i.x),M(i,e)&&(c<d||c===d&&(i.x>r.x||i.x===r.x&&p(r,i)))&&(r=i,d=c)),i=i.next}while(i!==l);return r}function p(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function f(e,t,r,i){var n=e;do{if(null===n.z&&(n.z=b(n.x,n.y,t,r,i)),n.prev.next!==n||n.next.prev!==n)return n.prev.next=n,n.next.prev=n,f(e,t,r,i);n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,y(n)}function y(e){var t,r,i,n,s,a,o,c,l=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<l&&(o++,i=i.nextZ);t++);for(c=l;o>0||c>0&&i;)0!==o&&(0===c||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,c--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,l*=2}while(a>1);return e}function b(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function x(e,t,r,i,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(i-o)-(r-a)*(t-o)>=0&&(r-a)*(s-o)-(n-a)*(i-o)>=0}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!V(e,t)&&(M(e,t)&&M(t,e)&&R(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||w(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function O(e,t,r,i){var n=j(m(e,t,r)),s=j(m(e,t,i)),a=j(m(r,i,e)),o=j(m(r,i,t));return n!==s&&a!==o||!(0!==n||!_(e,r,t))||!(0!==s||!_(e,i,t))||!(0!==a||!_(r,e,i))||!(0!==o||!_(r,t,i))}function _(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function j(e){return e>0?1:e<0?-1:0}function V(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&O(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function M(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function R(e,t){var r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}function U(e,t){var r=new C(e.i,e.x,e.y),i=new C(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function T(e,t,r,i){var n=new C(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(e,t,r,i){for(var n=0,s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}return e.deviation=function(e,t,r,i){var n=t&&t.length,s=n?t[0]*r:e.length,a=Math.abs(L(e,0,s,r));if(n)for(var o=0,c=t.length;o<c;o++){var l=t[o]*r,h=o<c-1?t[o+1]*r:e.length;a-=Math.abs(L(e,l,h,r))}var u=0;for(o=0;o<i.length;o+=3){var d=i[o]*r,p=i[o+1]*r,f=i[o+2]*r;u+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var a=0;a<t;a++)r.vertices.push(e[n][s][a]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r},e},void 0!==(s=n())&&(i.exports=s);const o=a.exports},"9a02":function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));r("c120");var i=r("b2b2"),n=r("8c71"),s=r("3b1a"),a=r("00c0"),o=r("ce50"),c=r("e92d"),l=r("7c4b"),h=r("9812"),u=r("3349"),d=r("02f1"),p=r("6655"),f=r("8152"),y=r("d114"),b=r("7ce4");const v=c["a"].getLogger("esri.views.2d.engine.webgl.Mesh2D"),x=e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new o["a"]("Cannot get DataType of array")}},g=(e,t,r,i)=>{let n=0;for(let s=1;s<r;s++){const r=e[2*(t+s-1)],i=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-r)*(e[2*(t+s)+1]+i)}return i?n>0:n<0},m=({coords:e,lengths:t},r)=>{const i=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const a=s,o=[];for(;n<t.length-1&&g(e,s+t[n],t[n+1],r);n+=1,s+=t[n])o.push(s+t[n]-a);const c=e.slice(2*a,2*(s+t[n])),l=Object(h["a"])(c,o,2);for(const e of l)i.push(e+a)}return i};class w{constructor(e,t,r,i=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=i}static fromRect({x:e,y:t,width:r,height:i}){const n=e,s=t,a=n+r,o=s+i;return w.fromScreenExtent({xmin:n,ymin:s,xmax:a,ymax:o})}static fromPath(e){const t=Object(p["f"])(new f["a"],e.path,!1,!1),r=t.coords,i=new Uint32Array(m(t,!0)),n=new Uint32Array(r.length/2);for(let s=0;s<n.length;s++)n[s]=Object(y["a"])(Math.floor(r[2*s]),Math.floor(r[2*s+1]));return new w({geometry:n},i,4)}static fromGeometry(e,t){const r=t.geometry.type;switch(r){case"polygon":return w.fromPolygon(e,t.geometry);case"extent":return w.fromMapExtent(e,t.geometry);default:return v.error(new o["a"]("mapview-bad-type","Unable to create a mesh from type "+r,t)),w.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=Object(p["g"])(new f["a"],t,!1,!1),i=r.coords,n=new Uint32Array(m(r,!1)),s=new Uint32Array(i.length/2),a=Object(d["b"])(),o=Object(d["b"])();for(let c=0;c<s.length;c++)Object(u["s"])(a,i[2*c],i[2*c+1]),e.toScreen(o,a),s[c]=Object(y["a"])(Math.floor(o[0]),Math.floor(o[1]));return new w({geometry:s},n,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:i}){const n={geometry:new Uint32Array([Object(y["a"])(e,r),Object(y["a"])(t,r),Object(y["a"])(e,i),Object(y["a"])(e,i),Object(y["a"])(t,r),Object(y["a"])(t,i)])},s=new Uint32Array([0,1,2,3,4,5]);return new w(n,s,4)}static fromMapExtent(e,t){const[r,i]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),a={geometry:new Uint32Array([Object(y["a"])(r,i),Object(y["a"])(n,i),Object(y["a"])(r,s),Object(y["a"])(r,s),Object(y["a"])(n,i),Object(y["a"])(n,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new w(a,o,4)}destroy(){Object(i["l"])(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)Object(i["l"])(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return x(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=b["a"].createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce((r,i)=>({...r,[i]:b["a"].createVertex(e,t,this.vertices[i])}),{})),this._cache.vertexBuffers}}var O=r("0fa6");const _=c["a"].getLogger("esri.views.2d.engine.webgl.ClippingInfo"),j=e=>parseFloat(e)/100;class V extends l["a"]{constructor(e,t){super(),this._clip=t,this._cache={},this.stage=e,this._handle=t.watch("version",()=>this._invalidate()),this.ready()}static fromClipArea(e,t){return new V(e,t)}_destroyGL(){Object(i["l"])(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),Object(i["l"])(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(e,t,r,n){const[s,a]=t.size;if("geometry"!==this._clip.type&&this._lastWidth===s&&this._lastHeight===a||(this._lastWidth=s,this._lastHeight=a,this._destroyGL()),Object(i["k"])(this._cache.vao)){const i=this._createMesh(t,this._clip),s=i.getIndexBuffer(e),a=i.getVertexBuffers(e);this._cache.mesh=i,this._cache.vao=new O["a"](e,r,n,a,s)}return this._cache.vao}_createTransforms(){return{dvs:Object(n["b"])()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(e,t){const[r,i]=e.size,n="string"==typeof t.left?j(t.left)*r:t.left,s="string"==typeof t.right?j(t.right)*r:t.right,a="string"==typeof t.top?j(t.top)*i:t.top,o="string"==typeof t.bottom?j(t.bottom)*i:t.bottom,c=n,l=a;return{x:c,y:l,width:Math.max(r-s-c,0),height:Math.max(i-o-l,0)}}_createMesh(e,t){switch(t.type){case"rect":return w.fromRect(this._createScreenRect(e,t));case"path":return w.fromPath(t);case"geometry":return w.fromGeometry(e,t);default:return _.error(new o["a"]("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),w.fromRect({x:0,y:0,width:1,height:1})}}}var M=r("c84e");class R extends a["a"]{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e),this._updateClippingInfo()}_createTransforms(){return{dvs:Object(n["b"])()}}doRender(e){const t=this.createRenderParams(e),{painter:r,globalOpacity:i,profiler:n,drawPhase:s}=t,a=s===M["c"].LABEL||s===M["c"].HIGHLIGHT?1:i*this.computedOpacity;n.recordContainerStart(this.name),r.beforeRenderLayer(t,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(t),r.compositeLayer(t,a),n.recordContainerEnd()}renderChildren(e){Object(i["k"])(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(e.painter));for(const r of this.children)r.beforeRender(e);for(const r of this._renderPasses)try{r.render(e)}catch(t){}for(const r of this.children)r.afterRender(e)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[s["a"].clip],target:()=>this._clippingInfos,drawPhase:M["c"].MAP|M["c"].LABEL|M["c"].LABEL_ALPHA|M["c"].DEBUG|M["c"].HIGHLIGHT})]}updateTransforms(e){for(const t of this.children)t.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(Object(i["l"])(this._clippingInfos)&&(this._clippingInfos.forEach(e=>e.destroy()),this._clippingInfos=null),!this.stage)return;const e=this._clips;Object(i["l"])(e)&&e.length&&(this._clippingInfos=e.items.map(e=>V.fromClipArea(this.stage,e))),this.requestRender()}}},beba:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return p}));r("d267");var i=r("a1ff");function n(e,t,r="nearest",n=!1){var s;const a=!(n&&"u8"===t.pixelType),o=a?5126:5121,c=null==t.pixels||0===t.pixels.length?null:a?t.getAsRGBAFloat():t.getAsRGBA(),l=null==(s=e.capabilities.textureFloat)?void 0:s.textureFloatLinear,h={width:t.width,height:t.height,target:3553,pixelFormat:6408,internalFormat:"webgl2"===e.webglVersion&&a?34836:6408,samplingMode:!l||"bilinear"!==r&&"cubic"!==r?9728:9729,dataType:o,wrapMode:33071,flipped:!1};return new i["a"](e,h,c)}function s(e,t){const r=4*t.size[0],n=t.size[1],s={width:r,height:n,target:3553,pixelFormat:6408,internalFormat:"webgl2"===e.webglVersion?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},a=new Float32Array(r*n*4);let o=0;for(let i=0;i<t.coefficients.length;i++)a[o++]=t.coefficients[i],i%3==2&&(a[o++]=1);return new i["a"](e,s,a)}function a(e,t){const r={width:t.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new i["a"](e,r,t)}function o(e,t,r,i=1,n=!0,s=!1){return{u_flipY:n,u_isFloatTexture:s,u_applyTransform:!!e,u_opacity:i,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:r}}function c(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function l(e,t){return{u_scale:e,u_offset:t}}function h(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function u(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function d(e,t){const r=e.gl,i=t.glName,n=r.getProgramParameter(i,r.ACTIVE_UNIFORMS),s=new Map;let a;for(let o=0;o<n;o++)a=r.getActiveUniform(i,o),a&&s.set(a.name,{location:r.getUniformLocation(i,a.name),info:a});return s}function p(e,t,r){Object.keys(r).forEach(i=>{const n=t.get(i)||t.get(i+"[0]");n&&y(e,i,r[i],n)})}function f(e,t,r,i){r.length===i.length&&(i.some(e=>null==e)||r.some(e=>null==e)||r.forEach((r,n)=>{t.setUniform1i(r,n),e.bindTexture(i[n],n)}))}function y(e,t,r,i){if(null===i||null==r)return!1;const{info:n}=i;switch(n.type){case 5126:n.size>1?e.setUniform1fv(t,r):e.setUniform1f(t,r);break;case 35664:e.setUniform2fv(t,r);break;case 35665:e.setUniform3fv(t,r);break;case 35666:e.setUniform4fv(t,r);break;case 35675:e.setUniformMatrix3fv(t,r);break;case 35676:e.setUniformMatrix4fv(t,r);break;case 5124:n.size>1?e.setUniform1iv(t,r):e.setUniform1i(t,r);break;case 35670:e.setUniform1i(t,r?1:0);break;case 35667:case 35671:e.setUniform2iv(t,r);break;case 35668:case 35672:e.setUniform3iv(t,r);break;case 35669:case 35673:e.setUniform4iv(t,r);break;default:return!1}return!0}},d86a:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var i=r("a4ee"),n=(r("e92d"),r("cea0"),r("b50f"),r("c120"),r("2dd4"),r("d386")),s=(r("7ce4"),r("d267")),a=(r("1956"),r("d17d"),r("9f8b"),r("a1ff"),r("0fa6"),r("9a02"));class o extends a["a"]{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:i,profiler:n}=t;this._prevFBO=r.getBoundFramebufferObject(),n.recordContainerStart(this.name);const s=this._getFbo(t),a=i.getRenderTarget();r.bindFramebuffer(s),i.setRenderTarget(s),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const o of this.children)o.beforeRender(e);for(const o of this.children)o.processRender(t);for(const o of this.children)o.afterRender(e);i.setRenderTarget(a),r.bindFramebuffer(this._prevFBO),i.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),i.blitTexture(r,s.colorTexture,9728),i.compositeLayer(t,this.computedOpacity),n.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:t,painter:r}=e,{width:i,height:n}=t.getViewport();if(i!==this._lastWidth||n!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=n,this._renderTarget)this._renderTarget.resize(i,n);else{const e={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:n},a={colorTarget:0,depthStencilTarget:3};this._renderTarget=new s["a"](t,a,e,r.getSharedStencilBuffer())}return this._renderTarget}}var c=r("566d"),l=r("4d38");let h=class extends(Object(c["a"])(l["default"])){constructor(){super(...arguments),this.container=new o}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",()=>this._updateStageChildren()),"grouplayerview2d")}detach(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((e,t)=>this.container.addChildAt(e.container,t))}};h=Object(i["a"])([Object(n["a"])("esri.views.2d.layers.GroupLayerView2D")],h);const u=h},db21:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}));const i=!0,n=32,s=1.5,a=200}}]);