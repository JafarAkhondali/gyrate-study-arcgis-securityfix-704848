{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView.js","webpack:///./node_modules/@arcgis/core/chunks/quickselect.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js","webpack:///./node_modules/@arcgis/core/layers/graphics/centroid.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js"],"names":["this","items","e","t","push","type","objectStateId","object","s","renderGeometry","owner","remove","length","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","i","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","a","h","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","v","super","graphicsCore","elevationAlignment","watchUpdatingTracking","handles","suspendResumeExtent","scaleVisibilityEnabled","layer","preferredUpdatePolicy","graphicSymbolSupported","scaleVisibility","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","spatialIndex","queryGraphicUIDsInExtent","setup","view","elevationProvider","basemapTerrain","_set","objectStates","destroyed","watch","updateClippingExtent","setupSuspendResumeExtent","startCreateGraphics","destroy","suspended","updating","loadedGraphics","find","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","acquireSet","x","highlight","toArray","isArray","map","setUids","setObjectIds","clippingArea","setClippingExtent","spatialReference","recreateAllGraphics","computedExtent","extentPadding","setExtent","updateSuspendResumeExtent","constructOnly","prototype","readOnly","aliasOf","E","r","o","f","n","c","Math","log","u","exp","sqrt","max","floor","min","M","m","exports","extents","allocator","tempExtent","dirty","clear","contains","removeContained","pushNew","mergeTight","pop","hasProgressed","sort","done","getItemAt","delete","d","g","madeProgress","some","filterInPlace","containsPoint","p","arguments","dirtyExtents","globalDirty","dirtyGraphicsSet","updateElevation","layerView","events","needsUpdate","resourceController","scheduler","on","_elevationChanged","suspendedChange","registerTask","ELEVATION_ALIGNMENT","update","notifyChange","size","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","renderCoordsHelper","asyncUpdates","keys","getGraphics3DGraphicById","alignWithElevation","emit","extent","needsElevationUpdates","context","elevationInfo","mode","xmin","xmax","ymin","ymax","l","frustumVisibility","slicePlaneEnabled","drapeSourceType","fullExtentInLocalViewSpatialReference","graphics3d","updatingHandles","opacityChange","graphicUpdateHandler","then","addResolvingPromise","internal","canResume","outsideScaleRange","outsideOfView","clientGraphics","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","graphics3DGraphicsByObjectID","symbolUpdateType","getGraphicFromGraphicUid","resolve","maskOccludee","ready","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","visibilityFrustum","Boolean","I","lengths","N","originPosition","coords","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","b","extentIntersectionDirty","_isVisibleBelowSurface","extentIntersection","viewChange","state","FRUSTUM_VISIBILITY","elevationBoundsChange","viewingMode","isVisibleBelowSurface","updateIsVisibleBelowSurface","_setDirty","ground","navigationConstraint","opaque","radius","elevationBounds","updateExtentIntersection","frustum","isVisibleInFrustum","fullExtent","equals","clone","isLocal","portalItem","catch"],"mappings":"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","file":"js/chunk-72218984.e02eafaa.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as e,destroyMaybe as i,isNone as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{isAbortError as o}from\"../../../../core/promiseUtils.js\";import n from\"../../../../core/Accessor.js\";import c from\"../../../../core/Collection.js\";import p from\"../../../../Graphic.js\";import h from\"../../../../core/Handles.js\";import l from\"../../../../layers/Layer.js\";import{init as d}from\"../../../../core/watchUtils.js\";import{diff as u}from\"../../../../core/accessorSupport/diffUtils.js\";import m from\"../../../../tasks/support/Query.js\";import{WatchUpdatingTracking as g}from\"../../../support/WatchUpdatingTracking.js\";import{hydrateGraphic as y}from\"../../../../layers/graphics/hydratedFeatures.js\";import{enlargeExtent as f}from\"./graphicUtils.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as b}from\"./constants.js\";import{Graphics3DCore as j}from\"./Graphics3DCore.js\";import w from\"./Graphics3DScaleVisibility.js\";import C from\"./Graphics3DElevationAlignment.js\";import{Graphics3DObjectStates as S}from\"./Graphics3DObjectStates.js\";let v=class extends n{constructor(t){super(t),this.graphicsCore=null,this.elevationAlignment=new C,this.watchUpdatingTracking=new g,this.handles=new h,this.suspendResumeExtent=null}normalizeCtorArgs(t){let e=null;t.scaleVisibilityEnabled&&(delete(t={...t}).scaleVisibilityEnabled,e=new w);const i=new j({owner:t.owner,layer:t.layer,preferredUpdatePolicy:0,graphicSymbolSupported:!0});return{...t,graphicsCore:i,scaleVisibility:e}}initialize(){const t=this.scaleVisibility;e(t)&&\"minScale\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>t.layerMinMaxScaleChangeHandler())),\"elevationInfo\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{u(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())}))}async setup(){const t=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),e(this.scaleVisibility)&&\"minScale\"in this.layer){const e=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,e)}this._set(\"objectStates\",new S(this.graphicsCore));try{await this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,objectStates:this.objectStates})}catch(i){if(o(i))return;throw i}this.destroyed||(this.handles.add(this.view.watch(\"clippingArea\",(()=>this.updateClippingExtent()),!0)),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles=i(this.handles),this.watchUpdatingTracking.destroy(),this._set(\"elevationAlignment\",i(this.elevationAlignment)),this._set(\"scaleVisibility\",i(this.scaleVisibility)),this._set(\"objectStates\",i(this.objectStates)),this._set(\"graphicsCore\",i(this.graphicsCore))}get suspended(){return!(!e(this.scaleVisibility)||!this.scaleVisibility.suspended)}get updating(){var t,i;return!!(null!=(t=this.graphicsCore)&&t.updating||e(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(i=this.watchUpdatingTracking)&&i.updating)}getGraphicFromGraphicUid(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof l?this.layer:null;return y(e,t)}}}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof m)return x;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof p)return this.highlight([t]);if(t instanceof c&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof p){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setObjectIds(i,e),s}}return x}updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}updateSuspendResumeExtent(){s(this.scaleVisibility)||(this.suspendResumeExtent=f(this.graphicsCore.computedExtent,this.suspendResumeExtent,b,this.graphicsCore.extentPadding),this.scaleVisibility.setExtent(this.suspendResumeExtent))}setupSuspendResumeExtent(){s(this.scaleVisibility)||(d(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent()),!0),this.graphicsCore.watch(\"extentPadding\",(t=>this.updateSuspendResumeExtent())))}};t([r({constructOnly:!0})],v.prototype,\"owner\",void 0),t([r({constructOnly:!0})],v.prototype,\"layer\",void 0),t([r({readOnly:!0,aliasOf:\"owner.view\"})],v.prototype,\"view\",void 0),t([r({constructOnly:!0})],v.prototype,\"graphicsCore\",void 0),t([r({constructOnly:!0})],v.prototype,\"scaleVisibility\",void 0),t([r({readOnly:!0})],v.prototype,\"elevationAlignment\",void 0),t([r({readOnly:!0})],v.prototype,\"objectStates\",void 0),t([r({readOnly:!0})],v.prototype,\"watchUpdatingTracking\",void 0),t([r({readOnly:!0})],v.prototype,\"suspended\",null),t([r({readOnly:!0})],v.prototype,\"updating\",null),v=t([a(\"esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView\")],v);const x={remove(){},pause(){},resume(){}};var E=v;export default E;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as o}from\"./_commonjsHelpers.js\";var r=o((function(o){var r;void 0!==(r=function(){function o(o,t,a,f,i){r(o,t,a||0,f||o.length-1,i||n)}function r(o,n,a,f,i){for(;f>a;){if(f-a>600){var c=f-a+1,e=n-a+1,h=Math.log(c),u=.5*Math.exp(2*h/3),s=.5*Math.sqrt(h*u*(c-u)/c)*(e-c/2<0?-1:1);r(o,n,Math.max(a,Math.floor(n-e*u/c+s)),Math.min(f,Math.floor(n+(c-e)*u/c+s)),i)}var M=o[n],m=a,v=f;for(t(o,a,n),i(o[f],M)>0&&t(o,a,f);m<v;){for(t(o,m,v),m++,v--;i(o[m],M)<0;)m++;for(;i(o[v],M)>0;)v--}0===i(o[a],M)?t(o,a,v):t(o,++v,f),v<=n&&(a=v+1),n<=v&&(f=v-1)}}function t(o,r,t){var n=o[r];o[r]=o[t],o[t]=n}function n(o,r){return o<r?-1:o>r?1:0}return o}())&&(o.exports=r)}));export{r as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,set as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this.extents=new t({allocator:t=>t||e()}),this.tempExtent=e(),this.dirty=!1}get empty(){return 0===this.extents.length}clear(){this.extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this.extents.pushNew(),t),this.dirty=!0)}pop(){return this.dirty&&this.mergeTight(),this.extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this.extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),m=s(i),d=this.tempExtent;n(h,i,d);const g=c+m;(s(d)-g)/g<a&&(r(h,d),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this.dirty=!1}contains(t){return this.extents.some((e=>o(e,t)))}removeContained(t){this.extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t.extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import r from\"../../../../core/Accessor.js\";import a from\"../../../../core/Evented.js\";import n from\"../../../../core/Handles.js\";import{Task as o}from\"../../../support/Scheduler.js\";import{ExtentSet as h}from\"./ExtentSet.js\";let p=class extends r{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.dirtyGraphicsSet=new Set,this.handles=new n,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new a}get updating(){return this.needsUpdate()}setup(e,t,i,s){this.layerView=e,this.queryGraphicUIDsInExtent=t,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(e=>this._elevationChanged(e))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,(e=>this.update(e)),(()=>this.needsUpdate()))])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}needsUpdate(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}update(e){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,e.madeProgress()),e.run((()=>this.dirtyExtents.merge(e)));this.needsUpdate()&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(e){const i=this.layerView.view.renderCoordsHelper,s=this.graphicsCore.asyncUpdates;for(const r of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(r);if(this.dirtyGraphicsSet.delete(r),t(a)&&(a.alignWithElevation(this.elevationProvider,i,s),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this.dirtyExtents.empty&&!e.done;){const i=this.dirtyExtents.pop(),s=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:i,spatialReference:s}),this.queryGraphicUIDsInExtent(i,s,(e=>{const i=this.graphicsCore.getGraphics3DGraphicById(e);t(i)&&i.needsElevationUpdates()&&this.dirtyGraphicsSet.add(e)})),e.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this.dirtyGraphicsSet.add(t)))}_elevationChanged(e){if(\"scene\"===e.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.layerView.suspended){if(!this.updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i})}else t[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(t),this.notifyChange(\"updating\")}};e([i({readOnly:!0})],p.prototype,\"updating\",null),p=e([s(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as s}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{whenTrueOnce as r,init as a,watch as p}from\"../../../core/watchUtils.js\";import{enlargeExtent as h}from\"./graphics/graphicUtils.js\";import{LayerView3D as n}from\"./LayerView3D.js\";import o from\"../../layers/LayerView.js\";import{toViewIfLocal as c}from\"./support/projectExtentUtils.js\";import d from\"./graphics/Graphics3DFrustumVisibility.js\";import u from\"./graphics/Graphics3DGraphicLikeLayerView.js\";const l=1.2;let g=class extends(n(o)){constructor(){super(...arguments),this.frustumVisibility=new d,this.slicePlaneEnabled=!1,this.drapeSourceType=1,this.suspendResumeExtent=null,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"graphics3d\",new u({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.updatingHandles.add(this,\"fullOpacity\",(()=>this.graphics3d.graphicsCore.opacityChange())),this.handles.add(this.layer.on(\"graphic-update\",(i=>this.graphics3d.graphicsCore.graphicUpdateHandler(i))));const i=c(this).then((i=>{this.fullExtentInLocalViewSpatialReference=i}));i&&this.addResolvingPromise(i),this.layer.internal?this.notifyChange(\"updating\"):this.handles.add(r(this.view,\"basemapTerrain.ready\",(()=>this.notifyChange(\"updating\"))))}destroy(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set(\"frustumVisibility\",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set(\"graphics3d\",null))}get legendEnabled(){return this.canResume()&&!this.frustumVisibility.suspended}get suspendInfo(){var i;const e={};return s(this.graphics3d.scaleVisibility)&&this.graphics3d.scaleVisibility.suspended&&(e.outsideScaleRange=!0),e.outsideOfView=!(null==(i=this.frustumVisibility)||!i.suspended),e}async fetchPopupFeatures(i,e){return s(e)?e.clientGraphics:null}notifyGraphicGeometryChanged(i){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(i)}get graphics3DGraphics(){return this.graphics3d.graphicsCore.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}getGraphicFromGraphicUid(i){return this.graphics3d.getGraphicFromGraphicUid(i)}whenGraphicBounds(i,s){return this.graphics3d.whenGraphicBounds(i,s)}computeAttachmentOrigin(i,s){return this.graphics3d?this.graphics3d.graphicsCore.computeAttachmentOrigin(i,s):null}getSymbolLayerSize(i,s){return this.graphics3d.getSymbolLayerSize(i,s)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(i){return this.graphics3d.maskOccludee(i)}highlight(i){return this.graphics3d.highlight(i)}canResume(){var i;return super.canResume()&&!(null!=(i=this.graphics3d)&&i.suspended)}isUpdating(){var i,s;return!(!(this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&(this.layer.internal||null!=(i=this.view)&&null!=(s=i.basemapTerrain)&&s.ready))}setupSuspendResumeExtent(){const i=()=>{this.suspendResumeExtent=h(this.graphics3d.graphicsCore.computedExtent,this.suspendResumeExtent,l,this.graphics3d.graphicsCore.extentPadding),this.frustumVisibility.setExtent(this.suspendResumeExtent)};a(this.graphics3d.graphicsCore,\"computedExtent\",(()=>i()),!0),p(this.graphics3d.graphicsCore,\"extentPadding\",(()=>i()),!0)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}}};i([e({aliasOf:\"layer.graphics\"})],g.prototype,\"loadedGraphics\",void 0),i([e({readOnly:!0})],g.prototype,\"suspended\",void 0),i([e({readOnly:!0})],g.prototype,\"legendEnabled\",null),i([e({readOnly:!0})],g.prototype,\"updating\",void 0),i([e()],g.prototype,\"layer\",void 0),i([e({readOnly:!0})],g.prototype,\"frustumVisibility\",void 0),i([e({readOnly:!0})],g.prototype,\"graphics3d\",void 0),i([e({type:Boolean})],g.prototype,\"slicePlaneEnabled\",void 0),i([e({readOnly:!0})],g.prototype,\"suspendInfo\",null),g=i([t(\"esri.views.3d.layers.GraphicsLayerView3D\")],g);var m=g;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(t,I,o,u,l){if(!I||!I.lengths.length)return null;const N=\"upperLeft\"===(null==l?void 0:l.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:i,coords:T}=I,h=n(o,u);let g=0;for(const n of i){const t=e(f,T,g,n,o,u,N);t&&c.push(t),g+=n*h}if(c.sort(((n,t)=>{let e=N*n[2]-N*t[2];return 0===e&&o&&(e=n[4]-t[4]),e})),c.length){let n=6*c[0][2];s[0]=c[0][0]/n,s[1]=c[0][1]/n,o&&(n=6*c[0][4],s[2]=0!==n?c[0][3]/n:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const n=I.lengths[0]?r(T,0,i[0],o,u):null;if(!n)return null;s[0]=n[0],s[1]=n[1],o&&n.length>2&&(s[2]=n[2])}return t}function e(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,b=I-1;n<b;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function r(t,e,r,N,s){const c=n(N,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,b=r-1;n<b;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],b=t[i+2],m=N?o(n,e,r,s,c,b):I(n,e,s,c);if(m)if(T+=m,N){const t=l(n,e,r,s,c,b);h+=m*t[0],g+=m*t[1],E+=m*t[2]}else{const t=u(n,e,s,c);h+=m*t[0],g+=m*t[1]}}return T>0?N?[h/T,g/T,E/T]:[h/T,g/T]:r>0?N?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function I(n,t,e,r){const I=e-n,o=r-t;return Math.sqrt(I*I+o*o)}function o(n,t,e,r,I,o){const u=r-n,l=I-t,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function u(n,t,e,r){return[n+.5*(e-n),t+.5*(r-t)]}function l(n,t,e,r,I,o){return[n+.5*(r-n),t+.5*(I-t),e+.5*(o-e)]}export{t as getCentroidOptimizedGeometry,r as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/Accessor.js\";import r from\"../../../../core/Handles.js\";import{init as n}from\"../../../../core/watchUtils.js\";import{getReferenceEllipsoid as o}from\"../../../../geometry/projectionEllipsoid.js\";import{Task as a}from\"../../../support/Scheduler.js\";import{FrustumExtentIntersection as l}from\"../../support/FrustumExtentIntersection.js\";const p=1.2;let u=class extends i{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new r,this.layerView=null,this.updating=!0}setup(e){this.layerView=e,this.extentIntersection=new l({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,i=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this.viewChange())),t.state.watch(\"camera\",(()=>this.viewChange()),!0),i.registerTask(a.FRUSTUM_VISIBILITY,(()=>this.update()),(()=>this.updating)),s.on(\"elevation-bounds-change\",(()=>this.elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([n(s,[\"opacity\",\"wireframe\"],(()=>this.updateIsVisibleBelowSurface())),n(t,\"map.ground.navigationConstraint.type\",(()=>this.updateIsVisibleBelowSurface()))])}destroy(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}viewChange(){this._setDirty()}elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}updateIsVisibleBelowSurface(){const e=this.layerView.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.layerView.view;let t;if(this._isVisibleBelowSurface)t=-.3*o(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(p-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}update(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this.updateExtentIntersection();const e=this.layerView.view.frustum,t=o(this.layerView.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([t({readOnly:!0})],u.prototype,\"suspended\",void 0),e([t({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([s(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);var h=u;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{canProject as e,project as r}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as o}from\"../../../../portal/support/geometryServiceUtils.js\";function t(t){const l=t.view.spatialReference,s=t.layer.fullExtent,i=s&&s.spatialReference;return i?i.equals(l)?Promise.resolve(s.clone()):e(i,l)?Promise.resolve(r(s,l)):t.view.state.isLocal?o(s,l,t.layer.portalItem).then((e=>!t.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null):Promise.resolve(null)}export{t as toViewIfLocal};\n"],"sourceRoot":""}