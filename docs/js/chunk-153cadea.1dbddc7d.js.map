{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/layers/LayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/GroupLayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Path.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js"],"names":["p","EventedMixin","e","super","this","layer","parent","when","catch","name","r","id","s","title","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","t","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","prototype","readOnly","type","Boolean","d","o","layerViews","handles","add","on","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","watch","_visibilityModeHandler","_visibleHandler","target","added","toArray","removed","moved","_set","_get","some","_isOverridden","find","i","layers","_findLayerViewForLayer","_hasLayerViewVisibleOverrides","_firstVisibleOnLayerOrder","length","getItemAt","forEach","remove","map","_layerViewVisibleHandler","_enforceVisibility","_updateUpdating","visibilityMode","_enforceExclusiveVisibility","notifyChange","cast","h","arguments","left","right","top","bottom","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","n","geometry","clone","types","read","l","path","ofType","rect","a","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","requestUpdate","blendMode","effect","whenLayerView","then","destroyed","attach","detach","minScale","maxScale","isFulfilled","isResolved","update","isVisibleAtScale","scale","BYTES_PER_ELEMENT","x","coords","lengths","push","f","slice","_cache","vertices","indices","primitiveType","isMapSpace","width","height","fromScreenExtent","xmin","ymin","xmax","ymax","Uint32Array","Math","floor","fromPolygon","fromMapExtent","fromRect","m","u","toScreen","indexBuffer","dispose","vertexBuffers","createIndex","Object","keys","reduce","createVertex","parseFloat","_clip","stage","_handle","_invalidate","mesh","destroy","vao","_destroyGL","size","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","requestRender","max","_createScreenRect","fromPath","fromGeometry","constructor","_clips","children","_updateClippingInfo","createRenderParams","painter","globalOpacity","profiler","drawPhase","LABEL","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","state","renderChildren","compositeLayer","recordContainerEnd","_renderPasses","prepareRenderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","registerRenderPass","brushes","clip","MAP","LABEL_ALPHA","DEBUG","HIGHLIGHT","setTransform","onAttach","onDetach","items","fromClipArea","_renderTarget","context","_prevFBO","getBoundFramebufferObject","_getFbo","getRenderTarget","bindFramebuffer","setRenderTarget","setDepthWriteEnabled","setColorMask","setClearColor","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","processRender","setStencilTestEnabled","setStencilWriteMask","blitTexture","colorTexture","effects","computedEffects","getViewport","resize","pixelFormat","dataType","samplingMode","wrapMode","colorTarget","depthStencilTarget","getSharedStencilBuffer","_updateStageChildren","removeAllChildren","addChildAt"],"mappings":"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","file":"js/chunk-153cadea.1dbddc7d.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Collection.js\";import{referenceSetter as t,castForReferenceSetter as a}from\"../../core/collectionUtils.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.layerViews=new r}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",t(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([i({cast:a})],o.prototype,\"layerViews\",null),e([i()],o.prototype,\"view\",void 0),o=e([s(\"esri.views.layers.GroupLayerView\")],o);var h=o;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import r from\"../../../../core/Error.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{convertFromNestedArray as n,convertFromPolygon as s}from\"../../../../layers/graphics/featureConversionUtils.js\";import{a as c}from\"../../../../chunks/vec2f64.js\";import{earcut as i}from\"../../../../core/libs/earcut/earcut.js\";import{s as a}from\"../../../../chunks/vec2.js\";import f from\"../../../webgl/BufferObject.js\";import{i1616to32 as h}from\"./number.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new r(\"Cannot get DataType of array\")}},y=(e,t,r,o)=>{let n=0;for(let s=1;s<r;s++){const r=e[2*(t+s-1)],o=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-r)*(e[2*(t+s)+1]+o)}return o?n>0:n<0},x=({coords:e,lengths:t},r)=>{const o=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const c=s,a=[];for(;n<t.length-1&&y(e,s+t[n],t[n+1],r);n+=1,s+=t[n])a.push(s+t[n]-c);const f=e.slice(2*c,2*(s+t[n])),h=i(f,a,2);for(const e of h)o.push(e+c)}return o};class g{constructor(e,t,r,o=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=o}static fromRect({x:e,y:t,width:r,height:o}){const n=e,s=t,c=n+r,i=s+o;return g.fromScreenExtent({xmin:n,ymin:s,xmax:c,ymax:i})}static fromPath(e){const t=n(new o,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),c=new Uint32Array(r.length/2);for(let o=0;o<c.length;o++)c[o]=h(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:c},s,4)}static fromGeometry(e,t){const o=t.geometry.type;switch(o){case\"polygon\":return g.fromPolygon(e,t.geometry);case\"extent\":return g.fromMapExtent(e,t.geometry);default:return m.error(new r(\"mapview-bad-type\",`Unable to create a mesh from type ${o}`,t)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=s(new o,t,!1,!1),n=r.coords,i=new Uint32Array(x(r,!1)),f=new Uint32Array(n.length/2),m=c(),u=c();for(let o=0;o<f.length;o++)a(m,n[2*o],n[2*o+1]),e.toScreen(u,m),f[o]=h(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:f},i,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:o}){const n={geometry:new Uint32Array([h(e,r),h(t,r),h(e,o),h(e,o),h(t,r),h(t,o)])},s=new Uint32Array([0,1,2,3,4,5]);return new g(n,s,4)}static fromMapExtent(e,t){const[r,o]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([h(r,o),h(n,o),h(r,s),h(r,s),h(n,o),h(n,s)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){e(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const t in this._cache.vertexBuffers)e(this._cache.vertexBuffers[t])&&this._cache.vertexBuffers[t].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=f.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,o)=>({...r,[o]:f.createVertex(e,t,this.vertices[o])})),{})),this._cache.vertexBuffers}}export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../../core/maybe.js\";import r from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import i from\"../../../webgl/VertexArrayObject.js\";import{DisplayObject as h}from\"../DisplayObject.js\";import o from\"./Mesh2D.js\";const a=r.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),c=t=>parseFloat(t)/100;class n extends h{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new n(t,e)}_destroyGL(){t(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),t(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,r,s,h){const[o,a]=r.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===a||(this._lastWidth=o,this._lastHeight=a,this._destroyGL()),e(this._cache.vao)){const e=this._createMesh(r,this._clip),o=e.getIndexBuffer(t),a=e.getVertexBuffers(t);this._cache.mesh=e,this._cache.vao=new i(t,s,h,a,o)}return this._cache.vao}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?c(e.left)*r:e.left,h=\"string\"==typeof e.right?c(e.right)*r:e.right,o=\"string\"==typeof e.top?c(e.top)*s:e.top,a=\"string\"==typeof e.bottom?c(e.bottom)*s:e.bottom,n=i,p=o;return{x:n,y:p,width:Math.max(r-h-n,0),height:Math.max(s-a-p,0)}}_createMesh(t,e){switch(e.type){case\"rect\":return o.fromRect(this._createScreenRect(t,e));case\"path\":return o.fromPath(e);case\"geometry\":return o.fromGeometry(t,e);default:return a.error(new s(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),o.fromRect({x:0,y:0,width:1,height:1})}}}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{WGLDrawPhase as s}from\"./enums.js\";import{Container as t}from\"../Container.js\";import{brushes as i}from\"../brushes.js\";import n from\"./ClippingInfo.js\";class o extends t{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}doRender(e){const r=this.createRenderParams(e),{painter:t,globalOpacity:i,profiler:n,drawPhase:o}=r,a=o===s.LABEL?1:i*this.computedOpacity;n.recordContainerStart(this.name),t.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),t.compositeLayer(r,a),n.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO}}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[i.clip],target:()=>this._clippingInfos,drawPhase:s.MAP|s.LABEL|s.LABEL_ALPHA|s.DEBUG|s.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import\"../../../../core/mathUtils.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/checkWebGLError.js\";import e from\"../../../webgl/FramebufferObject.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const o=this._getFbo(t),a=s.getRenderTarget();r.bindFramebuffer(o),s.setRenderTarget(o),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const n of this.children)n.beforeRender(e);for(const n of this.children)n.processRender(t);for(const n of this.children)n.afterRender(e);s.setRenderTarget(a),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,o.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:o}=r.getViewport();if(i!==this._lastWidth||o!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=o,this._renderTarget)this._renderTarget.resize(i,o);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:o},a={colorTarget:0,depthStencilTarget:3},n=s.getSharedStencilBuffer();this._renderTarget=new e(r,a,t,n)}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../layers/GroupLayerView.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{GroupContainer as s}from\"../engine/webgl/GroupContainer.js\";let i=class extends(o(t)){constructor(){super(...arguments),this.container=new s}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}hitTest(e,r){return null}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};i=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],i);var a=i;export default a;\n"],"sourceRoot":""}