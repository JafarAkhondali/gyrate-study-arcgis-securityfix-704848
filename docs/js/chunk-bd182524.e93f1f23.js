(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd182524","chunk-2d0d3e74","chunk-2d0d3e74"],{"00c0":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("c120"),i=r("7c4b"),s=r("ab4a");const a=Object(n["a"])("mapview-transitions-duration");class o extends i["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this.children=[],this._effectList=null}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode=t,this.requestRender()}get clips(){return this._clips}set clips(t){this._clips=t,this.children.forEach(e=>e.clips=t)}get computedEffects(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effects)?t:null}get effect(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effect)?t:""}set effect(t){(this._effectList||t)&&(this._effectList||(this._effectList=new s["a"](a)),this._effectList.effect=t,this.requestRender())}updateTransitionProperties(t,e){super.updateTransitionProperties(t,e),this._effectList&&(this._effectList.transitionStep(t,e),this._effectList.transitioning&&this.requestRender())}doRender(t){const e=this.createRenderParams(t);this.renderChildren(e)}addChild(t){return this.addChildAt(t,this.children.length)}addChildAt(t,e=this.children.length){if(!t)return t;if(this.contains(t))return t;const r=t.parent;return r&&r!==this&&r.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}contains(t){return this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear();for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0}removeChild(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}removeChildAt(t){if(t<0||t>=this.children.length)return null;const e=this.children.splice(t,1)[0];return this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e}sortChildren(t){return this.children.sort(t)}onAttach(){super.onAttach();const t=this.stage;for(const e of this.children)e.stage=t}onDetach(){super.onDetach();for(const t of this.children)t.stage=null}renderChildren(t){for(const e of this.children)e.beforeRender(t);for(const e of this.children)e.processRender(t);for(const e of this.children)e.afterRender(t)}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"18c6":function(t,e,r){"use strict";r.d(e,"a",(function(){return L})),r.d(e,"b",(function(){return D})),r.d(e,"c",(function(){return O})),r.d(e,"d",(function(){return C})),r.d(e,"e",(function(){return R})),r.d(e,"f",(function(){return I})),r.d(e,"g",(function(){return A})),r.d(e,"h",(function(){return M}));var n=r("ce50"),i=r("c84e"),s=r("9b77");function a(t,e=!1){const r=i["e"].SIZE_FIELD_STOPS|i["e"].SIZE_MINMAX_VALUE|i["e"].SIZE_SCALE_STOPS|i["e"].SIZE_UNIT_VALUE,n=(t&(i["f"].FIELD_TARGETS_OUTLINE|i["f"].MINMAX_TARGETS_OUTLINE|i["f"].SCALE_TARGETS_OUTLINE|i["f"].UNIT_TARGETS_OUTLINE))>>>4;return e?r&n:r&~n}const o=0,c=8,u=7,h=8,l=11,d=11,f=12,p=13,_=14,g=15,m=15,T=16,v=17,E=18,x=19,b=20;function A(t,e,r,n,s){switch(t){case i["d"].FILL:return L.from(e,n);case i["d"].LINE:return O.from(e,r);case i["d"].MARKER:return C.from(e);case i["d"].TEXT:return I.from(e);case i["d"].LABEL:return D.from(e,s);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+t)}}function M(t){switch(R.load(t).geometryType){case i["d"].MARKER:return new C(t);case i["d"].FILL:return new L(t);case i["d"].LINE:return new O(t);case i["d"].TEXT:return new I(t);case i["d"].LABEL:return new D(t)}}class R{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(h,l)}set geometryType(t){this.setBits(t,h,l)}get mapAligned(){return!!this.bit(b)}set mapAligned(t){this.setBit(b,t)}get sdf(){return!!this.bit(d)}set sdf(t){this.setBit(d,t)}get pattern(){return!!this.bit(f)}set pattern(t){this.setBit(f,t)}get textureBinding(){return this.bits(o,c)}set textureBinding(t){this.setBits(t,o,c)}get geometryTypeString(){switch(this.geometryType){case i["d"].FILL:return"fill";case i["d"].MARKER:return"marker";case i["d"].LINE:return"line";case i["d"].TEXT:return"text";case i["d"].LABEL:return"label";default:throw new n["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(t,e){const r=1<<t;e?this._data|=r:this._data&=~r}bit(t){return(this._data&1<<t)>>t}setBits(t,e,r){for(let n=e,i=0;n<r;n++,i++)this.setBit(n,0!=(t&1<<i))}bits(t,e){let r=0;for(let n=t,i=0;n<e;n++,i++)r|=this.bit(n)<<i;return r}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(u&this.textureBinding)}}R.shared=new R(0);const S=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(T)}set vvSizeMinMaxValue(t){this.setBit(T,t)}get vvSizeScaleStops(){return 0!==this.bit(v)}set vvSizeScaleStops(t){this.setBit(v,t)}get vvSizeFieldStops(){return 0!==this.bit(E)}set vvSizeFieldStops(t){this.setBit(E,t)}get vvSizeUnitValue(){return 0!==this.bit(x)}set vvSizeUnitValue(t){this.setBit(x,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,e){super.setVV(t,e);const r=a(t,e)&t;this.vvSizeMinMaxValue=!!(r&i["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&i["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&i["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&i["e"].SIZE_SCALE_STOPS)}},w=t=>class extends t{get vvRotation(){return 0!==this.bit(g)}set vvRotation(t){this.setBit(g,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e&&!!(t&i["e"].ROTATION)}},y=t=>class extends t{get vvColor(){return 0!==this.bit(p)}set vvColor(t){this.setBit(p,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e&&!!(t&i["e"].COLOR)}},F=t=>class extends t{get vvOpacity(){return 0!==this.bit(_)}set vvOpacity(t){this.setBit(_,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e&&!!(t&i["e"].OPACITY)}};class L extends(y(F(R))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=i["d"].FILL,e?r.dotDensity=!0:r.setVV(t,!1),r.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(m)}set dotDensity(t){this.setBit(m,t)}}L.shared=new L(0);class C extends(y(F(w(S(R))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=i["d"].MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}C.shared=new C(0);class O extends(y(F(S(R)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=i["d"].LINE,r.setVV(t,e),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}O.shared=new O(0);class I extends(y(F(w(S(R))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=i["d"].TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}I.shared=new I(0);class D extends(S(R)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const r=this.load(0);return r.geometryType=i["d"].LABEL,r.setVV(t,!1),r.mapAligned=!!Object(s["a"])(e),r.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}D.shared=new D(0)},1956:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("c120");var n=r("e92d");r("ce50");function i(t){}n["a"].getLogger("esri/views/webgl")},"5f6c":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return s(t,null==e?r.path:e)}},r.exports),r.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,r("c8ba"))},"7c4b":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("c120"),i=r("f4cc"),s=r("ce6d");const a=1/Object(n["a"])("mapview-transitions-duration");class o extends s["a"]{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const e=this._stage;this._stage=t,t?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):e.trashDisplayObject(this)}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=Object(i["h"])(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=Object(i["h"])(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(t){this.updateTransitionProperties(t.deltaTime,t.state.scale)}afterRender(t){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var t;null==(t=this.parent)||t.removeChild(this)}setTransform(t){}processRender(t){this.stage&&this.computedVisible&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit("detach")}updateTransitionProperties(t,e){if(this.fadeTransitionEnabled){const e=this._fadeOutResolver||!this.visible?0:this.opacity,r=this.computedOpacity;if(r===e)this.computedVisible=this.visible;else{const n=t*a;this.computedOpacity=r>e?Math.max(e,r-n):Math.min(e,r+n),this.computedVisible=this.computedOpacity>0;const i=e===this.computedOpacity;this.inFadeTransition=!i,i||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},"8c81":function(t,e,r){"use strict";r.d(e,"a",(function(){return b})),r.d(e,"b",(function(){return A})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return U})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return D})),r.d(e,"g",(function(){return a})),r.d(e,"h",(function(){return w})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return R})),r.d(e,"k",(function(){return F})),r.d(e,"l",(function(){return o})),r.d(e,"m",(function(){return M})),r.d(e,"n",(function(){return n})),r.d(e,"o",(function(){return N})),r.d(e,"p",(function(){return i})),r.d(e,"q",(function(){return I})),r.d(e,"r",(function(){return p})),r.d(e,"s",(function(){return _})),r.d(e,"t",(function(){return g})),r.d(e,"u",(function(){return m})),r.d(e,"v",(function(){return f})),r.d(e,"w",(function(){return d})),r.d(e,"x",(function(){return T})),r.d(e,"y",(function(){return v})),r.d(e,"z",(function(){return E})),r.d(e,"A",(function(){return x})),r.d(e,"B",(function(){return l})),r.d(e,"C",(function(){return u})),r.d(e,"D",(function(){return y})),r.d(e,"E",(function(){return s})),r.d(e,"F",(function(){return O})),r.d(e,"G",(function(){return C})),r.d(e,"H",(function(){return L}));const n=1e-30,i=4294967295,s=512,a=8,o=29,c=16,u=8,h={metrics:{width:15,height:17,left:0,top:-7,advance:14}},l=0,d=0,f=0,p=1,_=2,g=3,m=4,T=5,v=6,E=5,x=6,b=1,A=2,M=2,R=1,S=2,w=4,y=2.5,F=6,L=5,C=6,O=1.15,I=2,D=7,N=500,U=128},"91b0":function(t,e,r){"use strict";class n{constructor(t,e){this._context=t,this._desc=e,this._context.instanceCounter.increment(5,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,e.internalFormat,e.width,e.height)}get descriptor(){return this._desc}resize(t,e){const r=this._desc;if(r.width===t&&r.height===e)return;r.width=t,r.height=e;const n=this._context.gl;this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}e["a"]=n},"970c":function(t,e,r){"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e,r,n,i,s,a,o,c,u,h,l,d,f,p,_){const g=new Float32Array(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=i,g[5]=s,g[6]=a,g[7]=o,g[8]=c,g[9]=u,g[10]=h,g[11]=l,g[12]=d,g[13]=f,g[14]=p,g[15]=_,g}function a(t,e){return new Float32Array(t,e,16)}r.d(e,"a",(function(){return n}));const o=n();Object.freeze({__proto__:null,create:n,clone:i,fromValues:s,createView:a,IDENTITY:o})},"9b77":function(t,e,r){"use strict";function n(t){switch(t){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}r.d(e,"a",(function(){return n}))},"9f8b":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("5f6c"),i=Object(n["b"])((function(t){var e;void 0!==(e=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(t.exports=e)})),s=Object(n["b"])((function(t){var e;void 0!==(e=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(t.exports=e)})),a=Object(n["b"])((function(t){var e;void 0!==(e=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(t.exports=e)}))},a1ff:function(t,e,r){"use strict";var n=r("b2b2"),i=r("38a4"),s=r("c514");const a=4,o=0;class c{constructor(t,e,r=null){this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(0,this),this._context=t,this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){if(this._context&&this._context.gl){if(this._glName){const t=this._context.gl;this._context.unbindTextureAllUnits(this),t.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}release(){this.dispose()}resize(t,e){const r=this._descriptor;r.width===t&&r.height===e||(r.width=t,r.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const e=this._context.gl;this._glName||(this._glName=e.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||a,this._descriptor.height=this._descriptor.height||a);const r=this._context.getBoundTexture(o);this._context.bindTexture(this,o);const i=this._descriptor;c._validateTexture(this._context,i),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);const s=i.pixelFormat;let h=i.internalFormat?i.internalFormat:s;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let r=t.width,n=t.height;t instanceof HTMLVideoElement&&(r=t.videoWidth,n=t.videoHeight),i.width&&i.height&&console.assert(r===i.width&&n===i.height),e.texImage2D(e.TEXTURE_2D,0,h,s,i.dataType,t),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=r),void 0===i.height&&(i.height=n)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),e.DEPTH24_STENCIL8&&h===e.DEPTH_STENCIL&&(h=e.DEPTH24_STENCIL8);let r=i.width,a=i.height;if(u(t)){const n=Math.round(Math.log(Math.max(r,a))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&n===t.levels.length;for(let s=0;;++s){const n=t.levels[Math.min(s,t.levels.length-1)];if(e.compressedTexImage2D(e.TEXTURE_2D,s,h,r,a,0,n),1===r&&1===a||!i.hasMipmap)break;r=Math.max(1,r>>1),a=Math.max(1,a>>1)}}else if(Object(n["k"])(t))e.texImage2D(e.TEXTURE_2D,0,h,r,a,0,s,i.dataType,t),i.hasMipmap&&this.generateMipmap();else for(let t=0;e.texImage2D(e.TEXTURE_2D,t,h,r,a,0,s,i.dataType,null),(1!==r||1!==a)&&i.hasMipmap;++t)r=Math.max(1,r>>1),a=Math.max(1,a>>1)}c._applySamplingMode(e,this._descriptor),c._applyWrapMode(e,this._descriptor),c._applyAnisotropicFilteringParameters(this._context,this._descriptor),r&&this._context.bindTexture(r,o)}updateData(t,e,r,n,i,s){s||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const a=this._context.gl,c=this._descriptor,u=this._context.getBoundTexture(o);this._context.bindTexture(this,o),(e<0||r<0||n>c.width||i>c.height||e+n>c.width||r+i>c.height)&&console.error("An attempt to update out of bounds of the texture!"),a.pixelStorei(a.UNPACK_ALIGNMENT,c.unpackAlignment),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?a.texSubImage2D(a.TEXTURE_2D,t,e,r,c.pixelFormat,c.dataType,s):a.texSubImage2D(a.TEXTURE_2D,t,e,r,n,i,c.pixelFormat,c.dataType,s),this._context.bindTexture(u,o)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,c._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.getBoundTexture(o);this._context.bindTexture(this,o);const r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(e,o)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,c._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,c._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(c._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(c._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(t,e){(e.width<0||e.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=Object(i["k"])(e.width)&&Object(i["k"])(e.height);Object(s["a"])(t.gl)||r||("number"==typeof e.wrapMode?33071!==e.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===e.wrapMode.s&&33071===e.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(t,e){let r=e.samplingMode,n=e.samplingMode;9985===r||9987===r?(r=9729,e.hasMipmap||(n=9729)):9984!==r&&9986!==r||(r=9728,e.hasMipmap||(n=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n)}static _applyWrapMode(t,e){"number"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){if(null==e.maxAnisotropy)return;const r=t.capabilities.textureFilterAnisotropic;if(!r)return;const n=t.gl;n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy)}}function u(t){return Object(n["k"])(t)&&"type"in t&&"compressed"===t.type}e["a"]=c},a9a2:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return c}));var n=r("d114");function i(t,e){return Array.isArray(e)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]=e.r,t[1]=e.g,t[2]=e.b,t[3]=e.a),t}function s(t,e=0,r=!1){const n=t[e+3];return t[e+0]*=n,t[e+1]*=n,t[e+2]*=n,r||(t[e+3]*=255),t}function a(t){return s(i([],t))}function o(t){if(!t)return 0;const{r:e,g:r,b:i,a:s}=t;return Object(n["b"])(e*s,r*s,i*s,255*s)}function c(t){if(!t)return 0;const[e,r,i,s]=t;return Object(n["b"])(e*(s/255),r*(s/255),i*(s/255),s)}},ab4a:function(t,e,r){"use strict";var n=r("7ffa"),i=r("e92d"),s=r("ce50"),a=r("eb37"),o=r("970c"),c=r("d791");const u=(t,e)=>{const r=Object(c["d"])(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Object(c["b"])(r,r)},h=(t,e)=>{const r=Object(c["d"])(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Object(c["b"])(r,r)},l=(t,e)=>{const r=1-e,n=Object(c["d"])(t,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Object(c["b"])(n,n)},d=(t,e)=>{const r=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),i=Object(c["d"])(t,.213+.787*n-.213*r,.715-.715*n-.715*r,.072-.072*n+.928*r,0,.213-.213*n+.143*r,.715+.285*n+.14*r,.072-.072*n-.283*r,0,.213-.213*n-.787*r,.715-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,1);return Object(c["b"])(i,i)},f=(t,e)=>{const r=1-2*e,n=Object(c["d"])(t,r,0,0,e,0,r,0,e,0,0,r,e,0,0,0,1);return Object(c["b"])(n,n)},p=(t,e)=>{const r=Object(c["d"])(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Object(c["b"])(r,r)},_=(t,e)=>{const r=1-e,n=Object(c["d"])(t,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Object(c["b"])(n,n)};class g{constructor(t,e,r){this.strength=t,this.radius=e,this.threshold=r,this.type="bloom"}interpolate(t,e,r){this.strength=b(t.strength,e.strength,r),this.radius=b(t.radius,e.radius,r),this.threshold=b(t.threshold,e.threshold,r)}clone(){return new g(this.strength,this.radius,this.threshold)}}class m{constructor(t){this.radius=t,this.type="blur"}interpolate(t,e,r){this.radius=Math.round(b(t.radius,e.radius,r))}clone(){return new m(this.radius)}}class T{constructor(t,e){this.type=t,this.amount=e,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.amount=b(t.amount,e.amount,r),this._updateMatrix()}clone(){return new T(this.type,this.amount)}_updateMatrix(){const t=this._colorMatrix||Object(o["a"])();switch(this.type){case"brightness":this._colorMatrix=u(t,this.amount);break;case"contrast":this._colorMatrix=h(t,this.amount);break;case"grayscale":this._colorMatrix=l(t,this.amount);break;case"invert":this._colorMatrix=f(t,this.amount);break;case"saturate":this._colorMatrix=p(t,this.amount);break;case"sepia":this._colorMatrix=_(t,this.amount)}}}class v{constructor(t,e,r,n){this.offsetX=t,this.offsetY=e,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,e,r){this.offsetX=b(t.offsetX,e.offsetX,r),this.offsetY=b(t.offsetY,e.offsetY,r),this.blurRadius=b(t.blurRadius,e.blurRadius,r),this.color[0]=Math.round(b(t.color[0],e.color[0],r)),this.color[1]=Math.round(b(t.color[1],e.color[1],r)),this.color[2]=Math.round(b(t.color[2],e.color[2],r)),this.color[3]=b(t.color[3],e.color[3],r)}clone(){return new v(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}}class E{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,e,r){this.angle=b(t.angle,e.angle,r),this._updateMatrix()}clone(){return new E(this.angle)}_updateMatrix(){const t=this._colorMatrix||Object(o["a"])();this._colorMatrix=d(t,this.angle)}}class x{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,e,r){this.amount=b(t.amount,e.amount,r)}clone(){return new x(this.amount)}}function b(t,e,r){return t+(e-t)*r}var A=r("5f6c"),M=Object(A["b"])((function(t){var e;e=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){r=void 0!==r?r:{};var n,i={},s={start:qt},a=qt,o=jt("none"),c="none",u=Vt("none",!1),h=function(){return[]},l=")",d=Vt(")",!1),f=function(t,e){return{type:"function",name:t,parameters:e||[]}},p=",",_=Vt(",",!1),g=function(t,e){return e.length>0?ce(t,e,3):[t]},m=function(t){return{type:"quantity",value:t.value,unit:t.unit}},T=function(t){return{type:"color",colorType:t.type,value:t.value}},v=jt("whitespace"),E=/^[ \t\n\r]/,x=Bt([" ","\t","\n","\r"],!1,!1),b=jt("function"),A="(",M=Vt("(",!1),R=function(t){return t},S=jt("identifier"),w=/^[a-z\-]/,y=Bt([["a","z"],"-"],!1,!1),F=function(){return Pt()},L=jt("percentage"),C="%",O=Vt("%",!1),I=function(t){return{value:t,unit:"%"}},D=jt("length"),N="px",U=Vt("px",!1),P=function(t){return{value:t,unit:"px"}},V="cm",B=Vt("cm",!1),z=function(t){return{value:t,unit:"cm"}},j="mm",X=Vt("mm",!1),H=function(t){return{value:t,unit:"mm"}},G="in",k=Vt("in",!1),q=function(t){return{value:t,unit:"in"}},Y="pt",W=Vt("pt",!1),Z=function(t){return{value:t,unit:"pt"}},K="pc",$=Vt("pc",!1),J=function(t){return{value:t,unit:"pc"}},Q=jt("angle"),tt="deg",et=Vt("deg",!1),rt=function(t){return{value:t,unit:"deg"}},nt="rad",it=Vt("rad",!1),st=function(t){return{value:t,unit:"rad"}},at="grad",ot=Vt("grad",!1),ct=function(t){return{value:t,unit:"grad"}},ut="turn",ht=Vt("turn",!1),lt=function(t){return{value:t,unit:"turn"}},dt=jt("number"),ft=function(t){return{value:t,unit:null}},pt=jt("color"),_t="#",gt=Vt("#",!1),mt=/^[0-9a-fA-F]/,Tt=Bt([["0","9"],["a","f"],["A","F"]],!1,!1),vt=function(){return{type:"hex",value:Pt()}},Et=function(t){return{type:"function",value:t}},xt=function(){return{type:"named",value:Pt()}},bt=/^[+\-]/,At=Bt(["+","-"],!1,!1),Mt=/^[0-9]/,Rt=Bt([["0","9"]],!1,!1),St=".",wt=Vt(".",!1),yt="e",Ft=Vt("e",!1),Lt=function(){return parseFloat(Pt())},Ct=0,Ot=0,It=[{line:1,column:1}],Dt=0,Nt=[],Ut=0;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=s[r.startRule]}function Pt(){return t.substring(Ot,Ct)}function Vt(t,e){return{type:"literal",text:t,ignoreCase:e}}function Bt(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function zt(){return{type:"end"}}function jt(t){return{type:"other",description:t}}function Xt(e){var r,n=It[e];if(n)return n;for(r=e-1;!It[r];)r--;for(n={line:(n=It[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return It[e]=n,n}function Ht(t,e){var r=Xt(t),n=Xt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Gt(t){Ct<Dt||(Ct>Dt&&(Dt=Ct,Nt=[]),Nt.push(t))}function kt(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function qt(){var t;return(t=Yt())===i&&(t=Wt()),t}function Yt(){var e,r;return Ut++,e=Ct,Jt()!==i?(t.substr(Ct,4)===c?(r=c,Ct+=4):(r=i,0===Ut&&Gt(u)),r!==i&&Jt()!==i?(Ot=e,e=h()):(Ct=e,e=i)):(Ct=e,e=i),Ut--,e===i&&0===Ut&&Gt(o),e}function Wt(){var t,e;if(t=[],(e=Zt())!==i)for(;e!==i;)t.push(e),e=Zt();else t=i;return t}function Zt(){var e,r,n,s;return e=Ct,Jt()!==i&&(r=Qt())!==i&&Jt()!==i?((n=Kt())===i&&(n=null),n!==i&&Jt()!==i?(41===t.charCodeAt(Ct)?(s=l,Ct++):(s=i,0===Ut&&Gt(d)),s!==i&&Jt()!==i?(Ot=e,e=f(r,n)):(Ct=e,e=i)):(Ct=e,e=i)):(Ct=e,e=i),e}function Kt(){var e,r,n,s,a,o,c,u;if(e=Ct,(r=$t())!==i){for(n=[],s=Ct,(a=Jt())!==i?(44===t.charCodeAt(Ct)?(o=p,Ct++):(o=i,0===Ut&&Gt(_)),o===i&&(o=null),o!==i&&(c=Jt())!==i&&(u=$t())!==i?s=a=[a,o,c,u]:(Ct=s,s=i)):(Ct=s,s=i);s!==i;)n.push(s),s=Ct,(a=Jt())!==i?(44===t.charCodeAt(Ct)?(o=p,Ct++):(o=i,0===Ut&&Gt(_)),o===i&&(o=null),o!==i&&(c=Jt())!==i&&(u=$t())!==i?s=a=[a,o,c,u]:(Ct=s,s=i)):(Ct=s,s=i);n!==i?(Ot=e,e=r=g(r,n)):(Ct=e,e=i)}else Ct=e,e=i;return e}function $t(){var t,e;return t=Ct,(e=ee())===i&&(e=re())===i&&(e=ne())===i&&(e=ie()),e!==i&&(Ot=t,e=m(e)),(t=e)===i&&(t=Ct,(e=se())!==i&&(Ot=t,e=T(e)),t=e),t}function Jt(){var e,r;for(Ut++,e=[],E.test(t.charAt(Ct))?(r=t.charAt(Ct),Ct++):(r=i,0===Ut&&Gt(x));r!==i;)e.push(r),E.test(t.charAt(Ct))?(r=t.charAt(Ct),Ct++):(r=i,0===Ut&&Gt(x));return Ut--,e===i&&(r=i,0===Ut&&Gt(v)),e}function Qt(){var e,r,n;return Ut++,e=Ct,(r=te())!==i?(40===t.charCodeAt(Ct)?(n=A,Ct++):(n=i,0===Ut&&Gt(M)),n!==i?(Ot=e,e=r=R(r)):(Ct=e,e=i)):(Ct=e,e=i),Ut--,e===i&&(r=i,0===Ut&&Gt(b)),e}function te(){var e,r,n;if(Ut++,e=Ct,r=[],w.test(t.charAt(Ct))?(n=t.charAt(Ct),Ct++):(n=i,0===Ut&&Gt(y)),n!==i)for(;n!==i;)r.push(n),w.test(t.charAt(Ct))?(n=t.charAt(Ct),Ct++):(n=i,0===Ut&&Gt(y));else r=i;return r!==i&&(Ot=e,r=F()),Ut--,(e=r)===i&&(r=i,0===Ut&&Gt(S)),e}function ee(){var e,r,n;return Ut++,e=Ct,Jt()!==i&&(r=ae())!==i?(37===t.charCodeAt(Ct)?(n=C,Ct++):(n=i,0===Ut&&Gt(O)),n!==i?(Ot=e,e=I(r)):(Ct=e,e=i)):(Ct=e,e=i),Ut--,e===i&&0===Ut&&Gt(L),e}function re(){var e,r,n;return Ut++,e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===N?(n=N,Ct+=2):(n=i,0===Ut&&Gt(U)),n!==i?(Ot=e,e=P(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===V?(n=V,Ct+=2):(n=i,0===Ut&&Gt(B)),n!==i?(Ot=e,e=z(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===j?(n=j,Ct+=2):(n=i,0===Ut&&Gt(X)),n!==i?(Ot=e,e=H(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===G?(n=G,Ct+=2):(n=i,0===Ut&&Gt(k)),n!==i?(Ot=e,e=q(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===Y?(n=Y,Ct+=2):(n=i,0===Ut&&Gt(W)),n!==i?(Ot=e,e=Z(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,Jt()!==i&&(r=ae())!==i?(t.substr(Ct,2)===K?(n=K,Ct+=2):(n=i,0===Ut&&Gt($)),n!==i?(Ot=e,e=J(r)):(Ct=e,e=i)):(Ct=e,e=i)))))),Ut--,e===i&&0===Ut&&Gt(D),e}function ne(){var e,r,n;return Ut++,e=Ct,(r=ae())!==i?(t.substr(Ct,3)===tt?(n=tt,Ct+=3):(n=i,0===Ut&&Gt(et)),n!==i?(Ot=e,e=r=rt(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,(r=ae())!==i?(t.substr(Ct,3)===nt?(n=nt,Ct+=3):(n=i,0===Ut&&Gt(it)),n!==i?(Ot=e,e=r=st(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,(r=ae())!==i?(t.substr(Ct,4)===at?(n=at,Ct+=4):(n=i,0===Ut&&Gt(ot)),n!==i?(Ot=e,e=r=ct(r)):(Ct=e,e=i)):(Ct=e,e=i),e===i&&(e=Ct,(r=ae())!==i?(t.substr(Ct,4)===ut?(n=ut,Ct+=4):(n=i,0===Ut&&Gt(ht)),n!==i?(Ot=e,e=r=lt(r)):(Ct=e,e=i)):(Ct=e,e=i)))),Ut--,e===i&&(r=i,0===Ut&&Gt(Q)),e}function ie(){var t,e;return Ut++,t=Ct,Jt()!==i&&(e=ae())!==i?(Ot=t,t=ft(e)):(Ct=t,t=i),Ut--,t===i&&0===Ut&&Gt(dt),t}function se(){var e,r,n,s;if(Ut++,e=Ct,35===t.charCodeAt(Ct)?(r=_t,Ct++):(r=i,0===Ut&&Gt(gt)),r!==i){if(n=[],mt.test(t.charAt(Ct))?(s=t.charAt(Ct),Ct++):(s=i,0===Ut&&Gt(Tt)),s!==i)for(;s!==i;)n.push(s),mt.test(t.charAt(Ct))?(s=t.charAt(Ct),Ct++):(s=i,0===Ut&&Gt(Tt));else n=i;n!==i?(Ot=e,e=r=vt()):(Ct=e,e=i)}else Ct=e,e=i;return e===i&&(e=Ct,(r=Zt())!==i&&(Ot=e,r=Et(r)),(e=r)===i&&(e=Ct,(r=te())!==i&&(Ot=e,r=xt()),e=r)),Ut--,e===i&&(r=i,0===Ut&&Gt(pt)),e}function ae(){var e,r,n,s,a,o,c,u;if(e=Ct,bt.test(t.charAt(Ct))?(r=t.charAt(Ct),Ct++):(r=i,0===Ut&&Gt(At)),r===i&&(r=null),r!==i){for(n=Ct,s=[],Mt.test(t.charAt(Ct))?(a=t.charAt(Ct),Ct++):(a=i,0===Ut&&Gt(Rt));a!==i;)s.push(a),Mt.test(t.charAt(Ct))?(a=t.charAt(Ct),Ct++):(a=i,0===Ut&&Gt(Rt));if(s!==i)if(46===t.charCodeAt(Ct)?(a=St,Ct++):(a=i,0===Ut&&Gt(wt)),a!==i){if(o=[],Mt.test(t.charAt(Ct))?(c=t.charAt(Ct),Ct++):(c=i,0===Ut&&Gt(Rt)),c!==i)for(;c!==i;)o.push(c),Mt.test(t.charAt(Ct))?(c=t.charAt(Ct),Ct++):(c=i,0===Ut&&Gt(Rt));else o=i;o!==i?n=s=[s,a,o]:(Ct=n,n=i)}else Ct=n,n=i;else Ct=n,n=i;if(n===i)if(n=[],Mt.test(t.charAt(Ct))?(s=t.charAt(Ct),Ct++):(s=i,0===Ut&&Gt(Rt)),s!==i)for(;s!==i;)n.push(s),Mt.test(t.charAt(Ct))?(s=t.charAt(Ct),Ct++):(s=i,0===Ut&&Gt(Rt));else n=i;if(n!==i){if(s=Ct,101===t.charCodeAt(Ct)?(a=yt,Ct++):(a=i,0===Ut&&Gt(Ft)),a!==i)if(bt.test(t.charAt(Ct))?(o=t.charAt(Ct),Ct++):(o=i,0===Ut&&Gt(At)),o===i&&(o=null),o!==i){if(c=[],Mt.test(t.charAt(Ct))?(u=t.charAt(Ct),Ct++):(u=i,0===Ut&&Gt(Rt)),u!==i)for(;u!==i;)c.push(u),Mt.test(t.charAt(Ct))?(u=t.charAt(Ct),Ct++):(u=i,0===Ut&&Gt(Rt));else c=i;c!==i?s=a=[a,o,c]:(Ct=s,s=i)}else Ct=s,s=i;else Ct=s,s=i;s===i&&(s=null),s!==i?(Ot=e,e=r=Lt()):(Ct=e,e=i)}else Ct=e,e=i}else Ct=e,e=i;return e}function oe(t,e){return t.map((function(t){return t[e]}))}function ce(t,e,r){return[t].concat(oe(e,r))}if((n=a())!==i&&Ct===t.length)return n;throw n!==i&&Ct<t.length&&Gt(zt()),kt(Nt,Dt<t.length?t.charAt(Dt):null,Dt<t.length?Ht(Dt,Dt+1):Ht(Dt,Dt))}return t(e,Error),e.buildMessage=function(t,e){var r={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return r[t.type](t)}function o(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=a(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+i(t)+'"':"end of input"}return"Expected "+o(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}},t.exports&&(t.exports=e())}));function R(t){let e;try{e=t?M.parse(t):[]}catch(n){return{input:t,parsedFunctions:[],effects:[],error:new s["a"]("effect:invalid-syntax","Invalid effect syntax",{input:t,error:n})}}const r={input:t,parsedFunctions:e,effects:[],error:null};try{for(const t of e)r.effects.push(S(t))}catch(n){r.effects.length=0,r.error=n}return r}function S(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return w(t);case"opacity":return y(t);case"hue-rotate":return F(t);case"blur":return L(t);case"drop-shadow":return C(t);case"bloom":return O(t)}}catch(e){throw e.details.filter=t,e}throw new s["a"]("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function w(t){let e=1;return I(t.parameters,1),1===t.parameters.length&&(e=X(t.parameters[0])),new T(t.name,e)}function y(t){let e=1;return I(t.parameters,1),1===t.parameters.length&&(e=X(t.parameters[0])),new x(e)}function F(t){let e=0;return I(t.parameters,1),1===t.parameters.length&&(e=G(t.parameters[0])),new E(e)}function L(t){let e=0;return I(t.parameters,1),1===t.parameters.length&&(e=k(t.parameters[0]),N(e,t.parameters[0])),new m(e)}function C(t){const e=[];let r;for(const n of t.parameters)if("color"===n.type){if(e.length&&Object.freeze(e),r)throw new s["a"]("effect:type-error","Accepts only one color",{});r=q(n)}else{const t=k(n);if(Object.isFrozen(e))throw new s["a"]("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&N(t,n)}if(e.length<2||e.length>3)throw new s["a"]("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new v(e[0],e[1],e[2]||0,r||Y("black"))}function O(t){let e=1,r=0,n=0;return I(t.parameters,3),t.parameters[0]&&(e=X(t.parameters[0])),t.parameters[1]&&(r=k(t.parameters[1]),N(r,t.parameters[1])),t.parameters[2]&&(n=X(t.parameters[2])),new g(e,r,n)}function I(t,e){if(t.length>e)throw new s["a"]("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function D(t){return"color"===t.type?"<color>":z[t.unit]?"<length>":V[t.unit]?"<angle>":"%"===t.unit?"<percentage>":"<double>"}function N(t,e){if(t<0)throw new s["a"]("effect:type-error","Negative values are not allowed, Actual: "+t,{term:e})}function U(t){if("quantity"!==t.type||null!==t.unit)throw new s["a"]("effect:type-error","Expected <double>, Actual: "+D(t),{term:t})}function P(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new s["a"]("effect:type-error","Expected <double> or <percentage>, Actual: "+D(t),{term:t})}const V={deg:1,grad:.9,rad:180/Math.PI,turn:360};function B(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==V[t.unit])throw new s["a"]("effect:type-error","Expected <angle>, Actual: "+D(t),{term:t})}const z={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/73};function j(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==z[t.unit])throw new s["a"]("effect:type-error","Expected <length>, Actual: "+D(t),{term:t})}function X(t){P(t);const e=t.value;return N(e,t),"%"===t.unit?.01*e:e}function H(t){return U(t),N(t.value,t),t.value}function G(t){return B(t),t.value*V[t.unit]||0}function k(t){return j(t),t.value*z[t.unit]||0}function q(t){switch(t.colorType){case"hex":return Object(a["c"])(t.value);case"named":return Y(t.value);case"function":return K(t.value)}}function Y(t){const e=Object(a["b"])(t);if(!e)throw new s["a"]("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return e}const W=/^rgba?/i,Z=/^hsla?/i;function K(t){if(I(t.parameters,4),W.test(t.name))return[X(t.parameters[0]),X(t.parameters[1]),X(t.parameters[2]),t.parameters[3]?X(t.parameters[3]):1];if(Z.test(t.name))return Object(a["d"])(H(t.parameters[0]),X(t.parameters[1]),X(t.parameters[2]),t.parameters[3]?X(t.parameters[3]):1);throw new s["a"]("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}const $=-1;class J{constructor(t=200){this.duration=t,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0}get effect(){return this._effect}set effect(t){if(t=t||"",this._effect===t)return;this._effect=t;const e=Q(t);Array.isArray(e)?this._transitionTo(e):(this._transitionTo([]),i["a"].getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:e}))}get hasEffects(){return this.transitioning||!!this._effects.length}get effects(){return this._effects}get scale(){return this._scale}get transitioning(){return null!==this._to}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}_transitionTo(t){this.scale>0&&nt(this._current,t,this.scale)?(this._final=t,this._to=Object(n["a"])(t),it(this._current,this._to,this.scale),this._from=Object(n["a"])(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._effects=this._current[0]?Object(n["a"])(this._current[0].effects):[]}_applyTimeTransition(t){if(!this._to)return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const t=this._current[r],n=this._from[r],i=this._to[r];t.scale=st(n.scale,i.scale,e);for(let r=0;r<t.effects.length;r++){const s=t.effects[r],a=n.effects[r],o=i.effects[r];s.interpolate(a,o,e)}}1===e&&(this._current=this._final,this._effects=this._current[0]?Object(n["a"])(this._current[0].effects):[],this._from=this._to=this._final=null)}_updateForScale(t){if(0===this._current.length)return;this._scale=t;const e=this._current,r=this._current.length-1;let n,i,s=1;if(1===e.length||t>=e[0].scale)i=n=e[0].effects;else if(t<=e[r].scale)i=n=e[r].effects;else for(let a=0;a<r;a++){const r=e[a],o=e[a+1];if(r.scale>=t&&o.scale<=t){s=(t-r.scale)/(o.scale-r.scale),n=r.effects,i=o.effects;break}}for(let a=0;a<this._effects.length;a++)this._effects[a].interpolate(n[a],i[a],s)}}function Q(t){if(!t)return[];if("string"==typeof t){const e=R(t);return e.error?e.error:[{scale:$,effects:e.effects}]}const e=[];for(const r of t){if(!isFinite(r.scale)||r.scale<=0)return new s["a"]("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});const t=R(r.value);if(t.error)return t.error;e.push({scale:r.scale,effects:t.effects})}e.sort((t,e)=>e.effects.length-t.effects.length);for(let r=0;r<e.length-1;r++){if(!et(e[r].effects,e[r+1].effects))return new s["a"]("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});rt(e[r].effects,e[r+1].effects)}return e.sort((t,e)=>e.scale-t.scale),e}function tt(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new T(t.type,0);case"saturate":case"brightness":case"contrast":return new T(t.type,1);case"opacity":return new x(1);case"hue-rotate":return new E(0);case"blur":return new m(0);case"drop-shadow":return new v(0,0,0,[...Object(a["a"])("transparent")]);case"bloom":return new g(0,0,0)}}function et(t,e){const r=t.length>e.length?t:e;return(t.length>e.length?e:t).every((t,e)=>t.type===r[e].type)}function rt(t,e){const r=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let i=n.length;i<r.length;i++)n.push(tt(r[i]))}function nt(t,e,r){var n,i,s,a;return null==(n=t[0])||!n.effects||null==(i=e[0])||!i.effects||!(((null==(s=t[0])?void 0:s.scale)===$||(null==(a=e[0])?void 0:a.scale)===$)&&(t.length>1||e.length>1)&&r<=0)&&et(t[0].effects,e[0].effects)}function it(t,e,r){var n,i;const s=t.length>e.length?t:e,a=t.length>e.length?e:t,o=a[a.length-1],c=null!=(n=null==o?void 0:o.scale)?n:r,u=null!=(i=null==o?void 0:o.effects)?i:[];for(let h=a.length;h<s.length;h++)a.push({scale:c,effects:[...u]});for(let h=0;h<s.length;h++)a[h].scale=a[h].scale===$?r:a[h].scale,s[h].scale=s[h].scale===$?r:s[h].scale,rt(a[h].effects,s[h].effects)}function st(t,e,r){return t+(e-t)*r}e["a"]=J},c514:function(t,e,r){"use strict";function n(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}e["a"]=n},c84e:function(t,e,r){"use strict";var n,i,s,a,o,c,u;r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return n})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return c})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"}(n||(n={})),function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(i||(i={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(s||(s={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(o||(o={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(u||(u={}))},c8dd:function(t,e,r){"use strict";r.d(e,"a",(function(){return B})),r.d(e,"b",(function(){return C})),r.d(e,"c",(function(){return O})),r.d(e,"d",(function(){return V})),r.d(e,"e",(function(){return z})),r.d(e,"f",(function(){return W})),r.d(e,"g",(function(){return Z})),r.d(e,"h",(function(){return N})),r.d(e,"i",(function(){return U})),r.d(e,"j",(function(){return H})),r.d(e,"k",(function(){return X})),r.d(e,"l",(function(){return A})),r.d(e,"m",(function(){return P})),r.d(e,"n",(function(){return I})),r.d(e,"o",(function(){return D})),r.d(e,"p",(function(){return L}));r("c120");var n=r("e92d"),i=r("ce50"),s=(r("38a4"),r("a915"),r("9f8b"),r("1956"),r("a1ff"),r("d267"),r("c84e")),a=(r("a9a2"),r("ecd7"));class o{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(t,e,r,n,i,s,a,o,c){this.color=t,this.haloColor=e,this.haloSize=r,this.size=n,this.angle=i,this.offsetX=s,this.offsetY=a,this.hAnchor=o,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}o.pool=new a["a"](o);const c=n["a"].getLogger("esri.views.2d.engine.webgl.Utils"),u="geometry",h=[{name:u,strideInBytes:32,divisor:0}],l=[{name:u,strideInBytes:32,divisor:0}],d=[{name:u,strideInBytes:12,divisor:0}],f=[{name:u,strideInBytes:36,divisor:0}],p=[{name:u,strideInBytes:32,divisor:0}],_=[{name:u,strideInBytes:36,divisor:0}];function g(t){const e={};for(const r of t)e[r.name]=r.strideInBytes;return e}const m=g(h),T=g(l),v=g(d),E=g(f),x=g(p),b=g(_);function A(t,e){switch(t){case s["d"].MARKER:return m;case s["d"].FILL:return e?v:T;case s["d"].LINE:return E;case s["d"].TEXT:return x;case s["d"].LABEL:return b}}const M=[u],R=[u],S=[u],w=[u],y=[u];function F(t){switch(t){case s["d"].MARKER:return M;case s["d"].FILL:return R;case s["d"].LINE:return S;case s["d"].TEXT:return w;case s["d"].LABEL:return y}}function L(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function C(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function O(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function I(t){return null!=t}function D(t){return"number"==typeof t}function N(t,e){switch(t){case"butt":return 0;case"round":return e?2:1;case"square":return 2;default:return c.error(new i["a"]("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function U(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return c.error(new i["a"]("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function P(t){switch(t){case"opacity":return s["b"].OPACITY;case"color":return s["b"].COLOR;case"rotation":return s["b"].ROTATION;case"size":return s["b"].SIZE;default:return c.error("Cannot interpret unknown vv: "+t),null}}function V(t,e,r,n,i,s,a){for(const c in s){const e=s[c].stride,n=L(e),a=s[c].data,o=r[c].data,u=e*i.vertexCount/n,h=e*t/n,l=e*i.vertexFrom/n;for(let t=0;t<u;++t)o[t+h]=a[t+l]}const o=i.indexCount;for(let c=0;c<o;++c)n[c+e]=a[c+i.indexFrom]-i.vertexFrom+t}const B={[u]:35044};function z(t,e){const r=[];for(let n=0;n<5;++n){const i=F(n),s={};for(const t of i)s[t]={data:e(n,t)};r.push({data:t(n),buffers:s})}return r}function j(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function X(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void c.error(new i["a"]("webgl-utils","Unable to handle type "+t))}}function H(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void c.error(new i["a"]("webgl-utils","Unable to handle type "+t))}}function G(t){const e={};for(const r in t){const n=t[r];let i=0;e[r]=n.map(t=>{const e={...t,normalized:t.normalized||!1,divisor:t.divisor||0,offset:i,stride:0};return i+=t.count*j(t.type),e}),e[r].forEach(t=>t.stride=i)}return e}const k=t=>{const e={};for(const r in t)for(const n of t[r])e[n.name]=n.location;return e},q=t=>{const e={};for(const r in t){const n=t[r];e[r]=n.length?n[0].stride:0}return e},Y=new Map,W=(t,e)=>{if(!Y.has(t)){const r=G(e),n={strides:q(r),bufferLayouts:r,attributes:k(e)};Y.set(t,n)}return Y.get(t)};function Z(t){t(s["d"].MARKER),t(s["d"].FILL),t(s["d"].LINE),t(s["d"].TEXT),t(s["d"].LABEL)}},d114:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i}));const n=new Float32Array(1);new Uint32Array(n.buffer);function i(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]}function s(t,e){return 65535&t|e<<16}function a(t,e,r,n){return 255&t|(255&e)<<8|(255&r)<<16|n<<24}},d267:function(t,e,r){"use strict";r("c120");var n=r("e92d"),i=r("a1ff"),s=r("91b0");const a=n["a"].getLogger("esri.views.webgl.FrameBufferObject");class o{constructor(t,e,r,n){if(this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...e},t.instanceCounter.increment(4,this),r){let e;var a;if(Array.isArray(r))for(const n of r){const{attachmentPoint:r,texture:s}=n,a=s instanceof i["a"]?s:new i["a"](t,s);e=a.descriptor,this._colorAttachments.set(r,a),this._validateColorAttachmentPoint(r),this._validateTextureDimensions(e,this._desc)}else r instanceof i["a"]?(e=r.descriptor,this._colorAttachments.set(36064,r)):(e=r,this._colorAttachments.set(36064,new i["a"](t,r))),0!==(null==(a=this._desc)?void 0:a.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(e,this._desc)}if(n instanceof s["a"]){var c;const t=null!=(c=this._desc.depthStencilTarget)?c:3;2===t?this._stencilAttachment=n:1===t||3===t?this._depthAttachment=n:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),o._validateBufferDimensions(n.descriptor,this._desc)}else if(n){let t;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),n instanceof i["a"]?(this._depthStencilTexture=n,t=this._depthStencilTexture.descriptor):(t=n,this._depthStencilTexture=new i["a"](this._context,t)),this._validateTextureDimensions(t,this._desc)}}dispose(){if(!this._desc)return;const t=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(4,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(36064);return t&&t instanceof i["a"]?t:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&e instanceof i["a"]?e:null}attachColorTexture(t,e=36064){if(!t)return;this._validateColorAttachmentPoint(e);const r=t.descriptor;if(this._validateTextureDimensions(r,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);const r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,t.glName,0)}this._colorAttachments.set(e,t)}detachColorTexture(t=36064){const e=this._colorAttachments.get(t);if(e instanceof i["a"]){const r=e;if(this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,t,e.TEXTURE_2D,null,0)}return this._colorAttachments.delete(t),r}}attachDepthStencilTexture(t){if(!t)return;const e=t.descriptor;if(34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(e,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(!t)return;const e=t.descriptor;if(34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),o._validateBufferDimensions(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===e.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}copyToTexture(t,e,r,n,i,s,a){(t<0||e<0||i<0||s<0)&&console.error("Offsets cannot be negative!"),(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!");const o=this._desc,c=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(t+r>o.width||e+n>o.height||i+r>c.width||s+n>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const u=this._context;u.bindTexture(a,0),u.bindFramebuffer(this),u.gl.copyTexSubImage2D(3553,0,i,s,t,e,r,n)}readPixels(t,e,r,n,i,s,a){(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!"),a||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,r,n,i,s,a)}resize(t,e){const r=this._desc;if(r.width!==t||r.height!==e){if(!this._initialized)return r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));r.width=t,r.height=e,this._colorAttachments.forEach(r=>{r&&r.resize(t,e)}),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(){var t,e,r,n;const a=this._context.gl;if(this._initialized)return void a.bindFramebuffer(a.FRAMEBUFFER,this.glName);this._glName&&a.deleteFramebuffer(this._glName);const o=this._context,u=a.createFramebuffer(),h=this._desc,l=null!=(t=h.colorTarget)?t:1,d=null!=(e=h.width)?e:1,f=null!=(r=h.height)?r:1;if(a.bindFramebuffer(a.FRAMEBUFFER,u),0===this._colorAttachments.size)if(0===l)this._colorAttachments.set(36064,c(o,h));else{const t=new s["a"](o,{internalFormat:32854,width:d,height:f});this._colorAttachments.set(36064,t)}this._colorAttachments.forEach((t,e)=>{t&&(t instanceof i["a"]?a.framebufferTexture2D(a.FRAMEBUFFER,e,a.TEXTURE_2D,t.glName,0):a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,t.glName))});const p=null!=(n=h.depthStencilTarget)?n:0;switch(p){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new s["a"](o,{internalFormat:1===h.depthStencilTarget?33189:34041,width:d,height:f}));const t=1===p?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.framebufferRenderbuffer(a.FRAMEBUFFER,t,a.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new s["a"](o,{internalFormat:36168,width:d,height:f})),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){o.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");const t={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d,height:f};this._depthStencilTexture=new i["a"](o,t)}a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=u,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach((t,e)=>{if(t instanceof i["a"]){if(this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){const r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,e,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}}),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}static _validateBufferDimensions(t,e){console.assert(t.width>=0&&t.height>=0),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateTextureDimensions(t,e){console.assert(t.width>=0&&t.height>=0),3553!==t.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateColorAttachmentPoint(t){if(-1===o._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;o._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else o._MAX_COLOR_ATTACHMENTS=1}const e=t-36064;e+1>o._MAX_COLOR_ATTACHMENTS&&a.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${o._MAX_COLOR_ATTACHMENTS} color attachments`)}}o._MAX_COLOR_ATTACHMENTS=-1;const c=(t,e)=>new i["a"](t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});e["a"]=o}}]);
//# sourceMappingURL=chunk-bd182524.e93f1f23.js.map