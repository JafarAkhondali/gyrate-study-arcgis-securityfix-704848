{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","webpack:///./node_modules/@arcgis/core/core/quantityFormatUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/viewUtils.js","webpack:///./node_modules/@arcgis/core/libs/maquette/h.js","webpack:///./node_modules/@arcgis/core/views/overlay/LineOverlayItem.js","webpack:///./node_modules/@arcgis/core/views/overlay/TextOverlayItem.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/LabelVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/support/Segment.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3DView.js"],"names":["o","vertex","uniforms","add","attributes","varyings","code","fragment","r","Math","sqrt","float","Object","freeze","__proto__","build","u","e","super","this","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","t","view","spatialReference","n","l","renderCoordsHelper","toRenderCoords","push","geometry","lines","forEach","origin","endpoint","endRenderSpace","g","transform","points","createRenderGeometry","map","_updateMaterial","_geometry","recreateGeometry","recreate","_material","materialParameters","_createLineGeometries","length","s","addGeometry","width","color","stippleOffColor","stipplePattern","isClosed","falloff","innerColor","innerWidth","stippleIntegerRepeats","polygonOffset","renderOccluded","writeDepth","attached","setParameterValues","Float64Array","i","attributeData","position","removeDuplicateStartEnd","a","toUnit","value","measure","Error","unit","b","k","projectToRenderScreen","H","U","x","vnodeSelector","properties","children","text","toString","domNode","Array","isArray","hasOwnProperty","startX","startY","endX","endY","visible","_set","height","left","top","x1","x2","y1","p","y2","calculateCoordinates","strokeStyle","lineCap","classes","styles","visibility","style","lineWidth","beginPath","moveTo","lineTo","stroke","min","max","prototype","readOnly","bottom","center","right","y","fontSize","anchor","backgroundColor","textColor","textShadowColor","textShadowSize","_cssClasses","floor","padding","borderRadius","textShadow","font","replace","measureText","textAlign","textBaseline","h","roundedRect","fillStyle","fill","c","d","_renderTextShadow","fillText","lineJoin","arcTo","closePath","cos","PI","sin","_handles","_textItem","_calloutItem","_showCallout","_showText","_text","_fontSize","_distance","_anchor","_updateLabelPosition","textItem","overlay","overlaps","_stage","type","_computeLabelPositionFromPoint","_computeLabelPositionFromCorner","z","_updatePosition","_computeLabelPositionFromSegment","updateVisibility","camera","renderToScreen","pixelRatio","segment","startRenderSpace","eval","sampleLocation","abs","startPosition","endPosition","items","addMany","state","watch","destroyed","removeMany","removeAll","I","V","F","start","end","worldUpAtPosition","get","normals","renderSpatialReference","_start","_end","_pcpf","_project","_projectIn","shader","rctx","generateSource","bindProjectionMatrix","program","projectionMatrix","setUniform1f","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","bindView","configuration","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","colorWrite","arguments","techniqueConfig","params","output","updateParameters","technique","techniqueRep","acquireAndReleaseExisting","material","getTechniqueConfig","bindProgram","bindPass","getPassParameters","vec3f","vec2f","f32","vertexBufferLayout","createBuffer","indices","f","vertexAttributes","data","console","warn","m","w","P","j","transformation","invTranspTransformation","L","M","normal","A","uv0","T","v","setVec","set","B","auxpos1","_parameters","_origin","_originTransform","_arrowCenter","_stripeLength","_stripesEnabled","_arrowMaterial","geometryChanged","arrowStripeEvenColor","arrowStripeOddColor","arrowOutlineColor","viewChanged","destroy","_createArrowGeometry","arrowSubdivisions","createPolylineGeometry","ready","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","_params","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_segmentLabelDisplayedMeasurement","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_viewMode","_geometryDirty","messages","_visualizedMeasurement","_actualVisualizedMeasurement","_visualElementOrientation","_triangleOrientationOverride","_triangleCollapseRatioThreshold","_geodesicDistanceThreshold","_initialize","triangleLineWidth","triangleColor","geodesicProjectionLineWidth","geodesicProjectionLineColor","guideStippleLengthPixels","guideLineWidth","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","dataObject","_update","_updateLabels","_updateSegmentStripeLength","_updateMessageBundle","then","_getActualVisualElementsOrientation","actualVisualizedMeasurement","direct","horizontalLabel","segmentLabel","horizontal","vertical","verticalLabel","labels","_updateGeometryAndViewMode","startPoint","endPoint","equals","_updateActualVisualizedMeasurement","_computeViewMode","getAltitude","previous","next","W","setAltitude","setGeometryFromSegment","measurement","verticalDistance","horizontalDistance","euclideanDistance","geodesicDistance","directDistance","geodesicAngle","settings","notifyChange","Q","stripesEnabled","geodesicDistanceThreshold","triangleCollapseRatioThreshold","visualElementsOrientation","aboveGround","J","K","N","X","Y","metersPerDegree","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance"],"mappings":"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","file":"js/chunk-0477a460.898d9c14.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`\n    void main(void) {\n      vec3 bitangent = normal;\n\n      vtc = uv0;\n      vlength = auxpos1;\n      vradius = 0.5 * width;\n\n      vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\n      gl_Position = proj * pos;\n    }\n  `),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}var r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{Z as r,c as s}from\"../../../../chunks/vec3f64.js\";import{s as i}from\"../../../../chunks/vec3.js\";import{i as o,t as n}from\"../../../../chunks/mat4.js\";import{a as l}from\"../../../../chunks/mat4f64.js\";import{g as a,c as h}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as f}from\"../../../../chunks/vec4f32.js\";import{RibbonLineMaterial as _}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createGeometry as c}from\"../../layers/graphics/lineUtils.js\";import{Object3DVisualElement as m}from\"./Object3DVisualElement.js\";class u extends m{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,r=s(),o=s(),n=100,l=[];i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),this.geometry=[l]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;o(g),n(g,g,t),this.transform=g;const{points:r}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[r]}setGeometryFromSegments(e,t=r){o(g),n(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){a(e,this._color)||(h(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&a(r,this._innerColor)||(this._innerColor=h(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!a(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?f(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new _(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=c(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=l();export{u as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{formatDecimal as r,formatMetricLength as t,formatMetricVerticalLength as a,formatMetricArea as n,formatImperialLength as e,formatImperialVerticalLength as i,formatImperialArea as u,formatDMS as o}from\"./unitFormatUtils.js\";function l(t,a,n,e=2,i=\"abbr\"){return r(t,a.toUnit(n).value,n,e,i)}function f(r,a,n=2,e=\"abbr\"){if(\"length\"!==a.measure)throw new Error(\"quantity is not a length\");return t(r,a.value,a.unit,n,e)}function s(r,t,n=2,e=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return a(r,t.value,t.unit,n,e)}function m(r,t,a=2,e=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return n(r,t.value,t.unit,a,e)}function h(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return e(r,t.value,t.unit,a,n)}function b(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return i(r,t.value,t.unit,a,n)}function c(r,t,a=2,n=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return u(r,t.value,t.unit,a,n)}function g(r){if(\"angle\"!==r.measure)throw new Error(\"quantity is not an angle\");return o(r.value,r.unit)}export{g as formatDMS,l as formatDecimal,c as formatImperialArea,h as formatImperialLength,b as formatImperialVerticalLength,m as formatMetricArea,f as formatMetricLength,s as formatMetricVerticalLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../../core/lang.js\";import{createRenderScreenPointArray3 as r,createScreenPointArray as n}from\"../../../../../core/screenUtils.js\";import{c as o}from\"../../../../../chunks/vec3f64.js\";import{s as t,b as s,a as c}from\"../../../../../chunks/vec3.js\";import{i as f,t as a,s as i}from\"../../../../../chunks/mat4.js\";import{d as u,e as m,i as p}from\"../../../../../chunks/vec2.js\";const h=o();function l(r,n){return{...r,...e(n)}}function d(e,r,n,o){for(;e.length<r;)e.push(n());if(o)for(;e.length>r;){o(e.pop())}else e.length=r}function j(e,r,n){f(n),a(n,n,r),t(h,e,e,e),i(n,n,h)}function g(e,r){if(t(r,0,0,0),e.length>0){for(let n=0;n<e.length;++n)s(r,r,e[n]);c(r,r,1/e.length)}}function k(e,r,n,o){o.projectToRenderScreen(e,b),o.projectToRenderScreen(r,H),u(n,U,x),m(n,n)}function R(e,r,n){const o=n.state.camera;n.renderCoordsHelper.toRenderCoords(e,v),o.projectToRenderScreen(v,C),n.state.camera.renderToScreen(C,r)}function S(e,r,n){return R(e,w,n),R(r,y,n),p(w,y)}function T(e,r,n){return R(e,q,n),p(q,r)}const v=o(),C=r(),b=r(),x=b,H=r(),U=H,q=n(),w=n(),y=n();export{l as copyParameter,g as midpoint,S as pointToPointScreenDistance,T as pointToScreenPositionDistance,d as resizeArray,j as scaleTranslateMatrix,k as screenSpaceTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nlet e=e=>({vnodeSelector:\"\",properties:void 0,children:void 0,text:e.toString(),domNode:null}),r=(t,o,n)=>{for(let l=0,i=o.length;l<i;l++){let i=o[l];Array.isArray(i)?r(t,i,n):null!=i&&!1!==i&&(\"string\"==typeof i&&(i=e(i)),n.push(i))}};function t(e,t,o){if(Array.isArray(t))o=t,t=void 0;else if(t&&(\"string\"==typeof t||t.hasOwnProperty(\"vnodeSelector\"))||o&&(\"string\"==typeof o||o.hasOwnProperty(\"vnodeSelector\")))throw new Error(\"h called with invalid arguments\");let n,l;return o&&1===o.length&&\"string\"==typeof o[0]?n=o[0]:o&&(l=[],r(e,o,l),0===l.length&&(l=void 0)),{vnodeSelector:e,properties:t,children:l,text:\"\"===n?void 0:n,domNode:null}}export{t as h};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as o}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";let r=class extends i{constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set(\"startX\",t[0]),this._set(\"startY\",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set(\"endX\",t[0]),this._set(\"endY\",t[1])}get strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get lineCap(){return\"round\"}render(){const{height:t,left:e,top:s,width:i,x1:r,x2:n,y1:p,y2:a}=this.calculateCoordinates(h),l=`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`;return o(\"div\",{classes:{\"esri-line-overlay-item\":!0},styles:{left:e+\"px\",top:s+\"px\",width:i+\"px\",height:t+\"px\",visibility:this.visible?\"visible\":\"hidden\"}},[o(\"svg\",{width:i,height:t},[o(\"line\",{x1:r,y1:p,x2:n,y2:a,style:l})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this.strokeStyle,t.lineWidth=this.width,t.lineCap=this.lineCap;const e=this.calculateCoordinates(h);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}calculateCoordinates(t){const e=Math.min(this.startX,this.endX),s=Math.max(this.startX,this.endX),i=Math.min(this.startY,this.endY),o=Math.max(this.startY,this.endY),r=this.width;return t.left=e-r,t.top=i-r,t.width=s-e+2*r,t.height=Math.max(20,o-i+2*r),t.x1=this.startX-e+r,t.y1=this.startY-i+r,t.x2=this.endX-e+r,t.y2=this.endY-i+r,t}};t([e()],r.prototype,\"startX\",void 0),t([e()],r.prototype,\"startY\",void 0),t([e()],r.prototype,\"endX\",void 0),t([e()],r.prototype,\"endY\",void 0),t([e()],r.prototype,\"startPosition\",null),t([e()],r.prototype,\"endPosition\",null),t([e()],r.prototype,\"width\",void 0),t([e()],r.prototype,\"color\",void 0),t([e()],r.prototype,\"visible\",void 0),t([e({readOnly:!0})],r.prototype,\"strokeStyle\",null),r=t([s(\"esri.views.overlay.LineOverlayItem\")],r);const h={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var n=r;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as r}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";const s={bottom:\"esri-text-overlay-item-anchor-bottom\",\"bottom-right\":\"esri-text-overlay-item-anchor-bottom-right\",\"bottom-left\":\"esri-text-overlay-item-anchor-bottom-left\",top:\"esri-text-overlay-item-anchor-top\",\"top-right\":\"esri-text-overlay-item-anchor-top-right\",\"top-left\":\"esri-text-overlay-item-anchor-top-left\",center:\"esri-text-overlay-item-anchor-center\",right:\"esri-text-overlay-item-anchor-right\",left:\"esri-text-overlay-item-anchor-left\"};let l=class extends i{constructor(t){super(t),this.x=0,this.y=0,this.text=\"-\",this.fontSize=14,this.anchor=\"center\",this.visible=!0,this.backgroundColor=\"rgba(0, 0, 0, 0.6)\",this.textColor=\"white\",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(t){this._set(\"x\",t[0]),this._set(\"y\",t[1])}get padding(){return.5*this.fontSize}render(){return r(\"div\",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+\"px\",top:Math.floor(this.y)+\"px\",visibility:this.visible?\"visible\":\"hidden\",fontSize:this.fontSize+\"px\",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+\"px\",borderRadius:this.padding+\"px\",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,\"\");t.font=`${this.fontSize}px ${e}`;const o=this.padding,i=this.padding,r=t.measureText(this.text).width,s=this.fontSize,l=n[this.anchor];t.textAlign=\"center\",t.textBaseline=\"middle\";const h=r+2*o,a=s+2*o,x=this.x+l.x*h,p=this.y+l.y*a;this.roundedRect(t,x,p,h,a,i),t.fillStyle=this.backgroundColor,t.fill();const c=this.x+(l.x+.5)*h,d=this.y+(l.y+.5)*a;this._renderTextShadow(t,this.text,c,d),t.fillStyle=this.textColor,t.fillText(this.text,c,d)}_renderTextShadow(t,e,o,i){t.lineJoin=\"miter\",t.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/h.length})`;const r=this.textShadowSize;for(const[s,l]of h)t.fillText(e,o+r*s,i+r*l)}roundedRect(t,e,o,i,r,s){t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+i-s,o),t.arcTo(e+i,o,e+i,o+s,s),t.lineTo(e+i,o+r-s),t.arcTo(e+i,o+r,e+i-s,o+r,s),t.lineTo(e+s,o+r),t.arcTo(e,o+r,e,o+r-s,s),t.closePath()}_cssClasses(){const t={\"esri-text-overlay-item\":!0};for(const e in s)t[s[e]]=this.anchor===e;return t}};t([e()],l.prototype,\"x\",void 0),t([e()],l.prototype,\"y\",void 0),t([e()],l.prototype,\"position\",null),t([e()],l.prototype,\"text\",void 0),t([e()],l.prototype,\"fontSize\",void 0),t([e()],l.prototype,\"anchor\",void 0),t([e()],l.prototype,\"visible\",void 0),t([e()],l.prototype,\"padding\",null),l=t([o(\"esri.views.overlay.TextOverlayItem\")],l);const n={bottom:{x:-.5,y:-1,textAlign:\"center\",textBaseline:\"bottom\"},\"bottom-left\":{x:0,y:-1,textAlign:\"left\",textBaseline:\"bottom\"},\"bottom-right\":{x:-1,y:-1,textAlign:\"right\",textBaseline:\"bottom\"},center:{x:-.5,y:-.5,textAlign:\"center\",textBaseline:\"middle\"},left:{x:0,y:-.5,textAlign:\"left\",textBaseline:\"middle\"},right:{x:-1,y:-.5,textAlign:\"right\",textBaseline:\"middle\"},top:{x:-.5,y:0,textAlign:\"center\",textBaseline:\"top\"},\"top-left\":{x:0,y:0,textAlign:\"left\",textBaseline:\"top\"},\"top-right\":{x:-1,y:0,textAlign:\"right\",textBaseline:\"top\"}},h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var a=l;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,unwrap as e}from\"../../../../core/maybe.js\";import{createRenderScreenPointArray as s,createRenderScreenPointArray3 as i,createScreenPointArray as o}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{b as a}from\"../../../../chunks/vec3.js\";import n from\"../../../../core/Handles.js\";import{n as h,h as c,e as m,a as l,s as _,l as u,d as p}from\"../../../../chunks/vec2.js\";import{VisualElement as d}from\"./VisualElement.js\";import{screenSpaceTangent as x}from\"../measurementTools/support/viewUtils.js\";import b from\"../../../overlay/LineOverlayItem.js\";import v from\"../../../overlay/TextOverlayItem.js\";class f extends d{constructor(t){super(t.view),this._handles=new n,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor=\"right\",this.applyProps(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this._updateLabelPosition())}overlaps(t){return this.textItem.visible&&t.textItem.visible&&this.view.overlay.overlaps(this._textItem,t.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,t(this.geometry)&&this.view._stage)switch(this.geometry.type){case\"point\":this._computeLabelPositionFromPoint(this.geometry,k)&&(this._textItem.position=[k[0],k[1]],this._textItem.anchor=\"center\",this._showText=!0);break;case\"corner\":this._computeLabelPositionFromCorner(this.geometry,this._distance,k,z)&&(this._showCallout=this._updatePosition(k,z),this._showText=!0);break;case\"segment\":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,k,z)&&(this._showText=!0,this._showCallout=this._updatePosition(k,z))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(t,e){this.view.renderCoordsHelper.toRenderCoords(t,L);const s=this.view._stage.camera;return s.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(s.renderToScreen(R,e),!0)}_computeLabelPositionFromCorner(t,e,s,i){if(!t)return!1;const o=this.view._stage.camera;return w(t.left,1,o,P),h(P,P),w(t.right,0,o,T),c(j,P,T),h(j,j),m(j,j),o.projectToRenderScreen(t.left.endRenderSpace,R),!(R[2]<0||R[2]>1)&&(o.renderToScreen(R,s),l(j,j,e*o.pixelRatio),c(j,j,R),o.renderToScreen(j,i),!0)}_computeLabelPositionFromSegment(t,e,s,i,o){if(!t)return!1;const r=t.segment,a=this.view._stage.camera;x(r.startRenderSpace,r.endRenderSpace,P,a),_(j,-P[1],P[0]);let n=!1;switch(s){case\"top\":n=j[1]<0;break;case\"bottom\":n=j[1]>0;break;case\"left\":n=j[0]>0;break;case\"right\":n=j[0]<0}if(n&&h(j,j),0===u(j))switch(s){case\"top\":j[1]=1;break;case\"bottom\":j[1]=-1;break;case\"left\":j[0]=-1;break;case\"right\":j[0]=1}return r.eval(H[t.sampleLocation],L),a.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(a.renderToScreen(R,i),l(j,j,e*a.pixelRatio),c(j,j,R),a.renderToScreen(j,o),!0)}_updatePosition(t,e){if(e){const s=e[0]-t[0],i=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(s)>Math.abs(i)?s>0?\"left\":\"right\":i>0?\"top\":\"bottom\",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor=\"center\",!1}createResources(){this._textItem=new v({visible:!0}),this._textItem.text=e(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new b({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch(\"camera\",(()=>{this._updateLabelPosition()})))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function w(t,e,s,i){t.eval(e,I,S),a(y,I,S),s.projectToRenderScreen(I,C),s.projectToRenderScreen(y,M),p(i,V,F),m(i,i)}function g(t){switch(t){case\"top\":return\"bottom\";case\"right\":return\"left\";case\"bottom\":return\"top\";case\"left\":return\"right\"}}const I=r(),y=r(),S=r(),P=s(),T=s(),j=s(),L=r(),R=i(),k=o(),z=o(),C=i(),F=C,M=i(),V=M,H={start:0,center:.5,end:1};export{f as LabelVisualElement,g as mirrorPosition,w as screenSpaceTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../chunks/vec3f64.js\";import{e as t,f as s,n as r,g as i,b as n}from\"../../../../../chunks/vec3.js\";import{slerpTangent as c,slerp as p}from\"../../../support/mathUtils.js\";import{getSphericalPCPF as o}from\"../../../../../geometry/projectionEllipsoid.js\";import{canProjectWithoutEngine as a,projectVectorToVector as h}from\"../../../../../geometry/projection.js\";import{sv3d as d}from\"../../../support/stack.js\";class _{constructor(t=e(),s=e()){this.startRenderSpace=t,this.endRenderSpace=s,this.type=\"euclidean\"}eval(e,i,n){return t(i,this.startRenderSpace,this.endRenderSpace,e),n&&(s(n,this.endRenderSpace,this.startRenderSpace),r(n,n)),i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=u;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=t.worldUpAtPosition(this.eval(.5,m),d.get());return n(this.startRenderSpace,c),n(this.endRenderSpace,c),{points:r,normals:i}}}class f{constructor(t,s,r){this.startRenderSpace=t,this.endRenderSpace=s,this.renderSpatialReference=r,this.type=\"geodesic\",this._start=e(),this._end=e(),this._pcpf=o(r),this._project=a(r,this._pcpf),this._projectIn(t,this._start),this._projectIn(s,this._end)}_projectIn(e,t){this._project?h(e,this.renderSpatialReference,t,this._pcpf):i(t,e)}eval(e,i,o){if(this._project)if(o){const t=u;c(this._start,this._end,e,i,t),n(R,i,t),h(i,this._pcpf,i,this.renderSpatialReference),h(R,this._pcpf,R,this.renderSpatialReference),s(o,R,i),r(o,o)}else p(this._start,this._end,e,i),h(i,this._pcpf,i,this.renderSpatialReference);else t(i,this._start,this._end,e),o&&(s(o,this._end,this._start),r(o,o));return i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=R;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=128+1&-2;for(let s=0;s<c;++s){const e=s/(c-1),r=m,i=u;this.eval(e,r),t.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}function l(e,t,s,r){switch(e){case\"euclidean\":return new _(t,s);case\"geodesic\":return new f(t,s,r)}}const m=e(),u=e(),R=e();export{_ as EuclideanSegment,f as GeodesicSegment,l as createSegment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import n from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as m,defaultColorWriteParams as l}from\"../../../webgl/renderState.js\";import{View as p}from\"../core/shaderLibrary/util/View.glsl.js\";import{M as f}from\"../../../../chunks/MeasurementArrow.glsl.js\";class h extends t{constructor(r,e){super(r,e)}initializeProgram(r){const e=h.shader.get().build();return new n(r.rctx,e.generateSource(\"vertex\"),e.generateSource(\"fragment\"),s)}bindPass(r,e,t){p.bindProjectionMatrix(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",e.width),this.program.setUniform1f(\"outlineSize\",e.outlineSize),this.program.setUniform4fv(\"outlineColor\",e.outlineColor),this.program.setUniform1f(\"stripeLength\",e.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",e.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",e.stripeOddColor)}bindDraw(r){p.bindView(this.program,r)}initializePipeline(){return a({polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:m,colorWrite:l})}get primitiveType(){return 5}}h.shader=new e(f,(()=>import(\"./MeasurementArrow.glsl.js\")));class d extends o{constructor(){super(...arguments),this.polygonOffsetEnabled=!1}}r([i()],d.prototype,\"polygonOffsetEnabled\",void 0);export{h as MeasurementArrowTechnique,d as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/vec3f64.js\";import{s as t,n as s,f as r,c as i,k as n,i as o}from\"../../../../chunks/vec3.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as f}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as l,MeasurementArrowTechnique as p}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,g),this.techniqueConfig=new l}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new w}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(){this.technique=this.techniqueRep.acquireAndReleaseExisting(p,this.material.getTechniqueConfig(),this.technique)}beginSlot(e){return 3===e}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const g={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...f},d=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=e(),q=e(),b=e(),x=e(),C=e();class w{constructor(){this.vertexBufferLayout=d}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(e,a,c,u){const f=a.vertexAttributes.get(\"position\").data,l=a.vertexAttributes.get(\"normal\").data,p=f.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(p-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,g=q,d=b,w=x,P=C,j=e.transformation,y=e.invTranspTransformation,L=c.position,M=c.normal,A=c.uv0;let T=0;for(let v=0;v<p;++v){const e=3*v;if(t(m,f[e],f[e+1],f[e+2]),v<p-1){const e=3*(v+1);t(g,f[e],f[e+1],f[e+2]),t(P,l[e],l[e+1],l[e+2]),s(P,P),r(d,g,m),s(d,d),i(w,P,d),s(w,w)}const a=n(m,g);j&&y&&(o(m,m,j),o(g,g,j),o(w,w,y));const c=u+2*v,h=c+1;L.setVec(c,m),L.setVec(h,m),M.setVec(c,w),M.setVec(h,w),A.set(c,0,T),A.set(c,1,-1),A.set(h,0,T),A.set(h,1,1),v<p-1&&(T+=a)}const B=c.auxpos1;for(let t=0;t<2*p;++t)B.set(u+t,T)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{f as s}from\"../../../../chunks/vec3.js\";import i from\"../../../../core/Handles.js\";import{a}from\"../../../../chunks/mat4f64.js\";import{sv3d as o}from\"../../support/stack.js\";import n from\"../../webgl-engine/lib/GeometryUtil.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{MeasurementArrowMaterial as l}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class d extends h{constructor(e){super(e),this._parameters=c,this._handles=null,this._origin=t(),this._originTransform=a(),this._arrowCenter=t(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial.setParameterValues({stripeEvenColor:e})}}createExternalResources(){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial=new l({outlineColor:this._parameters.arrowOutlineColor,stripeEvenColor:e,stripeOddColor:this._parameters.arrowStripeOddColor,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new i,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(r){if(e(this._geometry)||e(this._geometry.startRenderSpace)||e(this._geometry.endRenderSpace))return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);r.addGeometry(t,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,i){const a=this.view.renderCoordsHelper,h=[],l=[],d=(e,r)=>{const i=o.get();s(i,e,t),h.push(i),l.push(r)};if(\"euclidean\"===i.type){i.eval(.5,this._arrowCenter);const t=o.get();a.worldUpAtPosition(this._arrowCenter,t),d(e,t),d(r,t)}else{i.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),s=o.get(),n=o.get();i.eval(t,s),a.worldUpAtPosition(s,n),d(s,n)}}return n.createPolylineGeometry(h,l)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&r(this._geometry)){const e=this.view._stage.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}}const c={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128};export{d as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import n from\"../../../../../core/Accessor.js\";import{onLocaleChange as r}from\"../../../../../intl/locale.js\";import{sign as o,nextHighestPowerOfTen as l,deg2rad as h}from\"../../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as c,createRenderScreenPointArray as d}from\"../../../../../core/screenUtils.js\";import{fetchMessageBundle as u}from\"../../../../../intl/messages.js\";import\"../../../../../intl.js\";import{c as m}from\"../../../../../chunks/vec3f64.js\";import{g,a as _,b as p}from\"../../../../../chunks/vec3.js\";import v from\"../../../../../core/Handles.js\";import{whenOnce as b}from\"../../../../../core/watchUtils.js\";import{getReferenceEllipsoid as L}from\"../../../../../geometry/projectionEllipsoid.js\";import{preferredImperialLengthUnit as w,convertUnit as y}from\"../../../../../core/unitUtils.js\";import{formatDecimal as j,formatDMS as z,formatImperialLength as f,formatImperialVerticalLength as O,formatMetricLength as E,formatMetricVerticalLength as D}from\"../../../../../core/quantityFormatUtils.js\";import{g as S}from\"../../../../../chunks/vec2.js\";import{f as P}from\"../../../../../chunks/vec4f32.js\";import{createStipplePatternSimple as M}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{RightAngleQuadVisualElement as V}from\"../../visualElements/RightAngleQuadVisualElement.js\";import{screenSpaceTangent as A}from\"../../measurementTools/support/viewUtils.js\";import{LabelVisualElement as C,mirrorPosition as k}from\"../../visualElements/LabelVisualElement.js\";import{LineVisualElement as H}from\"../../visualElements/LineVisualElement.js\";import{GeodesicSegment as G,EuclideanSegment as R}from\"../../visualElements/support/Segment.js\";import{MeasurementArrowVisualElement as T}from\"../../visualElements/MeasurementArrowVisualElement.js\";let U=class extends n{constructor(e){super(e),this._params={...B},this._handles=new v,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._segmentLabelDisplayedMeasurement=\"euclidean\",this._startPosition=m(),this._endPosition=m(),this._cornerPosition=m(),this._startPositionAtSeaLevel=m(),this._endPositionAtSeaLevel=m(),this._viewMode=\"none\",this._geometryDirty=!0,this.state=\"pending\",this.messages=null,this._visualizedMeasurement=\"auto\",this._actualVisualizedMeasurement=\"euclidean\",this._visualElementOrientation=\"auto\",this._triangleOrientationOverride=null,this._triangleCollapseRatioThreshold=.03,this._geodesicDistanceThreshold=1e5}initialize(){this._handles.add(b(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"ready\":throw new Error(\"invalid state\");case\"destroyed\":return}this._segmentVisualElement=new T({attached:!0,view:this.view,geometry:null,renderOccluded:4}),this._triangleVisualElement=new H({attached:!0,view:this.view,width:this._params.triangleLineWidth,color:this._params.triangleColor,renderOccluded:4}),this._rightAngleQuad=new V({attached:!0,view:this.view,color:I,renderOccluded:4}),this._projectedGeodesicLine=new H({attached:!0,view:this.view,width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicStartHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicEndHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._segmentLabel=new C({attached:!0,view:this.view,fontSize:this._params.direcLabelFontSize}),this._verticalLabel=new C({attached:!0,view:this.view,fontSize:this._params.verticalLabelFontSize}),this._horizontalLabel=new C({attached:!0,view:this.view,fontSize:this._params.horizontalLabelFontSize}),this._handles.add([this.dataObject.watch(\"visible\",(()=>this._update(!1)),!0),this.dataObject.watch(\"startPoint\",(()=>this._update()),!0),this.dataObject.watch(\"endPoint\",(()=>this._update()),!0),this.dataObject.watch(\"measurement\",(()=>this._update()),!0),this.dataObject.watch(\"settings.unit\",(()=>{this._updateLabels(),this._updateSegmentStripeLength()}),!0),this.view.state.watch(\"camera\",(()=>this._update()),!0),r((async()=>this._updateMessageBundle()))]),this._set(\"state\",\"ready\"),this._updateMessageBundle(),this._update()}async whenReady(){return b(this,\"ready\").then((()=>{}))}get ready(){return\"ready\"===this.state}get viewMode(){return this._viewMode}get visualizedMeasurement(){return this._visualizedMeasurement}set visualizedMeasurement(e){e!==this._visualizedMeasurement&&(this._visualizedMeasurement=e,this._update())}get actualVisualizedMeasurement(){return this._actualVisualizedMeasurement}get visualElementsOrientation(){return this._visualElementOrientation}set visualElementsOrientation(e){e!==this._visualElementOrientation&&(this._visualElementOrientation=e,this._update())}get allowVisualElementsOrientationChange(){return t(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){t(this._triangleOrientationOverride)!==e&&(t(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():(this._triangleOrientationOverride=null,this._update()))}get triangleCollapseRatioThreshold(){return this._triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._triangleCollapseRatioThreshold=e,this._update()}get geodesicDistanceThreshold(){return this._geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this._geodesicDistanceThreshold=e,this._update()}get segmentLabel(){return this._segmentLabel}get horizontalLabel(){return this._horizontalLabel}get verticalLabel(){return this._verticalLabel}get testData(){let e=null;const t=\"geodesic\"===this.actualVisualizedMeasurement;return e={direct:t?this.horizontalLabel:this.segmentLabel,horizontal:t?this.segmentLabel:this.horizontalLabel,vertical:this.verticalLabel},{labels:e,stripeLength:this._segmentVisualElement.stripeLength}}_update(e=!0){switch(this.state){case\"destroyed\":case\"pending\":return}const t=this.dataObject.visible;switch(this._geometryDirty=e,this._geometryDirty&&t&&(this._updateGeometryAndViewMode(),this._geometryDirty=!1),this._viewMode){case\"none\":this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-triangle\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=t,this._rightAngleQuad.visible=t,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-projection\":this._segmentVisualElement.visible=t,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}this._updateLabels()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._segmentVisualElement.destroy(),this._segmentVisualElement=null,this._triangleVisualElement.destroy(),this._triangleVisualElement=null,this._rightAngleQuad.destroy(),this._rightAngleQuad=null,this._projectedGeodesicLine.destroy(),this._projectedGeodesicLine=null,this._geodesicStartHint.destroy(),this._geodesicStartHint=null,this._geodesicEndHint.destroy(),this._geodesicEndHint=null,this._segmentLabel.destroy(),this._segmentLabel=null,this._verticalLabel.destroy(),this._verticalLabel=null,this._horizontalLabel.destroy(),this._horizontalLabel=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}_updateGeometryAndViewMode(){const e=this.view,i=e.renderCoordsHelper;if(t(this.dataObject.startPoint)||t(this.dataObject.endPoint)||this.dataObject.startPoint.equals(this.dataObject.endPoint))return this._viewMode=\"none\",void(this._actualVisualizedMeasurement=\"auto\"===this._visualizedMeasurement?\"euclidean\":this._visualizedMeasurement);i.toRenderCoords(this.dataObject.startPoint,this._startPosition),i.toRenderCoords(this.dataObject.endPoint,this._endPosition);const s=this._getActualVisualElementsOrientation(),a=this._updateActualVisualizedMeasurement();this._viewMode=this._computeViewMode(a);let n=this._startPosition,r=this._endPosition;const o=\"above-segment\"===s?1:-1,l=o*(i.getAltitude(r)-i.getAltitude(n));l<0&&(n=this._endPosition,r=this._startPosition);const h=\"geodesic\"===a?new G(this._startPosition,this._endPosition,i.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=a,this._viewMode){case\"segment\":this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"};break;case\"segment-and-triangle\":{const t=this._cornerPosition;i.worldUpAtPosition(n,t),_(t,t,o*Math.abs(l)),p(t,t,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[t[0],t[1],t[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:n,center:t,next:r};const a=new R(n,t),c=new R(t,r),d=W(n,r,t,s,e.state.camera);this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._segmentLabel.anchor=d.segment,this._verticalLabel.geometry={type:\"segment\",segment:a,sampleLocation:\"center\"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._horizontalLabel.anchor=d.horizontal;break}case\"segment-and-projection\":{g(this._startPositionAtSeaLevel,this._startPosition),g(this._endPositionAtSeaLevel,this._endPosition),i.setAltitude(0,this._startPositionAtSeaLevel),i.setAltitude(0,this._endPositionAtSeaLevel);const e=new G(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,i.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(e),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"},this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\";break}}}_updateLabels(){switch(this.state){case\"pending\":case\"destroyed\":return}const e=this.messages,i=this.dataObject.measurement;if(t(i)||!e)return this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,void(this._verticalLabel.visible=!1);const s={verticalDistance:\"\",horizontalDistance:\"\",euclideanDistance:\"\",geodesicDistance:\"\"},a=i.directDistance,n=i.horizontalDistance,r=i.verticalDistance,o=i.geodesicDistance,l=i.geodesicAngle;switch(this.dataObject.settings.unit){case\"metric\":s.euclideanDistance=a&&E(e,a),s.horizontalDistance=n&&E(e,n),s.verticalDistance=r&&D(e,r),s.geodesicDistance=o&&E(e,o);break;case\"imperial\":s.euclideanDistance=a&&f(e,a),s.horizontalDistance=n&&f(e,n),s.verticalDistance=r&&O(e,r),s.geodesicDistance=o&&f(e,o);break;case\"degrees\":{const t=l&&j(e,l,\"degrees\");s.euclideanDistance=t,s.horizontalDistance=t,s.geodesicDistance=t;break}case\"degrees-minutes-seconds\":s.horizontalDistance=l&&z(l);break;default:{const t=this.dataObject.settings.unit;s.euclideanDistance=a&&j(e,a,t),s.horizontalDistance=n&&j(e,n,t),s.verticalDistance=r&&j(e,r,t),s.geodesicDistance=o&&j(e,o,t);break}}this._segmentLabel.text=\"euclidean\"===this._segmentLabelDisplayedMeasurement?s.euclideanDistance:s.geodesicDistance,this._horizontalLabel.text=s.horizontalDistance,this._verticalLabel.text=s.verticalDistance;const h=this.dataObject.visible;switch(this._viewMode){case\"none\":this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment-and-triangle\":this._segmentLabel.visible=h,this._horizontalLabel.visible=h,this._verticalLabel.visible=h;break;case\"segment-and-projection\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1}this.notifyChange(\"segmentLabel\"),this.notifyChange(\"horizontalLabel\"),this.notifyChange(\"verticalLabel\")}_updateSegmentStripeLength(){const e=Q(this.view,this.dataObject);i(e)?(this._segmentVisualElement.stripeLength=e,this._segmentVisualElement.stripesEnabled=!0):this._segmentVisualElement.stripesEnabled=!1}_computeViewMode(e){const i=this.dataObject,s=i.measurement;if(\"geodesic\"===e){if(!x(i,this.geodesicDistanceThreshold))return\"segment\";if(F(this.view,this._startPosition)||F(this.view,this._endPosition))return\"segment-and-projection\"}if(t(s))return\"segment\";return Math.min(s.verticalDistance.value/s.horizontalDistance.value,s.horizontalDistance.value/s.verticalDistance.value)<this.triangleCollapseRatioThreshold?\"segment\":\"segment-and-triangle\"}_getActualVisualElementsOrientation(){return i(this._triangleOrientationOverride)?this._triangleOrientationOverride:\"auto\"===this.visualElementsOrientation?this.view.state.camera.aboveGround?\"above-segment\":\"below-segment\":this.visualElementsOrientation}_updateActualVisualizedMeasurement(){if(\"auto\"===this._visualizedMeasurement){this._actualVisualizedMeasurement=\"euclidean\";const e=this.dataObject.settings.unit;\"degrees\"!==e&&\"degrees-minutes-seconds\"!==e||(this._actualVisualizedMeasurement=\"geodesic\"),x(this.dataObject,this.geodesicDistanceThreshold)&&(this._actualVisualizedMeasurement=\"geodesic\")}else this._actualVisualizedMeasurement=this._visualizedMeasurement;return this._actualVisualizedMeasurement}_updateMessageBundle(){u(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._updateLabels()}))}};function x(e,t){return i(e.measurement)&&e.measurement.horizontalDistance&&e.measurement.horizontalDistance.value>t}function F(e,t){if(!e.state)return!1;const i=e.state.camera,s=e.renderCoordsHelper,a=i.computeScreenPixelSizeAt(t);return s.getAltitude(t)/a>=10}function W(e,t,i,s,a){const n=J,r=K;a.projectToRenderScreen(i,n),a.projectToRenderScreen(t,r);const l={segment:\"bottom\",horizontal:\"top\",vertical:n[0]<r[0]?\"left\":\"right\"};{const s=N,n=X;if(A(e,i,s,a),A(e,t,n,a),S(s,n)>=q)l.segment=o(s[1])===o(n[1])?k(l.vertical):l.vertical;else{const e=Y;A(i,t,e,a),S(e,n)>=q&&(l.segment=o(e[0])===o(n[0])?k(l.horizontal):l.horizontal)}}if(\"below-segment\"===s){const e=e=>\"top\"===e?\"bottom\":\"top\";l.segment=e(l.segment),l.horizontal=e(l.horizontal),l.vertical=e(l.vertical)}return l}function Q(e,t){let s=null;if(i(t.measurement)){const e=t.measurement.directDistance;switch(t.settings.unit){case\"metric\":s=e&&e.toUnit(\"meters\");break;case\"imperial\":s=e&&e.toUnit(w(e.value,e.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const e=t.measurement.geodesicAngle;s=e&&e.toUnit(\"degrees\");break}default:s=e&&e.toUnit(t.settings.unit)}}if(s){let t=1;return t=l(s.value/30),t*=\"degrees\"===s.unit?L(e.spatialReference).metersPerDegree:y(1,s.unit,\"meters\"),t}return null}e([s({readOnly:!0})],U.prototype,\"state\",void 0),e([s()],U.prototype,\"ready\",null),e([s()],U.prototype,\"messages\",void 0),e([s()],U.prototype,\"view\",void 0),e([s()],U.prototype,\"dataObject\",void 0),e([s()],U.prototype,\"viewMode\",null),e([s()],U.prototype,\"segmentLabel\",null),e([s()],U.prototype,\"horizontalLabel\",null),e([s()],U.prototype,\"verticalLabel\",null),U=e([a(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DView\")],U);const I=P(1,.5,0,.75),B={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:I,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:I,guideLineWidth:2,guideLineColor:I,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},q=Math.cos(h(12)),J=c(),K=c(),N=d(),X=d(),Y=d();export{U as DirectLineMeasurement3DView};\n"],"sourceRoot":""}