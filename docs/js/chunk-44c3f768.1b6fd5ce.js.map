{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/tasks/support/GPMessage.js","webpack:///./node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js","webpack:///./node_modules/@arcgis/core/tasks/support/RouteResult.js","webpack:///./node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","webpack:///./node_modules/@arcgis/core/rest/networkUtils.js","webpack:///./node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js","webpack:///./node_modules/@arcgis/core/rest/route.js","webpack:///./node_modules/@arcgis/core/tasks/RouteTask.js","webpack:///./node_modules/@arcgis/core/core/queryUtils.js","webpack:///./node_modules/@arcgis/core/tasks/support/NAMessage.js"],"names":["p","esriJobMessageTypeInformative","esriJobMessageTypeProcessDefinition","esriJobMessageTypeProcessStart","esriJobMessageTypeProcessStop","esriJobMessageTypeWarning","esriJobMessageTypeError","esriJobMessageTypeEmpty","esriJobMessageTypeAbort","i","r","super","this","description","type","String","json","write","prototype","read","a","async","l","e","data","supportedTravelModes","t","defaultTravelMode","s","length","query","f","token","error","c","substring","indexOf","owningSystemUrl","o","n","test","path","u","serviceName","d","results","paramName","value","features","attributes","JSON","parse","TravelMode","push","_serviceDescriptionPromise","_fetchServiceDescription","url","parsedUrl","id","itemId","currentVersion","hasZ","z","console","log","directions","route","routeName","stops","fromJSON","map","barriers","messages","pointBarriers","polylineBarriers","polygonBarriers","routeResults","aliasOf","forEach","geometry","routes","spatialReference","v","m","h","g","Name","RouteName","splice","T","extent","geometryType","routeId","totalDriveTime","totalLength","totalTime","_decompressFeatureGeometry","summary","envelope","strings","events","x","point","y","ETA","arriveTimeUTC","get","_mergePolylinesToSinglePath","_decompressGeometry","compressedGeometry","match","parseInt","paths","hasM","concat","source","readOnly","accumulateAttributes","name","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","outSpatialReference","getter","wkid","restrictionAttributes","travelMode","B","then","slice","Promise","resolve","dontCheck","toQueryParams","endsWith","Array","isArray","_options","toJSON","Object","keys","join","stringify","0","1","2","3","50","100","101","200"],"mappings":"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","file":"js/chunk-44c3f768.1b6fd5ce.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";const p=new s({esriJobMessageTypeInformative:\"informative\",esriJobMessageTypeProcessDefinition:\"process-definition\",esriJobMessageTypeProcessStart:\"process-start\",esriJobMessageTypeProcessStop:\"process-stop\",esriJobMessageTypeWarning:\"warning\",esriJobMessageTypeError:\"error\",esriJobMessageTypeEmpty:\"empty\",esriJobMessageTypeAbort:\"abort\"});let i=class extends t{constructor(r){super(r),this.description=null,this.type=null}};r([e({type:String,json:{write:!0}})],i.prototype,\"description\",void 0),r([e({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([o(\"esri.tasks.support.GPMessage\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{getDeepValue as r}from\"../../core/object.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import{urlToObject as i}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../request.js\";import n from\"../Task.js\";async function l(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(t){throw new o(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}async function c(e,t){const{data:s}=await a(e.substring(0,e.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\",token:t}});if(!s||!s.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=s.owningSystemUrl;const{data:o}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\",token:t}}),n=r(\"helperServices.routingUtilities.url\",o);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const l=i(e),c=/\\/solveClosestFacility$/.test(l.path)?\"Route\":/\\/solveClosestFacility$/.test(l.path)?\"ClosestFacility\":\"ServiceAreas\",u=await a(n+(\"/\"===n[n.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:c,token:t}}),p=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);p.push(r)}}else\"defaultTravelMode\"===r.paramName&&(d=r.value)}return{supportedTravelModes:p,defaultTravelMode:d}}const u=r=>{let i=class extends r{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o(\"network-service:missing-url\",\"Url to Network service is missing\");const r=this.url,{data:t}=await a(r,{query:{f:\"json\",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);const s=t.currentVersion>=10.4?l(r,e):c(r,e),{defaultTravelMode:i,supportedTravelModes:n}=await s;return t.defaultTravelMode=i,t.supportedTravelModes=n,t}_isInputGeometryZAware(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}};return i=e([s(\"esri.tasks.mixins.NAServiceDescription\")],i),i};let p=class extends(u(n)){};p=e([s(\"esri.tasks.mixins.NAServiceDescription\")],p);export{p as NAServiceDescription,u as NAServiceDescriptionMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getDeepValue as e}from\"../core/object.js\";import{isSome as t}from\"../core/maybe.js\";import r from\"../core/Error.js\";import s from\"../request.js\";import{parseUrl as o}from\"./utils.js\";import a from\"../tasks/support/RouteResultsContainer.js\";function l(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}function n(e,t){for(let r=0;r<t.length;r++){const s=e[t[r]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function i(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:l=null}={},stops:{features:n=[],spatialReference:i=null}={},barriers:u,polygonBarriers:d,polylineBarriers:p,messages:f}=e.data,c=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let v,m,h=!0;const g=o&&l||n&&i||u&&u.spatialReference||d&&d.spatialReference||p&&p.spatialReference;s.forEach((e=>{t.push(v=e.routeName),r[v]={directions:e}})),o.forEach((e=>{-1===t.indexOf(v=e.attributes.Name)&&(t.push(v),r[v]={}),e.geometry&&(e.geometry.spatialReference=g),r[v].route=e})),n.forEach((e=>{m=e.attributes,-1===t.indexOf(v=m.RouteName||c)&&(t.push(v),r[v]={}),v!==c&&(h=!1),e.geometry&&(e.geometry.spatialReference=g),null==r[v].stops&&(r[v].stops=[]),r[v].stops.push(e)})),n.length>0&&!0===h&&(r[t[0]].stops=r[c].stops,delete r[c],t.splice(t.indexOf(c),1));const T=t.map((e=>(r[e].routeName=e===c?null:e,r[e])));return a.fromJSON({routeResults:T,pointBarriers:u,polygonBarriers:d,polylineBarriers:p,messages:f})}function u(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}async function d(e){if(!e)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const{data:t}=await s(e,{query:{f:\"json\"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);const o=t.currentVersion>=10.4?f(e):p(e),{defaultTravelMode:a,supportedTravelModes:l}=await o;return t.defaultTravelMode=a,t.supportedTravelModes=l,t}async function p(t){const{data:r}=await s(t.substring(0,t.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};t=r.owningSystemUrl;const{data:a}=await s(t+(\"/\"===t[t.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\"}}),l=e(\"helperServices.routingUtilities.url\",a);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const n=o(t),i=/\\/solve$/.test(n.path)?\"Route\":/\\/solveClosestFacility$/.test(n.path)?\"ClosestFacility\":\"ServiceAreas\",u=await s(l+(\"/\"===l[l.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:i}}),d=[];let p=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if(\"supportedTravelModes\"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else\"defaultTravelMode\"===t.paramName&&(p=t.value)}return{supportedTravelModes:d,defaultTravelMode:p}}async function f(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await s(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}export{l as collectGeometries,n as dropZValuesOffInputGeometry,d as fetchServiceDescription,p as fetchTravelModesGP,i as handleSolveResponse,u as isInputGeometryZAware,f as retrieveTravelModes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../geometry/SpatialReference.js\";import p from\"../../geometry/Point.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import m from\"../../Graphic.js\";import l from\"./FeatureSet.js\";let u=class extends l{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType=\"polyline\",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const o=a.fromJSON(r.spatialReference);return e.map((e=>{const r=m.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&(t(r.geometry).spatialReference=o),r.strings=e.strings,r.events=(e.events||[]).map((t=>{const r=new m({geometry:new p({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>t(e))),r=this.get(\"extent.spatialReference\");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,o=0,s=0,a=0;const p=[];let n,i,m,l,u,c,y,g,h=0,f=0,d=0;if(u=e.match(/((\\+|\\-)[^\\+\\-\\|]+|\\|)/g),u||(u=[]),0===parseInt(u[h],32)){h=2;const e=parseInt(u[h],32);h++,c=parseInt(u[h],32),h++,1&e&&(f=u.indexOf(\"|\")+1,y=parseInt(u[f],32),f++),2&e&&(d=u.indexOf(\"|\",f)+1,g=parseInt(u[d],32),d++)}else c=parseInt(u[h],32),h++;for(;h<u.length&&\"|\"!==u[h];){n=parseInt(u[h],32)+r,h++,r=n,i=parseInt(u[h],32)+o,h++,o=i;const e=[n/c,i/c];f&&(l=parseInt(u[f],32)+s,f++,s=l,e.push(l/y)),d&&(m=parseInt(u[d],32)+a,d++,a=m,e.push(m/g)),p.push(e)}return{paths:[p],hasZ:f>0,hasM:d>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{r=r.concat(e)}))}));const o=[];let s=[0,0];return r.forEach((e=>{e[0]===s[0]&&e[1]===s[1]||(o.push(e),s=e)})),new i({paths:[o]},t)}};e([r({type:n,json:{read:{source:\"summary.envelope\"}}})],u.prototype,\"extent\",void 0),e([r()],u.prototype,\"features\",void 0),e([o(\"features\")],u.prototype,\"readFeatures\",null),e([r()],u.prototype,\"geometryType\",void 0),e([r({readOnly:!0})],u.prototype,\"mergedGeometry\",null),e([r()],u.prototype,\"routeId\",void 0),e([r()],u.prototype,\"routeName\",void 0),e([r({value:null,readOnly:!0})],u.prototype,\"strings\",null),e([r({json:{read:{source:\"summary.totalDriveTime\"}}})],u.prototype,\"totalDriveTime\",void 0),e([r({json:{read:{source:\"summary.totalLength\"}}})],u.prototype,\"totalLength\",void 0),e([r({json:{read:{source:\"summary.totalTime\"}}})],u.prototype,\"totalTime\",void 0),u=e([s(\"esri.tasks.support.DirectionsFeatureSet\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{normalizeCentralMeridian as r}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t}from\"./utils.js\";import{createQueryParamsHelper as s}from\"../core/queryUtils.js\";import{collectGeometries as o,isInputGeometryZAware as i,fetchServiceDescription as a,dropZValuesOffInputGeometry as n,handleSolveResponse as u}from\"./networkUtils.js\";const p=s({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},stops:!0,travelMode:!0});async function m(s,m,l){const c=[],f=[],y={},B={},h=t(s);return m.stops&&m.stops.features&&o(m.stops.features,f,\"stops.features\",y),m.pointBarriers&&m.pointBarriers.features&&o(m.pointBarriers.features,f,\"pointBarriers.features\",y),m.polylineBarriers&&m.polylineBarriers.features&&o(m.polylineBarriers.features,f,\"polylineBarriers.features\",y),m.polygonBarriers&&m.polygonBarriers.features&&o(m.polygonBarriers.features,f,\"polygonBarriers.features\",y),r(f).then((e=>{for(const r in y){const t=y[r];c.push(r),B[r]=e.slice(t[0],t[1])}return i(B,c)?a(h.path):Promise.resolve({dontCheck:!0})})).then((r=>{(\"dontCheck\"in r?r.dontCheck:r.hasZ)||n(B,c);for(const e in B)B[e].forEach(((r,t)=>{m.get(e)[t].geometry=r}));const t={...l,query:{...h.query,...p.toQueryParams(m),f:\"json\"}},{path:s}=h,o=\"/solve\",i=s.endsWith(o)?s:s+o;return e(i,t)})).then((e=>u(e)))}export{m as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import o from\"./Task.js\";import{solve as e}from\"../rest/route.js\";import{NAServiceDescriptionMixin as t}from\"./mixins/NAServiceDescription.js\";let p=class extends(t(o)){constructor(r){super(r)}solve(r,s){return e(this.url,r,s)}};p=r([s(\"esri.tasks.RouteTask\")],p);var c=p;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=t=>{if(!Array.isArray(t))return!1;const[e]=t;return\"number\"==typeof e||\"string\"==typeof e};class e{constructor(t={}){this._options=t}toQueryParams(e){if(!e)return null;const o=e.toJSON(),n={};return Object.keys(o).forEach((e=>{const r=this._options[e];if(r){const s=\"boolean\"!=typeof r&&r.name?r.name:e,i=\"boolean\"!=typeof r&&r.getter?r.getter(o):o[e];null!=i&&(n[s]=t(i)?i.join(\",\"):\"object\"==typeof i?JSON.stringify(i):i)}else n[e]=o[e]}),this),n}}function o(t){return new e(t)}export{o as createQueryParamsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./GPMessage.js\";const p=new s({0:\"informative\",1:\"process-definition\",2:\"process-start\",3:\"process-stop\",50:\"warning\",100:\"error\",101:\"empty\",200:\"abort\"});let i=class extends t{constructor(r){super(r),this.type=null}};r([o({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([e(\"esri.tasks.support.NAMessage\")],i);var c=i;export default c;\n"],"sourceRoot":""}