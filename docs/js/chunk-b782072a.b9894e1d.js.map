{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/MapImageLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/MapImageLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","webpack:///./node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js"],"names":["t","e","xoffset","Math","max","abs","yoffset","n","r","length","s","size","stops","filter","type","map","maxSize","minSize","o","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","c","y","this","exportImageParameters","layer","destroy","commitProperty","_get","Promise","reject","p","get","i","m","async","minScale","maxScale","visible","sublayers","popupEnabled","defaultPopupTemplateEnabled","unshift","sublayer","popupTemplate","toArray","reverse","all","load","catch","a","createQuery","createFetchPopupFeaturesQueryGeometry","geometry","outFields","_loadArcadeModules","arcadeUtils","hasGeometryOperations","maxAllowableOffset","width","queryFeatures","features","reduce","value","super","canResume","timeExtent","isEmpty","prototype","readOnly","height","round","createSquareGeometry","min","h","u","l","g","w","Float64Array","d","Float32Array","Uint32Array","x","M","v","b","data","exclusive","getLogger","T","arguments","drapeSourceType","fullExtentInLocalViewSpatialReference","maximumDataResolution","_images","Array","_extents","_overlayExtents","updateWhenStationary","addResolvingPromise","then","_set","updatingHandles","add","_suspendedChangeHandler","handles","view","resourceController","scheduler","registerIdleStateCallbacks","_isScaleRangeActive","notifyChange","_isScaleRangeLayer","viewingMode","basemapTerrain","_updateImageExtent","clear","extent","spatialReference","resolution","renderLocalOrigin","pixelRatio","_clippedExtent","H","imageMaxWidth","imageMaxHeight","_imageSizeDiffers","imageSize","suspended","_fetch","error","_clearImage","push","scale","some","loadingPromise","HTMLImageElement","HTMLCanvasElement","image","contains","_createStageObjects","TESTS_DISABLE_UPDATE_THRESHOLDS","texture","material","rendergeometry","loadingAbortController","pixelData","renderExtent","abort","signal","_waitFetchReady","requestAsImageElement","getFetchOptions","timestamp","refreshTimestamp","fetchImage","warnOnce","processResult","_stage","overlayManager","removeGeometries","remove","preMultiplyAlpha","wrap","transparent","textureId","id","setParameterValues","console","origin","addGeometries","ready","refresh","O","addPromise","refreshDebounced","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","indexOf","keyField","defaultPopupTemplate","shader","configuration","build","output","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","rctx","generateSource","bindProjectionMatrix","program","camera","projectionMatrix","setUniform1f","opacity","setUniform2fv","nearFar","inverseViewport","bindView","bindUniformsWithOrigin","face","mode","blending","S","culling","cullFace","depthTest","func","depthWrite","writeDepth","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","polygonOffset","enableOffset","_occludeePipelineState","setPipelineState","pipeline","count","supportsEdges","techniqueConfig","params","relativeElevation","updateParameters","updateTexture","technique","techniqueRep","acquireAndReleaseExisting","getTechniqueConfig","hasOccludees","_updateOccludeeState","bindProgram","bindTexture","bindTextureScale","bindPass","getPipelineState","initTextureTransparent","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","ymin","xmax","ymax","toMap","intersects","fullExtent","resolve","clone","state","isLocal","portalItem","destroyed","include","linearDepth","vertex","uniforms","attributes","varyings","code","fragment","float","Object","freeze","__proto__"],"mappings":"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","file":"js/chunk-b782072a.b9894e1d.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as a}from\"../../core/promiseUtils.js\";import{loadArcade as p}from\"../../support/arcadeOnDemand.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import{ExportImageParameters as m}from\"../../layers/support/ExportImageParameters.js\";import{calculateTolerance as l}from\"../../renderers/support/clickToleranceUtils.js\";import{getRequiredFields as u,getFetchPopupTemplate as n}from\"./support/popupUtils.js\";const c=c=>{let y=class extends c{initialize(){this.exportImageParameters=new m({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)return Promise.reject(new s(\"mapimagelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:o}));const p=this.get(\"view.scale\"),i=[],m=async e=>{const o=0===e.minScale||p<=e.minScale,s=0===e.maxScale||p>=e.maxScale;if(e.visible&&o&&s)if(e.sublayers)e.sublayers.forEach(m);else if(e.popupEnabled){const o=n(e,{...t,defaultPopupTemplateEnabled:!1});r(o)&&i.unshift({sublayer:e,popupTemplate:o})}},c=o.sublayers.toArray().reverse().map(m);await Promise.all(c);const y=i.map((async({sublayer:o,popupTemplate:s})=>{await o.load().catch((()=>{}));const a=o.createQuery(),p=r(t)?t.event:null,i=l({renderer:o.renderer,event:p}),m=this.createFetchPopupFeaturesQueryGeometry(e,i);a.geometry=m,a.outFields=await u(o,s);const n=await this._loadArcadeModules(s);n&&n.arcadeUtils.hasGeometryOperations(s)||(a.maxAllowableOffset=m.width/i);return(await o.queryFeatures(a)).features}));return(await a(y)).reduce(((e,r)=>r.value?[...e,...r.value]:e),[]).filter((e=>null!=e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return p()}};return e([t()],y.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],y.prototype,\"exportImageVersion\",null),e([t()],y.prototype,\"layer\",void 0),e([t()],y.prototype,\"suspended\",void 0),e([t(i)],y.prototype,\"timeExtent\",void 0),y=e([o(\"esri.views.layers.MapImageLayerView\")],y),y};export default c;export{c as MapImageLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as n}from\"../../../../geometry/support/aaBoundingRect.js\";import{Geometry as i}from\"../../webgl-engine/lib/Geometry.js\";import o from\"../../webgl-engine/lib/GeometryUtil.js\";function r(n,i,o){const r=t(n)/e(n),a={width:o,height:o};return r>1.0001?a.height=o/r:r<.9999&&(a.width=o*r),a.width=Math.round(a.width/(t(n)/t(i))),a.height=Math.round(a.height/(e(n)/e(i))),a}function a(t,e){const n=[[t[0],t[1],e],[t[2],t[1],e],[t[2],t[3],e],[t[0],t[3],e]];return o.createSquareGeometry(n)}function h(t,e,o){if(!n(t,e))return a(e,o);const r=[t[1]-e[1],Math.min(t[3],e[3])-Math.max(t[1],e[1]),e[3]-t[3],123456],h=[t[0]-e[0],Math.min(t[2],e[2])-Math.max(t[0],e[0]),e[2]-t[2],123456],u=e[2]-e[0],l=e[3]-e[1],c=h[0]>0&&h[2]>0?3:2,m=r[0]>0&&r[2]>0?3:2,g=(m+1)*(c+1),w=new Float64Array(3*g),d=new Float32Array(2*g),f=new Uint32Array(6*(m*c-1));let p=0,y=0,x=0,M=0,v=0;for(let n=0;n<4;n++){const t=r[n];if(t<=0)continue;let i=0;for(let r=0;r<4;r++){const t=h[r];t<=0||(w[y++]=e[0]+i,w[y++]=e[1]+p,w[y++]=o,d[x++]=i/u,d[x++]=p/l,r<3&&n<3&&(1!==r||1!==n)&&(f[v++]=M,f[v++]=M+1,f[v++]=M+c+1,f[v++]=M+1,f[v++]=M+c+2,f[v++]=M+c+1),M++,i+=t)}p+=t}const b=new Uint32Array(f.length);return new i([[\"position\",{size:3,data:w,exclusive:!0}],[\"normal\",{size:3,data:s,exclusive:!0}],[\"uv0\",{size:2,data:d,exclusive:!0}]],[[\"position\",f],[\"normal\",b],[\"uv0\",f]])}const s=[0,0,1];export{r as computeImageExportSize,a as createGeometryForExtent,h as createOuterImageGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as a,eachAlways as s,createAbortController as n,onAbort as o,isAborted as l,createAbortError as h,always as m,throwIfAborted as d}from\"../../../core/promiseUtils.js\";import c from\"../../../geometry/Extent.js\";import{forEach as g}from\"../../../core/asyncUtils.js\";import{whenOnce as u}from\"../../../core/watchUtils.js\";import{create as p,equals as y,width as f,height as x,set as w,intersection as _}from\"../../../geometry/support/aaBoundingRect.js\";import{RefreshableLayerView as v}from\"../../layers/RefreshableLayerView.js\";import R from\"../support/debugFlags.js\";import{RenderGeometry as S}from\"../webgl-engine/lib/RenderGeometry.js\";import{Texture as b}from\"../webgl-engine/lib/Texture.js\";import{LayerView3D as E}from\"./LayerView3D.js\";import j from\"../../layers/LayerView.js\";import{ImageMaterial as I}from\"../webgl-engine/materials/ImageMaterial.js\";import{computeImageExportSize as L,createGeometryForExtent as A,createOuterImageGeometry as C}from\"./support/overlayImageUtils.js\";import{toViewIfLocal as D}from\"./support/projectExtentUtils.js\";const M=t.getLogger(\"esri.views.3d.layers.DynamicLayerView3D\");let T=class extends(v(E(j))){constructor(){super(...arguments),this.drapeSourceType=0,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlayExtents=new Array,this.updateWhenStationary=!0}initialize(){this.addResolvingPromise(D(this).then((e=>this._set(\"fullExtentInLocalViewSpatialReference\",e)))),this.updatingHandles.add(this,\"suspended\",(()=>this._suspendedChangeHandler())),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange(\"suspended\")}),(()=>{}))),this._isScaleRangeLayer()&&this.updatingHandles.add(this.layer,\"scaleRangeId\",(()=>this.notifyChange(\"suspended\"))),\"local\"===this.view.viewingMode&&this.updatingHandles.add(this.view.basemapTerrain,\"extent\",(()=>this._overlayExtents.forEach(((e,t)=>this._updateImageExtent(t)))))}destroy(){this.clear()}setDrapingExtent(e,t,i,r,a,s){this._overlayExtents[e]={extent:p(t),spatialReference:i,resolution:r,renderLocalOrigin:a,pixelRatio:s},this._updateImageExtent(e)}_updateImageExtent(e){const t=this._overlayExtents[e],i=this._clippedExtent(t.extent,H),r=L(t.extent,i,t.resolution);let s=t.pixelRatio*this.view.pixelRatio;if(\"imageMaxWidth\"in this.layer||\"imageMaxHeight\"in this.layer){const e=this.layer.imageMaxWidth,t=this.layer.imageMaxHeight;if(r.width>e){const t=e/r.width;r.height=Math.floor(r.height*t),r.width=e,s*=t}if(r.height>t){const e=t/r.height;r.width=Math.floor(r.width*e),r.height=t,s*=e}}const n=this._extents[e];n&&y(n.extent,i)&&!this._imageSizeDiffers(i,n.imageSize,r)||(this._extents[e]={extent:p(i),spatialReference:t.spatialReference,imageSize:r,pixelRatio:s},this.suspended||this._fetch(e).catch((e=>{a(e)||M.error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(e){if(this.suspended)return;const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await s(t)}canResume(){if(!super.canResume())return!1;if(this._isScaleRangeLayer()){const{minScale:e,maxScale:t}=this.layer;if(e>0||t>0){const i=this.view.scale;if(i<t||e>0&&i>e)return!1}}return!0}isUpdating(){return this._images.some((e=>!!e.loadingPromise))}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new c(i[0],i[1],i[2],i[3],t.spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,t){await g(this._images,(async(i,r)=>{i&&(await e(i,t),this._createStageObjects(r,i.image))}))}_imageSizeDiffers(e,t,i){if(!this.maximumDataResolution)return!0;if(R.TESTS_DISABLE_UPDATE_THRESHOLDS)return!0;const r=f(e)/this.maximumDataResolution.x,a=x(e)/this.maximumDataResolution.y,s=r/t.width,n=a/t.height,o=r/i.width,l=a/i.height,h=Math.abs(s-o),m=Math.abs(n-l);return h>1.5||m>1.5}async _fetch(e,t){if(this.suspended)return;const i=this._overlayExtents[e],r=this._extents[e],s=r.extent,d=new c(s[0],s[1],s[2],s[3],r.spatialReference);this._images[e]||(this._images[e]={texture:null,material:null,rendergeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:p(s)});const g=this._images[e];if(g.loadingAbortController&&(g.loadingAbortController.abort(),g.loadingAbortController=null),0===d.width||0===d.height)return void this._clearImage(e);const u=n();g.loadingAbortController=u,o(t,(()=>u.abort()));const y=u.signal,f=this._waitFetchReady(y).then((()=>{const e={requestAsImageElement:!0,pixelRatio:i.pixelRatio,...this.getFetchOptions(),signal:y},{height:t,width:a}=r.imageSize;return e.timestamp=this.refreshTimestamp,this.layer.fetchImage(d,a,t,e)})).then((e=>{if(l(y))throw M.warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"),h();return this.processResult(g,e)}));g.loadingPromise=f,m(f,(()=>{f===g.loadingPromise&&(g.loadingPromise=null,g.loadingAbortController=null)}));const x=f.then((()=>{w(g.renderExtent,s),this._createStageObjects(e,g.image),this.notifyChange(\"updating\")})).catch((e=>{throw e&&!a(e)&&M.error(e),this.notifyChange(\"updating\"),e}));this.notifyChange(\"updating\"),await x}_clearImage(e){const t=this._images[e],i=this.view._stage;t&&(t.rendergeometry&&(this.view.basemapTerrain.overlayManager.renderer.removeGeometries([t.rendergeometry],this,2),t.rendergeometry=null),t.texture&&(i.remove(t.texture),t.texture=null),t.material&&(i.remove(t.material),t.material=null),t.loadingAbortController&&(t.loadingAbortController.abort(),t.loadingAbortController=null),t.loadingPromise=null,t.image=null,t.pixelData=null)}_createStageObjects(e,t){const i=this.view._stage,r=this._images[e];r.texture&&(i.remove(r.texture),r.texture=null),t?(r.texture=new b(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:33071,t:33071}}),i.add(r.texture)):r.material&&(i.remove(r.material),r.material=null),!r.material&&r.texture?(r.material=new I({transparent:!0,textureId:r.texture.id}),i.add(r.material)):r.material&&t&&r.material.setParameterValues({textureId:r.texture.id});const a=this.view.basemapTerrain.overlayManager.renderer;if(r.material){const t=-1;let i;const s=this._overlayExtents[e].renderLocalOrigin;if(0===e)i=A(r.renderExtent,t);else{if(1!==e)return void console.error(\"DynamicLayerView3D._createStageObjects: Invalid extent idx\");{const e=this._extents[0].extent;if(!e)return;i=C(e,r.renderExtent,t)}}const n=new S(i,r.material);n.origin=s,a.addGeometries([n],this,2),r.rendergeometry&&a.removeGeometries([r.rendergeometry],this,2),r.rendergeometry=n}else r.rendergeometry&&(a.removeGeometries([r.rendergeometry],this,2),r.rendergeometry=null)}_isScaleRangeLayer(){return\"minScale\"in this.layer&&\"maxScale\"in this.layer}_isScaleRangeActive(){return!!this._isScaleRangeLayer()&&(this.layer.minScale>0||this.layer.maxScale>0)}_clippedExtent(e,t){if(\"local\"!==this.view.viewingMode)return w(t,e);const i=this.view.basemapTerrain,r=i.extent;return i.ready&&r?_(e,r,t):w(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refresh()}async _waitFetchReady(e){this.updateWhenStationary&&await u(this.view,\"stationary\",e),d(e)}};e([i()],T.prototype,\"layer\",void 0),e([i()],T.prototype,\"suspended\",void 0),e([i({readOnly:!0})],T.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([i()],T.prototype,\"updating\",void 0),T=e([r(\"esri.views.3d.layers.DynamicLayerView3D\")],T);const H=p();var O=T;export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{createQueryGeometry as t}from\"../../support/drapedUtils.js\";import{MapImageLayerView as s}from\"../../layers/MapImageLayerView.js\";import o from\"./DynamicLayerView3D.js\";let i=class extends(s(o)){constructor(){super(...arguments),this.updateWhenStationary=!0}initialize(){this.updatingHandles.add(this,\"exportImageVersion\",(()=>this.updatingHandles.addPromise(this.refreshDebounced())))}createFetchPopupFeaturesQueryGeometry(e,r){return t(e,r,this.view)}getFetchOptions(){return{timeExtent:this.timeExtent,timestamp:this.refreshTimestamp}}};i=e([r(\"esri.views.3d.layers.MapImageLayerView3D\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as t}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as a}from\"../lib/DefaultVertexAttributeLocations.js\";import o from\"../../../webgl/Program.js\";import{makePipelineState as n,defaultDepthWriteParams as l,defaultColorWriteParams as p,simpleBlendingParams as c}from\"../../../webgl/renderState.js\";import{View as u}from\"../core/shaderLibrary/util/View.glsl.js\";import{Slice as d}from\"../core/shaderLibrary/Slice.glsl.js\";import{OITBlending as h,OITDepthTest as m,OITDepthWrite as f,getOITPolygonOffset as b}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as g}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{stencilWriteMaskOn as y,stencilToolMaskBaseParams as P,stencilBaseAllZerosParams as T}from\"../lib/StencilUtils.js\";import{I as v}from\"../../../../chunks/ImageMaterial.glsl.js\";class j extends r{initializeProgram(e){const t=j.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,OITEnabled:0===r.transparencyPassType,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new o(e.rctx,i.generateSource(\"vertex\"),i.generateSource(\"fragment\"),a)}bindPass(e,t,r){u.bindProjectionMatrix(this.program,r.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",t.opacity),r.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),g(this.program,e,r))}bindDraw(e){u.bindView(this.program,e),d.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const r=this.configuration,i=3===e,s=2===e,a=e=>0!==e&&{face:1===e?1028:1029,mode:2305};return n({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?S:h(e),culling:a(r.cullFace),depthTest:{func:m(e)},depthWrite:i?r.writeDepth&&l:f(e),colorWrite:p,stencilWrite:r.sceneHasOcludees?y:null,stencilTest:r.sceneHasOcludees?t?P:T:null,polygonOffset:i||s?null:b(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}j.shader=new t(v,(()=>import(\"./ImageMaterial.glsl.js\")));const S=c(1,771);class w extends i{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}e([s({count:8})],w.prototype,\"output\",void 0),e([s({count:3})],w.prototype,\"cullFace\",void 0),e([s()],w.prototype,\"slicePlaneEnabled\",void 0),e([s()],w.prototype,\"transparent\",void 0),e([s()],w.prototype,\"enableOffset\",void 0),e([s()],w.prototype,\"writeDepth\",void 0),e([s()],w.prototype,\"sceneHasOcludees\",void 0),e([s({count:4})],w.prototype,\"transparencyPassType\",void 0),e([s()],w.prototype,\"multipassTerrainEnabled\",void 0),e([s()],w.prototype,\"cullAboveGround\",void 0);export{j as ImageMaterialTechnique,w as ImageMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterialTexture.js\";import{intersectTriangleGeometry as t}from\"./internal/MaterialUtil.js\";import{Material as i,materialParametersDefaults as a}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as s}from\"../lib/OrderIndependentTransparency.js\";import{DefaultBufferWriter as r,PositionUVLayout as n}from\"./internal/DefaultBufferWriter.js\";import{ImageMaterialTechniqueConfiguration as u,ImageMaterialTechnique as h}from\"../shaders/ImageMaterialTechnique.js\";class c extends i{constructor(e){super(e,o),this.supportsEdges=!0,this.techniqueConfig=new u}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}intersect(e,i,a,s,r,n,u){t(e,i,s,r,n,void 0,u)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new l(e):void 0}createBufferWriter(){return new r(n)}}class l extends e{constructor(e){super({...e,...e.material.params}),this.updateParameters()}updateParameters(e){const t=this.material.params;this.updateTexture(t.textureId),this.technique=this.techniqueRep.acquireAndReleaseExisting(h,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){if(4===this.output)return 3===e;return e===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&(this.material.setParameterValues({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.bindTexture(e,this.technique.program),this.bindTextureScale(e,this.technique.program),this.technique.bindPass(e,this.material.params,t)}getPipelineState(e,t){return this.technique.getPipelineState(t)}}const o={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...a};export{c as ImageMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{canProject as e,project as r}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as o}from\"../../../../portal/support/geometryServiceUtils.js\";function t(t){const l=t.view.spatialReference,s=t.layer.fullExtent,i=s&&s.spatialReference;return i?i.equals(l)?Promise.resolve(s.clone()):e(i,l)?Promise.resolve(r(s,l)):t.view.state.isLocal?o(s,l,t.layer.portalItem).then((e=>!t.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null):Promise.resolve(null)}export{t as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as d}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{defaultMaskAlphaCutoff as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";function s(s){const n=new a;return n.include(r,{linearDepth:!1}),n.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),n.attributes.add(\"position\",\"vec3\"),n.attributes.add(\"uv0\",\"vec2\"),n.varyings.add(\"vpos\",\"vec3\"),s.multipassTerrainEnabled&&n.varyings.add(\"depth\",\"float\"),n.vertex.uniforms.add(\"textureCoordinateScaleFactor\",\"vec2\"),n.vertex.code.add(e`\n    void main(void) {\n      vpos = position;\n      ${s.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),n.include(i,s),s.multipassTerrainEnabled&&(n.fragment.include(d),n.include(l,s)),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"opacity\",\"float\"),n.varyings.add(\"vTexCoord\",\"vec2\"),7===s.output?n.fragment.code.add(e`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${e.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(n.fragment.include(o),n.fragment.code.add(e`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${e.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${s.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),n}var n=Object.freeze({__proto__:null,build:s});export{n as I,s as b};\n"],"sourceRoot":""}