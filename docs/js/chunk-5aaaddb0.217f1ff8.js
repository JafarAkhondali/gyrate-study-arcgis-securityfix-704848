(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aaaddb0"],{"2be0":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a("a4ee"),n=(a("c120"),a("b2b2")),i=(a("e92d"),a("cea0"),a("59b2")),s=a("d386"),l=a("ce50"),c=(a("e041"),a("8eed"),a("f402"),a("f4cc")),o=a("536f");const u=e=>{let t=class extends e{async fetchPopupFeatures(e,t){const{layer:a}=this;if(!e)return Promise.reject(new l["a"]("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a}));if("tile"!==a.type)return Promise.reject(new l["a"]("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:a.type}));const r=this.get("view.scale"),i=a.allSublayers.toArray().filter(e=>{const t=0===e.minScale||r<=e.minScale,a=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&a});return Object(c["k"])(i.map(async a=>{const r=a.createQuery(),i=Object(n["k"])(t)?t.event:null,s=Object(o["a"])({renderer:a.renderer,event:i});return r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,s),r.outFields=await a.popupTemplate.getRequiredFields(),(await a.queryFeatures(r)).features})).then(e=>[].concat(...e.map(e=>e.value).filter(Boolean)))}};return Object(r["a"])([Object(i["b"])()],t.prototype,"layer",void 0),t=Object(r["a"])([Object(s["a"])("esri.layers.mixins.TileLayerView")],t),t}},"536f":function(e,t,a){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e){let t=0,a=0;for(let r=0;r<e.length;r++){const n=e[r].size;"number"==typeof n&&(t+=n,a++)}return t/a}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?n(e.stops):t}function s(e,t){if(!t)return e;const a=t.filter(e=>"size"===e.type).map(t=>{const{maxSize:a,minSize:r}=t;return(i(a,e)+i(r,e))/2});let r=0;const n=a.length;if(0===n)return e;for(let i=0;i<n;i++)r+=a[i];const s=Math.floor(r/n);return Math.max(s,e)}function l(e){const t=e&&e.renderer,a="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return a;const n="visualVariables"in t?s(a,t.visualVariables):a;if("simple"===t.type)return r(n,t.symbol);if("unique-value"===t.type){let e=n;return t.uniqueValueInfos.forEach(t=>{e=r(e,t.symbol)}),e}if("class-breaks"===t.type){let e=n;return t.classBreakInfos.forEach(t=>{e=r(e,t.symbol)}),e}return t.type,n}a.d(t,"a",(function(){return l}))},cbe4:function(e,t,a){"use strict";a.r(t);var r=a("a4ee"),n=(a("c120"),a("b2b2")),i=(a("e92d"),a("cea0"),a("59b2")),s=a("d386"),l=a("ce50"),c=(a("e041"),a("8eed"),a("f402"),a("8188")),o=a("6c7a"),u=a("66af"),f=a("45e3"),b=a("365a"),p=a("e94b"),y=a("2be0");let m=class extends(Object(o["a"])(Object(f["a"])(Object(y["a"])(Object(u["a"])(b["a"]))))){get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,t=e[0].scale,a=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,a)}return{minLevel:0,maxLevel:0}}initialize(){if("web-tile"===this.layer.type){const e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(Object(n["j"])(e)||Object(n["j"])(t)||!Object(c["b"])(e,t)){const e="defaults"===this.layer.originOf("fullExtent")||Object(n["j"])(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new l["a"]("layerview:incompatible-fullextent",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,t){return Object(p["a"])(e,t,this.view)}async doRefresh(e){this.suspended||this.emit("data-changed")}};Object(r["a"])([Object(i["b"])({readOnly:!0})],m.prototype,"imageFormatIsOpaque",null),Object(r["a"])([Object(i["b"])({readOnly:!0})],m.prototype,"hasMixedImageFormats",null),Object(r["a"])([Object(i["b"])({aliasOf:"layer.fullExtent"})],m.prototype,"fullExtent",void 0),Object(r["a"])([Object(i["b"])()],m.prototype,"layer",void 0),Object(r["a"])([Object(i["b"])({aliasOf:"layer.tileInfo"})],m.prototype,"tileInfo",void 0),Object(r["a"])([Object(i["b"])({readOnly:!0})],m.prototype,"dataLevelRange",null),m=Object(r["a"])([Object(s["a"])("esri.views.3d.layers.TileLayerView3D")],m);var h=m;t["default"]=h},e94b:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));var r=a("b2b2"),n=a("3af1"),i=(a("e06a"),a("8048")),s=a("536f");function l(e,t,a,s=new n["a"]){let l;if("2d"===a.type)l=t*a.resolution;else if("3d"===a.type){const n=a.overlayPixelSizeInMapUnits(e),s=a.basemapSpatialReference;l=Object(r["k"])(s)&&!s.equals(a.spatialReference)?Object(i["e"])(s)/Object(i["e"])(a.spatialReference):t*n}const c=e.x-l,o=e.y-l,u=e.x+l,f=e.y+l,{spatialReference:b}=a;return s.xmin=Math.min(c,u),s.ymin=Math.min(o,f),s.xmax=Math.max(c,u),s.ymax=Math.max(o,f),s.spatialReference=b,s}function c(e,t,a){const n=a.toMap(e);return!Object(r["j"])(n)&&l(n,Object(s["a"])(),a,o).intersects(t)}const o=new n["a"]}}]);
//# sourceMappingURL=chunk-5aaaddb0.217f1ff8.js.map